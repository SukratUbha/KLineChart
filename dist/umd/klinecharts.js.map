{"version":3,"file":"klinecharts.js","sources":["../../src/common/utils/logger.ts","../../src/common/utils/typeChecks.ts","../../src/common/utils/format.ts","../../src/common/utils/canvas.ts","../../node_modules/.pnpm/@rollup+plugin-typescript@1_94f2daaedeb9ca9ba6815247016ce5da/node_modules/tslib/tslib.es6.js","../../src/common/Bounding.ts","../../src/common/utils/compatible.ts","../../src/common/Animation.ts","../../src/common/utils/id.ts","../../src/common/utils/dom.ts","../../src/common/utils/number.ts","../../src/common/VisibleRange.ts","../../src/common/TaskScheduler.ts","../../src/common/SymbolInfo.ts","../../src/common/Action.ts","../../src/common/utils/color.ts","../../src/common/Styles.ts","../../src/component/Indicator.ts","../../src/extension/indicator/averagePrice.ts","../../src/extension/indicator/awesomeOscillator.ts","../../src/extension/indicator/bias.ts","../../src/extension/indicator/bollingerBands.ts","../../src/extension/indicator/brar.ts","../../src/extension/indicator/bullAndBearIndex.ts","../../src/extension/indicator/commodityChannelIndex.ts","../../src/extension/indicator/currentRatio.ts","../../src/extension/indicator/differentOfMovingAverage.ts","../../src/extension/indicator/directionalMovementIndex.ts","../../src/extension/indicator/easeOfMovementValue.ts","../../src/extension/indicator/exponentialMovingAverage.ts","../../src/extension/indicator/momentum.ts","../../src/extension/indicator/movingAverage.ts","../../src/extension/indicator/movingAverageConvergenceDivergence.ts","../../src/extension/indicator/onBalanceVolume.ts","../../src/extension/indicator/priceAndVolumeTrend.ts","../../src/extension/indicator/psychologicalLine.ts","../../src/extension/indicator/rateOfChange.ts","../../src/extension/indicator/relativeStrengthIndex.ts","../../src/extension/indicator/simpleMovingAverage.ts","../../src/extension/indicator/stoch.ts","../../src/extension/indicator/stopAndReverse.ts","../../src/extension/indicator/tripleExponentiallySmoothedAverage.ts","../../src/extension/indicator/volume.ts","../../src/extension/indicator/volumeRatio.ts","../../src/extension/indicator/williamsR.ts","../../src/extension/indicator/index.ts","../../src/component/Overlay.ts","../../src/extension/overlay/fibonacciLine.ts","../../src/extension/overlay/horizontalRayLine.ts","../../src/extension/overlay/horizontalSegment.ts","../../src/extension/overlay/horizontalStraightLine.ts","../../src/common/Eventful.ts","../../src/component/Figure.ts","../../src/extension/figure/line.ts","../../src/extension/overlay/parallelStraightLine.ts","../../src/extension/overlay/priceChannelLine.ts","../../src/extension/overlay/priceLine.ts","../../src/extension/overlay/rayLine.ts","../../src/extension/overlay/segment.ts","../../src/extension/overlay/straightLine.ts","../../src/extension/overlay/verticalRayLine.ts","../../src/extension/overlay/verticalSegment.ts","../../src/extension/overlay/verticalStraightLine.ts","../../src/extension/overlay/simpleAnnotation.ts","../../src/extension/overlay/simpleTag.ts","../../src/extension/overlay/index.ts","../../src/extension/styles/light.ts","../../src/extension/styles/dark.ts","../../src/extension/styles/index.ts","../../src/pane/types.ts","../../src/Store.ts","../../src/widget/types.ts","../../src/common/Canvas.ts","../../src/widget/Widget.ts","../../src/widget/DrawWidget.ts","../../src/extension/figure/circle.ts","../../src/extension/figure/polygon.ts","../../src/extension/figure/rect.ts","../../src/extension/figure/text.ts","../../src/common/Coordinate.ts","../../src/extension/figure/arc.ts","../../src/extension/figure/path.ts","../../src/extension/figure/index.ts","../../src/view/View.ts","../../src/view/GridView.ts","../../src/view/ChildrenView.ts","../../src/view/CandleBarView.ts","../../src/view/IndicatorView.ts","../../src/view/CrosshairLineView.ts","../../src/view/IndicatorTooltipView.ts","../../src/view/OverlayView.ts","../../src/widget/IndicatorWidget.ts","../../src/view/CandleAreaView.ts","../../src/view/CandleHighLowPriceView.ts","../../src/view/CandleLastPriceLineView.ts","../../src/common/Period.ts","../../src/extension/i18n/zh-CN.ts","../../src/extension/i18n/en-US.ts","../../src/extension/i18n/index.ts","../../src/view/CandleTooltipView.ts","../../src/view/CrosshairFeatureView.ts","../../src/widget/CandleWidget.ts","../../src/view/AxisView.ts","../../src/view/YAxisView.ts","../../src/view/CandleLastPriceLabelView.ts","../../src/view/IndicatorLastValueView.ts","../../src/view/OverlayYAxisView.ts","../../src/view/CrosshairHorizontalLabelView.ts","../../src/widget/YAxisWidget.ts","../../src/component/Axis.ts","../../src/component/YAxis.ts","../../src/extension/y-axis/normal.ts","../../src/extension/y-axis/percentage.ts","../../src/extension/y-axis/logarithm.ts","../../src/extension/y-axis/index.ts","../../src/pane/Pane.ts","../../src/pane/DrawPane.ts","../../src/pane/IndicatorPane.ts","../../src/pane/CandlePane.ts","../../src/view/XAxisView.ts","../../src/view/OverlayXAxisView.ts","../../src/view/CrosshairVerticalLabelView.ts","../../src/widget/XAxisWidget.ts","../../src/component/XAxis.ts","../../src/extension/x-axis/normal.ts","../../src/extension/x-axis/index.ts","../../src/pane/XAxisPane.ts","../../src/common/utils/performance.ts","../../src/widget/SeparatorWidget.ts","../../src/pane/SeparatorPane.ts","../../src/common/utils/platform.ts","../../src/common/EventHandler.ts","../../src/Event.ts","../../src/Chart.ts","../../src/index.ts"],"sourcesContent":["/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nconst DEV = process.env.NODE_ENV === 'development'\r\n\r\nfunction log (templateText: string, tagStyle: string, messageStyle: string, api: string, invalidParam: string, append: string): void {\r\n  if (DEV) {\r\n    const apiStr = api !== '' ? `Call api \\`${api}\\`${invalidParam !== '' || append !== '' ? ', ' : '.'}` : ''\r\n    const invalidParamStr = invalidParam !== '' ? `invalid parameter \\`${invalidParam}\\`${append !== '' ? ', ' : '.'}` : ''\r\n    const appendStr = append !== '' ? append : ''\r\n    console.log(templateText, tagStyle, messageStyle, apiStr, invalidParamStr, appendStr)\r\n  }\r\n}\r\n\r\nexport function logWarn (api: string, invalidParam: string, append?: string): void {\r\n  log(\r\n    '%cüòë klinecharts warning%c %s%s%s',\r\n    'padding:3px 4px;border-radius:2px;color:#ffffff;background-color:#FF9600',\r\n    'color:#FF9600',\r\n    api, invalidParam, append ?? ''\r\n  )\r\n}\r\n\r\nexport function logError (api: string, invalidParam: string, append?: string): void {\r\n  log(\r\n    '%cüòü klinecharts error%c %s%s%s',\r\n    'padding:3px 4px;border-radius:2px;color:#ffffff;background-color:#F92855;',\r\n    'color:#F92855;',\r\n    api, invalidParam, append ?? ''\r\n  )\r\n}\r\n\r\nexport function logTag (): void {\r\n  log(\r\n    '%c‚ù§Ô∏è Welcome to klinecharts. Version is __VERSION__',\r\n    'border-radius:4px;border:dashed 1px #1677FF;line-height:70px;padding:0 20px;margin:16px 0;font-size:14px;color:#1677FF;',\r\n    '',\r\n    '',\r\n    '',\r\n    ''\r\n  )\r\n}\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any -- ignore\r\nexport function merge (target: any, source: any): void {\r\n  if ((!isObject(target) && !isObject(source))) {\r\n    return\r\n  }\r\n  for (const key in source) {\r\n    if (Object.prototype.hasOwnProperty.call(source, key) as boolean) {\r\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment, @typescript-eslint/no-unsafe-member-access -- ignore\r\n      const targetProp = target[key]\r\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment, @typescript-eslint/no-unsafe-member-access -- ignore\r\n      const sourceProp = source[key]\r\n      if (\r\n        isObject(sourceProp) &&\r\n        isObject(targetProp)\r\n      ) {\r\n        merge(targetProp, sourceProp)\r\n      } else {\r\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access -- ignore\r\n        if (isValid(source[key])) {\r\n          // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment, @typescript-eslint/no-unsafe-member-access -- ignore\r\n          target[key] = clone(source[key])\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nexport function clone<T> (target: T): T {\r\n  if (!isObject(target)) {\r\n    return target\r\n  }\r\n\r\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any -- ignore\r\n  let copy: any = null\r\n  if (isArray(target)) {\r\n    copy = []\r\n  } else {\r\n    copy = {}\r\n  }\r\n  for (const key in target) {\r\n    if (Object.prototype.hasOwnProperty.call(target, key) as boolean) {\r\n      const v = target[key]\r\n      if (isObject(v)) {\r\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access -- ignore\r\n        copy[key] = clone(v)\r\n      } else {\r\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access -- ignore\r\n        copy[key] = v\r\n      }\r\n    }\r\n  }\r\n  // eslint-disable-next-line @typescript-eslint/no-unsafe-return -- ignore\r\n  return copy\r\n}\r\n\r\nexport function isArray<T = unknown> (value: unknown): value is T[] {\r\n  return Object.prototype.toString.call(value) === '[object Array]'\r\n}\r\n\r\n// eslint-disable-next-line @typescript-eslint/no-unnecessary-type-parameters -- ignore\r\nexport function isFunction<T = (...args: unknown[]) => unknown> (value: unknown): value is T {\r\n  return typeof value === 'function'\r\n}\r\n\r\nexport function isObject (value: unknown): value is object {\r\n  return (typeof value === 'object') && isValid(value)\r\n}\r\n\r\nexport function isNumber (value: unknown): value is number {\r\n  return typeof value === 'number' && Number.isFinite(value)\r\n}\r\n\r\nexport function isValid<T> (value: T | null | undefined): value is T {\r\n  return value !== null && value !== undefined\r\n}\r\n\r\nexport function isBoolean (value: unknown): value is boolean {\r\n  return typeof value === 'boolean'\r\n}\r\n\r\nexport function isString (value: unknown): value is string {\r\n  return typeof value === 'string'\r\n}\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport { isNumber, isValid } from './typeChecks'\r\n\r\nexport interface DateTime {\r\n  YYYY: string\r\n  MM: string\r\n  DD: string\r\n  HH: string\r\n  mm: string\r\n  ss: string\r\n}\r\n\r\nconst reEscapeChar = /\\\\(\\\\)?/g\r\nconst rePropName = RegExp(\r\n  '[^.[\\\\]]+' + '|' +\r\n  '\\\\[(?:' +\r\n    '([^\"\\'][^[]*)' + '|' +\r\n    '([\"\\'])((?:(?!\\\\2)[^\\\\\\\\]|\\\\\\\\.)*?)\\\\2' +\r\n  ')\\\\]' + '|' +\r\n  '(?=(?:\\\\.|\\\\[\\\\])(?:\\\\.|\\\\[\\\\]|$))'\r\n  , 'g')\r\n\r\nexport function formatValue (data: unknown, key: string, defaultValue?: unknown): unknown {\r\n  if (isValid(data)) {\r\n    const path: string[] = []\r\n    key.replace(rePropName, (subString: string, ...args: unknown[]) => {\r\n      let k = subString\r\n      if (isValid(args[1])) {\r\n        k = (args[2] as string).replace(reEscapeChar, '$1')\r\n      } else if (isValid(args[0])) {\r\n        k = (args[0] as string).trim()\r\n      }\r\n      path.push(k)\r\n      return ''\r\n    })\r\n    let value = data\r\n    let index = 0\r\n    const length = path.length\r\n    while (isValid(value) && index < length) {\r\n      value = value?.[path[index++]]\r\n    }\r\n    return isValid(value) ? value : (defaultValue ?? '--')\r\n  }\r\n  return defaultValue ?? '--'\r\n}\r\n\r\nexport function formatTimestampToDateTime (dateTimeFormat: Intl.DateTimeFormat, timestamp: number): DateTime {\r\n  const date: Record<string, string> = {}\r\n  dateTimeFormat.formatToParts(new Date(timestamp)).forEach(({ type, value }) => {\r\n    switch (type) {\r\n      case 'year': {\r\n        date.YYYY = value\r\n        break\r\n      }\r\n      case 'month': {\r\n        date.MM = value\r\n        break\r\n      }\r\n      case 'day': {\r\n        date.DD = value\r\n        break\r\n      }\r\n      case 'hour': {\r\n        date.HH = value === '24' ? '00' : value\r\n        break\r\n      }\r\n      case 'minute': {\r\n        date.mm = value\r\n        break\r\n      }\r\n      case 'second': {\r\n        date.ss = value\r\n        break\r\n      }\r\n      default: { break }\r\n    }\r\n  })\r\n  return date as unknown as DateTime\r\n}\r\n\r\nexport function formatTimestampByTemplate (dateTimeFormat: Intl.DateTimeFormat, timestamp: number, template: string): string {\r\n  const date = formatTimestampToDateTime(dateTimeFormat, timestamp)\r\n  // eslint-disable-next-line @typescript-eslint/no-unsafe-return -- ignore\r\n  return template.replace(/YYYY|MM|DD|HH|mm|ss/g, key => date[key])\r\n}\r\n\r\nexport function formatPrecision (value: string | number, precision?: number): string {\r\n  const v = +value\r\n  if (isNumber(v)) {\r\n    return v.toFixed(precision ?? 2)\r\n  }\r\n  return `${value}`\r\n}\r\n\r\nexport function formatBigNumber (value: string | number): string {\r\n  const v = +value\r\n  if (isNumber(v)) {\r\n    if (v > 1000000000) {\r\n      return `${+((v / 1000000000).toFixed(3))}B`\r\n    }\r\n    if (v > 1000000) {\r\n      return `${+((v / 1000000).toFixed(3))}M`\r\n    }\r\n    if (v > 1000) {\r\n      return `${+((v / 1000).toFixed(3))}K`\r\n    }\r\n  }\r\n  return `${value}`\r\n}\r\n\r\nexport function formatThousands (value: string | number, sign: string): string {\r\n  const vl = `${value}`\r\n  if (sign.length === 0) {\r\n    return vl\r\n  }\r\n  if (vl.includes('.')) {\r\n    const arr = vl.split('.')\r\n    return `${arr[0].replace(/(\\d)(?=(\\d{3})+$)/g, $1 => `${$1}${sign}`)}.${arr[1]}`\r\n  }\r\n  return vl.replace(/(\\d)(?=(\\d{3})+$)/g, $1 => `${$1}${sign}`)\r\n}\r\n\r\nexport function formatFoldDecimal (value: string | number, threshold: number): string {\r\n  const vl = `${value}`\r\n  const reg = new RegExp('\\\\.0{' + threshold + ',}[1-9][0-9]*$')\r\n  if (reg.test(vl)) {\r\n    const result = vl.split('.')\r\n    const lastIndex = result.length - 1\r\n    const v = result[lastIndex]\r\n    const match = /0*/.exec(v)\r\n    if (isValid(match)) {\r\n      const count = match[0].length\r\n      result[lastIndex] = v.replace(/0*/, `0{${count}}`)\r\n      return result.join('.')\r\n    }\r\n  }\r\n  return vl\r\n}\r\n\r\nexport function formatTemplateString (template: string, params: Record<string, unknown>): string {\r\n  return template.replace(/\\{(\\w+)\\}/g, (_, key) => {\r\n    const value = params[key as string]\r\n    if (isValid(value)) {\r\n      return value as string\r\n    }\r\n    return `{${key}}`\r\n  })\r\n}\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport type Nullable from '../Nullable'\r\nimport { isValid } from './typeChecks'\r\n\r\nlet measureCtx: Nullable<CanvasRenderingContext2D> = null\r\n\r\n/**\r\n * Get pixel ratio\r\n * @param canvas\r\n * @returns {number}\r\n */\r\nexport function getPixelRatio (canvas: HTMLCanvasElement): number {\r\n  return canvas.ownerDocument.defaultView?.devicePixelRatio ?? 1\r\n}\r\n\r\nexport function createFont (size?: number, weight?: string | number, family?: string): string {\r\n  return `${weight ?? 'normal'} ${size ?? 12}px ${family ?? 'Helvetica Neue'}`\r\n}\r\n\r\n/**\r\n * Measure the width of text\r\n * @param text\r\n * @returns {number}\r\n */\r\nexport function calcTextWidth (text: string, size?: number, weight?: string | number, family?: string): number {\r\n  if (!isValid(measureCtx)) {\r\n    const canvas = document.createElement('canvas')\r\n    const pixelRatio = getPixelRatio(canvas)\r\n    measureCtx = canvas.getContext('2d')!\r\n    measureCtx.scale(pixelRatio, pixelRatio)\r\n  }\r\n  measureCtx.font = createFont(size, weight, family)\r\n  return Math.round(measureCtx.measureText(text).width)\r\n}\r\n","/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise, SuppressedError, Symbol, Iterator */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __esDecorate(ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {\r\n    function accept(f) { if (f !== void 0 && typeof f !== \"function\") throw new TypeError(\"Function expected\"); return f; }\r\n    var kind = contextIn.kind, key = kind === \"getter\" ? \"get\" : kind === \"setter\" ? \"set\" : \"value\";\r\n    var target = !descriptorIn && ctor ? contextIn[\"static\"] ? ctor : ctor.prototype : null;\r\n    var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});\r\n    var _, done = false;\r\n    for (var i = decorators.length - 1; i >= 0; i--) {\r\n        var context = {};\r\n        for (var p in contextIn) context[p] = p === \"access\" ? {} : contextIn[p];\r\n        for (var p in contextIn.access) context.access[p] = contextIn.access[p];\r\n        context.addInitializer = function (f) { if (done) throw new TypeError(\"Cannot add initializers after decoration has completed\"); extraInitializers.push(accept(f || null)); };\r\n        var result = (0, decorators[i])(kind === \"accessor\" ? { get: descriptor.get, set: descriptor.set } : descriptor[key], context);\r\n        if (kind === \"accessor\") {\r\n            if (result === void 0) continue;\r\n            if (result === null || typeof result !== \"object\") throw new TypeError(\"Object expected\");\r\n            if (_ = accept(result.get)) descriptor.get = _;\r\n            if (_ = accept(result.set)) descriptor.set = _;\r\n            if (_ = accept(result.init)) initializers.unshift(_);\r\n        }\r\n        else if (_ = accept(result)) {\r\n            if (kind === \"field\") initializers.unshift(_);\r\n            else descriptor[key] = _;\r\n        }\r\n    }\r\n    if (target) Object.defineProperty(target, contextIn.name, descriptor);\r\n    done = true;\r\n};\r\n\r\nexport function __runInitializers(thisArg, initializers, value) {\r\n    var useValue = arguments.length > 2;\r\n    for (var i = 0; i < initializers.length; i++) {\r\n        value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);\r\n    }\r\n    return useValue ? value : void 0;\r\n};\r\n\r\nexport function __propKey(x) {\r\n    return typeof x === \"symbol\" ? x : \"\".concat(x);\r\n};\r\n\r\nexport function __setFunctionName(f, name, prefix) {\r\n    if (typeof name === \"symbol\") name = name.description ? \"[\".concat(name.description, \"]\") : \"\";\r\n    return Object.defineProperty(f, \"name\", { configurable: true, value: prefix ? \"\".concat(prefix, \" \", name) : name });\r\n};\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g = Object.create((typeof Iterator === \"function\" ? Iterator : Object).prototype);\r\n    return g.next = verb(0), g[\"throw\"] = verb(1), g[\"return\"] = verb(2), typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n        desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\r\n\r\nexport function __spreadArray(to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = Object.create((typeof AsyncIterator === \"function\" ? AsyncIterator : Object).prototype), verb(\"next\"), verb(\"throw\"), verb(\"return\", awaitReturn), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function awaitReturn(f) { return function (v) { return Promise.resolve(v).then(f, reject); }; }\r\n    function verb(n, f) { if (g[n]) { i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; if (f) i[n] = f(i[n]); } }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: false } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nvar ownKeys = function(o) {\r\n    ownKeys = Object.getOwnPropertyNames || function (o) {\r\n        var ar = [];\r\n        for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\r\n        return ar;\r\n    };\r\n    return ownKeys(o);\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n}\r\n\r\nexport function __classPrivateFieldIn(state, receiver) {\r\n    if (receiver === null || (typeof receiver !== \"object\" && typeof receiver !== \"function\")) throw new TypeError(\"Cannot use 'in' operator on non-object\");\r\n    return typeof state === \"function\" ? receiver === state : state.has(receiver);\r\n}\r\n\r\nexport function __addDisposableResource(env, value, async) {\r\n    if (value !== null && value !== void 0) {\r\n        if (typeof value !== \"object\" && typeof value !== \"function\") throw new TypeError(\"Object expected.\");\r\n        var dispose, inner;\r\n        if (async) {\r\n            if (!Symbol.asyncDispose) throw new TypeError(\"Symbol.asyncDispose is not defined.\");\r\n            dispose = value[Symbol.asyncDispose];\r\n        }\r\n        if (dispose === void 0) {\r\n            if (!Symbol.dispose) throw new TypeError(\"Symbol.dispose is not defined.\");\r\n            dispose = value[Symbol.dispose];\r\n            if (async) inner = dispose;\r\n        }\r\n        if (typeof dispose !== \"function\") throw new TypeError(\"Object not disposable.\");\r\n        if (inner) dispose = function() { try { inner.call(this); } catch (e) { return Promise.reject(e); } };\r\n        env.stack.push({ value: value, dispose: dispose, async: async });\r\n    }\r\n    else if (async) {\r\n        env.stack.push({ async: true });\r\n    }\r\n    return value;\r\n\r\n}\r\n\r\nvar _SuppressedError = typeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\r\n    var e = new Error(message);\r\n    return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\r\n};\r\n\r\nexport function __disposeResources(env) {\r\n    function fail(e) {\r\n        env.error = env.hasError ? new _SuppressedError(e, env.error, \"An error was suppressed during disposal.\") : e;\r\n        env.hasError = true;\r\n    }\r\n    var r, s = 0;\r\n    function next() {\r\n        while (r = env.stack.pop()) {\r\n            try {\r\n                if (!r.async && s === 1) return s = 0, env.stack.push(r), Promise.resolve().then(next);\r\n                if (r.dispose) {\r\n                    var result = r.dispose.call(r.value);\r\n                    if (r.async) return s |= 2, Promise.resolve(result).then(next, function(e) { fail(e); return next(); });\r\n                }\r\n                else s |= 1;\r\n            }\r\n            catch (e) {\r\n                fail(e);\r\n            }\r\n        }\r\n        if (s === 1) return env.hasError ? Promise.reject(env.error) : Promise.resolve();\r\n        if (env.hasError) throw env.error;\r\n    }\r\n    return next();\r\n}\r\n\r\nexport function __rewriteRelativeImportExtension(path, preserveJsx) {\r\n    if (typeof path === \"string\" && /^\\.\\.?\\//.test(path)) {\r\n        return path.replace(/\\.(tsx)$|((?:\\.d)?)((?:\\.[^./]+?)?)\\.([cm]?)ts$/i, function (m, tsx, d, ext, cm) {\r\n            return tsx ? preserveJsx ? \".jsx\" : \".js\" : d && (!ext || !cm) ? m : (d + ext + \".\" + cm.toLowerCase() + \"js\");\r\n        });\r\n    }\r\n    return path;\r\n}\r\n\r\nexport default {\r\n    __extends: __extends,\r\n    __assign: __assign,\r\n    __rest: __rest,\r\n    __decorate: __decorate,\r\n    __param: __param,\r\n    __esDecorate: __esDecorate,\r\n    __runInitializers: __runInitializers,\r\n    __propKey: __propKey,\r\n    __setFunctionName: __setFunctionName,\r\n    __metadata: __metadata,\r\n    __awaiter: __awaiter,\r\n    __generator: __generator,\r\n    __createBinding: __createBinding,\r\n    __exportStar: __exportStar,\r\n    __values: __values,\r\n    __read: __read,\r\n    __spread: __spread,\r\n    __spreadArrays: __spreadArrays,\r\n    __spreadArray: __spreadArray,\r\n    __await: __await,\r\n    __asyncGenerator: __asyncGenerator,\r\n    __asyncDelegator: __asyncDelegator,\r\n    __asyncValues: __asyncValues,\r\n    __makeTemplateObject: __makeTemplateObject,\r\n    __importStar: __importStar,\r\n    __importDefault: __importDefault,\r\n    __classPrivateFieldGet: __classPrivateFieldGet,\r\n    __classPrivateFieldSet: __classPrivateFieldSet,\r\n    __classPrivateFieldIn: __classPrivateFieldIn,\r\n    __addDisposableResource: __addDisposableResource,\r\n    __disposeResources: __disposeResources,\r\n    __rewriteRelativeImportExtension: __rewriteRelativeImportExtension,\r\n};\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport { isValid, merge } from './utils/typeChecks'\r\n\r\nexport default interface Bounding {\r\n  width: number\r\n  height: number\r\n  left: number\r\n  right: number\r\n  top: number\r\n  bottom: number\r\n}\r\n\r\nexport function createDefaultBounding (bounding?: Partial<Bounding>): Bounding {\r\n  const defaultBounding: Bounding = {\r\n    width: 0,\r\n    height: 0,\r\n    left: 0,\r\n    right: 0,\r\n    top: 0,\r\n    bottom: 0\r\n  }\r\n  if (isValid(bounding)) {\r\n    merge(defaultBounding, bounding)\r\n  }\r\n  return defaultBounding\r\n}\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport { isFunction } from './typeChecks'\r\n\r\nexport const DEFAULT_REQUEST_ID = -1\r\n\r\nexport function requestAnimationFrame (fn: (params: unknown) => unknown): number {\r\n  if (isFunction(window.requestAnimationFrame)) {\r\n    return window.requestAnimationFrame(fn)\r\n  }\r\n  return window.setTimeout(fn, 20)\r\n}\r\n\r\nexport function cancelAnimationFrame (id: number): void {\r\n  if (isFunction(window.cancelAnimationFrame)) {\r\n    window.cancelAnimationFrame(id)\r\n  } else {\r\n    window.clearTimeout(id)\r\n  }\r\n}\r\n\r\nexport function requestIdleCallback (fn: IdleRequestCallback): number {\r\n  if (isFunction(window.requestIdleCallback)) {\r\n    return window.requestIdleCallback(fn)\r\n  }\r\n  const startTime = performance.now()\r\n  return window.setTimeout(function () {\r\n    fn({\r\n      didTimeout: false,\r\n      timeRemaining () {\r\n        return Math.max(0, 50 - (performance.now() - startTime))\r\n      }\r\n    })\r\n  }, 1)\r\n}\r\n\r\nexport function cancelIdleCallback (id: number): void {\r\n  if (isFunction(window.cancelIdleCallback)) {\r\n    window.cancelIdleCallback(id)\r\n  } else {\r\n    window.clearTimeout(id)\r\n  }\r\n}\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport type Nullable from './Nullable'\r\nimport { requestAnimationFrame } from './utils/compatible'\r\nimport { merge } from './utils/typeChecks'\r\n\r\ntype AnimationDoFrameCallback = (frameTime: number) => void\r\n\r\ninterface AnimationOptions {\r\n  duration: number\r\n  iterationCount: number\r\n}\r\n\r\nexport default class Animation {\r\n  private readonly _options = { duration: 500, iterationCount: 1 }\r\n\r\n  private _doFrameCallback: Nullable<AnimationDoFrameCallback>\r\n\r\n  private _currentIterationCount = 0\r\n  private _running = false\r\n\r\n  private _time = 0\r\n\r\n  constructor (options?: Partial<AnimationOptions>) {\r\n    merge(this._options, options)\r\n  }\r\n\r\n  _loop (): void {\r\n    this._running = true\r\n    const step: (() => void) = () => {\r\n      if (this._running) {\r\n        const diffTime = new Date().getTime() - this._time\r\n        if (diffTime < this._options.duration) {\r\n          this._doFrameCallback?.(diffTime)\r\n          requestAnimationFrame(step)\r\n        } else {\r\n          this.stop()\r\n          this._currentIterationCount++\r\n          if (this._currentIterationCount < this._options.iterationCount) {\r\n            this.start()\r\n          }\r\n        }\r\n      }\r\n    }\r\n    requestAnimationFrame(step)\r\n  }\r\n\r\n  doFrame (callback: AnimationDoFrameCallback): this {\r\n    this._doFrameCallback = callback\r\n    return this\r\n  }\r\n\r\n  setDuration (duration: number): this {\r\n    this._options.duration = duration\r\n    return this\r\n  }\r\n\r\n  setIterationCount (iterationCount: number): this {\r\n    this._options.iterationCount = iterationCount\r\n    return this\r\n  }\r\n\r\n  start (): void {\r\n    if (!this._running) {\r\n      this._time = new Date().getTime()\r\n      this._loop()\r\n    }\r\n  }\r\n\r\n  stop (): void {\r\n    if (this._running) {\r\n      this._doFrameCallback?.(this._options.duration)\r\n    }\r\n    this._running = false\r\n  }\r\n}\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nlet baseId = 1\r\nlet prevIdTimestamp = new Date().getTime()\r\n\r\nexport function createId (prefix?: string): string {\r\n  const timestamp = new Date().getTime()\r\n  if (timestamp === prevIdTimestamp) {\r\n    ++baseId\r\n  } else {\r\n    baseId = 1\r\n  }\r\n  prevIdTimestamp = timestamp\r\n  return `${prefix ?? ''}${timestamp}_${baseId}`\r\n}\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\n/**\r\n * Create dom\r\n * @param tagName\r\n * @param styles\r\n * @return {*}\r\n */\r\nexport function createDom<K extends keyof HTMLElementTagNameMap> (tagName: K, styles?: Partial<CSSStyleDeclaration>): HTMLElementTagNameMap[K] {\r\n  const dom = document.createElement(tagName)\r\n  const s = styles ?? {}\r\n  // eslint-disable-next-line guard-for-in -- ignore\r\n  for (const key in s) {\r\n    (dom.style)[key] = s[key] ?? ''\r\n  }\r\n  return dom\r\n}\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\n/**\r\n * Binary search for the nearest result\r\n * @param dataList\r\n * @param valueKey\r\n * @param targetValue\r\n * @return {number}\r\n */\r\nexport function binarySearchNearest<T> (dataList: T[], valueKey: keyof T, targetValue: T[keyof T]): number {\r\n  let left = 0\r\n  let right = 0\r\n  for (right = dataList.length - 1; left !== right;) {\r\n    const midIndex = Math.floor((right + left) / 2)\r\n    const mid = right - left\r\n    const midValue = dataList[midIndex][valueKey]\r\n    if (targetValue === dataList[left][valueKey]) {\r\n      return left\r\n    }\r\n    if (targetValue === dataList[right][valueKey]) {\r\n      return right\r\n    }\r\n    if (targetValue === midValue) {\r\n      return midIndex\r\n    }\r\n\r\n    if (targetValue > midValue) {\r\n      left = midIndex\r\n    } else {\r\n      right = midIndex\r\n    }\r\n\r\n    if (mid <= 2) {\r\n      break\r\n    }\r\n  }\r\n  return left\r\n}\r\n\r\n/**\r\n * ‰ºòÂåñÊï∞Â≠ó\r\n * @param value\r\n * @return {number|number}\r\n */\r\nexport function nice (value: number): number {\r\n  const exponent = Math.floor(log10(value))\r\n  const exp10 = index10(exponent)\r\n  const f = value / exp10 // 1 <= f < 10\r\n  let nf = 0\r\n  if (f < 1.5) {\r\n    nf = 1\r\n  } else if (f < 2.5) {\r\n    nf = 2\r\n  } else if (f < 3.5) {\r\n    nf = 3\r\n  } else if (f < 4.5) {\r\n    nf = 4\r\n  } else if (f < 5.5) {\r\n    nf = 5\r\n  } else if (f < 6.5) {\r\n    nf = 6\r\n  } else {\r\n    nf = 8\r\n  }\r\n  value = nf * exp10\r\n  return +value.toFixed(Math.abs(exponent))\r\n}\r\n\r\n/**\r\n * Round\r\n * @param value\r\n * @param precision\r\n * @return {number}\r\n */\r\nexport function round (value: number, precision?: number): number {\r\n  precision = Math.max(0, precision ?? 0)\r\n  const pow = Math.pow(10, precision)\r\n  return Math.round(value * pow) / pow\r\n}\r\n\r\n/**\r\n * Get precision\r\n * @param value\r\n * @return {number|number}\r\n */\r\nexport function getPrecision (value: number): number {\r\n  const str = value.toString()\r\n  const eIndex = str.indexOf('e')\r\n  if (eIndex > 0) {\r\n    const precision = +str.slice(eIndex + 1)\r\n    return precision < 0 ? -precision : 0\r\n  }\r\n  const dotIndex = str.indexOf('.')\r\n  return dotIndex < 0 ? 0 : str.length - 1 - dotIndex\r\n}\r\n\r\nexport function getMaxMin<D> (dataList: D[], maxKey: keyof D, minKey: keyof D): number[] {\r\n  const maxMin = [Number.MIN_SAFE_INTEGER, Number.MAX_SAFE_INTEGER]\r\n  const dataLength = dataList.length\r\n  let index = 0\r\n  while (index < dataLength) {\r\n    const data = dataList[index]\r\n    maxMin[0] = Math.max((data[maxKey] ?? Number.MIN_SAFE_INTEGER) as number, maxMin[0])\r\n    maxMin[1] = Math.min((data[minKey] ?? Number.MAX_SAFE_INTEGER) as number, maxMin[1])\r\n    ++index\r\n  }\r\n  return maxMin\r\n}\r\n\r\n/**\r\n * log10\r\n * @param value\r\n * @return {number}\r\n */\r\nexport function log10 (value: number): number {\r\n  if (value === 0) {\r\n    return 0\r\n  }\r\n  return Math.log10(value)\r\n}\r\n\r\n/**\r\n * index 10\r\n * @param value\r\n * @return {number}\r\n */\r\nexport function index10 (value: number): number {\r\n  return Math.pow(10, value)\r\n}\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nexport default interface VisibleRange {\r\n  readonly from: number\r\n  readonly to: number\r\n  readonly realFrom: number\r\n  readonly realTo: number\r\n}\r\n\r\nexport function getDefaultVisibleRange (): VisibleRange {\r\n  return { from: 0, to: 0, realFrom: 0, realTo: 0 }\r\n}\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport { isValid } from './utils/typeChecks'\r\n\r\nexport function generateTaskId (...params: string[]): string {\r\n  return params.join('_')\r\n}\r\n\r\ninterface Task<T> {\r\n  id: string\r\n  handler: () => Promise<T>\r\n}\r\n\r\ntype TaskRun = () => void\r\n\r\nexport type TaskRejectReason = 'canceled' | 'failed'\r\n\r\ninterface TaskWrapper {\r\n  run: TaskRun\r\n  reject: (reason?: TaskRejectReason) => void\r\n}\r\n\r\nconst DEFAULT_TASK_LIMIT = 5\r\n\r\nexport default class TaskScheduler {\r\n  private readonly _limit: number\r\n  private _running = 0\r\n  private _queue: TaskRun[] = []\r\n  private readonly _taskMap = new Map<string, TaskWrapper>()\r\n\r\n  constructor (limit?: number) {\r\n    this._limit = limit ?? DEFAULT_TASK_LIMIT\r\n  }\r\n\r\n  async add<T> (task: Task<T>): Promise<T> {\r\n    return await new Promise<T>((resolve, reject) => {\r\n      const { id, handler } = task\r\n      const run: TaskRun = () => {\r\n        this._running++\r\n        handler().then(\r\n          result => {\r\n            resolve(result)\r\n          }\r\n        ).catch(\r\n          () => {\r\n            // eslint-disable-next-line @typescript-eslint/prefer-promise-reject-errors, prefer-promise-reject-errors -- ignore\r\n            reject('failed')\r\n          }\r\n        ).finally(() => {\r\n          this._running--\r\n          this._taskMap.delete(id)\r\n          this._next()\r\n        })\r\n      }\r\n\r\n      const oldTaskWrapper = this._taskMap.get(id)\r\n      if (isValid(oldTaskWrapper)) {\r\n        oldTaskWrapper.reject('canceled')\r\n\r\n        const index = this._queue.indexOf(oldTaskWrapper.run)\r\n        if (index > -1) {\r\n          this._queue.splice(index, 1)\r\n        }\r\n      }\r\n\r\n      this._taskMap.set(id, { run, reject })\r\n      this._queue.push(run)\r\n      this._next()\r\n    })\r\n  }\r\n\r\n  private _next (): void {\r\n    while (this._running < this._limit && this._queue.length > 0) {\r\n      const fn = this._queue.shift()\r\n      fn?.()\r\n    }\r\n  }\r\n\r\n  remove (id: string): void {\r\n    const taskWrapper = this._taskMap.get(id)\r\n    if (isValid(taskWrapper)) {\r\n      this._taskMap.delete(id)\r\n\r\n      const index = this._queue.indexOf(taskWrapper.run)\r\n      if (index > -1) {\r\n        this._queue.splice(index, 1)\r\n      }\r\n\r\n      taskWrapper.reject('canceled')\r\n    }\r\n  }\r\n\r\n  clear (): void {\r\n    for (const [, { reject }] of this._taskMap) {\r\n      reject('canceled')\r\n    }\r\n    this._taskMap.clear()\r\n    this._queue = []\r\n  }\r\n}\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nexport interface SymbolInfo {\r\n  ticker: string\r\n  pricePrecision: number\r\n  volumePrecision: number\r\n  [key: string]: unknown\r\n}\r\n\r\nexport const SymbolDefaultPrecisionConstants = {\r\n  PRICE: 2,\r\n  VOLUME: 0\r\n}\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport { isFunction } from './utils/typeChecks'\r\n\r\nexport type ActionCallback = (data?: unknown) => void\r\n\r\nexport type ActionType = 'onZoom' | 'onScroll' | 'onVisibleRangeChange' | 'onCandleTooltipFeatureClick' | 'onIndicatorTooltipFeatureClick'| 'onCrosshairFeatureClick' | 'onCrosshairChange' | 'onCandleBarClick' | 'onPaneDrag'\r\nexport default class Action {\r\n  private _callbacks: ActionCallback[] = []\r\n\r\n  subscribe (callback: ActionCallback): void {\r\n    const index = this._callbacks.indexOf(callback)\r\n    if (index < 0) {\r\n      this._callbacks.push(callback)\r\n    }\r\n  }\r\n\r\n  unsubscribe (callback?: ActionCallback): void {\r\n    if (isFunction(callback)) {\r\n      const index = this._callbacks.indexOf(callback)\r\n      if (index > -1) {\r\n        this._callbacks.splice(index, 1)\r\n      }\r\n    } else {\r\n      this._callbacks = []\r\n    }\r\n  }\r\n\r\n  execute (data?: unknown): void {\r\n    this._callbacks.forEach(callback => {\r\n      callback(data)\r\n    })\r\n  }\r\n\r\n  isEmpty (): boolean {\r\n    return this._callbacks.length === 0\r\n  }\r\n}\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport { isValid } from './typeChecks'\r\n\r\nconst rgbaRegExp = /^[rR][gG][Bb][Aa]\\(([\\s]*(2[0-4][0-9]|25[0-5]|[01]?[0-9][0-9]?)[\\s]*,){3}[\\s]*(1|1.0|0|0.[0-9])[\\s]*\\){1}$/\r\n\r\nexport function isRgba (color: string): boolean {\r\n  return rgbaRegExp.test(color)\r\n}\r\n\r\nexport function isHsla (color: string): boolean {\r\n  return (/^[hH][Ss][Ll][Aa]\\(([\\s]*(360ÔΩú3[0-5][0-9]|[012]?[0-9][0-9]?)[\\s]*,)([\\s]*((100|[0-9][0-9]?)%|0)[\\s]*,){2}([\\s]*(1|1.0|0|0.[0-9])[\\s]*)\\)$/).test(color)\r\n}\r\n\r\nexport function isTransparent (color: string): boolean {\r\n  return color === 'transparent' ||\r\n    color === 'none' ||\r\n    /^[rR][gG][Bb][Aa]\\(([\\s]*(2[0-4][0-9]|25[0-5]|[01]?[0-9][0-9]?)[\\s]*,){3}[\\s]*0[\\s]*\\)$/.test(color) ||\r\n    /^[hH][Ss][Ll][Aa]\\(([\\s]*(360ÔΩú3[0-5][0-9]|[012]?[0-9][0-9]?)[\\s]*,)([\\s]*((100|[0-9][0-9]?)%|0)[\\s]*,){2}([\\s]*0[\\s]*)\\)$/.test(color)\r\n}\r\n\r\nexport function rgbToHex (rgb: string): string {\r\n  if (!isRgba(rgb)) {\r\n    return rgb\r\n  }\r\n  const match = rgbaRegExp.exec(rgb)\r\n  if (!isValid(match)) {\r\n    throw new Error('Invalid RGB string format')\r\n  }\r\n  const r = parseInt(match[1], 10).toString(16)\r\n  const g = parseInt(match[2], 10).toString(16)\r\n  const b = parseInt(match[3], 10).toString(16)\r\n  return `#${r.length === 1 ? `0${r}` : r}${g.length === 1 ? `0${r}` : r}${b.length === 1 ? `0${r}` : r}`\r\n}\r\n\r\nexport function hexToRgb (hex: string, alpha?: number): string {\r\n  const h = hex.replace(/^#/, '')\r\n  const i = parseInt(h, 16)\r\n  const r = (i >> 16) & 255\r\n  const g = (i >> 8) & 255\r\n  const b = i & 255\r\n\r\n  return `rgba(${r}, ${g}, ${b}, ${alpha ?? 1})`\r\n}\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport type Nullable from './Nullable'\r\nimport type { KLineData, NeighborData } from './Data'\r\nimport { hexToRgb } from './utils/color'\r\n\r\nexport interface Margin {\r\n  marginLeft: number\r\n  marginTop: number\r\n  marginRight: number\r\n  marginBottom: number\r\n}\r\n\r\nexport interface Padding {\r\n  paddingLeft: number\r\n  paddingTop: number\r\n  paddingRight: number\r\n  paddingBottom: number\r\n}\r\n\r\nexport interface Offset {\r\n  offsetLeft: number\r\n  offsetTop: number\r\n  offsetRight: number\r\n  offsetBottom: number\r\n}\r\n\r\n/**\r\n * line type\r\n */\r\nexport type LineType = 'dashed' | 'solid'\r\n\r\nexport interface LineStyle {\r\n  style: LineType\r\n  size: number\r\n  color: string\r\n  dashedValue: number[]\r\n}\r\n\r\nexport interface SmoothLineStyle extends LineStyle {\r\n  smooth: boolean | number\r\n}\r\n\r\nexport interface StateLineStyle extends LineStyle {\r\n  show: boolean\r\n}\r\n\r\nexport type PathType = 'stroke' | 'fill'\r\n\r\nexport interface PathStyle {\r\n  style: PathType\r\n  color: string\r\n  lineWidth: number\r\n}\r\n\r\nexport type PolygonType = PathType | 'stroke_fill'\r\n\r\nexport interface PolygonStyle {\r\n  style: PolygonType\r\n  color: string | CanvasGradient\r\n  borderColor: string\r\n  borderSize: number\r\n  borderStyle: LineType\r\n  borderDashedValue: number[]\r\n}\r\n\r\nexport interface RectStyle extends PolygonStyle {\r\n  borderRadius: number | number[]\r\n}\r\n\r\nexport interface TextStyle extends Padding {\r\n  style: PolygonType\r\n  color: string\r\n  size: number\r\n  family: string\r\n  weight: number | string\r\n  borderStyle: LineType\r\n  borderDashedValue: number[]\r\n  borderSize: number\r\n  borderColor: string\r\n  borderRadius: number | number[]\r\n  backgroundColor: string | CanvasGradient\r\n}\r\n\r\nexport interface StateTextStyle extends TextStyle {\r\n  show: boolean\r\n}\r\n\r\nexport type LastValueMarkTextStyle = Omit<StateTextStyle, 'backgroundColor'>\r\n\r\nexport type TooltipShowRule = 'always' | 'follow_cross' | 'none'\r\n\r\nexport type TooltipShowType = 'standard' | 'rect'\r\n\r\nexport interface ChangeColor {\r\n  upColor: string\r\n  downColor: string\r\n  noChangeColor: string\r\n}\r\n\r\nexport interface GradientColor {\r\n  offset: number\r\n  color: string\r\n}\r\n\r\nexport type FeatureType = 'path' | 'icon_font'\r\n\r\nexport interface FeaturePathStyle extends Omit<PathStyle, 'color'> {\r\n  path: string\r\n}\r\n\r\nexport interface FeatureIconFontStyle {\r\n  family: string\r\n  code: string\r\n}\r\n\r\nexport interface FeatureStyle extends Padding, Margin {\r\n  id: string\r\n  backgroundColor: string\r\n  activeBackgroundColor: string\r\n  size: number\r\n  color: string\r\n  activeColor: string\r\n  borderRadius: number | number[]\r\n  type: FeatureType\r\n  content: FeaturePathStyle | FeatureIconFontStyle\r\n}\r\n\r\nexport interface GridStyle {\r\n  show: boolean\r\n  horizontal: StateLineStyle\r\n  vertical: StateLineStyle\r\n}\r\n\r\nexport type TooltipTextStyle = Pick<TextStyle, 'color' | 'size' | 'family' | 'weight'> & Margin\r\n\r\nexport type TooltipTitleStyle = TooltipTextStyle & { show: boolean }\r\n\r\nexport type TooltipLegendStyle = TooltipTextStyle & { defaultValue: string }\r\n\r\nexport interface TooltipLegendChild {\r\n  text: string\r\n  color: string\r\n}\r\n\r\nexport interface TooltipLegend {\r\n  title: string | TooltipLegendChild\r\n  value: string | TooltipLegendChild\r\n}\r\n\r\nexport type TooltipFeaturePosition = 'left' | 'middle' | 'right'\r\n\r\nexport interface TooltipFeatureStyle extends FeatureStyle {\r\n  position: TooltipFeaturePosition\r\n}\r\n\r\nexport interface TooltipStyle extends Offset {\r\n  showRule: TooltipShowRule\r\n  showType: TooltipShowType\r\n  features: TooltipFeatureStyle[]\r\n}\r\n\r\nexport interface CandleAreaPointStyle {\r\n  show: boolean\r\n  color: string\r\n  radius: number\r\n  rippleColor: string\r\n  rippleRadius: number\r\n  animation: boolean\r\n  animationDuration: number\r\n}\r\n\r\nexport interface CandleAreaStyle {\r\n  lineSize: number\r\n  lineColor: string\r\n  value: string\r\n  smooth: boolean\r\n  backgroundColor: string | GradientColor[]\r\n  point: CandleAreaPointStyle\r\n}\r\n\r\nexport interface CandleHighLowPriceMarkStyle {\r\n  show: boolean\r\n  color: string\r\n  textOffset: number\r\n  textSize: number\r\n  textFamily: string\r\n  textWeight: string\r\n}\r\n\r\nexport type CandleLastPriceMarkLineStyle = Omit<StateLineStyle, 'color'>\r\n\r\nexport type CandleLastPriceMarkExtendTextPosition = 'above_price' | 'below_price'\r\n\r\nexport type CandleLastPriceMarkExtendTextStyle = LastValueMarkTextStyle & {\r\n  position: CandleLastPriceMarkExtendTextPosition\r\n  updateInterval: number\r\n}\r\nexport interface CandleLastPriceMarkStyle extends ChangeColor {\r\n  show: boolean\r\n  compareRule: CandleColorCompareRule\r\n  line: CandleLastPriceMarkLineStyle\r\n  text: LastValueMarkTextStyle\r\n  extendTexts: CandleLastPriceMarkExtendTextStyle[]\r\n}\r\n\r\nexport interface CandlePriceMarkStyle {\r\n  show: boolean\r\n  high: CandleHighLowPriceMarkStyle\r\n  low: CandleHighLowPriceMarkStyle\r\n  last: CandleLastPriceMarkStyle\r\n}\r\n\r\nexport type CandleTooltipRectPosition = 'fixed' | 'pointer'\r\n\r\nexport interface CandleTooltipRectStyle extends Omit<RectStyle, 'style' | 'borderDashedValue' | 'borderStyle'>, Padding, Offset {\r\n  position: CandleTooltipRectPosition\r\n}\r\n\r\nexport type CandleTooltipLegendsCustomCallback = (data: NeighborData<Nullable<KLineData>>, styles: CandleStyle) => TooltipLegend[]\r\n\r\nexport interface CandleTooltipStyle extends TooltipStyle {\r\n  title: TooltipTitleStyle & { template: string }\r\n  legend: TooltipLegendStyle & { template: CandleTooltipLegendsCustomCallback | TooltipLegend[] }\r\n  rect: CandleTooltipRectStyle\r\n}\r\n\r\nexport type CandleType = 'candle_solid' | 'candle_stroke' | 'candle_up_stroke' | 'candle_down_stroke' | 'ohlc' | 'area'\r\n\r\nexport type CandleColorCompareRule = 'current_open' | 'previous_close'\r\n\r\nexport interface CandleBarColor extends ChangeColor {\r\n  compareRule: CandleColorCompareRule\r\n  upBorderColor: string\r\n  downBorderColor: string\r\n  noChangeBorderColor: string\r\n  upWickColor: string\r\n  downWickColor: string\r\n  noChangeWickColor: string\r\n}\r\n\r\nexport interface CandleStyle {\r\n  type: CandleType\r\n  bar: CandleBarColor\r\n  area: CandleAreaStyle\r\n  priceMark: CandlePriceMarkStyle\r\n  tooltip: CandleTooltipStyle\r\n}\r\n\r\nexport type IndicatorPolygonStyle = Omit<PolygonStyle, 'color' | 'borderColor'> & ChangeColor\r\n\r\nexport interface IndicatorLastValueMarkStyle {\r\n  show: boolean\r\n  text: LastValueMarkTextStyle\r\n}\r\n\r\nexport interface IndicatorTooltipStyle extends TooltipStyle {\r\n  title: TooltipTitleStyle & { showName: boolean; showParams: boolean }\r\n  legend: TooltipLegendStyle\r\n}\r\n\r\nexport interface IndicatorStyle {\r\n  ohlc: Pick<CandleBarColor, 'compareRule' | 'upColor' | 'downColor' | 'noChangeColor'>\r\n  bars: IndicatorPolygonStyle[]\r\n  lines: SmoothLineStyle[]\r\n  circles: IndicatorPolygonStyle[]\r\n  lastValueMark: IndicatorLastValueMarkStyle\r\n  tooltip: IndicatorTooltipStyle\r\n  [key: string]: unknown\r\n}\r\n\r\nexport type AxisLineStyle = Omit<StateLineStyle, 'style' | 'dashedValue'>\r\n\r\nexport interface AxisTickLineStyle extends AxisLineStyle {\r\n  length: number\r\n}\r\n\r\nexport interface AxisTickTextStyle extends Pick<StateTextStyle, 'show' | 'color' | 'weight' | 'family' | 'size'> {\r\n  marginStart: number\r\n  marginEnd: number\r\n}\r\n\r\nexport interface AxisStyle {\r\n  show: boolean\r\n  size: number | 'auto'\r\n  axisLine: AxisLineStyle\r\n  tickLine: AxisTickLineStyle\r\n  tickText: AxisTickTextStyle\r\n}\r\n\r\nexport interface CrosshairDirectionStyle {\r\n  show: boolean\r\n  line: StateLineStyle\r\n  text: StateTextStyle\r\n}\r\n\r\nexport interface CrosshairStyle {\r\n  show: boolean\r\n  horizontal: CrosshairDirectionStyle & { features: TooltipFeatureStyle[] }\r\n  vertical: CrosshairDirectionStyle\r\n}\r\n\r\nexport interface OverlayPointStyle {\r\n  color: string\r\n  borderColor: string\r\n  borderSize: number\r\n  radius: number\r\n  activeColor: string\r\n  activeBorderColor: string\r\n  activeBorderSize: number\r\n  activeRadius: number\r\n}\r\n\r\nexport interface OverlayStyle {\r\n  point: OverlayPointStyle\r\n  line: SmoothLineStyle\r\n  rect: RectStyle\r\n  polygon: PolygonStyle\r\n  circle: PolygonStyle\r\n  arc: LineStyle\r\n  text: TextStyle\r\n  [key: string]: unknown\r\n}\r\n\r\nexport interface SeparatorStyle {\r\n  size: number\r\n  color: string\r\n  fill: boolean\r\n  activeBackgroundColor: string\r\n}\r\n\r\nexport interface Styles {\r\n  grid: GridStyle\r\n  candle: CandleStyle\r\n  indicator: IndicatorStyle\r\n  xAxis: AxisStyle\r\n  yAxis: AxisStyle\r\n  separator: SeparatorStyle\r\n  crosshair: CrosshairStyle\r\n  overlay: OverlayStyle\r\n}\r\n\r\nconst Color = {\r\n  RED: '#F92855',\r\n  GREEN: '#2DC08E',\r\n  WHITE: '#FFFFFF',\r\n  GREY: '#76808F',\r\n  BLUE: '#1677FF'\r\n}\r\n\r\nfunction getDefaultGridStyle (): GridStyle {\r\n  return {\r\n    show: true,\r\n    horizontal: {\r\n      show: true,\r\n      size: 1,\r\n      color: '#EDEDED',\r\n      style: 'dashed',\r\n      dashedValue: [2, 2]\r\n    },\r\n    vertical: {\r\n      show: true,\r\n      size: 1,\r\n      color: '#EDEDED',\r\n      style: 'dashed',\r\n      dashedValue: [2, 2]\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * Get default candle style\r\n * @type {{area: {backgroundColor: [{offset: number, color: string}, {offset: number, color: string}], lineColor: string, lineSize: number, value: string}, bar: {noChangeColor: string, upColor: string, downColor: string}, tooltip: {rect: {offsetTop: number, fillColor: string, borderColor: string, paddingBottom: number, borderRadius: number, paddingRight: number, borderSize: number, offsetLeft: number, paddingTop: number, paddingLeft: number, offsetRight: number}, showRule: string, values: null, showType: string, text: {marginRight: number, size: number, color: string, weight: string, marginBottom: number, family: string, marginTop: number, marginLeft: number}, labels: string[]}, type: string, priceMark: {high: {textMargin: number, textSize: number, color: string, textFamily: string, show: boolean, textWeight: string}, last: {noChangeColor: string, upColor: string, line: {dashValue: number[], size: number, show: boolean, style: string}, show: boolean, text: {paddingBottom: number, size: number, color: string, paddingRight: number, show: boolean, weight: string, paddingTop: number, family: string, paddingLeft: number}, downColor: string}, low: {textMargin: number, textSize: number, color: string, textFamily: string, show: boolean, textWeight: string}, show: boolean}}}\r\n */\r\nfunction getDefaultCandleStyle (): CandleStyle {\r\n  const highLow = {\r\n    show: true,\r\n    color: Color.GREY,\r\n    textOffset: 5,\r\n    textSize: 10,\r\n    textFamily: 'Helvetica Neue',\r\n    textWeight: 'normal'\r\n  }\r\n  return {\r\n    type: 'candle_solid',\r\n    bar: {\r\n      compareRule: 'current_open',\r\n      upColor: Color.GREEN,\r\n      downColor: Color.RED,\r\n      noChangeColor: Color.GREY,\r\n      upBorderColor: Color.GREEN,\r\n      downBorderColor: Color.RED,\r\n      noChangeBorderColor: Color.GREY,\r\n      upWickColor: Color.GREEN,\r\n      downWickColor: Color.RED,\r\n      noChangeWickColor: Color.GREY\r\n    },\r\n    area: {\r\n      lineSize: 2,\r\n      lineColor: Color.BLUE,\r\n      smooth: false,\r\n      value: 'close',\r\n      backgroundColor: [{\r\n        offset: 0,\r\n        color: hexToRgb(Color.BLUE, 0.01)\r\n      }, {\r\n        offset: 1,\r\n        color: hexToRgb(Color.BLUE, 0.2)\r\n      }],\r\n      point: {\r\n        show: true,\r\n        color: Color.BLUE,\r\n        radius: 4,\r\n        rippleColor: hexToRgb(Color.BLUE, 0.3),\r\n        rippleRadius: 8,\r\n        animation: true,\r\n        animationDuration: 1000\r\n      }\r\n    },\r\n    priceMark: {\r\n      show: true,\r\n      high: { ...highLow },\r\n      low: { ...highLow },\r\n      last: {\r\n        show: true,\r\n        compareRule: 'current_open',\r\n        upColor: Color.GREEN,\r\n        downColor: Color.RED,\r\n        noChangeColor: Color.GREY,\r\n        line: {\r\n          show: true,\r\n          style: 'dashed',\r\n          dashedValue: [4, 4],\r\n          size: 1\r\n        },\r\n        text: {\r\n          show: true,\r\n          style: 'fill',\r\n          size: 12,\r\n          paddingLeft: 4,\r\n          paddingTop: 4,\r\n          paddingRight: 4,\r\n          paddingBottom: 4,\r\n          borderColor: 'transparent',\r\n          borderStyle: 'solid',\r\n          borderSize: 0,\r\n          borderDashedValue: [2, 2],\r\n          color: Color.WHITE,\r\n          family: 'Helvetica Neue',\r\n          weight: 'normal',\r\n          borderRadius: 2\r\n        },\r\n        extendTexts: []\r\n      }\r\n    },\r\n    tooltip: {\r\n      offsetLeft: 4,\r\n      offsetTop: 6,\r\n      offsetRight: 4,\r\n      offsetBottom: 6,\r\n      showRule: 'always',\r\n      showType: 'standard',\r\n      rect: {\r\n        position: 'fixed',\r\n        paddingLeft: 4,\r\n        paddingRight: 4,\r\n        paddingTop: 4,\r\n        paddingBottom: 4,\r\n        offsetLeft: 4,\r\n        offsetTop: 4,\r\n        offsetRight: 4,\r\n        offsetBottom: 4,\r\n        borderRadius: 4,\r\n        borderSize: 1,\r\n        borderColor: '#F2F3F5',\r\n        color: '#FEFEFE'\r\n      },\r\n      title: {\r\n        show: true,\r\n        size: 14,\r\n        family: 'Helvetica Neue',\r\n        weight: 'normal',\r\n        color: Color.GREY,\r\n        marginLeft: 8,\r\n        marginTop: 4,\r\n        marginRight: 8,\r\n        marginBottom: 4,\r\n        template: '{ticker} ¬∑ {period}'\r\n      },\r\n      legend: {\r\n        size: 12,\r\n        family: 'Helvetica Neue',\r\n        weight: 'normal',\r\n        color: Color.GREY,\r\n        marginLeft: 8,\r\n        marginTop: 4,\r\n        marginRight: 8,\r\n        marginBottom: 4,\r\n        defaultValue: 'n/a',\r\n        template: [\r\n          { title: 'time', value: '{time}' },\r\n          { title: 'open', value: '{open}' },\r\n          { title: 'high', value: '{high}' },\r\n          { title: 'low', value: '{low}' },\r\n          { title: 'close', value: '{close}' },\r\n          { title: 'volume', value: '{volume}' }\r\n        ]\r\n      },\r\n      features: []\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * Get default indicator style\r\n */\r\nfunction getDefaultIndicatorStyle (): IndicatorStyle {\r\n  const alphaGreen = hexToRgb(Color.GREEN, 0.7)\r\n  const alphaRed = hexToRgb(Color.RED, 0.7)\r\n  return {\r\n    ohlc: {\r\n      compareRule: 'current_open',\r\n      upColor: alphaGreen,\r\n      downColor: alphaRed,\r\n      noChangeColor: Color.GREY\r\n    },\r\n    bars: [{\r\n      style: 'fill',\r\n      borderStyle: 'solid',\r\n      borderSize: 1,\r\n      borderDashedValue: [2, 2],\r\n      upColor: alphaGreen,\r\n      downColor: alphaRed,\r\n      noChangeColor: Color.GREY\r\n    }],\r\n    lines: ['#FF9600', '#935EBD', Color.BLUE, '#E11D74', '#01C5C4'].map(color => ({\r\n      style: 'solid',\r\n      smooth: false,\r\n      size: 1,\r\n      dashedValue: [2, 2],\r\n      color\r\n    })),\r\n    circles: [{\r\n      style: 'fill',\r\n      borderStyle: 'solid',\r\n      borderSize: 1,\r\n      borderDashedValue: [2, 2],\r\n      upColor: alphaGreen,\r\n      downColor: alphaRed,\r\n      noChangeColor: Color.GREY\r\n    }],\r\n    lastValueMark: {\r\n      show: false,\r\n      text: {\r\n        show: false,\r\n        style: 'fill',\r\n        color: Color.WHITE,\r\n        size: 12,\r\n        family: 'Helvetica Neue',\r\n        weight: 'normal',\r\n        borderStyle: 'solid',\r\n        borderColor: 'transparent',\r\n        borderSize: 0,\r\n        borderDashedValue: [2, 2],\r\n        paddingLeft: 4,\r\n        paddingTop: 4,\r\n        paddingRight: 4,\r\n        paddingBottom: 4,\r\n        borderRadius: 2\r\n      }\r\n    },\r\n    tooltip: {\r\n      offsetLeft: 4,\r\n      offsetTop: 6,\r\n      offsetRight: 4,\r\n      offsetBottom: 6,\r\n      showRule: 'always',\r\n      showType: 'standard',\r\n      title: {\r\n        show: true,\r\n        showName: true,\r\n        showParams: true,\r\n        size: 12,\r\n        family: 'Helvetica Neue',\r\n        weight: 'normal',\r\n        color: Color.GREY,\r\n        marginLeft: 8,\r\n        marginTop: 4,\r\n        marginRight: 8,\r\n        marginBottom: 4\r\n      },\r\n      legend: {\r\n        size: 12,\r\n        family: 'Helvetica Neue',\r\n        weight: 'normal',\r\n        color: Color.GREY,\r\n        marginLeft: 8,\r\n        marginTop: 4,\r\n        marginRight: 8,\r\n        marginBottom: 4,\r\n        defaultValue: 'n/a'\r\n      },\r\n      features: []\r\n    }\r\n  }\r\n}\r\n\r\nfunction getDefaultAxisStyle (): AxisStyle {\r\n  return {\r\n    show: true,\r\n    size: 'auto',\r\n    axisLine: {\r\n      show: true,\r\n      color: '#DDDDDD',\r\n      size: 1\r\n    },\r\n    tickText: {\r\n      show: true,\r\n      color: Color.GREY,\r\n      size: 12,\r\n      family: 'Helvetica Neue',\r\n      weight: 'normal',\r\n      marginStart: 4,\r\n      marginEnd: 6\r\n    },\r\n    tickLine: {\r\n      show: true,\r\n      size: 1,\r\n      length: 3,\r\n      color: '#DDDDDD'\r\n    }\r\n  }\r\n}\r\n\r\nfunction getDefaultCrosshairStyle (): CrosshairStyle {\r\n  return {\r\n    show: true,\r\n    horizontal: {\r\n      show: true,\r\n      line: {\r\n        show: true,\r\n        style: 'dashed',\r\n        dashedValue: [4, 2],\r\n        size: 1,\r\n        color: Color.GREY\r\n      },\r\n      text: {\r\n        show: true,\r\n        style: 'fill',\r\n        color: Color.WHITE,\r\n        size: 12,\r\n        family: 'Helvetica Neue',\r\n        weight: 'normal',\r\n        borderStyle: 'solid',\r\n        borderDashedValue: [2, 2],\r\n        borderSize: 1,\r\n        borderColor: Color.GREY,\r\n        borderRadius: 2,\r\n        paddingLeft: 4,\r\n        paddingRight: 4,\r\n        paddingTop: 4,\r\n        paddingBottom: 4,\r\n        backgroundColor: Color.GREY\r\n      },\r\n      features: []\r\n    },\r\n    vertical: {\r\n      show: true,\r\n      line: {\r\n        show: true,\r\n        style: 'dashed',\r\n        dashedValue: [4, 2],\r\n        size: 1,\r\n        color: Color.GREY\r\n      },\r\n      text: {\r\n        show: true,\r\n        style: 'fill',\r\n        color: Color.WHITE,\r\n        size: 12,\r\n        family: 'Helvetica Neue',\r\n        weight: 'normal',\r\n        borderStyle: 'solid',\r\n        borderDashedValue: [2, 2],\r\n        borderSize: 1,\r\n        borderColor: Color.GREY,\r\n        borderRadius: 2,\r\n        paddingLeft: 4,\r\n        paddingRight: 4,\r\n        paddingTop: 4,\r\n        paddingBottom: 4,\r\n        backgroundColor: Color.GREY\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nfunction getDefaultOverlayStyle (): OverlayStyle {\r\n  const pointBorderColor = hexToRgb(Color.BLUE, 0.35)\r\n  const alphaBg = hexToRgb(Color.BLUE, 0.25)\r\n  function text (): TextStyle {\r\n    return {\r\n      style: 'fill',\r\n      color: Color.WHITE,\r\n      size: 12,\r\n      family: 'Helvetica Neue',\r\n      weight: 'normal',\r\n      borderStyle: 'solid',\r\n      borderDashedValue: [2, 2],\r\n      borderSize: 1,\r\n      borderRadius: 2,\r\n      borderColor: Color.BLUE,\r\n      paddingLeft: 4,\r\n      paddingRight: 4,\r\n      paddingTop: 4,\r\n      paddingBottom: 4,\r\n      backgroundColor: Color.BLUE\r\n    }\r\n  }\r\n  return {\r\n    point: {\r\n      color: Color.BLUE,\r\n      borderColor: pointBorderColor,\r\n      borderSize: 1,\r\n      radius: 5,\r\n      activeColor: Color.BLUE,\r\n      activeBorderColor: pointBorderColor,\r\n      activeBorderSize: 3,\r\n      activeRadius: 5\r\n    },\r\n    line: {\r\n      style: 'solid',\r\n      smooth: false,\r\n      color: Color.BLUE,\r\n      size: 1,\r\n      dashedValue: [2, 2]\r\n    },\r\n    rect: {\r\n      style: 'fill',\r\n      color: alphaBg,\r\n      borderColor: Color.BLUE,\r\n      borderSize: 1,\r\n      borderRadius: 0,\r\n      borderStyle: 'solid',\r\n      borderDashedValue: [2, 2]\r\n    },\r\n    polygon: {\r\n      style: 'fill',\r\n      color: Color.BLUE,\r\n      borderColor: Color.BLUE,\r\n      borderSize: 1,\r\n      borderStyle: 'solid',\r\n      borderDashedValue: [2, 2]\r\n    },\r\n    circle: {\r\n      style: 'fill',\r\n      color: alphaBg,\r\n      borderColor: Color.BLUE,\r\n      borderSize: 1,\r\n      borderStyle: 'solid',\r\n      borderDashedValue: [2, 2]\r\n    },\r\n    arc: {\r\n      style: 'solid',\r\n      color: Color.BLUE,\r\n      size: 1,\r\n      dashedValue: [2, 2]\r\n    },\r\n    text: text()\r\n  }\r\n}\r\n\r\nfunction getDefaultSeparatorStyle (): SeparatorStyle {\r\n  return {\r\n    size: 1,\r\n    color: '#DDDDDD',\r\n    fill: true,\r\n    activeBackgroundColor: hexToRgb(Color.BLUE, 0.08)\r\n  }\r\n}\r\n\r\nexport function getDefaultStyles (): Styles {\r\n  return {\r\n    grid: getDefaultGridStyle(),\r\n    candle: getDefaultCandleStyle(),\r\n    indicator: getDefaultIndicatorStyle(),\r\n    xAxis: getDefaultAxisStyle(),\r\n    yAxis: getDefaultAxisStyle(),\r\n    separator: getDefaultSeparatorStyle(),\r\n    crosshair: getDefaultCrosshairStyle(),\r\n    overlay: getDefaultOverlayStyle()\r\n  }\r\n}\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport type Nullable from '../common/Nullable'\r\nimport type DeepPartial from '../common/DeepPartial'\r\nimport type ExcludePickPartial from '../common/ExcludePickPartial'\r\nimport type { KLineData, NeighborData, Timestamp } from '../common/Data'\r\nimport type Bounding from '../common/Bounding'\r\nimport type BarSpace from '../common/BarSpace'\r\nimport type Crosshair from '../common/Crosshair'\r\nimport type { IndicatorStyle, IndicatorPolygonStyle, SmoothLineStyle, RectStyle, TextStyle, TooltipFeatureStyle, LineStyle, LineType, TooltipLegend } from '../common/Styles'\r\nimport { isNumber, isValid, merge, isBoolean, isString, clone, isFunction } from '../common/utils/typeChecks'\r\nimport type { DataLoadType } from '../common/DataLoader'\r\n\r\nimport type { XAxis } from './XAxis'\r\nimport type { YAxis } from './YAxis'\r\n\r\nimport { formatValue } from '../common/utils/format'\r\n\r\nimport type { ArcAttrs } from '../extension/figure/arc'\r\nimport type { RectAttrs } from '../extension/figure/rect'\r\nimport type { TextAttrs } from '../extension/figure/text'\r\nimport type { Chart } from '../Chart'\r\n\r\nexport type IndicatorSeries = 'normal' | 'price' | 'volume'\r\n\r\nexport type IndicatorFigureStyle = Partial<Omit<SmoothLineStyle, 'style'>> & Partial<Omit<RectStyle, 'style'>> & Partial<TextStyle> & Partial<{ style: LineType[keyof LineType] }> & Record<string, unknown>\r\n\r\nexport type IndicatorFigureAttrs = Partial<ArcAttrs> & Partial<LineStyle> & Partial<RectAttrs> & Partial<TextAttrs> & Record<string, unknown>\r\n\r\nexport interface IndicatorFigureAttrsCallbackParams<D> {\r\n  data: NeighborData<Nullable<D>>\r\n  coordinate: NeighborData<Record<keyof D, number> & { x: number }>\r\n  bounding: Bounding\r\n  barSpace: BarSpace\r\n  xAxis: XAxis\r\n  yAxis: YAxis\r\n}\r\n\r\nexport interface IndicatorFigureStylesCallbackParams<D> {\r\n  data: NeighborData<Nullable<D>>\r\n  indicator: Indicator<D>\r\n  defaultStyles?: IndicatorStyle\r\n}\r\n\r\nexport type IndicatorFigureAttrsCallback<D> = (params: IndicatorFigureAttrsCallbackParams<D>) => IndicatorFigureAttrs\r\nexport type IndicatorFigureStylesCallback<D> = (params: IndicatorFigureStylesCallbackParams<D>) => IndicatorFigureStyle\r\n\r\nexport interface IndicatorFigure<D = unknown> {\r\n  key: string\r\n  title?: string\r\n  type?: string\r\n  baseValue?: number\r\n  attrs?: IndicatorFigureAttrsCallback<D>\r\n  styles?: IndicatorFigureStylesCallback<D>\r\n}\r\n\r\nexport type IndicatorRegenerateFiguresCallback<D, C> = (calcParams: C[]) => Array<IndicatorFigure<D>>\r\n\r\nexport interface IndicatorTooltipData {\r\n  name: string\r\n  calcParamsText: string\r\n  features: TooltipFeatureStyle[]\r\n  legends: TooltipLegend[]\r\n}\r\n\r\nexport interface IndicatorCreateTooltipDataSourceParams<D> {\r\n  chart: Chart\r\n  indicator: Indicator<D>\r\n  bounding: Bounding\r\n  crosshair: Crosshair\r\n  xAxis: XAxis\r\n  yAxis: YAxis\r\n}\r\n\r\nexport type IndicatorCreateTooltipDataSourceCallback<D> = (params: IndicatorCreateTooltipDataSourceParams<D>) => IndicatorTooltipData\r\n\r\nexport type IndicatorEventTarget = 'feature'\r\n\r\nexport interface IndicatorDrawParams<D, C, E> {\r\n  ctx: CanvasRenderingContext2D\r\n  chart: Chart\r\n  indicator: Indicator<D, C, E>\r\n  bounding: Bounding\r\n  xAxis: XAxis\r\n  yAxis: YAxis\r\n}\r\n\r\nexport type IndicatorDrawCallback<D, C, E> = (params: IndicatorDrawParams<D, C, E>) => boolean\r\n\r\nexport type IndicatorCalcCallback<D, C, E> = (dataList: KLineData[], indicator: Indicator<D, C, E>) => Promise<Record<Timestamp, D>> | Record<Timestamp, D>\r\n\r\nexport type IndicatorShouldUpdateCallback<D, C, E> = (prev: Indicator<D, C, E>, current: Indicator<D, C, E>) => (boolean | { calc: boolean, draw: boolean })\r\n\r\nexport type IndicatorDataState = 'loading' | 'error' | 'ready'\r\n\r\nexport interface IndicatorOnDataStateChangeParams<D> {\r\n  state: IndicatorDataState\r\n  type: DataLoadType\r\n\r\n  indicator: Indicator<D>\r\n}\r\nexport type IndicatorOnDataStateChangeCallback<D> = (params: IndicatorOnDataStateChangeParams<D>) => void\r\n\r\nexport interface Indicator<D = unknown, C = unknown, E = unknown> {\r\n  /**\r\n   * Unique id\r\n   */\r\n  id: string\r\n\r\n  /**\r\n   * Pane id\r\n   */\r\n  paneId: string\r\n\r\n  /**\r\n   * Indicator name\r\n   */\r\n  name: string\r\n\r\n  /**\r\n   * Short name, for display\r\n   */\r\n  shortName: string\r\n\r\n  /**\r\n   * Precision\r\n   */\r\n  precision: number\r\n\r\n  /**\r\n   * Calculation parameters\r\n   */\r\n  calcParams: C[]\r\n\r\n  /**\r\n   * Whether ohlc column is required\r\n   */\r\n  shouldOhlc: boolean\r\n\r\n  /**\r\n   * Whether large data values need to be formatted, starting from 1000, for example, whether 100000 needs to be formatted with 100K\r\n   */\r\n  shouldFormatBigNumber: boolean\r\n\r\n  /**\r\n   * Whether the indicator is visible\r\n   */\r\n  visible: boolean\r\n\r\n  /**\r\n   * Z index\r\n   */\r\n  zLevel: number\r\n\r\n  /**\r\n   * Extend data\r\n   */\r\n  extendData: E\r\n\r\n  /**\r\n   * Indicator series\r\n   */\r\n  series: IndicatorSeries\r\n\r\n  /**\r\n   * Figure configuration information\r\n   */\r\n  figures: Array<IndicatorFigure<D>>\r\n\r\n  /**\r\n   * Specified minimum value\r\n   */\r\n  minValue: Nullable<number>\r\n\r\n  /**\r\n   * Specified maximum value\r\n   */\r\n  maxValue: Nullable<number>\r\n\r\n  /**\r\n   * Style configuration\r\n   */\r\n  styles: Nullable<DeepPartial<IndicatorStyle>>\r\n\r\n  /**\r\n   *  Should update, should calc or draw\r\n   */\r\n  shouldUpdate: Nullable<IndicatorShouldUpdateCallback<D, C, E>>\r\n\r\n  /**\r\n   * Indicator calculation\r\n   */\r\n  calc: IndicatorCalcCallback<D, C, E>\r\n\r\n  /**\r\n   * Regenerate figure configuration\r\n   */\r\n  regenerateFigures: Nullable<IndicatorRegenerateFiguresCallback<D, C>>\r\n\r\n  /**\r\n   * Create custom tooltip text\r\n   */\r\n  createTooltipDataSource: Nullable<IndicatorCreateTooltipDataSourceCallback<D>>\r\n\r\n  /**\r\n   * Custom draw\r\n   */\r\n  draw: Nullable<IndicatorDrawCallback<D, C, E>>\r\n\r\n  /**\r\n   * Data state change\r\n   */\r\n  onDataStateChange: Nullable<IndicatorOnDataStateChangeCallback<D>>\r\n\r\n  /**\r\n   * Calculation result\r\n   */\r\n  result: Record<Timestamp, D>\r\n}\r\n\r\nexport type IndicatorTemplate<D = unknown, C = unknown, E = unknown> = ExcludePickPartial<Omit<Indicator<D, C, E>, 'result' | 'paneId'>, 'name' | 'calc'>\r\n\r\nexport type IndicatorCreate<D = unknown, C = unknown, E = unknown> = ExcludePickPartial<Omit<Indicator<D, C, E>, 'result'>, 'name'>\r\n\r\nexport type IndicatorOverride<D = unknown, C = unknown, E = unknown> = Partial<Omit<Indicator<D, C, E>, 'result'>>\r\n\r\nexport type IndicatorFilter = Partial<Pick<Indicator, 'id' | 'paneId' | 'name'>>\r\n\r\nexport type IndicatorConstructor<D = unknown, C = unknown, E = unknown> = new () => IndicatorImp<D, C, E>\r\n\r\nexport type EachFigureCallback<D> = (figure: IndicatorFigure<D>, figureStyles: IndicatorFigureStyle, index: number) => void\r\n\r\nexport function eachFigures<D = unknown> (\r\n  indicator: Indicator,\r\n  timestamps: NeighborData<Nullable<number>>,\r\n  defaultStyles: IndicatorStyle,\r\n  eachFigureCallback: EachFigureCallback<D>\r\n): void {\r\n  const result = indicator.result\r\n  const figures = indicator.figures\r\n  const styles = indicator.styles\r\n\r\n  const circleStyles = formatValue(styles, 'circles', defaultStyles.circles) as IndicatorPolygonStyle[]\r\n  const circleStyleCount = circleStyles.length\r\n\r\n  const barStyles = formatValue(styles, 'bars', defaultStyles.bars) as IndicatorPolygonStyle[]\r\n  const barStyleCount = barStyles.length\r\n\r\n  const lineStyles = formatValue(styles, 'lines', defaultStyles.lines) as SmoothLineStyle[]\r\n  const lineStyleCount = lineStyles.length\r\n\r\n  let circleCount = 0\r\n  let barCount = 0\r\n  let lineCount = 0\r\n\r\n  // eslint-disable-next-line @typescript-eslint/init-declarations  -- ignore\r\n  let defaultFigureStyles\r\n  let figureIndex = 0\r\n  figures.forEach(figure => {\r\n    switch (figure.type) {\r\n      case 'circle': {\r\n        figureIndex = circleCount\r\n        const styles = circleStyles[circleCount % circleStyleCount]\r\n        defaultFigureStyles = { ...styles, color: styles.noChangeColor }\r\n        circleCount++\r\n        break\r\n      }\r\n      case 'bar': {\r\n        figureIndex = barCount\r\n        const styles = barStyles[barCount % barStyleCount]\r\n        defaultFigureStyles = { ...styles, color: styles.noChangeColor }\r\n        barCount++\r\n        break\r\n      }\r\n      case 'line': {\r\n        figureIndex = lineCount\r\n        defaultFigureStyles = lineStyles[lineCount % lineStyleCount]\r\n        lineCount++\r\n        break\r\n      }\r\n      default: { break }\r\n    }\r\n    if (isValid(figure.type)) {\r\n      const ss = figure.styles?.({\r\n        data: {\r\n          prev: result[timestamps.prev ?? ''],\r\n          current: result[timestamps.current ?? ''],\r\n          next: result[timestamps.next ?? '']\r\n        },\r\n        indicator,\r\n        defaultStyles\r\n      })\r\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-argument -- ignore\r\n      eachFigureCallback(figure, { ...defaultFigureStyles, ...ss }, figureIndex)\r\n    }\r\n  })\r\n}\r\n\r\nexport default class IndicatorImp<D = unknown, C = unknown, E = unknown> implements Indicator<D, C, E> {\r\n  id: string\r\n  paneId: string\r\n  name: string\r\n  shortName: string\r\n  precision = 4\r\n  calcParams: C[] = []\r\n  shouldOhlc = false\r\n  shouldFormatBigNumber = false\r\n  visible = true\r\n  zLevel = 0\r\n  extendData: E\r\n  series: IndicatorSeries = 'normal'\r\n  figures: Array<IndicatorFigure<D>> = []\r\n  minValue: Nullable<number> = null\r\n  maxValue: Nullable<number> = null\r\n  styles: Nullable<Partial<IndicatorStyle>> = null\r\n  shouldUpdate: IndicatorShouldUpdateCallback<D, C, E> = (prev, current) => {\r\n    const calc = JSON.stringify(prev.calcParams) !== JSON.stringify(current.calcParams) ||\r\n      prev.figures !== current.figures ||\r\n      prev.calc !== current.calc\r\n    const draw = calc ||\r\n      prev.shortName !== current.shortName ||\r\n      prev.series !== current.series ||\r\n      prev.minValue !== current.minValue ||\r\n      prev.maxValue !== current.maxValue ||\r\n      prev.precision !== current.precision ||\r\n      prev.shouldOhlc !== current.shouldOhlc ||\r\n      prev.shouldFormatBigNumber !== current.shouldFormatBigNumber ||\r\n      prev.visible !== current.visible ||\r\n      prev.zLevel !== current.zLevel ||\r\n      prev.extendData !== current.extendData ||\r\n      prev.regenerateFigures !== current.regenerateFigures ||\r\n      prev.createTooltipDataSource !== current.createTooltipDataSource ||\r\n      prev.draw !== current.draw\r\n\r\n    return { calc, draw }\r\n  }\r\n\r\n  calc: IndicatorCalcCallback<D, C, E> = () => ({})\r\n  regenerateFigures: Nullable<IndicatorRegenerateFiguresCallback<D, C>> = null\r\n  createTooltipDataSource: Nullable<IndicatorCreateTooltipDataSourceCallback<D>> = null\r\n  draw: Nullable<IndicatorDrawCallback<D, C, E>> = null\r\n\r\n  onDataStateChange: Nullable<IndicatorOnDataStateChangeCallback<D>> = null\r\n\r\n  result: Record<Timestamp, D> = {}\r\n\r\n  private _prevIndicator: Indicator<D, C, E>\r\n  private _lockSeriesPrecision = false\r\n\r\n  constructor (indicator: IndicatorTemplate<D, C, E>) {\r\n    this.override(indicator)\r\n    this._lockSeriesPrecision = false\r\n  }\r\n\r\n  override (indicator: Partial<Indicator<D, C, E>>): void {\r\n    const { result, ...currentOthers } = this\r\n    this._prevIndicator = { ...clone(currentOthers), result }\r\n    const {\r\n      id,\r\n      name,\r\n      shortName,\r\n      precision,\r\n      styles,\r\n      figures,\r\n      calcParams,\r\n      ...others\r\n    } = indicator\r\n    if (!isString(this.id) && isString(id)) {\r\n      this.id = id\r\n    }\r\n    if (!isString(this.name)) {\r\n      this.name = name ?? ''\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition  -- ignore\r\n    this.shortName = shortName ?? this.shortName ?? this.name\r\n    if (isNumber(precision)) {\r\n      this.precision = precision\r\n      this._lockSeriesPrecision = true\r\n    }\r\n\r\n    if (isValid(styles)) {\r\n      this.styles ??= {}\r\n      merge(this.styles, styles)\r\n    }\r\n    merge(this, others)\r\n    if (isValid(calcParams)) {\r\n      this.calcParams = calcParams\r\n      if (isFunction(this.regenerateFigures)) {\r\n        this.figures = this.regenerateFigures(this.calcParams)\r\n      }\r\n    }\r\n    this.figures = figures ?? this.figures\r\n  }\r\n\r\n  setSeriesPrecision (precision: number): void {\r\n    if (!this._lockSeriesPrecision) {\r\n      this.precision = precision\r\n    }\r\n  }\r\n\r\n  shouldUpdateImp (): ({ calc: boolean, draw: boolean, sort: boolean }) {\r\n    const sort = this._prevIndicator.zLevel !== this.zLevel\r\n    const result = this.shouldUpdate(this._prevIndicator, this)\r\n    if (isBoolean(result)) {\r\n      return { calc: result, draw: result, sort }\r\n    }\r\n    return { ...result, sort }\r\n  }\r\n\r\n  async calcImp (dataList: KLineData[]): Promise<boolean> {\r\n    try {\r\n      const result = await this.calc(dataList, this)\r\n      this.result = result\r\n      return true\r\n    } catch (e) {\r\n      return false\r\n    }\r\n  }\r\n\r\n  static extend<D = unknown> (template: IndicatorTemplate<D>): IndicatorConstructor<D> {\r\n    class Custom extends IndicatorImp<D> {\r\n      constructor () {\r\n        super(template)\r\n      }\r\n    }\r\n    return Custom\r\n  }\r\n}\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport type { IndicatorTemplate } from '../../component/Indicator'\r\n\r\ninterface Avp {\r\n  avp?: number\r\n}\r\n\r\n/**\r\n * average price\r\n */\r\nconst averagePrice: IndicatorTemplate<Avp> = {\r\n  name: 'AVP',\r\n  shortName: 'AVP',\r\n  series: 'price',\r\n  precision: 2,\r\n  figures: [\r\n    { key: 'avp', title: 'AVP: ', type: 'line' }\r\n  ],\r\n  calc: (dataList) => {\r\n    let totalTurnover = 0\r\n    let totalVolume = 0\r\n    return dataList.reduce((prev, kLineData) => {\r\n      const avp: Avp = {}\r\n      const turnover = kLineData.turnover ?? 0\r\n      const volume = kLineData.volume ?? 0\r\n      totalTurnover += turnover\r\n      totalVolume += volume\r\n      if (totalVolume !== 0) {\r\n        avp.avp = totalTurnover / totalVolume\r\n      }\r\n      prev[kLineData.timestamp] = avp\r\n      return prev\r\n    }, {})\r\n  }\r\n}\r\n\r\nexport default averagePrice\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport { formatValue } from '../../common/utils/format'\r\n\r\nimport type { IndicatorTemplate } from '../../component/Indicator'\r\n\r\ninterface Ao {\r\n  ao?: number\r\n}\r\n\r\nconst awesomeOscillator: IndicatorTemplate<Ao, number> = {\r\n  name: 'AO',\r\n  shortName: 'AO',\r\n  calcParams: [5, 34],\r\n  figures: [{\r\n    key: 'ao',\r\n    title: 'AO: ',\r\n    type: 'bar',\r\n    baseValue: 0,\r\n    styles: ({ data, indicator, defaultStyles }) => {\r\n      const { prev, current } = data\r\n      const prevAo = prev?.ao ?? Number.MIN_SAFE_INTEGER\r\n      const currentAo = current?.ao ?? Number.MIN_SAFE_INTEGER\r\n      let color = ''\r\n      if (currentAo > prevAo) {\r\n        color = formatValue(indicator.styles, 'bars[0].upColor', (defaultStyles!.bars)[0].upColor) as string\r\n      } else {\r\n        color = formatValue(indicator.styles, 'bars[0].downColor', (defaultStyles!.bars)[0].downColor) as string\r\n      }\r\n      const style = currentAo > prevAo ? 'stroke' : 'fill'\r\n      return { color, style, borderColor: color }\r\n    }\r\n  }],\r\n  calc: (dataList, indicator) => {\r\n    const params = indicator.calcParams\r\n    const maxPeriod = Math.max(params[0], params[1])\r\n    let shortSum = 0\r\n    let longSum = 0\r\n    let short = 0\r\n    let long = 0\r\n    return dataList.reduce((prev, kLineData, i) => {\r\n      const ao: Ao = {}\r\n      const middle = (kLineData.low + kLineData.high) / 2\r\n      shortSum += middle\r\n      longSum += middle\r\n      if (i >= params[0] - 1) {\r\n        short = shortSum / params[0]\r\n        const agoKLineData = dataList[i - (params[0] - 1)]\r\n        shortSum -= ((agoKLineData.low + agoKLineData.high) / 2)\r\n      }\r\n      if (i >= params[1] - 1) {\r\n        long = longSum / params[1]\r\n        const agoKLineData = dataList[i - (params[1] - 1)]\r\n        longSum -= ((agoKLineData.low + agoKLineData.high) / 2)\r\n      }\r\n      if (i >= maxPeriod - 1) {\r\n        ao.ao = short - long\r\n      }\r\n      prev[kLineData.timestamp] = ao\r\n      return prev\r\n    }, {})\r\n  }\r\n}\r\n\r\nexport default awesomeOscillator\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport type { IndicatorTemplate } from '../../component/Indicator'\r\n\r\ninterface Bias {\r\n  bias1?: number\r\n  bias2?: number\r\n  bias3?: number\r\n}\r\n\r\n/**\r\n * BIAS\r\n * ‰πñÁ¶ªÁéá=[(ÂΩìÊó•Êî∂Áõò‰ª∑-NÊó•Âπ≥Âùá‰ª∑)/NÊó•Âπ≥Âùá‰ª∑]*100%\r\n */\r\nconst bias: IndicatorTemplate<Bias, number> = {\r\n  name: 'BIAS',\r\n  shortName: 'BIAS',\r\n  calcParams: [6, 12, 24],\r\n  figures: [\r\n    { key: 'bias1', title: 'BIAS6: ', type: 'line' },\r\n    { key: 'bias2', title: 'BIAS12: ', type: 'line' },\r\n    { key: 'bias3', title: 'BIAS24: ', type: 'line' }\r\n  ],\r\n  regenerateFigures: (params) => params.map((p, i) => ({ key: `bias${i + 1}`, title: `BIAS${p}: `, type: 'line' })),\r\n  calc: (dataList, indicator) => {\r\n    const { calcParams: params, figures } = indicator\r\n    const closeSums: number[] = []\r\n    return dataList.reduce((prev, kLineData, i) => {\r\n      const bias: Bias = {}\r\n      const close = kLineData.close\r\n      params.forEach((p, index) => {\r\n        closeSums[index] = (closeSums[index] ?? 0) + close\r\n        if (i >= p - 1) {\r\n          const mean = closeSums[index] / params[index]\r\n          bias[figures[index].key] = (close - mean) / mean * 100\r\n\r\n          closeSums[index] -= dataList[i - (p - 1)].close\r\n        }\r\n      })\r\n      prev[kLineData.timestamp] = bias\r\n      return prev\r\n    }, {})\r\n  }\r\n}\r\n\r\nexport default bias\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport type { KLineData } from '../../common/Data'\r\nimport type { IndicatorTemplate } from '../../component/Indicator'\r\n\r\ninterface Boll {\r\n  up?: number\r\n  mid?: number\r\n  dn?: number\r\n}\r\n\r\n/**\r\n * ËÆ°ÁÆóÂ∏ÉÊûóÊåáÊ†á‰∏≠ÁöÑÊ†áÂáÜÂ∑Æ\r\n * @param dataList\r\n * @param ma\r\n * @return {number}\r\n */\r\nfunction getBollMd (dataList: KLineData[], ma: number): number {\r\n  const dataSize = dataList.length\r\n  let sum = 0\r\n  dataList.forEach(data => {\r\n    const closeMa = data.close - ma\r\n    sum += closeMa * closeMa\r\n  })\r\n  sum = Math.abs(sum)\r\n  return Math.sqrt(sum / dataSize)\r\n}\r\n\r\n/**\r\n * BOLL\r\n */\r\nconst bollingerBands: IndicatorTemplate<Boll, number> = {\r\n  name: 'BOLL',\r\n  shortName: 'BOLL',\r\n  series: 'price',\r\n  calcParams: [20, 2],\r\n  precision: 2,\r\n  shouldOhlc: true,\r\n  figures: [\r\n    { key: 'up', title: 'UP: ', type: 'line' },\r\n    { key: 'mid', title: 'MID: ', type: 'line' },\r\n    { key: 'dn', title: 'DN: ', type: 'line' }\r\n  ],\r\n  calc: (dataList, indicator) => {\r\n    const params = indicator.calcParams\r\n    const p = params[0] - 1\r\n    let closeSum = 0\r\n    return dataList.reduce((prev, kLineData, i) => {\r\n      const close = kLineData.close\r\n      const boll: Boll = {}\r\n      closeSum += close\r\n      if (i >= p) {\r\n        boll.mid = closeSum / params[0]\r\n        const md = getBollMd(dataList.slice(i - p, i + 1), boll.mid)\r\n        boll.up = boll.mid + params[1] * md\r\n        boll.dn = boll.mid - params[1] * md\r\n        closeSum -= dataList[i - p].close\r\n      }\r\n      prev[kLineData.timestamp] = boll\r\n      return prev\r\n    }, {})\r\n  }\r\n}\r\n\r\nexport default bollingerBands\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport type { IndicatorTemplate } from '../../component/Indicator'\r\n\r\ninterface Brar {\r\n  br?: number\r\n  ar?: number\r\n}\r\n\r\n/**\r\n * BRAR\r\n * ÈªòËÆ§ÂèÇÊï∞ÊòØ26„ÄÇ\r\n * ÂÖ¨ÂºèNÊó•BR=NÊó•ÂÜÖÔºàHÔºçCYÔºâ‰πãÂíåÈô§‰ª•NÊó•ÂÜÖÔºàCYÔºçLÔºâ‰πãÂíå*100Ôºå\r\n * ÂÖ∂‰∏≠ÔºåH‰∏∫ÂΩìÊó•ÊúÄÈ´ò‰ª∑ÔºåL‰∏∫ÂΩìÊó•ÊúÄ‰Ωé‰ª∑ÔºåCY‰∏∫Ââç‰∏Ä‰∫§ÊòìÊó•ÁöÑÊî∂Áõò‰ª∑ÔºåN‰∏∫ËÆæÂÆöÁöÑÊó∂Èó¥ÂèÇÊï∞„ÄÇ\r\n * NÊó•AR=(NÊó•ÂÜÖÔºàHÔºçOÔºâ‰πãÂíåÈô§‰ª•NÊó•ÂÜÖÔºàOÔºçLÔºâ‰πãÂíå)*100Ôºå\r\n * ÂÖ∂‰∏≠ÔºåH‰∏∫ÂΩìÊó•ÊúÄÈ´ò‰ª∑ÔºåL‰∏∫ÂΩìÊó•ÊúÄ‰Ωé‰ª∑ÔºåO‰∏∫ÂΩìÊó•ÂºÄÁõò‰ª∑ÔºåN‰∏∫ËÆæÂÆöÁöÑÊó∂Èó¥ÂèÇÊï∞\r\n *\r\n */\r\nconst brar: IndicatorTemplate<Brar, number> = {\r\n  name: 'BRAR',\r\n  shortName: 'BRAR',\r\n  calcParams: [26],\r\n  figures: [\r\n    { key: 'br', title: 'BR: ', type: 'line' },\r\n    { key: 'ar', title: 'AR: ', type: 'line' }\r\n  ],\r\n  calc: (dataList, indicator) => {\r\n    const params = indicator.calcParams\r\n    let hcy = 0\r\n    let cyl = 0\r\n    let ho = 0\r\n    let ol = 0\r\n    return dataList.reduce((prev, kLineData, i) => {\r\n      const brar: Brar = {}\r\n      const high = kLineData.high\r\n      const low = kLineData.low\r\n      const open = kLineData.open\r\n      const prevClose = (dataList[i - 1] ?? kLineData).close\r\n      ho += (high - open)\r\n      ol += (open - low)\r\n      hcy += (high - prevClose)\r\n      cyl += (prevClose - low)\r\n      if (i >= params[0] - 1) {\r\n        if (ol !== 0) {\r\n          brar.ar = ho / ol * 100\r\n        } else {\r\n          brar.ar = 0\r\n        }\r\n        if (cyl !== 0) {\r\n          brar.br = hcy / cyl * 100\r\n        } else {\r\n          brar.br = 0\r\n        }\r\n        const agoKLineData = dataList[i - (params[0] - 1)]\r\n        const agoHigh = agoKLineData.high\r\n        const agoLow = agoKLineData.low\r\n        const agoOpen = agoKLineData.open\r\n        const agoPreClose = (dataList[i - params[0]] ?? dataList[i - (params[0] - 1)]).close\r\n        hcy -= (agoHigh - agoPreClose)\r\n        cyl -= (agoPreClose - agoLow)\r\n        ho -= (agoHigh - agoOpen)\r\n        ol -= (agoOpen - agoLow)\r\n      }\r\n      prev[kLineData.timestamp] = brar\r\n      return prev\r\n    }, {})\r\n  }\r\n}\r\n\r\nexport default brar\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nimport type { IndicatorTemplate } from '../../component/Indicator'\r\n\r\ninterface Bbi {\r\n  bbi?: number\r\n}\r\n\r\n/**\r\n * Â§öÁ©∫ÊåáÊ†á\r\n * ÂÖ¨Âºè: BBI = (MA(CLOSE, M) + MA(CLOSE, N) + MA(CLOSE, O) + MA(CLOSE, P)) / 4\r\n *\r\n */\r\nconst bullAndBearIndex: IndicatorTemplate<Bbi, number> = {\r\n  name: 'BBI',\r\n  shortName: 'BBI',\r\n  series: 'price',\r\n  precision: 2,\r\n  calcParams: [3, 6, 12, 24],\r\n  shouldOhlc: true,\r\n  figures: [\r\n    { key: 'bbi', title: 'BBI: ', type: 'line' }\r\n  ],\r\n  calc: (dataList, indicator) => {\r\n    const params = indicator.calcParams\r\n    const maxPeriod = Math.max(...params)\r\n    const closeSums: number[] = []\r\n    const mas: number[] = []\r\n    return dataList.reduce((prev, kLineData, i) => {\r\n      const bbi: Bbi = {}\r\n      const close = kLineData.close\r\n      params.forEach((p, index) => {\r\n        closeSums[index] = (closeSums[index] ?? 0) + close\r\n        if (i >= p - 1) {\r\n          mas[index] = closeSums[index] / p\r\n          closeSums[index] -= dataList[i - (p - 1)].close\r\n        }\r\n      })\r\n      if (i >= maxPeriod - 1) {\r\n        let maSum = 0\r\n        mas.forEach(ma => {\r\n          maSum += ma\r\n        })\r\n        bbi.bbi = maSum / 4\r\n      }\r\n      prev[kLineData.timestamp] = bbi\r\n      return prev\r\n    }, {})\r\n  }\r\n}\r\n\r\nexport default bullAndBearIndex\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport type { IndicatorTemplate } from '../../component/Indicator'\r\n\r\ninterface Cci {\r\n  cci?: number\r\n}\r\n\r\n/**\r\n * CCI\r\n * CCIÔºàNÊó•Ôºâ=ÔºàTPÔºçMAÔºâ√∑MD√∑0.015\r\n * ÂÖ∂‰∏≠ÔºåTP=ÔºàÊúÄÈ´ò‰ª∑+ÊúÄ‰Ωé‰ª∑+Êî∂Áõò‰ª∑Ôºâ√∑3\r\n * MA=ËøëNÊó•TP‰ª∑ÁöÑÁ¥ØËÆ°‰πãÂíå√∑N\r\n * MD=ËøëNÊó•TP - ÂΩìÂâçMAÁªùÂØπÂÄºÁöÑÁ¥ØËÆ°‰πãÂíå√∑N\r\n *\r\n */\r\nconst commodityChannelIndex: IndicatorTemplate<Cci, number> = {\r\n  name: 'CCI',\r\n  shortName: 'CCI',\r\n  calcParams: [20],\r\n  figures: [\r\n    { key: 'cci', title: 'CCI: ', type: 'line' }\r\n  ],\r\n  calc: (dataList, indicator) => {\r\n    const params = indicator.calcParams\r\n    const p = params[0] - 1\r\n    let tpSum = 0\r\n    const tpList: number[] = []\r\n    return dataList.reduce((prev, kLineData, i) => {\r\n      const cci: Cci = {}\r\n      const tp = (kLineData.high + kLineData.low + kLineData.close) / 3\r\n      tpSum += tp\r\n      tpList.push(tp)\r\n      if (i >= p) {\r\n        const maTp = tpSum / params[0]\r\n        const sliceTpList = tpList.slice(i - p, i + 1)\r\n        let sum = 0\r\n        sliceTpList.forEach(tp => {\r\n          sum += Math.abs(tp - maTp)\r\n        })\r\n        const md = sum / params[0]\r\n        cci.cci = md !== 0 ? (tp - maTp) / md / 0.015 : 0\r\n        const agoTp = (dataList[i - p].high + dataList[i - p].low + dataList[i - p].close) / 3\r\n        tpSum -= agoTp\r\n      }\r\n      prev[kLineData.timestamp] = cci\r\n      return prev\r\n    }, {})\r\n  }\r\n}\r\n\r\nexport default commodityChannelIndex\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http:*www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport type { IndicatorTemplate } from '../../component/Indicator'\r\n\r\ninterface Cr {\r\n  cr?: number\r\n  ma1?: number\r\n  ma2?: number\r\n  ma3?: number\r\n  ma4?: number\r\n}\r\n\r\n/**\r\n * MID:=REF(HIGH+LOW,1)/2;\r\n * CR:SUM(MAX(0,HIGH-MID),N)/SUM(MAX(0,MID-LOW),N)*100;\r\n * MA1:REF(MA(CR,M1),M1/2.5+1);\r\n * MA2:REF(MA(CR,M2),M2/2.5+1);\r\n * MA3:REF(MA(CR,M3),M3/2.5+1);\r\n * MA4:REF(MA(CR,M4),M4/2.5+1);\r\n * MIDËµãÂÄº:(Êò®Êó•ÊúÄÈ´ò‰ª∑+Êò®Êó•ÊúÄ‰Ωé‰ª∑)/2\r\n * ËæìÂá∫Â∏¶Áä∂ËÉΩÈáèÁ∫ø:0ÂíåÊúÄÈ´ò‰ª∑-MIDÁöÑËæÉÂ§ßÂÄºÁöÑNÊó•Á¥ØÂíå/0ÂíåMID-ÊúÄ‰Ωé‰ª∑ÁöÑËæÉÂ§ßÂÄºÁöÑNÊó•Á¥ØÂíå*100\r\n * ËæìÂá∫MA1:M1(5)/2.5+1Êó•ÂâçÁöÑCRÁöÑM1(5)Êó•ÁÆÄÂçïÁßªÂä®Âπ≥Âùá\r\n * ËæìÂá∫MA2:M2(10)/2.5+1Êó•ÂâçÁöÑCRÁöÑM2(10)Êó•ÁÆÄÂçïÁßªÂä®Âπ≥Âùá\r\n * ËæìÂá∫MA3:M3(20)/2.5+1Êó•ÂâçÁöÑCRÁöÑM3(20)Êó•ÁÆÄÂçïÁßªÂä®Âπ≥Âùá\r\n * ËæìÂá∫MA4:M4/2.5+1Êó•ÂâçÁöÑCRÁöÑM4Êó•ÁÆÄÂçïÁßªÂä®Âπ≥Âùá\r\n *\r\n */\r\nconst currentRatio: IndicatorTemplate<Cr, number> = {\r\n  name: 'CR',\r\n  shortName: 'CR',\r\n  calcParams: [26, 10, 20, 40, 60],\r\n  figures: [\r\n    { key: 'cr', title: 'CR: ', type: 'line' },\r\n    { key: 'ma1', title: 'MA1: ', type: 'line' },\r\n    { key: 'ma2', title: 'MA2: ', type: 'line' },\r\n    { key: 'ma3', title: 'MA3: ', type: 'line' },\r\n    { key: 'ma4', title: 'MA4: ', type: 'line' }\r\n  ],\r\n  calc: (dataList, indicator) => {\r\n    const params = indicator.calcParams\r\n\r\n    const ma1ForwardPeriod = Math.ceil(params[1] / 2.5 + 1)\r\n    const ma2ForwardPeriod = Math.ceil(params[2] / 2.5 + 1)\r\n    const ma3ForwardPeriod = Math.ceil(params[3] / 2.5 + 1)\r\n    const ma4ForwardPeriod = Math.ceil(params[4] / 2.5 + 1)\r\n    let ma1Sum = 0\r\n    const ma1List: number[] = []\r\n    let ma2Sum = 0\r\n    const ma2List: number[] = []\r\n    let ma3Sum = 0\r\n    const ma3List: number[] = []\r\n    let ma4Sum = 0\r\n    const ma4List: number[] = []\r\n    const crList: Cr[] = []\r\n    const result: Record<number, Cr> = {}\r\n    dataList.forEach((kLineData, i) => {\r\n      const cr: Cr = {}\r\n      const prevData = dataList[i - 1] ?? kLineData\r\n      const prevMid = (prevData.high + prevData.close + prevData.low + prevData.open) / 4\r\n\r\n      const highSubPreMid = Math.max(0, kLineData.high - prevMid)\r\n\r\n      const preMidSubLow = Math.max(0, prevMid - kLineData.low)\r\n\r\n      if (i >= params[0] - 1) {\r\n        if (preMidSubLow !== 0) {\r\n          cr.cr = highSubPreMid / preMidSubLow * 100\r\n        } else {\r\n          cr.cr = 0\r\n        }\r\n        ma1Sum += cr.cr\r\n        ma2Sum += cr.cr\r\n        ma3Sum += cr.cr\r\n        ma4Sum += cr.cr\r\n        if (i >= params[0] + params[1] - 2) {\r\n          ma1List.push(ma1Sum / params[1])\r\n          if (i >= params[0] + params[1] + ma1ForwardPeriod - 3) {\r\n            cr.ma1 = ma1List[ma1List.length - 1 - ma1ForwardPeriod]\r\n          }\r\n          ma1Sum -= (crList[i - (params[1] - 1)].cr ?? 0)\r\n        }\r\n        if (i >= params[0] + params[2] - 2) {\r\n          ma2List.push(ma2Sum / params[2])\r\n          if (i >= params[0] + params[2] + ma2ForwardPeriod - 3) {\r\n            cr.ma2 = ma2List[ma2List.length - 1 - ma2ForwardPeriod]\r\n          }\r\n          ma2Sum -= (crList[i - (params[2] - 1)].cr ?? 0)\r\n        }\r\n        if (i >= params[0] + params[3] - 2) {\r\n          ma3List.push(ma3Sum / params[3])\r\n          if (i >= params[0] + params[3] + ma3ForwardPeriod - 3) {\r\n            cr.ma3 = ma3List[ma3List.length - 1 - ma3ForwardPeriod]\r\n          }\r\n          ma3Sum -= (crList[i - (params[3] - 1)].cr ?? 0)\r\n        }\r\n        if (i >= params[0] + params[4] - 2) {\r\n          ma4List.push(ma4Sum / params[4])\r\n          if (i >= params[0] + params[4] + ma4ForwardPeriod - 3) {\r\n            cr.ma4 = ma4List[ma4List.length - 1 - ma4ForwardPeriod]\r\n          }\r\n          ma4Sum -= (crList[i - (params[4] - 1)].cr ?? 0)\r\n        }\r\n      }\r\n      crList.push(cr)\r\n      result[kLineData.timestamp] = cr\r\n    })\r\n    return result\r\n  }\r\n}\r\nexport default currentRatio\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport type { IndicatorTemplate } from '../../component/Indicator'\r\n\r\ninterface Dma {\r\n  dma?: number\r\n  ama?: number\r\n}\r\n\r\n/**\r\n * DMA\r\n * ÂÖ¨ÂºèÔºöDIF:MA(CLOSE,N1)-MA(CLOSE,N2);DIFMA:MA(DIF,M)\r\n */\r\nconst differentOfMovingAverage: IndicatorTemplate<Dma, number> = {\r\n  name: 'DMA',\r\n  shortName: 'DMA',\r\n  calcParams: [10, 50, 10],\r\n  figures: [\r\n    { key: 'dma', title: 'DMA: ', type: 'line' },\r\n    { key: 'ama', title: 'AMA: ', type: 'line' }\r\n  ],\r\n  calc: (dataList, indicator) => {\r\n    const params = indicator.calcParams\r\n    const maxPeriod = Math.max(params[0], params[1])\r\n    let closeSum1 = 0\r\n    let closeSum2 = 0\r\n    let dmaSum = 0\r\n    const dmaList: Dma[] = []\r\n    const result: Record<number, Dma> = {}\r\n    dataList.forEach((kLineData, i) => {\r\n      const dma: Dma = {}\r\n      const close = kLineData.close\r\n      closeSum1 += close\r\n      closeSum2 += close\r\n      let ma1 = 0\r\n      let ma2 = 0\r\n      if (i >= params[0] - 1) {\r\n        ma1 = closeSum1 / params[0]\r\n        closeSum1 -= dataList[i - (params[0] - 1)].close\r\n      }\r\n      if (i >= params[1] - 1) {\r\n        ma2 = closeSum2 / params[1]\r\n        closeSum2 -= dataList[i - (params[1] - 1)].close\r\n      }\r\n\r\n      if (i >= maxPeriod - 1) {\r\n        const dif = ma1 - ma2\r\n        dma.dma = dif\r\n        dmaSum += dif\r\n        if (i >= maxPeriod + params[2] - 2) {\r\n          dma.ama = dmaSum / params[2]\r\n          dmaSum -= (dmaList[i - (params[2] - 1)].dma ?? 0)\r\n        }\r\n      }\r\n      dmaList.push(dma)\r\n      result[kLineData.timestamp] = dma\r\n    })\r\n    return result\r\n  }\r\n}\r\n\r\nexport default differentOfMovingAverage\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport type { IndicatorTemplate } from '../../component/Indicator'\r\n\r\ninterface Dmi {\r\n  pdi?: number\r\n  mdi?: number\r\n  adx?: number\r\n  adxr?: number\r\n}\r\n\r\n/**\r\n * DMI\r\n *\r\n * MTR:=EXPMEMA(MAX(MAX(HIGH-LOW,ABS(HIGH-REF(CLOSE,1))),ABS(REF(CLOSE,1)-LOW)),N)\r\n * HD :=HIGH-REF(HIGH,1);\r\n * LD :=REF(LOW,1)-LOW;\r\n * DMP:=EXPMEMA(IF(HD>0&&HD>LD,HD,0),N);\r\n * DMM:=EXPMEMA(IF(LD>0&&LD>HD,LD,0),N);\r\n *\r\n * PDI: DMP*100/MTR;\r\n * MDI: DMM*100/MTR;\r\n * ADX: EXPMEMA(ABS(MDI-PDI)/(MDI+PDI)*100,MM);\r\n * ADXR:EXPMEMA(ADX,MM);\r\n * ÂÖ¨ÂºèÂê´‰πâÔºö\r\n * MTRËµãÂÄº:ÊúÄÈ´ò‰ª∑-ÊúÄ‰Ωé‰ª∑ÂíåÊúÄÈ´ò‰ª∑-Êò®Êî∂ÁöÑÁªùÂØπÂÄºÁöÑËæÉÂ§ßÂÄºÂíåÊò®Êî∂-ÊúÄ‰Ωé‰ª∑ÁöÑÁªùÂØπÂÄºÁöÑËæÉÂ§ßÂÄºÁöÑNÊó•ÊåáÊï∞Âπ≥ÊªëÁßªÂä®Âπ≥Âùá\r\n * HDËµãÂÄº:ÊúÄÈ´ò‰ª∑-Êò®Êó•ÊúÄÈ´ò‰ª∑\r\n * LDËµãÂÄº:Êò®Êó•ÊúÄ‰Ωé‰ª∑-ÊúÄ‰Ωé‰ª∑\r\n * DMPËµãÂÄº:Â¶ÇÊûúHD>0Âπ∂‰∏îHD>LD,ËøîÂõûHD,Âê¶ÂàôËøîÂõû0ÁöÑNÊó•ÊåáÊï∞Âπ≥ÊªëÁßªÂä®Âπ≥Âùá\r\n * DMMËµãÂÄº:Â¶ÇÊûúLD>0Âπ∂‰∏îLD>HD,ËøîÂõûLD,Âê¶ÂàôËøîÂõû0ÁöÑNÊó•ÊåáÊï∞Âπ≥ÊªëÁßªÂä®Âπ≥Âùá\r\n * ËæìÂá∫PDI:DMP*100/MTR\r\n * ËæìÂá∫MDI:DMM*100/MTR\r\n * ËæìÂá∫ADX:MDI-PDIÁöÑÁªùÂØπÂÄº/(MDI+PDI)*100ÁöÑMMÊó•ÊåáÊï∞Âπ≥ÊªëÁßªÂä®Âπ≥Âùá\r\n * ËæìÂá∫ADXR:ADXÁöÑMMÊó•ÊåáÊï∞Âπ≥ÊªëÁßªÂä®Âπ≥Âùá\r\n *\r\n */\r\nconst directionalMovementIndex: IndicatorTemplate<Dmi, number> = {\r\n  name: 'DMI',\r\n  shortName: 'DMI',\r\n  calcParams: [14, 6],\r\n  figures: [\r\n    { key: 'pdi', title: 'PDI: ', type: 'line' },\r\n    { key: 'mdi', title: 'MDI: ', type: 'line' },\r\n    { key: 'adx', title: 'ADX: ', type: 'line' },\r\n    { key: 'adxr', title: 'ADXR: ', type: 'line' }\r\n  ],\r\n  calc: (dataList, indicator) => {\r\n    const params = indicator.calcParams\r\n    let trSum = 0\r\n    let hSum = 0\r\n    let lSum = 0\r\n    let mtr = 0\r\n    let dmp = 0\r\n    let dmm = 0\r\n    let dxSum = 0\r\n    let adx = 0\r\n    const dmiList: Dmi[] = []\r\n    const result: Record<number, Dmi> = {}\r\n    dataList.forEach((kLineData, i) => {\r\n      const dmi: Dmi = {}\r\n      const prevKLineData = dataList[i - 1] ?? kLineData\r\n      const preClose = prevKLineData.close\r\n      const high = kLineData.high\r\n      const low = kLineData.low\r\n      const hl = high - low\r\n      const hcy = Math.abs(high - preClose)\r\n      const lcy = Math.abs(preClose - low)\r\n      const hhy = high - prevKLineData.high\r\n      const lyl = prevKLineData.low - low\r\n      const tr = Math.max(Math.max(hl, hcy), lcy)\r\n      const h = (hhy > 0 && hhy > lyl) ? hhy : 0\r\n      const l = (lyl > 0 && lyl > hhy) ? lyl : 0\r\n      trSum += tr\r\n      hSum += h\r\n      lSum += l\r\n      if (i >= params[0] - 1) {\r\n        if (i > params[0] - 1) {\r\n          mtr = mtr - mtr / params[0] + tr\r\n          dmp = dmp - dmp / params[0] + h\r\n          dmm = dmm - dmm / params[0] + l\r\n        } else {\r\n          mtr = trSum\r\n          dmp = hSum\r\n          dmm = lSum\r\n        }\r\n        let pdi = 0\r\n        let mdi = 0\r\n        if (mtr !== 0) {\r\n          pdi = dmp * 100 / mtr\r\n          mdi = dmm * 100 / mtr\r\n        }\r\n        dmi.pdi = pdi\r\n        dmi.mdi = mdi\r\n        let dx = 0\r\n        if (mdi + pdi !== 0) {\r\n          dx = Math.abs((mdi - pdi)) / (mdi + pdi) * 100\r\n        }\r\n        dxSum += dx\r\n        if (i >= params[0] * 2 - 2) {\r\n          if (i > params[0] * 2 - 2) {\r\n            adx = (adx * (params[0] - 1) + dx) / params[0]\r\n          } else {\r\n            adx = dxSum / params[0]\r\n          }\r\n          dmi.adx = adx\r\n          if (i >= params[0] * 2 + params[1] - 3) {\r\n            dmi.adxr = ((dmiList[i - (params[1] - 1)].adx ?? 0) + adx) / 2\r\n          }\r\n        }\r\n      }\r\n      dmiList.push(dmi)\r\n      result[kLineData.timestamp] = dmi\r\n    })\r\n    return result\r\n  }\r\n}\r\n\r\nexport default directionalMovementIndex\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport type { IndicatorTemplate } from '../../component/Indicator'\r\n\r\ninterface Emv {\r\n  emv?: number\r\n  maEmv?: number\r\n}\r\n\r\n/**\r\n *\r\n * EMV ÁÆÄÊòìÊ≥¢Âä®ÊåáÊ†á\r\n * ÂÖ¨ÂºèÔºö\r\n * A=Ôºà‰ªäÊó•ÊúÄÈ´ò+‰ªäÊó•ÊúÄ‰ΩéÔºâ/2\r\n * B=ÔºàÂâçÊó•ÊúÄÈ´ò+ÂâçÊó•ÊúÄ‰ΩéÔºâ/2\r\n * C=‰ªäÊó•ÊúÄÈ´ò-‰ªäÊó•ÊúÄ‰Ωé\r\n * EM=ÔºàA-BÔºâ*C/‰ªäÊó•Êàê‰∫§È¢ù\r\n * EMV=NÊó•ÂÜÖEMÁöÑÁ¥ØÂíå\r\n * MAEMV=EMVÁöÑMÊó•ÁöÑÁÆÄÂçïÁßªÂä®Âπ≥Âùá\r\n *\r\n */\r\nconst easeOfMovementValue: IndicatorTemplate<Emv, number> = {\r\n  name: 'EMV',\r\n  shortName: 'EMV',\r\n  calcParams: [14, 9],\r\n  figures: [\r\n    { key: 'emv', title: 'EMV: ', type: 'line' },\r\n    { key: 'maEmv', title: 'MAEMV: ', type: 'line' }\r\n  ],\r\n  calc: (dataList, indicator) => {\r\n    const params = indicator.calcParams\r\n    let emvValueSum = 0\r\n    const emvValueList: number[] = []\r\n    return dataList.reduce((prev, kLineData, i) => {\r\n      const emv: Emv = {}\r\n      if (i > 0) {\r\n        const prevKLineData = dataList[i - 1]\r\n        const high = kLineData.high\r\n        const low = kLineData.low\r\n        const volume = kLineData.volume ?? 0\r\n        const distanceMoved = (high + low) / 2 - (prevKLineData.high + prevKLineData.low) / 2\r\n\r\n        if (volume === 0 || high - low === 0) {\r\n          emv.emv = 0\r\n        } else {\r\n          const ratio = volume / 100000000 / (high - low)\r\n          emv.emv = distanceMoved / ratio\r\n        }\r\n        emvValueSum += emv.emv\r\n        emvValueList.push(emv.emv)\r\n        if (i >= params[0]) {\r\n          emv.maEmv = emvValueSum / params[0]\r\n          emvValueSum -= emvValueList[i - params[0]]\r\n        }\r\n      }\r\n      prev[kLineData.timestamp] = emv\r\n      return prev\r\n    }, {})\r\n  }\r\n}\r\n\r\nexport default easeOfMovementValue\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport type { IndicatorTemplate } from '../../component/Indicator'\r\n\r\ninterface Ema {\r\n  ema1?: number\r\n  ema2?: number\r\n  ema3?: number\r\n}\r\n\r\n/**\r\n * EMA ÊåáÊï∞ÁßªÂä®Âπ≥Âùá\r\n */\r\nconst exponentialMovingAverage: IndicatorTemplate<Ema, number> = {\r\n  name: 'EMA',\r\n  shortName: 'EMA',\r\n  series: 'price',\r\n  calcParams: [6, 12, 20],\r\n  precision: 2,\r\n  shouldOhlc: true,\r\n  figures: [\r\n    { key: 'ema1', title: 'EMA6: ', type: 'line' },\r\n    { key: 'ema2', title: 'EMA12: ', type: 'line' },\r\n    { key: 'ema3', title: 'EMA20: ', type: 'line' }\r\n  ],\r\n  regenerateFigures: (params) => params.map((p, i) => ({ key: `ema${i + 1}`, title: `EMA${p}: `, type: 'line' })),\r\n  calc: (dataList, indicator) => {\r\n    const { calcParams: params, figures } = indicator\r\n    let closeSum = 0\r\n    const emaValues: number[] = []\r\n    return dataList.reduce((prev, kLineData, i) => {\r\n      const ema = {}\r\n      const close = kLineData.close\r\n      closeSum += close\r\n      params.forEach((p, index) => {\r\n        if (i >= p - 1) {\r\n          if (i > p - 1) {\r\n            emaValues[index] = (2 * close + (p - 1) * emaValues[index]) / (p + 1)\r\n          } else {\r\n            emaValues[index] = closeSum / p\r\n          }\r\n          ema[figures[index].key] = emaValues[index]\r\n        }\r\n      })\r\n      prev[kLineData.timestamp] = ema\r\n      return prev\r\n    }, {})\r\n  }\r\n}\r\n\r\nexport default exponentialMovingAverage\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport type { IndicatorTemplate } from '../../component/Indicator'\r\n\r\ninterface Mtm {\r\n  mtm?: number\r\n  maMtm?: number\r\n}\r\n\r\n/**\r\n * mtm\r\n * ÂÖ¨Âºè MTMÔºàNÊó•Ôºâ=CÔºçCN\r\n */\r\nconst momentum: IndicatorTemplate<Mtm, number> = {\r\n  name: 'MTM',\r\n  shortName: 'MTM',\r\n  calcParams: [12, 6],\r\n  figures: [\r\n    { key: 'mtm', title: 'MTM: ', type: 'line' },\r\n    { key: 'maMtm', title: 'MAMTM: ', type: 'line' }\r\n  ],\r\n  calc: (dataList, indicator) => {\r\n    const params = indicator.calcParams\r\n    let mtmSum = 0\r\n    const mtmList: Mtm[] = []\r\n    const result: Record<number, Mtm> = {}\r\n    dataList.forEach((kLineData, i) => {\r\n      const mtm: Mtm = {}\r\n      if (i >= params[0]) {\r\n        const close = kLineData.close\r\n        const agoClose = dataList[i - params[0]].close\r\n        mtm.mtm = close - agoClose\r\n        mtmSum += mtm.mtm\r\n        if (i >= params[0] + params[1] - 1) {\r\n          mtm.maMtm = mtmSum / params[1]\r\n          mtmSum -= (mtmList[i - (params[1] - 1)].mtm ?? 0)\r\n        }\r\n      }\r\n      mtmList.push(mtm)\r\n      result[kLineData.timestamp] = mtm\r\n    })\r\n    return result\r\n  }\r\n}\r\n\r\nexport default momentum\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport type { IndicatorTemplate } from '../../component/Indicator'\r\n\r\ninterface Ma {\r\n  ma1?: number\r\n  ma2?: number\r\n  ma3?: number\r\n  ma4?: number\r\n}\r\n\r\n/**\r\n * MA ÁßªÂä®Âπ≥Âùá\r\n */\r\nconst movingAverage: IndicatorTemplate<Ma, number> = {\r\n  name: 'MA',\r\n  shortName: 'MA',\r\n  series: 'price',\r\n  calcParams: [5, 10, 30, 60],\r\n  precision: 2,\r\n  shouldOhlc: true,\r\n  figures: [\r\n    { key: 'ma1', title: 'MA5: ', type: 'line' },\r\n    { key: 'ma2', title: 'MA10: ', type: 'line' },\r\n    { key: 'ma3', title: 'MA30: ', type: 'line' },\r\n    { key: 'ma4', title: 'MA60: ', type: 'line' }\r\n  ],\r\n  regenerateFigures: (params) => params.map((p, i) => ({ key: `ma${i + 1}`, title: `MA${p}: `, type: 'line' })),\r\n  calc: (dataList, indicator) => {\r\n    const { calcParams: params, figures } = indicator\r\n    const closeSums: number[] = []\r\n    return dataList.reduce((prev, kLineData, i) => {\r\n      const ma = {}\r\n      const close = kLineData.close\r\n      params.forEach((p, index) => {\r\n        closeSums[index] = (closeSums[index] ?? 0) + close\r\n        if (i >= p - 1) {\r\n          ma[figures[index].key] = closeSums[index] / p\r\n          closeSums[index] -= dataList[i - (p - 1)].close\r\n        }\r\n      })\r\n      prev[kLineData.timestamp] = ma\r\n      return prev\r\n    }, {})\r\n  }\r\n}\r\n\r\nexport default movingAverage\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport { formatValue } from '../../common/utils/format'\r\n\r\nimport type { IndicatorTemplate } from '../../component/Indicator'\r\n\r\ninterface Macd {\r\n  dif?: number\r\n  dea?: number\r\n  macd?: number\r\n}\r\n\r\n/**\r\n * MACDÔºöÂèÇÊï∞Âø´Á∫øÁßªÂä®Âπ≥Âùá„ÄÅÊÖ¢Á∫øÁßªÂä®Âπ≥Âùá„ÄÅÁßªÂä®Âπ≥ÂùáÔºå\r\n * ÈªòËÆ§ÂèÇÊï∞ÂÄº12„ÄÅ26„ÄÅ9„ÄÇ\r\n * ÂÖ¨ÂºèÔºö‚íàÈ¶ñÂÖàÂàÜÂà´ËÆ°ÁÆóÂá∫Êî∂Áõò‰ª∑12Êó•ÊåáÊï∞Âπ≥ÊªëÁßªÂä®Âπ≥ÂùáÁ∫ø‰∏é26Êó•ÊåáÊï∞Âπ≥ÊªëÁßªÂä®Âπ≥ÂùáÁ∫øÔºåÂàÜÂà´ËÆ∞‰∏∫EMA(12Ôºâ‰∏éEMA(26Ôºâ„ÄÇ\r\n * ‚íâÊ±ÇËøô‰∏§Êù°ÊåáÊï∞Âπ≥ÊªëÁßªÂä®Âπ≥ÂùáÁ∫øÁöÑÂ∑ÆÔºåÂç≥ÔºöDIFF = EMA(SHORT) Ôºç EMA(LONG)„ÄÇ\r\n * ‚íäÂÜçËÆ°ÁÆóDIFFÁöÑMÊó•ÁöÑÂπ≥ÂùáÁöÑÊåáÊï∞Âπ≥ÊªëÁßªÂä®Âπ≥ÂùáÁ∫øÔºåËÆ∞‰∏∫DEA„ÄÇ\r\n * ‚íãÊúÄÂêéÁî®DIFFÂáèDEAÔºåÂæóMACD„ÄÇMACDÈÄöÂ∏∏ÁªòÂà∂ÊàêÂõ¥ÁªïÈõ∂ËΩ¥Á∫øÊ≥¢Âä®ÁöÑÊü±ÂΩ¢Âõæ„ÄÇMACDÊü±Áä∂Â§ß‰∫é0Ê∂®È¢úËâ≤ÔºåÂ∞è‰∫é0Ë∑åÈ¢úËâ≤„ÄÇ\r\n */\r\nconst movingAverageConvergenceDivergence: IndicatorTemplate<Macd, number> = {\r\n  name: 'MACD',\r\n  shortName: 'MACD',\r\n  calcParams: [12, 26, 9],\r\n  figures: [\r\n    { key: 'dif', title: 'DIF: ', type: 'line' },\r\n    { key: 'dea', title: 'DEA: ', type: 'line' },\r\n    {\r\n      key: 'macd',\r\n      title: 'MACD: ',\r\n      type: 'bar',\r\n      baseValue: 0,\r\n      styles: ({ data, indicator, defaultStyles }) => {\r\n        const { prev, current } = data\r\n        const prevMacd = prev?.macd ?? Number.MIN_SAFE_INTEGER\r\n        const currentMacd = current?.macd ?? Number.MIN_SAFE_INTEGER\r\n        let color = ''\r\n        if (currentMacd > 0) {\r\n          color = formatValue(indicator.styles, 'bars[0].upColor', (defaultStyles!.bars)[0].upColor) as string\r\n        } else if (currentMacd < 0) {\r\n          color = formatValue(indicator.styles, 'bars[0].downColor', (defaultStyles!.bars)[0].downColor) as string\r\n        } else {\r\n          color = formatValue(indicator.styles, 'bars[0].noChangeColor', (defaultStyles!.bars)[0].noChangeColor) as string\r\n        }\r\n        const style = prevMacd < currentMacd ? 'stroke' : 'fill'\r\n        return { style, color, borderColor: color }\r\n      }\r\n    }\r\n  ],\r\n  calc: (dataList, indicator) => {\r\n    const params = indicator.calcParams\r\n    let closeSum = 0\r\n    let emaShort = 0\r\n    let emaLong = 0\r\n    let dif = 0\r\n    let difSum = 0\r\n    let dea = 0\r\n    const maxPeriod = Math.max(params[0], params[1])\r\n    return dataList.reduce((prev, kLineData, i) => {\r\n      const macd: Macd = {}\r\n      const close = kLineData.close\r\n      closeSum += close\r\n      if (i >= params[0] - 1) {\r\n        if (i > params[0] - 1) {\r\n          emaShort = (2 * close + (params[0] - 1) * emaShort) / (params[0] + 1)\r\n        } else {\r\n          emaShort = closeSum / params[0]\r\n        }\r\n      }\r\n      if (i >= params[1] - 1) {\r\n        if (i > params[1] - 1) {\r\n          emaLong = (2 * close + (params[1] - 1) * emaLong) / (params[1] + 1)\r\n        } else {\r\n          emaLong = closeSum / params[1]\r\n        }\r\n      }\r\n      if (i >= maxPeriod - 1) {\r\n        dif = emaShort - emaLong\r\n        macd.dif = dif\r\n        difSum += dif\r\n        if (i >= maxPeriod + params[2] - 2) {\r\n          if (i > maxPeriod + params[2] - 2) {\r\n            dea = (dif * 2 + dea * (params[2] - 1)) / (params[2] + 1)\r\n          } else {\r\n            dea = difSum / params[2]\r\n          }\r\n          macd.macd = (dif - dea) * 2\r\n          macd.dea = dea\r\n        }\r\n      }\r\n      prev[kLineData.timestamp] = macd\r\n      return prev\r\n    }, {})\r\n  }\r\n}\r\n\r\nexport default movingAverageConvergenceDivergence\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport type { IndicatorTemplate } from '../../component/Indicator'\r\n\r\ninterface Obv {\r\n  obv?: number\r\n  maObv?: number\r\n}\r\n\r\n/**\r\n * OBV\r\n * OBV = REF(OBV) + sign * V\r\n */\r\nconst onBalanceVolume: IndicatorTemplate<Obv, number> = {\r\n  name: 'OBV',\r\n  shortName: 'OBV',\r\n  calcParams: [30],\r\n  figures: [\r\n    { key: 'obv', title: 'OBV: ', type: 'line' },\r\n    { key: 'maObv', title: 'MAOBV: ', type: 'line' }\r\n  ],\r\n  calc: (dataList, indicator) => {\r\n    const params = indicator.calcParams\r\n    let obvSum = 0\r\n    let oldObv = 0\r\n    const obvList: Obv[] = []\r\n    const result: Record<number, Obv> = {}\r\n    dataList.forEach((kLineData, i) => {\r\n      const prevKLineData = dataList[i - 1] ?? kLineData\r\n      if (kLineData.close < prevKLineData.close) {\r\n        oldObv -= (kLineData.volume ?? 0)\r\n      } else if (kLineData.close > prevKLineData.close) {\r\n        oldObv += (kLineData.volume ?? 0)\r\n      }\r\n      const obv: Obv = { obv: oldObv }\r\n      obvSum += oldObv\r\n      if (i >= params[0] - 1) {\r\n        obv.maObv = obvSum / params[0]\r\n        obvSum -= (obvList[i - (params[0] - 1)].obv ?? 0)\r\n      }\r\n      obvList.push(obv)\r\n      result[kLineData.timestamp] = obv\r\n    })\r\n    return result\r\n  }\r\n}\r\n\r\nexport default onBalanceVolume\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport type { IndicatorTemplate } from '../../component/Indicator'\r\n\r\ninterface Pvt {\r\n  pvt?: number\r\n}\r\n\r\n/**\r\n * ‰ª∑ÈáèË∂ãÂäøÊåáÊ†á\r\n * ÂÖ¨Âºè:\r\n * X = (CLOSE - REF(CLOSE, 1)) / REF(CLOSE, 1) * VOLUME\r\n * PVT = SUM(X)\r\n *\r\n */\r\nconst priceAndVolumeTrend: IndicatorTemplate<Pvt> = {\r\n  name: 'PVT',\r\n  shortName: 'PVT',\r\n  figures: [\r\n    { key: 'pvt', title: 'PVT: ', type: 'line' }\r\n  ],\r\n  calc: (dataList) => {\r\n    let sum = 0\r\n    return dataList.reduce((prev, kLineData, i) => {\r\n      const pvt: Pvt = {}\r\n      const close = kLineData.close\r\n      const volume = kLineData.volume ?? 1\r\n      const prevClose = (dataList[i - 1] ?? kLineData).close\r\n      let x = 0\r\n      const total = prevClose * volume\r\n      if (total !== 0) {\r\n        x = (close - prevClose) / total\r\n      }\r\n      sum += x\r\n      pvt.pvt = sum\r\n      prev[kLineData.timestamp] = pvt\r\n      return prev\r\n    }, {})\r\n  }\r\n}\r\n\r\nexport default priceAndVolumeTrend\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport type { IndicatorTemplate } from '../../component/Indicator'\r\n\r\ninterface Psy {\r\n  psy?: number\r\n  maPsy?: number\r\n}\r\n\r\n/**\r\n * PSY\r\n * ÂÖ¨ÂºèÔºöPSY=NÊó•ÂÜÖÁöÑ‰∏äÊ∂®Â§©Êï∞/N√ó100%„ÄÇ\r\n */\r\nconst psychologicalLine: IndicatorTemplate<Psy, number> = {\r\n  name: 'PSY',\r\n  shortName: 'PSY',\r\n  calcParams: [12, 6],\r\n  figures: [\r\n    { key: 'psy', title: 'PSY: ', type: 'line' },\r\n    { key: 'maPsy', title: 'MAPSY: ', type: 'line' }\r\n  ],\r\n  calc: (dataList, indicator) => {\r\n    const params = indicator.calcParams\r\n    let upCount = 0\r\n    let psySum = 0\r\n    const upList: number[] = []\r\n    const psyList: Psy[] = []\r\n    const result: Record<number, Psy> = {}\r\n    dataList.forEach((kLineData, i) => {\r\n      const psy: Psy = {}\r\n      const prevClose = (dataList[i - 1] ?? kLineData).close\r\n      const upFlag = kLineData.close - prevClose > 0 ? 1 : 0\r\n      upList.push(upFlag)\r\n      upCount += upFlag\r\n      if (i >= params[0] - 1) {\r\n        psy.psy = upCount / params[0] * 100\r\n        psySum += psy.psy\r\n        if (i >= params[0] + params[1] - 2) {\r\n          psy.maPsy = psySum / params[1]\r\n          psySum -= (psyList[i - (params[1] - 1)].psy ?? 0)\r\n        }\r\n        upCount -= upList[i - (params[0] - 1)]\r\n      }\r\n      psyList.push(psy)\r\n      result[kLineData.timestamp] = psy\r\n    })\r\n    return result\r\n  }\r\n}\r\n\r\nexport default psychologicalLine\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport type { IndicatorTemplate } from '../../component/Indicator'\r\n\r\ninterface Roc {\r\n  roc?: number\r\n  maRoc?: number\r\n}\r\n\r\n/**\r\n * ÂèòÂä®ÁéáÊåáÊ†á\r\n * ÂÖ¨ÂºèÔºöROC = (CLOSE - REF(CLOSE, N)) / REF(CLOSE, N)\r\n */\r\nconst rateOfChange: IndicatorTemplate<Roc, number> = {\r\n  name: 'ROC',\r\n  shortName: 'ROC',\r\n  calcParams: [12, 6],\r\n  figures: [\r\n    { key: 'roc', title: 'ROC: ', type: 'line' },\r\n    { key: 'maRoc', title: 'MAROC: ', type: 'line' }\r\n  ],\r\n  calc: (dataList, indicator) => {\r\n    const params = indicator.calcParams\r\n    const rocList: Roc[] = []\r\n    const result: Record<number, Roc> = {}\r\n    let rocSum = 0\r\n    dataList.forEach((kLineData, i) => {\r\n      const roc: Roc = {}\r\n      if (i >= params[0] - 1) {\r\n        const close = kLineData.close\r\n        const agoClose = (dataList[i - params[0]] ?? dataList[i - (params[0] - 1)]).close\r\n        if (agoClose !== 0) {\r\n          roc.roc = (close - agoClose) / agoClose * 100\r\n        } else {\r\n          roc.roc = 0\r\n        }\r\n        rocSum += roc.roc\r\n        if (i >= params[0] - 1 + params[1] - 1) {\r\n          roc.maRoc = rocSum / params[1]\r\n          rocSum -= (rocList[i - (params[1] - 1)].roc ?? 0)\r\n        }\r\n      }\r\n      rocList.push(roc)\r\n      result[kLineData.timestamp] = roc\r\n    })\r\n    return result\r\n  }\r\n}\r\n\r\nexport default rateOfChange\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport type { IndicatorTemplate } from '../../component/Indicator'\r\n\r\ninterface Rsi {\r\n  rsi1?: number\r\n  rsi2?: number\r\n  rsi3?: number\r\n}\r\n\r\n/**\r\n * RSI\r\n * RSI = SUM(MAX(CLOSE - REF(CLOSE,1),0),N) / SUM(ABS(CLOSE - REF(CLOSE,1)),N) √ó 100\r\n */\r\nconst relativeStrengthIndex: IndicatorTemplate<Rsi, number> = {\r\n  name: 'RSI',\r\n  shortName: 'RSI',\r\n  calcParams: [6, 12, 24],\r\n  figures: [\r\n    { key: 'rsi1', title: 'RSI1: ', type: 'line' },\r\n    { key: 'rsi2', title: 'RSI2: ', type: 'line' },\r\n    { key: 'rsi3', title: 'RSI3: ', type: 'line' }\r\n  ],\r\n  regenerateFigures: (params) => params.map((_, index) => {\r\n    const num = index + 1\r\n    return { key: `rsi${num}`, title: `RSI${num}: `, type: 'line' }\r\n  }),\r\n  calc: (dataList, indicator) => {\r\n    const { calcParams: params, figures } = indicator\r\n    const sumCloseAs: number[] = []\r\n    const sumCloseBs: number[] = []\r\n    return dataList.reduce((prev, kLineData, i) => {\r\n      const rsi = {}\r\n      const prevClose = (dataList[i - 1] ?? kLineData).close\r\n      const tmp = kLineData.close - prevClose\r\n      params.forEach((p, index) => {\r\n        if (tmp > 0) {\r\n          sumCloseAs[index] = (sumCloseAs[index] ?? 0) + tmp\r\n        } else {\r\n          sumCloseBs[index] = (sumCloseBs[index] ?? 0) + Math.abs(tmp)\r\n        }\r\n        if (i >= p - 1) {\r\n          if (sumCloseBs[index] !== 0) {\r\n            rsi[figures[index].key] = 100 - (100.0 / (1 + sumCloseAs[index] / sumCloseBs[index]))\r\n          } else {\r\n            rsi[figures[index].key] = 0\r\n          }\r\n          const agoData = dataList[i - (p - 1)]\r\n          const agoPreData = dataList[i - p] ?? agoData\r\n          const agoTmp = agoData.close - agoPreData.close\r\n          if (agoTmp > 0) {\r\n            sumCloseAs[index] -= agoTmp\r\n          } else {\r\n            sumCloseBs[index] -= Math.abs(agoTmp)\r\n          }\r\n        }\r\n      })\r\n      prev[kLineData.timestamp] = rsi\r\n      return prev\r\n    }, {})\r\n  }\r\n}\r\n\r\nexport default relativeStrengthIndex\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport type { IndicatorTemplate } from '../../component/Indicator'\r\n\r\ninterface Sma {\r\n  sma?: number\r\n}\r\n\r\n/**\r\n * sma\r\n */\r\nconst simpleMovingAverage: IndicatorTemplate<Sma, number> = {\r\n  name: 'SMA',\r\n  shortName: 'SMA',\r\n  series: 'price',\r\n  calcParams: [12, 2],\r\n  precision: 2,\r\n  figures: [\r\n    { key: 'sma', title: 'SMA: ', type: 'line' }\r\n  ],\r\n  shouldOhlc: true,\r\n  calc: (dataList, indicator) => {\r\n    const params = indicator.calcParams\r\n    let closeSum = 0\r\n    let smaValue = 0\r\n    return dataList.reduce((prev, kLineData, i) => {\r\n      const sma: Sma = {}\r\n      const close = kLineData.close\r\n      closeSum += close\r\n      if (i >= params[0] - 1) {\r\n        if (i > params[0] - 1) {\r\n          smaValue = (close * params[1] + smaValue * (params[0] - params[1] + 1)) / (params[0] + 1)\r\n        } else {\r\n          smaValue = closeSum / params[0]\r\n        }\r\n        sma.sma = smaValue\r\n      }\r\n      prev[kLineData.timestamp] = sma\r\n      return prev\r\n    }, {})\r\n  }\r\n}\r\n\r\nexport default simpleMovingAverage\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport type { KLineData } from '../../common/Data'\r\nimport type { IndicatorTemplate } from '../../component/Indicator'\r\n\r\nimport { getMaxMin } from '../../common/utils/number'\r\n\r\ninterface Kdj {\r\n  k?: number\r\n  d?: number\r\n  j?: number\r\n}\r\n\r\n/**\r\n * KDJ\r\n *\r\n * ÂΩìÊó•KÂÄº=2/3√óÂâç‰∏ÄÊó•KÂÄº+1/3√óÂΩìÊó•RSV\r\n * ÂΩìÊó•DÂÄº=2/3√óÂâç‰∏ÄÊó•DÂÄº+1/3√óÂΩìÊó•KÂÄº\r\n * Ëã•Êó†Ââç‰∏ÄÊó•K ÂÄº‰∏éDÂÄºÔºåÂàôÂèØÂàÜÂà´Áî®50Êù•‰ª£Êõø„ÄÇ\r\n * JÂÄº=3*ÂΩìÊó•KÂÄº-2*ÂΩìÊó•DÂÄº\r\n */\r\nconst stoch: IndicatorTemplate<Kdj, number> = {\r\n  name: 'KDJ',\r\n  shortName: 'KDJ',\r\n  calcParams: [9, 3, 3],\r\n  figures: [\r\n    { key: 'k', title: 'K: ', type: 'line' },\r\n    { key: 'd', title: 'D: ', type: 'line' },\r\n    { key: 'j', title: 'J: ', type: 'line' }\r\n  ],\r\n  calc: (dataList, indicator) => {\r\n    const params = indicator.calcParams\r\n    const kdjList: Kdj[] = []\r\n    const result: Record<number, Kdj> = {}\r\n    dataList.forEach((kLineData, i) => {\r\n      const kdj: Kdj = {}\r\n      const close = kLineData.close\r\n      if (i >= params[0] - 1) {\r\n        const lhn = getMaxMin<KLineData>(dataList.slice(i - (params[0] - 1), i + 1), 'high', 'low')\r\n        const hn = lhn[0]\r\n        const ln = lhn[1]\r\n        const hnSubLn = hn - ln\r\n        const rsv = (close - ln) / (hnSubLn === 0 ? 1 : hnSubLn) * 100\r\n        kdj.k = ((params[1] - 1) * (kdjList[i - 1]?.k ?? 50) + rsv) / params[1]\r\n        kdj.d = ((params[2] - 1) * (kdjList[i - 1]?.d ?? 50) + kdj.k) / params[2]\r\n        kdj.j = 3.0 * kdj.k - 2.0 * kdj.d\r\n      }\r\n      kdjList.push(kdj)\r\n      result[kLineData.timestamp] = kdj\r\n    })\r\n    return result\r\n  }\r\n}\r\n\r\nexport default stoch\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport { formatValue } from '../../common/utils/format'\r\n\r\nimport type { IndicatorTemplate } from '../../component/Indicator'\r\n\r\ninterface Sar {\r\n  sar?: number\r\n  high: number\r\n  low: number\r\n}\r\n\r\nconst stopAndReverse: IndicatorTemplate<Sar, number> = {\r\n  name: 'SAR',\r\n  shortName: 'SAR',\r\n  series: 'price',\r\n  calcParams: [2, 2, 20],\r\n  precision: 2,\r\n  shouldOhlc: true,\r\n  figures: [\r\n    {\r\n      key: 'sar',\r\n      title: 'SAR: ',\r\n      type: 'circle',\r\n      styles: ({ data, indicator, defaultStyles }) => {\r\n        const { current } = data\r\n        const sar = current?.sar ?? Number.MIN_SAFE_INTEGER\r\n        const halfHL = ((current?.high ?? 0) + (current?.low ?? 0)) / 2\r\n        const color = sar < halfHL\r\n          ? formatValue(indicator.styles, 'circles[0].upColor', (defaultStyles!.circles)[0].upColor) as string\r\n          : formatValue(indicator.styles, 'circles[0].downColor', (defaultStyles!.circles)[0].downColor) as string\r\n        return { color }\r\n      }\r\n    }\r\n  ],\r\n  calc: (dataList, indicator) => {\r\n    const params = indicator.calcParams\r\n    const startAf = params[0] / 100\r\n    const step = params[1] / 100\r\n    const maxAf = params[2] / 100\r\n\r\n    // Âä†ÈÄüÂõ†Â≠ê\r\n    let af = startAf\r\n    // ÊûÅÂÄº\r\n    let ep = -100\r\n    // Âà§Êñ≠ÊòØ‰∏äÊ∂®ËøòÊòØ‰∏ãË∑å  falseÔºö‰∏ãË∑å\r\n    let isIncreasing = false\r\n    let sar = 0\r\n    return dataList.reduce((prev, kLineData, i) => {\r\n      // ‰∏ä‰∏Ä‰∏™Âë®ÊúüÁöÑsar\r\n      const preSar = sar\r\n      const high = kLineData.high\r\n      const low = kLineData.low\r\n      if (isIncreasing) {\r\n        // ‰∏äÊ∂®\r\n        if (ep === -100 || ep < high) {\r\n          // ÈáçÊñ∞ÂàùÂßãÂåñÂÄº\r\n          ep = high\r\n          af = Math.min(af + step, maxAf)\r\n        }\r\n        sar = preSar + af * (ep - preSar)\r\n        const lowMin = Math.min(dataList[Math.max(1, i) - 1].low, low)\r\n        if (sar > kLineData.low) {\r\n          sar = ep\r\n          // ÈáçÊñ∞ÂàùÂßãÂåñÂÄº\r\n          af = startAf\r\n          ep = -100\r\n          isIncreasing = !isIncreasing\r\n        } else if (sar > lowMin) {\r\n          sar = lowMin\r\n        }\r\n      } else {\r\n        if (ep === -100 || ep > low) {\r\n          // ÈáçÊñ∞ÂàùÂßãÂåñÂÄº\r\n          ep = low\r\n          af = Math.min(af + step, maxAf)\r\n        }\r\n        sar = preSar + af * (ep - preSar)\r\n        const highMax = Math.max(dataList[Math.max(1, i) - 1].high, high)\r\n        if (sar < kLineData.high) {\r\n          sar = ep\r\n          // ÈáçÊñ∞ÂàùÂßãÂåñÂÄº\r\n          af = 0\r\n          ep = -100\r\n          isIncreasing = !isIncreasing\r\n        } else if (sar < highMax) {\r\n          sar = highMax\r\n        }\r\n      }\r\n      prev[kLineData.timestamp] = { high, low, sar }\r\n      return prev\r\n    }, {})\r\n  }\r\n}\r\n\r\nexport default stopAndReverse\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http:*www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport type { IndicatorTemplate } from '../../component/Indicator'\r\n\r\ninterface Trix {\r\n  trix?: number\r\n  maTrix?: number\r\n}\r\n\r\n/**\r\n * trix\r\n *\r\n * TR=Êî∂Áõò‰ª∑ÁöÑNÊó•ÊåáÊï∞ÁßªÂä®Âπ≥ÂùáÁöÑNÊó•ÊåáÊï∞ÁßªÂä®Âπ≥ÂùáÁöÑNÊó•ÊåáÊï∞ÁßªÂä®Âπ≥ÂùáÔºõ\r\n * TRIX=(TR-Êò®Êó•TR)/Êò®Êó•TR*100Ôºõ\r\n * MATRIX=TRIXÁöÑMÊó•ÁÆÄÂçïÁßªÂä®Âπ≥ÂùáÔºõ\r\n * ÈªòËÆ§ÂèÇÊï∞NËÆæ‰∏∫12ÔºåÈªòËÆ§ÂèÇÊï∞MËÆæ‰∏∫9Ôºõ\r\n * ÈªòËÆ§ÂèÇÊï∞12„ÄÅ9\r\n * ÂÖ¨ÂºèÔºöMTR:=EMA(EMA(EMA(CLOSE,N),N),N)\r\n * TRIX:(MTR-REF(MTR,1))/REF(MTR,1)*100;\r\n * TRMA:MA(TRIX,M)\r\n *\r\n */\r\nconst tripleExponentiallySmoothedAverage: IndicatorTemplate<Trix, number> = {\r\n  name: 'TRIX',\r\n  shortName: 'TRIX',\r\n  calcParams: [12, 9],\r\n  figures: [\r\n    { key: 'trix', title: 'TRIX: ', type: 'line' },\r\n    { key: 'maTrix', title: 'MATRIX: ', type: 'line' }\r\n  ],\r\n  calc: (dataList, indicator) => {\r\n    const params = indicator.calcParams\r\n    let closeSum = 0\r\n    let ema1 = 0\r\n    let ema2 = 0\r\n    let oldTr = 0\r\n    let ema1Sum = 0\r\n    let ema2Sum = 0\r\n    let trixSum = 0\r\n    const trixList: Trix[] = []\r\n    const result: Record<number, Trix> = {}\r\n    dataList.forEach((kLineData, i) => {\r\n      const trix: Trix = {}\r\n      const close = kLineData.close\r\n      closeSum += close\r\n      if (i >= params[0] - 1) {\r\n        if (i > params[0] - 1) {\r\n          ema1 = (2 * close + (params[0] - 1) * ema1) / (params[0] + 1)\r\n        } else {\r\n          ema1 = closeSum / params[0]\r\n        }\r\n        ema1Sum += ema1\r\n        if (i >= params[0] * 2 - 2) {\r\n          if (i > params[0] * 2 - 2) {\r\n            ema2 = (2 * ema1 + (params[0] - 1) * ema2) / (params[0] + 1)\r\n          } else {\r\n            ema2 = ema1Sum / params[0]\r\n          }\r\n          ema2Sum += ema2\r\n          if (i >= params[0] * 3 - 3) {\r\n            let tr = 0\r\n            let trixValue = 0\r\n            if (i > params[0] * 3 - 3) {\r\n              tr = (2 * ema2 + (params[0] - 1) * oldTr) / (params[0] + 1)\r\n              trixValue = (tr - oldTr) / oldTr * 100\r\n            } else {\r\n              tr = ema2Sum / params[0]\r\n            }\r\n            oldTr = tr\r\n            trix.trix = trixValue\r\n            trixSum += trixValue\r\n            if (i >= params[0] * 3 + params[1] - 4) {\r\n              trix.maTrix = trixSum / params[1]\r\n              trixSum -= (trixList[i - (params[1] - 1)].trix ?? 0)\r\n            }\r\n          }\r\n        }\r\n      }\r\n      trixList.push(trix)\r\n      result[kLineData.timestamp] = trix\r\n    })\r\n    return result\r\n  }\r\n}\r\n\r\nexport default tripleExponentiallySmoothedAverage\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport { formatValue } from '../../common/utils/format'\r\nimport { isValid } from '../../common/utils/typeChecks'\r\n\r\nimport type { IndicatorTemplate, IndicatorFigure } from '../../component/Indicator'\r\n\r\ninterface Vol {\r\n  open: number\r\n  close: number\r\n  volume?: number\r\n  ma1?: number\r\n  ma2?: number\r\n  ma3?: number\r\n}\r\n\r\nfunction getVolumeFigure (): IndicatorFigure<Vol> {\r\n  return {\r\n    key: 'volume',\r\n    title: 'VOLUME: ',\r\n    type: 'bar',\r\n    baseValue: 0,\r\n    styles: ({ data, indicator, defaultStyles }) => {\r\n      const current = data.current\r\n      let color = formatValue(indicator.styles, 'bars[0].noChangeColor', (defaultStyles!.bars)[0].noChangeColor)\r\n      if (isValid(current)) {\r\n        if (current.close > current.open) {\r\n          color = formatValue(indicator.styles, 'bars[0].upColor', (defaultStyles!.bars)[0].upColor)\r\n        } else if (current.close < current.open) {\r\n          color = formatValue(indicator.styles, 'bars[0].downColor', (defaultStyles!.bars)[0].downColor)\r\n        }\r\n      }\r\n      return { color: color as string }\r\n    }\r\n  }\r\n}\r\n\r\nconst volume: IndicatorTemplate<Vol, number> = {\r\n  name: 'VOL',\r\n  shortName: 'VOL',\r\n  series: 'volume',\r\n  calcParams: [5, 10, 20],\r\n  shouldFormatBigNumber: true,\r\n  precision: 0,\r\n  minValue: 0,\r\n  figures: [\r\n    { key: 'ma1', title: 'MA5: ', type: 'line' },\r\n    { key: 'ma2', title: 'MA10: ', type: 'line' },\r\n    { key: 'ma3', title: 'MA20: ', type: 'line' },\r\n    getVolumeFigure()\r\n  ],\r\n  regenerateFigures: (params) => {\r\n    const figures: Array<IndicatorFigure<Vol>> = params.map((p, i) => ({ key: `ma${i + 1}`, title: `MA${p}: `, type: 'line' }))\r\n    figures.push(getVolumeFigure())\r\n    return figures\r\n  },\r\n  calc: (dataList, indicator) => {\r\n    const { calcParams: params, figures } = indicator\r\n    const volSums: number[] = []\r\n    return dataList.reduce((prev, kLineData, i) => {\r\n      const volume = kLineData.volume ?? 0\r\n      const vol: Vol = { volume, open: kLineData.open, close: kLineData.close }\r\n      params.forEach((p, index) => {\r\n        volSums[index] = (volSums[index] ?? 0) + volume\r\n        if (i >= p - 1) {\r\n          vol[figures[index].key] = volSums[index] / p\r\n          volSums[index] -= (dataList[i - (p - 1)].volume ?? 0)\r\n        }\r\n      })\r\n      prev[kLineData.timestamp] = vol\r\n      return prev\r\n    }, {})\r\n  }\r\n}\r\n\r\nexport default volume\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport type { IndicatorTemplate } from '../../component/Indicator'\r\n\r\ninterface Vr {\r\n  vr?: number\r\n  maVr?: number\r\n}\r\n\r\n/**\r\n * VR\r\n * VR=ÔºàUVS+1/2PVSÔºâ/ÔºàDVS+1/2PVSÔºâ\r\n * 24Â§©‰ª•Êù•Âá°ÊòØËÇ°‰ª∑‰∏äÊ∂®ÈÇ£‰∏ÄÂ§©ÁöÑÊàê‰∫§ÈáèÈÉΩÁß∞‰∏∫AVÔºåÂ∞Ü24Â§©ÂÜÖÁöÑAVÊÄªÂíåÁõ∏Âä†ÂêéÁß∞‰∏∫UVS\r\n * 24Â§©‰ª•Êù•Âá°ÊòØËÇ°‰ª∑‰∏ãË∑åÈÇ£‰∏ÄÂ§©ÁöÑÊàê‰∫§ÈáèÈÉΩÁß∞‰∏∫BVÔºåÂ∞Ü24Â§©ÂÜÖÁöÑBVÊÄªÂíåÁõ∏Âä†ÂêéÁß∞‰∏∫DVS\r\n * 24Â§©‰ª•Êù•Âá°ÊòØËÇ°‰ª∑‰∏çÊ∂®‰∏çË∑åÔºåÂàôÈÇ£‰∏ÄÂ§©ÁöÑÊàê‰∫§ÈáèÈÉΩÁß∞‰∏∫CVÔºåÂ∞Ü24Â§©ÂÜÖÁöÑCVÊÄªÂíåÁõ∏Âä†ÂêéÁß∞‰∏∫PVS\r\n *\r\n */\r\nconst volumeRatio: IndicatorTemplate<Vr, number> = {\r\n  name: 'VR',\r\n  shortName: 'VR',\r\n  calcParams: [26, 6],\r\n  figures: [\r\n    { key: 'vr', title: 'VR: ', type: 'line' },\r\n    { key: 'maVr', title: 'MAVR: ', type: 'line' }\r\n  ],\r\n  calc: (dataList, indicator) => {\r\n    const params = indicator.calcParams\r\n    let uvs = 0\r\n    let dvs = 0\r\n    let pvs = 0\r\n    let vrSum = 0\r\n    const vrList: Vr[] = []\r\n    const result: Record<number, Vr> = {}\r\n    dataList.forEach((kLineData, i) => {\r\n      const vr: Vr = {}\r\n      const close = kLineData.close\r\n      const preClose = (dataList[i - 1] ?? kLineData).close\r\n      const volume = kLineData.volume ?? 0\r\n      if (close > preClose) {\r\n        uvs += volume\r\n      } else if (close < preClose) {\r\n        dvs += volume\r\n      } else {\r\n        pvs += volume\r\n      }\r\n      if (i >= params[0] - 1) {\r\n        const halfPvs = pvs / 2\r\n        if (dvs + halfPvs === 0) {\r\n          vr.vr = 0\r\n        } else {\r\n          vr.vr = (uvs + halfPvs) / (dvs + halfPvs) * 100\r\n        }\r\n        vrSum += vr.vr\r\n        if (i >= params[0] + params[1] - 2) {\r\n          vr.maVr = vrSum / params[1]\r\n          vrSum -= (vrList[i - (params[1] - 1)].vr ?? 0)\r\n        }\r\n\r\n        const agoData = dataList[i - (params[0] - 1)]\r\n        const agoPreData = dataList[i - params[0]] ?? agoData\r\n        const agoClose = agoData.close\r\n        const agoVolume = agoData.volume ?? 0\r\n        if (agoClose > agoPreData.close) {\r\n          uvs -= agoVolume\r\n        } else if (agoClose < agoPreData.close) {\r\n          dvs -= agoVolume\r\n        } else {\r\n          pvs -= agoVolume\r\n        }\r\n      }\r\n      vrList.push(vr)\r\n      result[kLineData.timestamp] = vr\r\n    })\r\n    return result\r\n  }\r\n}\r\n\r\nexport default volumeRatio\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport type { KLineData } from '../../common/Data'\r\nimport type { IndicatorTemplate } from '../../component/Indicator'\r\n\r\nimport { getMaxMin } from '../../common/utils/number'\r\n\r\ninterface Wr {\r\n  wr1?: number\r\n  wr2?: number\r\n  wr3?: number\r\n}\r\n\r\n/**\r\n * WR\r\n * ÂÖ¨Âºè WR(N) = 100 * [ C - HIGH(N) ] / [ HIGH(N)-LOW(N) ]\r\n */\r\nconst williamsR: IndicatorTemplate<Wr, number> = {\r\n  name: 'WR',\r\n  shortName: 'WR',\r\n  calcParams: [6, 10, 14],\r\n  figures: [\r\n    { key: 'wr1', title: 'WR1: ', type: 'line' },\r\n    { key: 'wr2', title: 'WR2: ', type: 'line' },\r\n    { key: 'wr3', title: 'WR3: ', type: 'line' }\r\n  ],\r\n  regenerateFigures: (params) => params.map((_, i) => ({ key: `wr${i + 1}`, title: `WR${i + 1}: `, type: 'line' })),\r\n  calc: (dataList, indicator) => {\r\n    const { calcParams: params, figures } = indicator\r\n    return dataList.reduce((prev, kLineData, i) => {\r\n      const wr: Wr = {}\r\n      const close = kLineData.close\r\n      params.forEach((param, index) => {\r\n        const p = param - 1\r\n        if (i >= p) {\r\n          const hln = getMaxMin<KLineData>(dataList.slice(i - p, i + 1), 'high', 'low')\r\n          const hn = hln[0]\r\n          const ln = hln[1]\r\n          const hnSubLn = hn - ln\r\n          wr[figures[index].key] = hnSubLn === 0 ? 0 : (close - hn) / hnSubLn * 100\r\n        }\r\n      })\r\n      prev[kLineData.timestamp] = wr\r\n      return prev\r\n    }, {})\r\n  }\r\n}\r\n\r\nexport default williamsR\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport type Nullable from '../../common/Nullable'\r\n\r\nimport IndicatorImp, { type IndicatorTemplate, type IndicatorConstructor } from '../../component/Indicator'\r\n\r\nimport averagePrice from './averagePrice'\r\nimport awesomeOscillator from './awesomeOscillator'\r\nimport bias from './bias'\r\nimport bollingerBands from './bollingerBands'\r\nimport brar from './brar'\r\nimport bullAndBearIndex from './bullAndBearIndex'\r\nimport commodityChannelIndex from './commodityChannelIndex'\r\nimport currentRatio from './currentRatio'\r\nimport differentOfMovingAverage from './differentOfMovingAverage'\r\nimport directionalMovementIndex from './directionalMovementIndex'\r\nimport easeOfMovementValue from './easeOfMovementValue'\r\nimport exponentialMovingAverage from './exponentialMovingAverage'\r\nimport momentum from './momentum'\r\nimport movingAverage from './movingAverage'\r\nimport movingAverageConvergenceDivergence from './movingAverageConvergenceDivergence'\r\nimport onBalanceVolume from './onBalanceVolume'\r\nimport priceAndVolumeTrend from './priceAndVolumeTrend'\r\nimport psychologicalLine from './psychologicalLine'\r\nimport rateOfChange from './rateOfChange'\r\nimport relativeStrengthIndex from './relativeStrengthIndex'\r\nimport simpleMovingAverage from './simpleMovingAverage'\r\nimport stoch from './stoch'\r\nimport stopAndReverse from './stopAndReverse'\r\nimport tripleExponentiallySmoothedAverage from './tripleExponentiallySmoothedAverage'\r\nimport volume from './volume'\r\nimport volumeRatio from './volumeRatio'\r\nimport williamsR from './williamsR'\r\n\r\nconst indicators: Record<string, IndicatorConstructor> = {}\r\n\r\nconst extensions = [\r\n  averagePrice, awesomeOscillator, bias, bollingerBands, brar,\r\n  bullAndBearIndex, commodityChannelIndex, currentRatio, differentOfMovingAverage,\r\n  directionalMovementIndex, easeOfMovementValue, exponentialMovingAverage, momentum,\r\n  movingAverage, movingAverageConvergenceDivergence, onBalanceVolume, priceAndVolumeTrend,\r\n  psychologicalLine, rateOfChange, relativeStrengthIndex, simpleMovingAverage,\r\n  stoch, stopAndReverse, tripleExponentiallySmoothedAverage, volume, volumeRatio, williamsR\r\n]\r\n\r\nextensions.forEach((indicator: IndicatorTemplate) => {\r\n  indicators[indicator.name] = IndicatorImp.extend(indicator)\r\n})\r\n\r\nfunction registerIndicator<D = unknown, C = unknown, E = unknown> (indicator: IndicatorTemplate<D, C, E>): void {\r\n  indicators[indicator.name] = IndicatorImp.extend(indicator)\r\n}\r\n\r\nfunction getIndicatorClass (name: string): Nullable<IndicatorConstructor> {\r\n  return indicators[name] ?? null\r\n}\r\n\r\nfunction getSupportedIndicators (): string[] {\r\n  return Object.keys(indicators)\r\n}\r\n\r\nexport { registerIndicator, getIndicatorClass, getSupportedIndicators }\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport type Nullable from '../common/Nullable'\r\nimport type DeepPartial from '../common/DeepPartial'\r\nimport type ExcludePickPartial from '../common/ExcludePickPartial'\r\nimport type Point from '../common/Point'\r\nimport type Coordinate from '../common/Coordinate'\r\nimport type Bounding from '../common/Bounding'\r\nimport type { OverlayStyle } from '../common/Styles'\r\nimport type { MouseTouchEvent } from '../common/EventHandler'\r\nimport { clone, isArray, isBoolean, isFunction, isNumber, isString, isValid, merge } from '../common/utils/typeChecks'\r\n\r\nimport type { XAxis } from './XAxis'\r\nimport type { YAxis } from './YAxis'\r\nimport type ChartStore from '../Store'\r\nimport type { Chart } from '../Chart'\r\n\r\nexport type OverlayMode = 'normal' | 'weak_magnet' | 'strong_magnet'\r\n\r\nexport interface OverlayPerformEventParams {\r\n  currentStep: number\r\n  mode: OverlayMode\r\n  points: Array<Partial<Point>>\r\n  performPointIndex: number\r\n  performPoint: Partial<Point>\r\n}\r\n\r\nexport interface OverlayEventCollection<E> {\r\n  onDrawStart: Nullable<OverlayEventCallback<E>>\r\n  onDrawing: Nullable<OverlayEventCallback<E>>\r\n  onDrawEnd: Nullable<OverlayEventCallback<E>>\r\n  onRemoved: Nullable<OverlayEventCallback<E>>\r\n  onClick: Nullable<OverlayEventCallback<E>>\r\n  onDoubleClick: Nullable<OverlayEventCallback<E>>\r\n  onRightClick: Nullable<OverlayEventCallback<E>>\r\n  onPressedMoveStart: Nullable<OverlayEventCallback<E>>\r\n  onPressedMoving: Nullable<OverlayEventCallback<E>>\r\n  onPressedMoveEnd: Nullable<OverlayEventCallback<E>>\r\n  onMouseMove: Nullable<OverlayEventCallback<E>>\r\n  onMouseEnter: Nullable<OverlayEventCallback<E>>\r\n  onMouseLeave: Nullable<OverlayEventCallback<E>>\r\n  onSelected: Nullable<OverlayEventCallback<E>>\r\n  onDeselected: Nullable<OverlayEventCallback<E>>\r\n}\r\n\r\nexport function checkOverlayFigureEvent (\r\n  targetEventType: keyof Omit<OverlayEventCollection<unknown>, 'onDrawStart' | 'onDrawing' | 'onDrawEnd' | 'onRemoved'>,\r\n  figure: Nullable<OverlayFigure>\r\n): boolean {\r\n  const ignoreEvent = figure?.ignoreEvent ?? false\r\n  if (isBoolean(ignoreEvent)) {\r\n    return !ignoreEvent\r\n  }\r\n  return !ignoreEvent.includes(targetEventType)\r\n}\r\n\r\nexport interface OverlayFigure {\r\n  key?: string\r\n  type: string\r\n  attrs: unknown\r\n  styles?: unknown\r\n  ignoreEvent?: boolean | Array<keyof Omit<OverlayEventCollection<unknown>, 'onDrawStart' | 'onDrawing' | 'onDrawEnd' | 'onRemoved'>>\r\n}\r\n\r\nexport interface OverlayCreateFiguresCallbackParams<E> {\r\n  chart: Chart\r\n  overlay: Overlay<E>\r\n  coordinates: Coordinate[]\r\n  bounding: Bounding\r\n  xAxis: Nullable<XAxis>\r\n  yAxis: Nullable<YAxis>\r\n}\r\n\r\nexport interface OverlayEvent<E> extends Partial<MouseTouchEvent> {\r\n  figure?: OverlayFigure\r\n  overlay: Overlay<E>\r\n  chart: Chart\r\n}\r\n\r\nexport type OverlayEventCallback<E> = (event: OverlayEvent<E>) => void\r\n\r\nexport type OverlayCreateFiguresCallback<E> = (params: OverlayCreateFiguresCallbackParams<E>) => OverlayFigure | OverlayFigure[]\r\n\r\nexport interface Overlay<E = unknown> extends OverlayEventCollection<E> {\r\n  /**\r\n   * Unique identification\r\n   */\r\n  id: string\r\n\r\n  /**\r\n   * Group id\r\n   */\r\n  groupId: string\r\n\r\n  /**\r\n   * Pane id\r\n   */\r\n  paneId: string\r\n\r\n  /**\r\n   * Name\r\n   */\r\n  name: string\r\n\r\n  /**\r\n   * Total number of steps required to complete mouse operation\r\n   */\r\n  totalStep: number\r\n\r\n  /**\r\n   * Current step\r\n   */\r\n  currentStep: number\r\n\r\n  /**\r\n   * Whether it is locked. When it is true, it will not respond to events\r\n   */\r\n  lock: boolean\r\n\r\n  /**\r\n   * Whether the overlay is visible\r\n   */\r\n  visible: boolean\r\n\r\n  /**\r\n   * Draw level\r\n   */\r\n  zLevel: number\r\n\r\n  /**\r\n   * Whether the default figure corresponding to the point is required\r\n   */\r\n  needDefaultPointFigure: boolean\r\n\r\n  /**\r\n   * Whether the default figure on the Y axis is required\r\n   */\r\n  needDefaultXAxisFigure: boolean\r\n\r\n  /**\r\n   * Whether the default figure on the X axis is required\r\n   */\r\n  needDefaultYAxisFigure: boolean\r\n\r\n  /**\r\n   * Mode\r\n   */\r\n  mode: OverlayMode\r\n\r\n  /**\r\n   * When mode is weak_magnet is the response distance\r\n   */\r\n  modeSensitivity: number\r\n\r\n  /**\r\n   * Time and value information\r\n   */\r\n  points: Array<Partial<Point>>\r\n\r\n  /**\r\n   * Extended Data\r\n   */\r\n  extendData: E\r\n\r\n  /**\r\n   * The style information and format are consistent with the overlay in the unified configuration\r\n   */\r\n  styles: Nullable<DeepPartial<OverlayStyle>>\r\n\r\n  /**\r\n   * Create figures corresponding to points\r\n   */\r\n  createPointFigures: Nullable<OverlayCreateFiguresCallback<E>>\r\n\r\n  /**\r\n   * Create figures on the Y axis\r\n   */\r\n  createXAxisFigures: Nullable<OverlayCreateFiguresCallback<E>>\r\n\r\n  /**\r\n   * Create figures on the X axis\r\n   */\r\n  createYAxisFigures: Nullable<OverlayCreateFiguresCallback<E>>\r\n\r\n  /**\r\n   * Special handling callbacks when pressing events\r\n   */\r\n  performEventPressedMove: Nullable<(params: OverlayPerformEventParams) => void>\r\n\r\n  /**\r\n   * In drawing, special handling callback when moving events\r\n   */\r\n  performEventMoveForDrawing: Nullable<(params: OverlayPerformEventParams) => void>\r\n}\r\n\r\nexport type OverlayTemplate<E = unknown> = ExcludePickPartial<Omit<Overlay<E>, 'id' | 'groupId' | 'paneId' | 'points' | 'currentStep'>, 'name'>\r\n\r\nexport type OverlayCreate<E = unknown> = ExcludePickPartial<Omit<Overlay<E>, 'currentStep' | 'totalStep' | 'createPointFigures' | 'createXAxisFigures' | 'createYAxisFigures' | 'performEventPressedMove' | 'performEventMoveForDrawing'>, 'name'>\r\nexport type OverlayOverride<E = unknown> = Partial<Omit<Overlay<E>, 'currentStep' | 'totalStep' | 'createPointFigures' | 'createXAxisFigures' | 'createYAxisFigures' | 'performEventPressedMove' | 'performEventMoveForDrawing'>>\r\n\r\nexport type OverlayFilter<E = unknown> = Partial<Pick<Overlay<E>, 'id' | 'groupId' | 'name' | 'paneId'>>\r\n\r\nexport type OverlayInnerConstructor<E = unknown> = new () => OverlayImp<E>\r\nexport type OverlayConstructor<E = unknown> = new () => Overlay<E>\r\n\r\nconst OVERLAY_DRAW_STEP_START = 1\r\nconst OVERLAY_DRAW_STEP_FINISHED = -1\r\n\r\nexport const OVERLAY_ID_PREFIX = 'overlay_'\r\n\r\nexport const OVERLAY_FIGURE_KEY_PREFIX = 'overlay_figure_'\r\n\r\nexport default class OverlayImp<E = unknown> implements Overlay<E> {\r\n  id: string\r\n  groupId = ''\r\n  paneId: string\r\n  name: string\r\n  totalStep = 1\r\n  currentStep = OVERLAY_DRAW_STEP_START\r\n  lock = false\r\n  visible = true\r\n  zLevel = 0\r\n  needDefaultPointFigure = false\r\n  needDefaultXAxisFigure = false\r\n  needDefaultYAxisFigure = false\r\n  mode: OverlayMode = 'normal'\r\n  modeSensitivity = 8\r\n  points: Array<Partial<Omit<Point, 'dataIndex'>>> = []\r\n  extendData: E\r\n  styles: Nullable<DeepPartial<OverlayStyle>> = null\r\n  createPointFigures: Nullable<OverlayCreateFiguresCallback<E>> = null\r\n  createXAxisFigures: Nullable<OverlayCreateFiguresCallback<E>> = null\r\n  createYAxisFigures: Nullable<OverlayCreateFiguresCallback<E>> = null\r\n  performEventPressedMove: Nullable<(params: OverlayPerformEventParams) => void> = null\r\n  performEventMoveForDrawing: Nullable<(params: OverlayPerformEventParams) => void> = null\r\n  onDrawStart: Nullable<OverlayEventCallback<E>> = null\r\n  onDrawing: Nullable<OverlayEventCallback<E>> = null\r\n  onDrawEnd: Nullable<OverlayEventCallback<E>> = null\r\n  onClick: Nullable<OverlayEventCallback<E>> = null\r\n  onDoubleClick: Nullable<OverlayEventCallback<E>> = null\r\n  onRightClick: Nullable<OverlayEventCallback<E>> = null\r\n  onPressedMoveStart: Nullable<OverlayEventCallback<E>> = null\r\n  onPressedMoving: Nullable<OverlayEventCallback<E>> = null\r\n  onPressedMoveEnd: Nullable<OverlayEventCallback<E>> = null\r\n  onMouseMove: Nullable<OverlayEventCallback<E>> = null\r\n  onMouseEnter: Nullable<OverlayEventCallback<E>> = null\r\n  onMouseLeave: Nullable<OverlayEventCallback<E>> = null\r\n  onRemoved: Nullable<OverlayEventCallback<E>> = null\r\n  onSelected: Nullable<OverlayEventCallback<E>> = null\r\n  onDeselected: Nullable<OverlayEventCallback<E>> = null\r\n\r\n  private _prevZLevel = 0\r\n\r\n  private _prevOverlay: Overlay<E>\r\n\r\n  private _prevPressedPoint: Nullable<Partial<Point>> = null\r\n  private _prevPressedPoints: Array<Partial<Point>> = []\r\n\r\n  constructor (overlay: OverlayTemplate<E>) {\r\n    this.override(overlay)\r\n  }\r\n\r\n  override (overlay: Partial<Overlay<E>>): void {\r\n    this._prevOverlay = clone(this)\r\n\r\n    const {\r\n      id,\r\n      name,\r\n      currentStep: _,\r\n      points,\r\n      styles,\r\n      ...others\r\n    } = overlay\r\n\r\n    merge(this, others)\r\n\r\n    if (!isString(this.name)) {\r\n      this.name = name ?? ''\r\n    }\r\n\r\n    if (!isString(this.id) && isString(id)) {\r\n      this.id = id\r\n    }\r\n\r\n    if (isValid(styles)) {\r\n      this.styles ??= {}\r\n      merge(this.styles, styles)\r\n    }\r\n\r\n    if (isArray(points) && points.length > 0) {\r\n      let repeatTotalStep = 0\r\n      this.points = [...points]\r\n      if (points.length >= this.totalStep - 1) {\r\n        this.currentStep = OVERLAY_DRAW_STEP_FINISHED\r\n        repeatTotalStep = this.totalStep - 1\r\n      } else {\r\n        this.currentStep = points.length + 1\r\n        repeatTotalStep = points.length\r\n      }\r\n      // Prevent wrong drawing due to wrong points\r\n      if (isFunction(this.performEventMoveForDrawing)) {\r\n        for (let i = 0; i < repeatTotalStep; i++) {\r\n          this.performEventMoveForDrawing({\r\n            currentStep: i + 2,\r\n            mode: this.mode,\r\n            points: this.points,\r\n            performPointIndex: i,\r\n            performPoint: this.points[i]\r\n          })\r\n        }\r\n      }\r\n\r\n      if (this.currentStep === OVERLAY_DRAW_STEP_FINISHED) {\r\n        this.performEventPressedMove?.({\r\n          currentStep: this.currentStep,\r\n          mode: this.mode,\r\n          points: this.points,\r\n          performPointIndex: this.points.length - 1,\r\n          performPoint: this.points[this.points.length - 1]\r\n        })\r\n      }\r\n    }\r\n  }\r\n\r\n  getPrevZLevel (): number { return this._prevZLevel }\r\n\r\n  setPrevZLevel (zLevel: number): void { this._prevZLevel = zLevel }\r\n\r\n  shouldUpdate (): { draw: boolean, sort: boolean } {\r\n    const sort = this._prevOverlay.zLevel !== this.zLevel\r\n    const draw = sort ||\r\n      JSON.stringify(this._prevOverlay.points) !== JSON.stringify(this.points) ||\r\n      this._prevOverlay.visible !== this.visible ||\r\n      this._prevOverlay.extendData !== this.extendData ||\r\n      this._prevOverlay.styles !== this.styles\r\n\r\n    return { sort, draw }\r\n  }\r\n\r\n  nextStep (): void {\r\n    if (this.currentStep === this.totalStep - 1) {\r\n      this.currentStep = OVERLAY_DRAW_STEP_FINISHED\r\n    } else {\r\n      this.currentStep++\r\n    }\r\n  }\r\n\r\n  forceComplete (): void {\r\n    this.currentStep = OVERLAY_DRAW_STEP_FINISHED\r\n  }\r\n\r\n  isDrawing (): boolean {\r\n    return this.currentStep !== OVERLAY_DRAW_STEP_FINISHED\r\n  }\r\n\r\n  isStart (): boolean {\r\n    return this.currentStep === OVERLAY_DRAW_STEP_START\r\n  }\r\n\r\n  eventMoveForDrawing (point: Partial<Point>): void {\r\n    const pointIndex = this.currentStep - 1\r\n    const newPoint: Partial<Point> = {}\r\n    if (isNumber(point.timestamp)) {\r\n      newPoint.timestamp = point.timestamp\r\n    }\r\n    if (isNumber(point.dataIndex)) {\r\n      newPoint.dataIndex = point.dataIndex\r\n    }\r\n    if (isNumber(point.value)) {\r\n      newPoint.value = point.value\r\n    }\r\n    this.points[pointIndex] = newPoint\r\n    this.performEventMoveForDrawing?.({\r\n      currentStep: this.currentStep,\r\n      mode: this.mode,\r\n      points: this.points,\r\n      performPointIndex: pointIndex,\r\n      performPoint: newPoint\r\n    })\r\n  }\r\n\r\n  eventPressedPointMove (point: Partial<Point>, pointIndex: number): void {\r\n    this.points[pointIndex].timestamp = point.timestamp\r\n    if (isNumber(point.value)) {\r\n      this.points[pointIndex].value = point.value\r\n    }\r\n    this.performEventPressedMove?.({\r\n      currentStep: this.currentStep,\r\n      points: this.points,\r\n      mode: this.mode,\r\n      performPointIndex: pointIndex,\r\n      performPoint: this.points[pointIndex]\r\n    })\r\n  }\r\n\r\n  startPressedMove (point: Partial<Point>): void {\r\n    this._prevPressedPoint = { ...point }\r\n    this._prevPressedPoints = clone(this.points)\r\n  }\r\n\r\n  eventPressedOtherMove (point: Partial<Point>, chartStore: ChartStore): void {\r\n    if (this._prevPressedPoint !== null) {\r\n      let difDataIndex: Nullable<number> = null\r\n      if (isNumber(point.dataIndex) && isNumber(this._prevPressedPoint.dataIndex)) {\r\n        difDataIndex = point.dataIndex - this._prevPressedPoint.dataIndex\r\n      }\r\n      let difValue: Nullable<number> = null\r\n      if (isNumber(point.value) && isNumber(this._prevPressedPoint.value)) {\r\n        difValue = point.value - this._prevPressedPoint.value\r\n      }\r\n      this.points = this._prevPressedPoints.map(p => {\r\n        if (isNumber(p.timestamp)) {\r\n          p.dataIndex = chartStore.timestampToDataIndex(p.timestamp)\r\n        }\r\n        const newPoint = { ...p }\r\n        if (isNumber(difDataIndex) && isNumber(p.dataIndex)) {\r\n          newPoint.dataIndex = p.dataIndex + difDataIndex\r\n          newPoint.timestamp = chartStore.dataIndexToTimestamp(newPoint.dataIndex) ?? undefined\r\n        }\r\n        if (isNumber(difValue) && isNumber(p.value)) {\r\n          newPoint.value = p.value + difValue\r\n        }\r\n        return newPoint\r\n      })\r\n    }\r\n  }\r\n\r\n  static extend<E = unknown> (template: OverlayTemplate<E>): OverlayInnerConstructor<E> {\r\n    class Custom extends OverlayImp<E> {\r\n      constructor () {\r\n        super(template)\r\n      }\r\n    }\r\n    return Custom\r\n  }\r\n}\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport { isNumber } from '../../common/utils/typeChecks'\r\nimport { SymbolDefaultPrecisionConstants } from '../../common/SymbolInfo'\r\n\r\nimport type { OverlayTemplate } from '../../component/Overlay'\r\n\r\nimport type { LineAttrs } from '../figure/line'\r\nimport type { TextAttrs } from '../figure/text'\r\n\r\nconst fibonacciLine: OverlayTemplate = {\r\n  name: 'fibonacciLine',\r\n  totalStep: 3,\r\n  needDefaultPointFigure: true,\r\n  needDefaultXAxisFigure: true,\r\n  needDefaultYAxisFigure: true,\r\n  createPointFigures: ({ chart, coordinates, bounding, overlay, yAxis }) => {\r\n    const points = overlay.points\r\n\r\n    if (coordinates.length > 0) {\r\n      let precision = 0\r\n      if (yAxis?.isInCandle() ?? true) {\r\n        precision = chart.getSymbol()?.pricePrecision ?? SymbolDefaultPrecisionConstants.PRICE\r\n      } else {\r\n        const indicators = chart.getIndicators({ paneId: overlay.paneId })\r\n        indicators.forEach(indicator => {\r\n          precision = Math.max(precision, indicator.precision)\r\n        })\r\n      }\r\n      const lines: LineAttrs[] = []\r\n      const texts: TextAttrs[] = []\r\n      const startX = 0\r\n      const endX = bounding.width\r\n      if (coordinates.length > 1 && isNumber(points[0].value) && isNumber(points[1].value)) {\r\n        const percents = [1, 0.786, 0.618, 0.5, 0.382, 0.236, 0]\r\n        const yDif = coordinates[0].y - coordinates[1].y\r\n        const valueDif = points[0].value - points[1].value\r\n        percents.forEach(percent => {\r\n          const y = coordinates[1].y + yDif * percent\r\n          const value = chart.getDecimalFold().format(chart.getThousandsSeparator().format(((points[1].value ?? 0) + valueDif * percent).toFixed(precision)))\r\n          lines.push({ coordinates: [{ x: startX, y }, { x: endX, y }] })\r\n          texts.push({\r\n            x: startX,\r\n            y,\r\n            text: `${value} (${(percent * 100).toFixed(1)}%)`,\r\n            baseline: 'bottom'\r\n          })\r\n        })\r\n      }\r\n      return [\r\n        {\r\n          type: 'line',\r\n          attrs: lines\r\n        }, {\r\n          type: 'text',\r\n          isCheckEvent: false,\r\n          attrs: texts\r\n        }\r\n      ]\r\n    }\r\n    return []\r\n  }\r\n}\r\n\r\nexport default fibonacciLine\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport { isValid } from '../../common/utils/typeChecks'\r\nimport type { OverlayTemplate } from '../../component/Overlay'\r\n\r\nconst horizontalRayLine: OverlayTemplate = {\r\n  name: 'horizontalRayLine',\r\n  totalStep: 3,\r\n  needDefaultPointFigure: true,\r\n  needDefaultXAxisFigure: true,\r\n  needDefaultYAxisFigure: true,\r\n  createPointFigures: ({ coordinates, bounding }) => {\r\n    const coordinate = { x: 0, y: coordinates[0].y }\r\n    if (isValid(coordinates[1]) && coordinates[0].x < coordinates[1].x) {\r\n      coordinate.x = bounding.width\r\n    }\r\n    return [\r\n      {\r\n        type: 'line',\r\n        attrs: { coordinates: [coordinates[0], coordinate] }\r\n      }\r\n    ]\r\n  },\r\n  performEventPressedMove: ({ points, performPoint }) => {\r\n    points[0].value = performPoint.value\r\n    points[1].value = performPoint.value\r\n  },\r\n  performEventMoveForDrawing: ({ currentStep, points, performPoint }) => {\r\n    if (currentStep === 2) {\r\n      points[0].value = performPoint.value\r\n    }\r\n  }\r\n}\r\n\r\nexport default horizontalRayLine\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport type { OverlayTemplate } from '../../component/Overlay'\r\n\r\nimport type { LineAttrs } from '../figure/line'\r\n\r\nconst horizontalSegment: OverlayTemplate = {\r\n  name: 'horizontalSegment',\r\n  totalStep: 3,\r\n  needDefaultPointFigure: true,\r\n  needDefaultXAxisFigure: true,\r\n  needDefaultYAxisFigure: true,\r\n  createPointFigures: ({ coordinates }) => {\r\n    const lines: LineAttrs[] = []\r\n    if (coordinates.length === 2) {\r\n      lines.push({ coordinates })\r\n    }\r\n    return [\r\n      {\r\n        type: 'line',\r\n        attrs: lines\r\n      }\r\n    ]\r\n  },\r\n  performEventPressedMove: ({ points, performPoint }) => {\r\n    points[0].value = performPoint.value\r\n    points[1].value = performPoint.value\r\n  },\r\n  performEventMoveForDrawing: ({ currentStep, points, performPoint }) => {\r\n    if (currentStep === 2) {\r\n      points[0].value = performPoint.value\r\n    }\r\n  }\r\n}\r\n\r\nexport default horizontalSegment\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport type { OverlayTemplate } from '../../component/Overlay'\r\n\r\nconst horizontalStraightLine: OverlayTemplate = {\r\n  name: 'horizontalStraightLine',\r\n  totalStep: 2,\r\n  needDefaultPointFigure: true,\r\n  needDefaultXAxisFigure: true,\r\n  needDefaultYAxisFigure: true,\r\n  createPointFigures: ({ coordinates, bounding }) => [{\r\n    type: 'line',\r\n    attrs: {\r\n      coordinates: [\r\n        {\r\n          x: 0,\r\n          y: coordinates[0].y\r\n        }, {\r\n          x: bounding.width,\r\n          y: coordinates[0].y\r\n        }\r\n      ]\r\n    }\r\n  }]\r\n}\r\n\r\nexport default horizontalStraightLine\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport { isValid } from './utils/typeChecks'\r\n\r\nimport type { EventName, MouseTouchEvent, MouseTouchEventCallback } from './EventHandler'\r\n\r\nexport interface EventDispatcher {\r\n  dispatchEvent: (name: EventName, event: MouseTouchEvent) => boolean\r\n}\r\n\r\nexport default abstract class Eventful implements EventDispatcher {\r\n  private _children: Eventful[] = []\r\n\r\n  private readonly _callbacks = new Map<EventName, MouseTouchEventCallback>()\r\n\r\n  registerEvent (name: EventName, callback: MouseTouchEventCallback): this {\r\n    this._callbacks.set(name, callback)\r\n    return this\r\n  }\r\n\r\n  onEvent (name: EventName, event: MouseTouchEvent): boolean {\r\n    const callback = this._callbacks.get(name)\r\n    if (isValid(callback) && this.checkEventOn(event)) {\r\n      return callback(event)\r\n    }\r\n    return false\r\n  }\r\n\r\n  abstract checkEventOn (event: MouseTouchEvent): boolean\r\n\r\n  protected dispatchEventToChildren (name: EventName, event: MouseTouchEvent): boolean {\r\n    const start = this._children.length - 1\r\n    if (start > -1) {\r\n      for (let i = start; i > -1; i--) {\r\n        if (this._children[i].dispatchEvent(name, event)) {\r\n          return true\r\n        }\r\n      }\r\n    }\r\n    return false\r\n  }\r\n\r\n  dispatchEvent (name: EventName, event: MouseTouchEvent): boolean {\r\n    if (this.dispatchEventToChildren(name, event)) {\r\n      return true\r\n    }\r\n    return this.onEvent(name, event)\r\n  }\r\n\r\n  addChild (eventful: Eventful): this {\r\n    this._children.push(eventful)\r\n    return this\r\n  }\r\n\r\n  clear (): void {\r\n    this._children = []\r\n  }\r\n}\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport type Coordinate from '../common/Coordinate'\r\n\r\nimport Eventful from '../common/Eventful'\r\nimport type { MouseTouchEvent } from '../common/EventHandler'\r\n\r\nexport const DEVIATION = 2\r\n\r\nexport interface Figure<A = unknown, S = unknown> {\r\n  name: string\r\n  attrs: A\r\n  styles: S\r\n  draw: (ctx: CanvasRenderingContext2D, attrs: A, styles: S) => void\r\n  checkEventOn: (coordinate: Coordinate, attrs: A, styles: S) => boolean\r\n}\r\n\r\nexport type FigureTemplate<A = unknown, S = unknown> = Pick<Figure<A, S>, 'name' | 'draw' | 'checkEventOn'>\r\n\r\nexport type FigureCreate<A = unknown, S = unknown> = Pick<Figure<A, S>, 'name' | 'attrs' | 'styles'>\r\n\r\nexport type FigureConstructor<A = unknown, S = unknown> = new (figure: FigureCreate<A, S>) => ({ draw: (ctx: CanvasRenderingContext2D) => void })\r\nexport type FigureInnerConstructor<A = unknown, S = unknown> = new (figure: FigureCreate<A, S>) => FigureImp<A, S>\r\nexport default abstract class FigureImp<A = unknown, S = unknown> extends Eventful implements Omit<Figure<A, S>, 'name' | 'draw' | 'checkEventOn'> {\r\n  attrs: A\r\n  styles: S\r\n\r\n  constructor (figure: FigureCreate<A, S>) {\r\n    super()\r\n    this.attrs = figure.attrs\r\n    this.styles = figure.styles\r\n  }\r\n\r\n  checkEventOn (event: MouseTouchEvent): boolean {\r\n    return this.checkEventOnImp(event, this.attrs, this.styles)\r\n  }\r\n\r\n  setAttrs (attrs: A): this {\r\n    this.attrs = attrs\r\n    return this\r\n  }\r\n\r\n  setStyles (styles: S): this {\r\n    this.styles = styles\r\n    return this\r\n  }\r\n\r\n  draw (ctx: CanvasRenderingContext2D): void {\r\n    this.drawImp(ctx, this.attrs, this.styles)\r\n  }\r\n\r\n  abstract checkEventOnImp (event: MouseTouchEvent, attrs: A, styles: S): boolean\r\n\r\n  abstract drawImp (ctx: CanvasRenderingContext2D, attrs: A, styles: S): void\r\n\r\n  static extend<A, S> (figure: FigureTemplate<A, S>): new (figure: FigureCreate) => FigureImp<A, S> {\r\n    class Custom extends FigureImp<A, S> {\r\n      checkEventOnImp (coordinate: Coordinate, attrs: A, styles: S): boolean {\r\n        return figure.checkEventOn(coordinate, attrs, styles)\r\n      }\r\n\r\n      drawImp (ctx: CanvasRenderingContext2D, attrs: A, styles: S): void {\r\n        figure.draw(ctx, attrs, styles)\r\n      }\r\n    }\r\n    return Custom\r\n  }\r\n}\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport type Nullable from '../../common/Nullable'\r\nimport type Coordinate from '../../common/Coordinate'\r\nimport type { SmoothLineStyle } from '../../common/Styles'\r\n\r\nimport { type FigureTemplate, DEVIATION } from '../../component/Figure'\r\nimport { isNumber } from '../../common/utils/typeChecks'\r\n\r\nexport function checkCoordinateOnLine (coordinate: Coordinate, attrs: LineAttrs | LineAttrs[]): boolean {\r\n  let lines: LineAttrs[] = []\r\n  lines = lines.concat(attrs)\r\n\r\n  for (const line of lines) {\r\n    const { coordinates } = line\r\n    if (coordinates.length > 1) {\r\n      for (let i = 1; i < coordinates.length; i++) {\r\n        const prevCoordinate = coordinates[i - 1]\r\n        const currentCoordinate = coordinates[i]\r\n        if (prevCoordinate.x === currentCoordinate.x) {\r\n          if (\r\n            Math.abs(prevCoordinate.y - coordinate.y) + Math.abs(currentCoordinate.y - coordinate.y) - Math.abs(prevCoordinate.y - currentCoordinate.y) < DEVIATION + DEVIATION &&\r\n            Math.abs(coordinate.x - prevCoordinate.x) < DEVIATION\r\n          ) {\r\n            return true\r\n          }\r\n        } else {\r\n          const kb = getLinearSlopeIntercept(prevCoordinate, currentCoordinate)!\r\n          const y = getLinearYFromSlopeIntercept(kb, coordinate)\r\n          const yDif = Math.abs(y - coordinate.y)\r\n          if (\r\n            Math.abs(prevCoordinate.x - coordinate.x) + Math.abs(currentCoordinate.x - coordinate.x) - Math.abs(prevCoordinate.x - currentCoordinate.x) < DEVIATION + DEVIATION &&\r\n            yDif * yDif / (kb[0] * kb[0] + 1) < DEVIATION * DEVIATION\r\n          ) {\r\n            return true\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n  return false\r\n}\r\n\r\nexport function getLinearYFromSlopeIntercept (kb: Nullable<number[]>, coordinate: Coordinate): number {\r\n  if (kb !== null) {\r\n    return coordinate.x * kb[0] + kb[1]\r\n  }\r\n  return coordinate.y\r\n}\r\n\r\n/**\r\n * Ëé∑ÂèñÁÇπÂú®‰∏§ÁÇπÂÜ≥ÂÆöÁöÑ‰∏ÄÊ¨°ÂáΩÊï∞‰∏äÁöÑyÂÄº\r\n * @param coordinate1\r\n * @param coordinate2\r\n * @param targetCoordinate\r\n */\r\nexport function getLinearYFromCoordinates (coordinate1: Coordinate, coordinate2: Coordinate, targetCoordinate: Coordinate): number {\r\n  const kb = getLinearSlopeIntercept(coordinate1, coordinate2)\r\n  return getLinearYFromSlopeIntercept(kb, targetCoordinate)\r\n}\r\n\r\nexport function getLinearSlopeIntercept (coordinate1: Coordinate, coordinate2: Coordinate): Nullable<number[]> {\r\n  const difX = coordinate1.x - coordinate2.x\r\n  if (difX !== 0) {\r\n    const k = (coordinate1.y - coordinate2.y) / difX\r\n    const b = coordinate1.y - k * coordinate1.x\r\n    return [k, b]\r\n  }\r\n  return null\r\n}\r\n\r\nexport function lineTo (ctx: CanvasRenderingContext2D, coordinates: Coordinate[], smooth: number | boolean): void {\r\n  const length = coordinates.length\r\n  const smoothParam = isNumber(smooth) ? (smooth > 0 && smooth < 1 ? smooth : 0) : (smooth ? 0.5 : 0)\r\n  if ((smoothParam > 0) && length > 2) {\r\n    let cpx0 = coordinates[0].x\r\n    let cpy0 = coordinates[0].y\r\n    for (let i = 1; i < length - 1; i++) {\r\n      const prevCoordinate = coordinates[i - 1]\r\n      const coordinate = coordinates[i]\r\n      const nextCoordinate = coordinates[i + 1]\r\n      const dx01 = coordinate.x - prevCoordinate.x\r\n      const dy01 = coordinate.y - prevCoordinate.y\r\n      const dx12 = nextCoordinate.x - coordinate.x\r\n      const dy12 = nextCoordinate.y - coordinate.y\r\n      let dx02 = nextCoordinate.x - prevCoordinate.x\r\n      let dy02 = nextCoordinate.y - prevCoordinate.y\r\n      const prevSegmentLength = Math.sqrt(dx01 * dx01 + dy01 * dy01)\r\n      const nextSegmentLength = Math.sqrt(dx12 * dx12 + dy12 * dy12)\r\n      const segmentLengthRatio = nextSegmentLength / (nextSegmentLength + prevSegmentLength)\r\n\r\n      let nextCpx = coordinate.x + dx02 * smoothParam * segmentLengthRatio\r\n      let nextCpy = coordinate.y + dy02 * smoothParam * segmentLengthRatio\r\n      nextCpx = Math.min(nextCpx, Math.max(nextCoordinate.x, coordinate.x))\r\n      nextCpy = Math.min(nextCpy, Math.max(nextCoordinate.y, coordinate.y))\r\n      nextCpx = Math.max(nextCpx, Math.min(nextCoordinate.x, coordinate.x))\r\n      nextCpy = Math.max(nextCpy, Math.min(nextCoordinate.y, coordinate.y))\r\n\r\n      dx02 = nextCpx - coordinate.x\r\n      dy02 = nextCpy - coordinate.y\r\n\r\n      let cpx1 = coordinate.x - dx02 * prevSegmentLength / nextSegmentLength\r\n      let cpy1 = coordinate.y - dy02 * prevSegmentLength / nextSegmentLength\r\n\r\n      cpx1 = Math.min(cpx1, Math.max(prevCoordinate.x, coordinate.x))\r\n      cpy1 = Math.min(cpy1, Math.max(prevCoordinate.y, coordinate.y))\r\n      cpx1 = Math.max(cpx1, Math.min(prevCoordinate.x, coordinate.x))\r\n      cpy1 = Math.max(cpy1, Math.min(prevCoordinate.y, coordinate.y))\r\n\r\n      dx02 = coordinate.x - cpx1\r\n      dy02 = coordinate.y - cpy1\r\n      nextCpx = coordinate.x + dx02 * nextSegmentLength / prevSegmentLength\r\n      nextCpy = coordinate.y + dy02 * nextSegmentLength / prevSegmentLength\r\n\r\n      ctx.bezierCurveTo(cpx0, cpy0, cpx1, cpy1, coordinate.x, coordinate.y)\r\n\r\n      cpx0 = nextCpx\r\n      cpy0 = nextCpy\r\n    }\r\n    const lastCoordinate = coordinates[length - 1]\r\n    ctx.bezierCurveTo(cpx0, cpy0, lastCoordinate.x, lastCoordinate.y, lastCoordinate.x, lastCoordinate.y)\r\n  } else {\r\n    for (let i = 1; i < length; i++) {\r\n      ctx.lineTo(coordinates[i].x, coordinates[i].y)\r\n    }\r\n  }\r\n}\r\n\r\nexport function drawLine (ctx: CanvasRenderingContext2D, attrs: LineAttrs | LineAttrs[], styles: Partial<SmoothLineStyle>): void {\r\n  let lines: LineAttrs[] = []\r\n  lines = lines.concat(attrs)\r\n  const { style = 'solid', smooth = false, size = 1, color = 'currentColor', dashedValue = [2, 2] } = styles\r\n  ctx.lineWidth = size\r\n  ctx.strokeStyle = color\r\n  if (style === 'dashed') {\r\n    ctx.setLineDash(dashedValue)\r\n  } else {\r\n    ctx.setLineDash([])\r\n  }\r\n  const correction = size % 2 === 1 ? 0.5 : 0\r\n  lines.forEach(({ coordinates }) => {\r\n    if (coordinates.length > 1) {\r\n      if (\r\n        coordinates.length === 2 &&\r\n        (\r\n          coordinates[0].x === coordinates[1].x ||\r\n          coordinates[0].y === coordinates[1].y\r\n        )\r\n      ) {\r\n        ctx.beginPath()\r\n        if (coordinates[0].x === coordinates[1].x) {\r\n          ctx.moveTo(coordinates[0].x + correction, coordinates[0].y)\r\n          ctx.lineTo(coordinates[1].x + correction, coordinates[1].y)\r\n        } else {\r\n          ctx.moveTo(coordinates[0].x, coordinates[0].y + correction)\r\n          ctx.lineTo(coordinates[1].x, coordinates[1].y + correction)\r\n        }\r\n        ctx.stroke()\r\n        ctx.closePath()\r\n      } else {\r\n        ctx.save()\r\n        if (size % 2 === 1) {\r\n          ctx.translate(0.5, 0.5)\r\n        }\r\n        ctx.beginPath()\r\n        ctx.moveTo(coordinates[0].x, coordinates[0].y)\r\n        lineTo(ctx, coordinates, smooth)\r\n        ctx.stroke()\r\n        ctx.closePath()\r\n        ctx.restore()\r\n      }\r\n    }\r\n  })\r\n}\r\n\r\nexport interface LineAttrs {\r\n  coordinates: Coordinate[]\r\n}\r\n\r\nconst line: FigureTemplate<LineAttrs | LineAttrs[], Partial<SmoothLineStyle>> = {\r\n  name: 'line',\r\n  checkEventOn: checkCoordinateOnLine,\r\n  draw: (ctx: CanvasRenderingContext2D, attrs: LineAttrs | LineAttrs[], styles: Partial<SmoothLineStyle>) => {\r\n    drawLine(ctx, attrs, styles)\r\n  }\r\n}\r\n\r\nexport default line\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport type Coordinate from '../../common/Coordinate'\r\nimport type Bounding from '../../common/Bounding'\r\n\r\nimport type { OverlayTemplate } from '../../component/Overlay'\r\n\r\nimport { type LineAttrs, getLinearSlopeIntercept } from '../figure/line'\r\n\r\n/**\r\n * Ëé∑ÂèñÂπ≥Ë°åÁ∫ø\r\n * @param coordinates\r\n * @param bounding\r\n * @param extendParallelLineCount\r\n * @returns {Array}\r\n */\r\nexport function getParallelLines (coordinates: Coordinate[], bounding: Bounding, extendParallelLineCount?: number): LineAttrs[] {\r\n  const count = extendParallelLineCount ?? 0\r\n  const lines: LineAttrs[] = []\r\n  if (coordinates.length > 1) {\r\n    if (coordinates[0].x === coordinates[1].x) {\r\n      const startY = 0\r\n      const endY = bounding.height\r\n      lines.push({ coordinates: [{ x: coordinates[0].x, y: startY }, { x: coordinates[0].x, y: endY }] })\r\n      if (coordinates.length > 2) {\r\n        lines.push({ coordinates: [{ x: coordinates[2].x, y: startY }, { x: coordinates[2].x, y: endY }] })\r\n        const distance = coordinates[0].x - coordinates[2].x\r\n        for (let i = 0; i < count; i++) {\r\n          const d = distance * (i + 1)\r\n          lines.push({ coordinates: [{ x: coordinates[0].x + d, y: startY }, { x: coordinates[0].x + d, y: endY }] })\r\n        }\r\n      }\r\n    } else {\r\n      const startX = 0\r\n      const endX = bounding.width\r\n      const kb = getLinearSlopeIntercept(coordinates[0], coordinates[1])!\r\n      const k = kb[0]\r\n      const b = kb[1]\r\n      lines.push({ coordinates: [{ x: startX, y: startX * k + b }, { x: endX, y: endX * k + b }] })\r\n      if (coordinates.length > 2) {\r\n        const b1 = coordinates[2].y - k * coordinates[2].x\r\n        lines.push({ coordinates: [{ x: startX, y: startX * k + b1 }, { x: endX, y: endX * k + b1 }] })\r\n        const distance = b - b1\r\n        for (let i = 0; i < count; i++) {\r\n          const b2 = b + distance * (i + 1)\r\n          lines.push({ coordinates: [{ x: startX, y: startX * k + b2 }, { x: endX, y: endX * k + b2 }] })\r\n        }\r\n      }\r\n    }\r\n  }\r\n  return lines\r\n}\r\n\r\nconst parallelStraightLine: OverlayTemplate = {\r\n  name: 'parallelStraightLine',\r\n  totalStep: 4,\r\n  needDefaultPointFigure: true,\r\n  needDefaultXAxisFigure: true,\r\n  needDefaultYAxisFigure: true,\r\n  createPointFigures: ({ coordinates, bounding }) => [\r\n    {\r\n      type: 'line',\r\n      attrs: getParallelLines(coordinates, bounding)\r\n    }\r\n  ]\r\n}\r\n\r\nexport default parallelStraightLine\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport type { OverlayTemplate } from '../../component/Overlay'\r\n\r\nimport { getParallelLines } from './parallelStraightLine'\r\n\r\nconst priceChannelLine: OverlayTemplate = {\r\n  name: 'priceChannelLine',\r\n  totalStep: 4,\r\n  needDefaultPointFigure: true,\r\n  needDefaultXAxisFigure: true,\r\n  needDefaultYAxisFigure: true,\r\n  createPointFigures: ({ coordinates, bounding }) => [\r\n    {\r\n      type: 'line',\r\n      attrs: getParallelLines(coordinates, bounding, 1)\r\n    }\r\n  ]\r\n}\r\n\r\nexport default priceChannelLine\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport { SymbolDefaultPrecisionConstants } from '../../common/SymbolInfo'\r\nimport type { OverlayTemplate } from '../../component/Overlay'\r\n\r\nconst priceLine: OverlayTemplate = {\r\n  name: 'priceLine',\r\n  totalStep: 2,\r\n  needDefaultPointFigure: true,\r\n  needDefaultXAxisFigure: true,\r\n  needDefaultYAxisFigure: true,\r\n  createPointFigures: ({ chart, coordinates, bounding, overlay, yAxis }) => {\r\n    let precision = 0\r\n    if (yAxis?.isInCandle() ?? true) {\r\n      precision = chart.getSymbol()?.pricePrecision ?? SymbolDefaultPrecisionConstants.PRICE\r\n    } else {\r\n      const indicators = chart.getIndicators({ paneId: overlay.paneId })\r\n      indicators.forEach(indicator => {\r\n        precision = Math.max(precision, indicator.precision)\r\n      })\r\n    }\r\n    const { value = 0 } = (overlay.points)[0]\r\n    return [\r\n      {\r\n        type: 'line',\r\n        attrs: { coordinates: [coordinates[0], { x: bounding.width, y: coordinates[0].y }] }\r\n      },\r\n      {\r\n        type: 'text',\r\n        ignoreEvent: true,\r\n        attrs: {\r\n          x: coordinates[0].x,\r\n          y: coordinates[0].y,\r\n          text: chart.getDecimalFold().format(chart.getThousandsSeparator().format(value.toFixed(precision))),\r\n          baseline: 'bottom'\r\n        }\r\n      }\r\n    ]\r\n  }\r\n}\r\n\r\nexport default priceLine\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport type Coordinate from '../../common/Coordinate'\r\nimport type Bounding from '../../common/Bounding'\r\n\r\nimport type { OverlayTemplate } from '../../component/Overlay'\r\n\r\nimport { getLinearYFromCoordinates, type LineAttrs } from '../figure/line'\r\n\r\nexport function getRayLine (coordinates: Coordinate[], bounding: Bounding): LineAttrs | LineAttrs[] {\r\n  if (coordinates.length > 1) {\r\n    let coordinate = { x: 0, y: 0 }\r\n    if (coordinates[0].x === coordinates[1].x && coordinates[0].y !== coordinates[1].y) {\r\n      if (coordinates[0].y < coordinates[1].y) {\r\n        coordinate = {\r\n          x: coordinates[0].x,\r\n          y: bounding.height\r\n        }\r\n      } else {\r\n        coordinate = {\r\n          x: coordinates[0].x,\r\n          y: 0\r\n        }\r\n      }\r\n    } else if (coordinates[0].x > coordinates[1].x) {\r\n      coordinate = {\r\n        x: 0,\r\n        y: getLinearYFromCoordinates(coordinates[0], coordinates[1], { x: 0, y: coordinates[0].y })\r\n      }\r\n    } else {\r\n      coordinate = {\r\n        x: bounding.width,\r\n        y: getLinearYFromCoordinates(coordinates[0], coordinates[1], { x: bounding.width, y: coordinates[0].y })\r\n      }\r\n    }\r\n    return { coordinates: [coordinates[0], coordinate] }\r\n  }\r\n  return []\r\n}\r\n\r\nconst rayLine: OverlayTemplate = {\r\n  name: 'rayLine',\r\n  totalStep: 3,\r\n  needDefaultPointFigure: true,\r\n  needDefaultXAxisFigure: true,\r\n  needDefaultYAxisFigure: true,\r\n  createPointFigures: ({ coordinates, bounding }) => [\r\n    {\r\n      type: 'line',\r\n      attrs: getRayLine(coordinates, bounding)\r\n    }\r\n  ]\r\n}\r\n\r\nexport default rayLine\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport type { OverlayTemplate } from '../../component/Overlay'\r\n\r\nconst segment: OverlayTemplate = {\r\n  name: 'segment',\r\n  totalStep: 3,\r\n  needDefaultPointFigure: true,\r\n  needDefaultXAxisFigure: true,\r\n  needDefaultYAxisFigure: true,\r\n  createPointFigures: ({ coordinates }) => {\r\n    if (coordinates.length === 2) {\r\n      return [\r\n        {\r\n          type: 'line',\r\n          attrs: { coordinates }\r\n        }\r\n      ]\r\n    }\r\n    return []\r\n  }\r\n}\r\n\r\nexport default segment\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport { getLinearYFromCoordinates } from '../figure/line'\r\n\r\nimport type { OverlayTemplate } from '../../component/Overlay'\r\n\r\nconst straightLine: OverlayTemplate = {\r\n  name: 'straightLine',\r\n  totalStep: 3,\r\n  needDefaultPointFigure: true,\r\n  needDefaultXAxisFigure: true,\r\n  needDefaultYAxisFigure: true,\r\n  createPointFigures: ({ coordinates, bounding }) => {\r\n    if (coordinates.length === 2) {\r\n      if (coordinates[0].x === coordinates[1].x) {\r\n        return [\r\n          {\r\n            type: 'line',\r\n            attrs: {\r\n              coordinates: [\r\n                {\r\n                  x: coordinates[0].x,\r\n                  y: 0\r\n                }, {\r\n                  x: coordinates[0].x,\r\n                  y: bounding.height\r\n                }\r\n              ]\r\n            }\r\n          }\r\n        ]\r\n      }\r\n      return [\r\n        {\r\n          type: 'line',\r\n          attrs: {\r\n            coordinates: [\r\n              {\r\n                x: 0,\r\n                y: getLinearYFromCoordinates(coordinates[0], coordinates[1], { x: 0, y: coordinates[0].y })\r\n              }, {\r\n                x: bounding.width,\r\n                y: getLinearYFromCoordinates(coordinates[0], coordinates[1], { x: bounding.width, y: coordinates[0].y })\r\n              }\r\n            ]\r\n          }\r\n        }\r\n      ]\r\n    }\r\n    return []\r\n  }\r\n}\r\n\r\nexport default straightLine\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport type { OverlayTemplate } from '../../component/Overlay'\r\n\r\nconst verticalRayLine: OverlayTemplate = {\r\n  name: 'verticalRayLine',\r\n  totalStep: 3,\r\n  needDefaultPointFigure: true,\r\n  needDefaultXAxisFigure: true,\r\n  needDefaultYAxisFigure: true,\r\n  createPointFigures: ({ coordinates, bounding }) => {\r\n    if (coordinates.length === 2) {\r\n      const coordinate = { x: coordinates[0].x, y: 0 }\r\n      if (coordinates[0].y < coordinates[1].y) {\r\n        coordinate.y = bounding.height\r\n      }\r\n      return [\r\n        {\r\n          type: 'line',\r\n          attrs: { coordinates: [coordinates[0], coordinate] }\r\n        }\r\n      ]\r\n    }\r\n    return []\r\n  },\r\n  performEventPressedMove: ({ points, performPoint }) => {\r\n    points[0].timestamp = performPoint.timestamp\r\n    points[0].dataIndex = performPoint.dataIndex\r\n    points[1].timestamp = performPoint.timestamp\r\n    points[1].dataIndex = performPoint.dataIndex\r\n  },\r\n  performEventMoveForDrawing: ({ currentStep, points, performPoint }) => {\r\n    if (currentStep === 2) {\r\n      points[0].timestamp = performPoint.timestamp\r\n      points[0].dataIndex = performPoint.dataIndex\r\n    }\r\n  }\r\n}\r\n\r\nexport default verticalRayLine\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport type { OverlayTemplate } from '../../component/Overlay'\r\n\r\nconst verticalSegment: OverlayTemplate = {\r\n  name: 'verticalSegment',\r\n  totalStep: 3,\r\n  needDefaultPointFigure: true,\r\n  needDefaultXAxisFigure: true,\r\n  needDefaultYAxisFigure: true,\r\n  createPointFigures: ({ coordinates }) => {\r\n    if (coordinates.length === 2) {\r\n      return [\r\n        {\r\n          type: 'line',\r\n          attrs: { coordinates }\r\n        }\r\n      ]\r\n    }\r\n    return []\r\n  },\r\n  performEventPressedMove: ({ points, performPoint }) => {\r\n    points[0].timestamp = performPoint.timestamp\r\n    points[0].dataIndex = performPoint.dataIndex\r\n    points[1].timestamp = performPoint.timestamp\r\n    points[1].dataIndex = performPoint.dataIndex\r\n  },\r\n  performEventMoveForDrawing: ({ currentStep, points, performPoint }) => {\r\n    if (currentStep === 2) {\r\n      points[0].timestamp = performPoint.timestamp\r\n      points[0].dataIndex = performPoint.dataIndex\r\n    }\r\n  }\r\n}\r\n\r\nexport default verticalSegment\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport type { OverlayTemplate } from '../../component/Overlay'\r\n\r\nconst verticalStraightLine: OverlayTemplate = {\r\n  name: 'verticalStraightLine',\r\n  totalStep: 2,\r\n  needDefaultPointFigure: true,\r\n  needDefaultXAxisFigure: true,\r\n  needDefaultYAxisFigure: true,\r\n  createPointFigures: ({ coordinates, bounding }) => [\r\n    {\r\n      type: 'line',\r\n      attrs: {\r\n        coordinates: [\r\n          {\r\n            x: coordinates[0].x,\r\n            y: 0\r\n          }, {\r\n            x: coordinates[0].x,\r\n            y: bounding.height\r\n          }\r\n        ]\r\n      }\r\n    }\r\n  ]\r\n}\r\n\r\nexport default verticalStraightLine\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport type { OverlayTemplate } from '../../component/Overlay'\r\nimport { isFunction, isValid } from '../../common/utils/typeChecks'\r\n\r\nconst simpleAnnotation: OverlayTemplate = {\r\n  name: 'simpleAnnotation',\r\n  totalStep: 2,\r\n  styles: {\r\n    line: { style: 'dashed' }\r\n  },\r\n  createPointFigures: ({ overlay, coordinates }) => {\r\n    let text = ''\r\n    if (isValid(overlay.extendData)) {\r\n      if (!isFunction(overlay.extendData)) {\r\n        text = (overlay.extendData ?? '') as string\r\n      } else {\r\n        text = (overlay.extendData(overlay)) as string\r\n      }\r\n    }\r\n    const startX = coordinates[0].x\r\n    const startY = coordinates[0].y - 6\r\n    const lineEndY = startY - 50\r\n    const arrowEndY = lineEndY - 5\r\n    return [\r\n      {\r\n        type: 'line',\r\n        attrs: { coordinates: [{ x: startX, y: startY }, { x: startX, y: lineEndY }] },\r\n        ignoreEvent: true\r\n      },\r\n      {\r\n        type: 'polygon',\r\n        attrs: { coordinates: [{ x: startX, y: lineEndY }, { x: startX - 4, y: arrowEndY }, { x: startX + 4, y: arrowEndY }] },\r\n        ignoreEvent: true\r\n      },\r\n      {\r\n        type: 'text',\r\n        attrs: { x: startX, y: arrowEndY, text, align: 'center', baseline: 'bottom' },\r\n        ignoreEvent: true\r\n      }\r\n    ]\r\n  }\r\n}\r\n\r\nexport default simpleAnnotation\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport { formatPrecision } from '../../common/utils/format'\r\nimport { SymbolDefaultPrecisionConstants } from '../../common/SymbolInfo'\r\nimport { isFunction, isNumber, isValid } from '../../common/utils/typeChecks'\r\n\r\nimport type { OverlayTemplate } from '../../component/Overlay'\r\n\r\nconst simpleTag: OverlayTemplate = {\r\n  name: 'simpleTag',\r\n  totalStep: 2,\r\n  styles: {\r\n    line: { style: 'dashed' }\r\n  },\r\n  createPointFigures: ({ bounding, coordinates }) => ({\r\n    type: 'line',\r\n    attrs: {\r\n      coordinates: [\r\n        { x: 0, y: coordinates[0].y },\r\n        { x: bounding.width, y: coordinates[0].y }\r\n      ]\r\n    },\r\n    ignoreEvent: true\r\n  }),\r\n  createYAxisFigures: ({ chart, overlay, coordinates, bounding, yAxis }) => {\r\n    const isFromZero = yAxis?.isFromZero() ?? false\r\n    let textAlign: CanvasTextAlign = 'left'\r\n    let x = 0\r\n    if (isFromZero) {\r\n      textAlign = 'left'\r\n      x = 0\r\n    } else {\r\n      textAlign = 'right'\r\n      x = bounding.width\r\n    }\r\n    let text = ''\r\n    if (isValid(overlay.extendData)) {\r\n      if (!isFunction(overlay.extendData)) {\r\n        text = (overlay.extendData ?? '') as string\r\n      } else {\r\n        text = overlay.extendData(overlay) as string\r\n      }\r\n    }\r\n    if (!isValid(text) && isNumber(overlay.points[0].value)) {\r\n      text = formatPrecision(overlay.points[0].value, chart.getSymbol()?.pricePrecision ?? SymbolDefaultPrecisionConstants.PRICE)\r\n    }\r\n    return { type: 'text', attrs: { x, y: coordinates[0].y, text, align: textAlign, baseline: 'middle' } }\r\n  }\r\n}\r\n\r\nexport default simpleTag\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport type Nullable from '../../common/Nullable'\r\n\r\nimport OverlayImp, { type OverlayTemplate, type OverlayConstructor, type OverlayInnerConstructor } from '../../component/Overlay'\r\n\r\nimport fibonacciLine from './fibonacciLine'\r\nimport horizontalRayLine from './horizontalRayLine'\r\nimport horizontalSegment from './horizontalSegment'\r\nimport horizontalStraightLine from './horizontalStraightLine'\r\nimport parallelStraightLine from './parallelStraightLine'\r\nimport priceChannelLine from './priceChannelLine'\r\nimport priceLine from './priceLine'\r\nimport rayLine from './rayLine'\r\nimport segment from './segment'\r\nimport straightLine from './straightLine'\r\nimport verticalRayLine from './verticalRayLine'\r\nimport verticalSegment from './verticalSegment'\r\nimport verticalStraightLine from './verticalStraightLine'\r\n\r\nimport simpleAnnotation from './simpleAnnotation'\r\nimport simpleTag from './simpleTag'\r\n\r\nconst overlays: Record<string, OverlayInnerConstructor> = {}\r\n\r\nconst extensions = [\r\n  fibonacciLine, horizontalRayLine, horizontalSegment, horizontalStraightLine,\r\n  parallelStraightLine, priceChannelLine, priceLine, rayLine, segment,\r\n  straightLine, verticalRayLine, verticalSegment, verticalStraightLine,\r\n  simpleAnnotation, simpleTag\r\n]\r\n\r\nextensions.forEach((template: OverlayTemplate) => {\r\n  overlays[template.name] = OverlayImp.extend(template)\r\n})\r\n\r\nfunction registerOverlay<E = unknown> (template: OverlayTemplate<E>): void {\r\n  overlays[template.name] = OverlayImp.extend(template)\r\n}\r\n\r\nfunction getOverlayInnerClass (name: string): Nullable<OverlayInnerConstructor> {\r\n  return overlays[name] ?? null\r\n}\r\n\r\nfunction getOverlayClass (name: string): Nullable<OverlayConstructor> {\r\n  return overlays[name] ?? null\r\n}\r\n\r\nfunction getSupportedOverlays (): string[] {\r\n  return Object.keys(overlays)\r\n}\r\n\r\nexport { registerOverlay, getOverlayClass, getOverlayInnerClass, getSupportedOverlays }\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport type DeepPartial from '../../common/DeepPartial'\r\nimport type { Styles } from '../../common/Styles'\r\n\r\nconst light: DeepPartial<Styles> = {\r\n  grid: {\r\n    horizontal: {\r\n      color: '#EDEDED'\r\n    },\r\n    vertical: {\r\n      color: '#EDEDED'\r\n    }\r\n  },\r\n  candle: {\r\n    priceMark: {\r\n      high: {\r\n        color: '#76808F'\r\n      },\r\n      low: {\r\n        color: '#76808F'\r\n      }\r\n    },\r\n    tooltip: {\r\n      rect: {\r\n        color: '#FEFEFE',\r\n        borderColor: '#F2F3F5'\r\n      },\r\n      title: {\r\n        color: '#76808F'\r\n      },\r\n      legend: {\r\n        color: '#76808F'\r\n      }\r\n    }\r\n  },\r\n  indicator: {\r\n    tooltip: {\r\n      title: {\r\n        color: '#76808F'\r\n      },\r\n      legend: {\r\n        color: '#76808F'\r\n      }\r\n    }\r\n  },\r\n  xAxis: {\r\n    axisLine: {\r\n      color: '#DDDDDD'\r\n    },\r\n    tickText: {\r\n      color: '#76808F'\r\n    },\r\n    tickLine: {\r\n      color: '#DDDDDD'\r\n    }\r\n  },\r\n  yAxis: {\r\n    axisLine: {\r\n      color: '#DDDDDD'\r\n    },\r\n    tickText: {\r\n      color: '#76808F'\r\n    },\r\n    tickLine: {\r\n      color: '#DDDDDD'\r\n    }\r\n  },\r\n  separator: {\r\n    color: '#DDDDDD'\r\n  },\r\n  crosshair: {\r\n    horizontal: {\r\n      line: {\r\n        color: '#76808F'\r\n      },\r\n      text: {\r\n        borderColor: '#686D76',\r\n        backgroundColor: '#686D76'\r\n      }\r\n    },\r\n    vertical: {\r\n      line: {\r\n        color: '#76808F'\r\n      },\r\n      text: {\r\n        borderColor: '#686D76',\r\n        backgroundColor: '#686D76'\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nexport default light\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport type DeepPartial from '../../common/DeepPartial'\r\nimport type { Styles } from '../../common/Styles'\r\n\r\nconst dark: DeepPartial<Styles> = {\r\n  grid: {\r\n    horizontal: {\r\n      color: '#292929'\r\n    },\r\n    vertical: {\r\n      color: '#292929'\r\n    }\r\n  },\r\n  candle: {\r\n    priceMark: {\r\n      high: {\r\n        color: '#929AA5'\r\n      },\r\n      low: {\r\n        color: '#929AA5'\r\n      }\r\n    },\r\n    tooltip: {\r\n      rect: {\r\n        color: 'rgba(10, 10, 10, .6)',\r\n        borderColor: 'rgba(10, 10, 10, .6)'\r\n      },\r\n      title: {\r\n        color: '#929AA5'\r\n      },\r\n      legend: {\r\n        color: '#929AA5'\r\n      }\r\n    }\r\n  },\r\n  indicator: {\r\n    tooltip: {\r\n      title: {\r\n        color: '#929AA5'\r\n      },\r\n      legend: {\r\n        color: '#929AA5'\r\n      }\r\n    }\r\n  },\r\n  xAxis: {\r\n    axisLine: {\r\n      color: '#333333'\r\n    },\r\n    tickText: {\r\n      color: '#929AA5'\r\n    },\r\n    tickLine: {\r\n      color: '#333333'\r\n    }\r\n  },\r\n  yAxis: {\r\n    axisLine: {\r\n      color: '#333333'\r\n    },\r\n    tickText: {\r\n      color: '#929AA5'\r\n    },\r\n    tickLine: {\r\n      color: '#333333'\r\n    }\r\n  },\r\n  separator: {\r\n    color: '#333333'\r\n  },\r\n  crosshair: {\r\n    horizontal: {\r\n      line: {\r\n        color: '#929AA5'\r\n      },\r\n      text: {\r\n        borderColor: '#373a40',\r\n        backgroundColor: '#373a40'\r\n      }\r\n    },\r\n    vertical: {\r\n      line: {\r\n        color: '#929AA5'\r\n      },\r\n      text: {\r\n        borderColor: '#373a40',\r\n        backgroundColor: '#373a40'\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nexport default dark\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport type Nullable from '../../common/Nullable'\r\nimport type DeepPartial from '../../common/DeepPartial'\r\nimport type { Styles } from '../../common/Styles'\r\n\r\nimport light from './light'\r\nimport dark from './dark'\r\n\r\nconst styles: Record<string, DeepPartial<Styles>> = {\r\n  light,\r\n  dark\r\n}\r\n\r\nfunction registerStyles (name: string, ss: DeepPartial<Styles>): void {\r\n  styles[name] = ss\r\n}\r\n\r\nfunction getStyles (name: string): Nullable<DeepPartial<Styles>> {\r\n  return styles[name] ?? null\r\n}\r\n\r\nexport {\r\n  registerStyles,\r\n  getStyles\r\n}\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport type { AxisCreate } from '../component/Axis'\r\n\r\nexport type PaneState = 'normal' | 'maximize' | 'minimize'\r\n\r\nexport interface PaneOptions {\r\n  id?: string\r\n  height?: number\r\n  minHeight?: number\r\n  dragEnabled?: boolean\r\n  order?: number\r\n  state?: PaneState,\r\n  axis?: Partial<AxisCreate>\r\n}\r\n\r\nexport const PANE_MIN_HEIGHT = 30\r\n\r\nexport const PANE_DEFAULT_HEIGHT = 100\r\n\r\nexport const PaneIdConstants = {\r\n  CANDLE: 'candle_pane',\r\n  INDICATOR: 'indicator_pane_',\r\n  X_AXIS: 'x_axis_pane'\r\n}\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport type Nullable from './common/Nullable'\r\nimport type PickPartial from './common/PickPartial'\r\nimport type DeepPartial from './common/DeepPartial'\r\nimport type PickRequired from './common/PickRequired'\r\nimport type { KLineData, VisibleRangeData } from './common/Data'\r\nimport type VisibleRange from './common/VisibleRange'\r\nimport type Coordinate from './common/Coordinate'\r\nimport { getDefaultVisibleRange } from './common/VisibleRange'\r\nimport TaskScheduler, { generateTaskId } from './common/TaskScheduler'\r\nimport type Crosshair from './common/Crosshair'\r\nimport type BarSpace from './common/BarSpace'\r\nimport type { Period } from './common/Period'\r\nimport { SymbolDefaultPrecisionConstants, type SymbolInfo } from './common/SymbolInfo'\r\n\r\nimport Action from './common/Action'\r\nimport type { ActionType, ActionCallback } from './common/Action'\r\nimport { formatValue, formatTimestampByTemplate, formatBigNumber, formatThousands, formatFoldDecimal } from './common/utils/format'\r\nimport { getDefaultStyles, type Styles, type TooltipLegend } from './common/Styles'\r\nimport { isArray, isString, isValid, isNumber, isBoolean, merge } from './common/utils/typeChecks'\r\nimport { createId } from './common/utils/id'\r\nimport { binarySearchNearest } from './common/utils/number'\r\nimport { logWarn } from './common/utils/logger'\r\nimport { UpdateLevel } from './common/Updater'\r\nimport type { DataLoader, DataLoaderGetBarsParams, DataLoadMore, DataLoadType } from './common/DataLoader'\r\n\r\nimport type { Options, Formatter, ThousandsSeparator, DecimalFold, FormatDateType, FormatDateParams, FormatBigNumber, FormatExtendText, FormatExtendTextParams } from './Options'\r\n\r\nimport type { IndicatorOverride, IndicatorCreate, IndicatorFilter } from './component/Indicator'\r\nimport type IndicatorImp from './component/Indicator'\r\nimport { getIndicatorClass } from './extension/indicator/index'\r\n\r\nimport type OverlayImp from './component/Overlay'\r\nimport { type OverlayCreate, OVERLAY_ID_PREFIX, type OverlayFilter, type OverlayFigure, type OverlayOverride } from './component/Overlay'\r\nimport { getOverlayInnerClass } from './extension/overlay/index'\r\n\r\nimport { getStyles as getExtensionStyles } from './extension/styles/index'\r\n\r\nimport { PaneIdConstants } from './pane/types'\r\n\r\nimport type Chart from './Chart'\r\n\r\nconst BarSpaceLimitConstants = {\r\n  MIN: 1,\r\n  MAX: 50\r\n}\r\n\r\ntype ScrollLimitRole = 'bar_count' | 'distance'\r\n\r\nexport interface ProgressOverlayInfo {\r\n  paneId: string\r\n  overlay: OverlayImp\r\n  appointPaneFlag: boolean\r\n}\r\n\r\nexport type EventOverlayInfoFigureType = 'none' | 'point' | 'other'\r\n\r\nexport interface EventOverlayInfo {\r\n  paneId: string\r\n  overlay: Nullable<OverlayImp>\r\n  figureType: EventOverlayInfoFigureType\r\n  figureIndex: number\r\n  figure: Nullable<OverlayFigure>\r\n}\r\n\r\ntype ProcessOverlayEventCallback = (overlay: OverlayImp, figure: Nullable<OverlayFigure>) => boolean\r\n\r\nconst DEFAULT_BAR_SPACE = 10\r\n\r\nconst DEFAULT_OFFSET_RIGHT_DISTANCE = 80\r\n\r\nconst BAR_GAP_RATIO = 0.2\r\n\r\nexport const SCALE_MULTIPLIER = 10\r\n\r\nexport const DEFAULT_MIN_TIME_SPAN = 15 * 60 * 1000\r\n\r\nexport interface Store {\r\n  setStyles: (value: string | DeepPartial<Styles>) => void\r\n  getStyles: () => Styles\r\n  setFormatter: (formatter: Partial<Formatter>) => void\r\n  getFormatter: () => Formatter\r\n  setLocale: (locale: string) => void\r\n  getLocale: () => string\r\n  setTimezone: (timezone: string) => void\r\n  getTimezone: () => string\r\n  setThousandsSeparator: (thousandsSeparator: Partial<ThousandsSeparator>) => void\r\n  getThousandsSeparator: () => ThousandsSeparator\r\n  setDecimalFold: (decimalFold: Partial<DecimalFold>) => void\r\n  getDecimalFold: () => DecimalFold\r\n  setSymbol: (symbol: PickPartial<SymbolInfo, 'pricePrecision' | 'volumePrecision'>) => void\r\n  getSymbol: () => Nullable<SymbolInfo>\r\n  setPeriod: (period: Period) => void\r\n  getPeriod: () => Nullable<Period>\r\n  getDataList: () => KLineData[]\r\n  setOffsetRightDistance: (distance: number) => void\r\n  getOffsetRightDistance: () => number\r\n  setMaxOffsetLeftDistance: (distance: number) => void\r\n  setMaxOffsetRightDistance: (distance: number) => void\r\n  setLeftMinVisibleBarCount: (barCount: number) => void\r\n  setRightMinVisibleBarCount: (barCount: number) => void\r\n  setBarSpace: (space: number) => void\r\n  getBarSpace: () => BarSpace\r\n  getVisibleRange: () => VisibleRange\r\n  setDataLoader: (dataLoader: DataLoader) => void\r\n  overrideIndicator: (override: IndicatorCreate) => boolean\r\n  removeIndicator: (filter?: IndicatorFilter) => boolean\r\n  overrideOverlay: (override: Partial<OverlayCreate>) => boolean\r\n  removeOverlay: (filter?: OverlayFilter) => boolean\r\n  setZoomEnabled: (enabled: boolean) => void\r\n  isZoomEnabled: () => boolean\r\n  setScrollEnabled: (enabled: boolean) => void\r\n  isScrollEnabled: () => boolean\r\n  resetData: () => void\r\n}\r\n\r\nexport default class StoreImp implements Store {\r\n  /**\r\n   * Internal chart\r\n   */\r\n  private readonly _chart: Chart\r\n\r\n  /**\r\n   * Styles\r\n   */\r\n  private readonly _styles = getDefaultStyles()\r\n\r\n  /**\r\n   * Custom api\r\n   */\r\n  private readonly _formatter = {\r\n    formatDate: ({\r\n      dateTimeFormat,\r\n      timestamp,\r\n      template\r\n    }: FormatDateParams) => formatTimestampByTemplate(dateTimeFormat, timestamp, template),\r\n    formatBigNumber,\r\n    formatExtendText: (_: FormatExtendTextParams) => ''\r\n  }\r\n\r\n  /**\r\n   * Inner formatter\r\n   * @description Internal use only\r\n   */\r\n  private readonly _innerFormatter = {\r\n    formatDate: (timestamp: number, template: string, type: FormatDateType) => this._formatter.formatDate({ dateTimeFormat: this._dateTimeFormat, timestamp, template, type }),\r\n    formatBigNumber: (value: number | string) => this._formatter.formatBigNumber(value),\r\n    formatExtendText: (params: FormatExtendTextParams) => this._formatter.formatExtendText(params)\r\n  }\r\n\r\n  /**\r\n   * Locale\r\n   */\r\n  private _locale = 'en-US'\r\n\r\n  /**\r\n   * Thousands separator\r\n   */\r\n  private readonly _thousandsSeparator = {\r\n    sign: ',',\r\n    format: (value: string | number) => formatThousands(value, this._thousandsSeparator.sign)\r\n  }\r\n\r\n  /**\r\n   * Decimal fold\r\n   */\r\n  private readonly _decimalFold = {\r\n    threshold: 3,\r\n    format: (value: string | number) => formatFoldDecimal(value, this._decimalFold.threshold)\r\n  }\r\n\r\n  /**\r\n   * Symbol\r\n   */\r\n  private _symbol: Nullable<SymbolInfo> = null\r\n\r\n  /**\r\n   * Period\r\n   */\r\n  private _period: Nullable<Period> = null\r\n\r\n  /**\r\n   * Data source\r\n   */\r\n  private _dataList: KLineData[] = []\r\n\r\n  /**\r\n   * Load more data callback\r\n   */\r\n  private _dataLoader: Nullable<DataLoader> = null\r\n\r\n  /**\r\n   * Is loading data flag\r\n   */\r\n  private _loading = false\r\n\r\n  /**\r\n  * Whether there are forward and backward more flag\r\n   */\r\n  private readonly _dataLoadMore = { forward: false, backward: false }\r\n\r\n  /**\r\n     * Time format\r\n     */\r\n  private _dateTimeFormat: Intl.DateTimeFormat\r\n\r\n  /**\r\n   * Scale enabled flag\r\n   */\r\n  private _zoomEnabled = true\r\n\r\n  /**\r\n   * Scroll enabled flag\r\n   */\r\n  private _scrollEnabled = true\r\n\r\n  /**\r\n   * Total space of drawing area\r\n   */\r\n  private _totalBarSpace = 0\r\n\r\n  /**\r\n   * Space occupied by a single piece of data\r\n   */\r\n  private _barSpace = DEFAULT_BAR_SPACE\r\n\r\n  /**\r\n   * The space of the draw bar\r\n   */\r\n  private _gapBarSpace: number\r\n\r\n  /**\r\n   * Distance from the last data to the right of the drawing area\r\n   */\r\n  private _offsetRightDistance = DEFAULT_OFFSET_RIGHT_DISTANCE\r\n\r\n  /**\r\n   * The number of bar calculated from the distance of the last data to the right of the drawing area\r\n   */\r\n  private _lastBarRightSideDiffBarCount: number\r\n\r\n  /**\r\n   * The number of bar to the right of the drawing area from the last data when scrolling starts\r\n   */\r\n  private _startLastBarRightSideDiffBarCount = 0\r\n\r\n  /**\r\n   * Scroll limit role\r\n   */\r\n  private _scrollLimitRole: ScrollLimitRole = 'bar_count'\r\n\r\n  /**\r\n   * Scroll to the leftmost and rightmost visible bar\r\n   */\r\n  private readonly _minVisibleBarCount = { left: 2, right: 2 }\r\n\r\n  /**\r\n   * Scroll to the leftmost and rightmost distance\r\n   */\r\n  private readonly _maxOffsetDistance = { left: 50, right: 50 }\r\n\r\n  /**\r\n   * Start and end points of visible area data index\r\n   */\r\n  private _visibleRange = getDefaultVisibleRange()\r\n\r\n  /**\r\n   * Visible data array\r\n   */\r\n  private _visibleRangeDataList: VisibleRangeData[] = []\r\n\r\n  /**\r\n   * Visible highest lowest price data\r\n   */\r\n  private _visibleRangeHighLowPrice = [\r\n    { x: 0, price: Number.MIN_SAFE_INTEGER },\r\n    { x: 0, price: Number.MAX_SAFE_INTEGER }\r\n  ]\r\n\r\n  /**\r\n   * Crosshair info\r\n   */\r\n  private _crosshair: Crosshair = {}\r\n\r\n  /**\r\n   * Actions\r\n   */\r\n  private readonly _actions = new Map<ActionType, Action>()\r\n\r\n  /**\r\n   * Indicator\r\n   */\r\n  private readonly _indicators = new Map<string, IndicatorImp[]>()\r\n\r\n  /**\r\n   * Task scheduler\r\n   */\r\n  private readonly _taskScheduler = new TaskScheduler()\r\n\r\n  /**\r\n   * Overlay\r\n   */\r\n  private readonly _overlays = new Map<string, OverlayImp[]>()\r\n\r\n  /**\r\n   * Overlay information in painting\r\n   */\r\n  private _progressOverlayInfo: Nullable<ProgressOverlayInfo> = null\r\n\r\n  private _lastPriceMarkExtendTextUpdateTimers: Array<ReturnType<typeof setTimeout>> = []\r\n\r\n  /**\r\n   * Overlay information by the mouse pressed\r\n   */\r\n  private _pressedOverlayInfo: EventOverlayInfo = {\r\n    paneId: '',\r\n    overlay: null,\r\n    figureType: 'none',\r\n    figureIndex: -1,\r\n    figure: null\r\n  }\r\n\r\n  /**\r\n   * Overlay information by hover\r\n   */\r\n  private _hoverOverlayInfo: EventOverlayInfo = {\r\n    paneId: '',\r\n    overlay: null,\r\n    figureType: 'none',\r\n    figureIndex: -1,\r\n    figure: null\r\n  }\r\n\r\n  /**\r\n   * Overlay information by the mouse click\r\n   */\r\n  private _clickOverlayInfo: EventOverlayInfo = {\r\n    paneId: '',\r\n    overlay: null,\r\n    figureType: 'none',\r\n    figureIndex: -1,\r\n    figure: null\r\n  }\r\n\r\n  constructor (chart: Chart, options?: Options) {\r\n    this._chart = chart\r\n    this._calcOptimalBarSpace()\r\n    this._lastBarRightSideDiffBarCount = this._offsetRightDistance / this._barSpace\r\n    const { styles, locale, timezone, formatter, thousandsSeparator, decimalFold } = options ?? {}\r\n    if (isValid(styles)) {\r\n      this.setStyles(styles)\r\n    }\r\n    if (isString(locale)) {\r\n      this.setLocale(locale)\r\n    }\r\n    this.setTimezone(timezone ?? '')\r\n    if (isValid(formatter)) {\r\n      this.setFormatter(formatter)\r\n    }\r\n    if (isValid(thousandsSeparator)) {\r\n      this.setThousandsSeparator(thousandsSeparator)\r\n    }\r\n    if (isValid(decimalFold)) {\r\n      this.setDecimalFold(decimalFold)\r\n    }\r\n  }\r\n\r\n  setStyles (value: string | DeepPartial<Styles>): void {\r\n    let styles: Nullable<DeepPartial<Styles>> = null\r\n    if (isString(value)) {\r\n      styles = getExtensionStyles(value)\r\n    } else {\r\n      styles = value\r\n    }\r\n    merge(this._styles, styles)\r\n    // `candle.tooltip.custom` should override\r\n    if (isArray(styles?.candle?.tooltip?.legend?.template)) {\r\n      this._styles.candle.tooltip.legend.template = styles.candle.tooltip.legend.template as TooltipLegend[]\r\n    }\r\n    if (isValid(styles?.candle?.priceMark?.last?.extendTexts)) {\r\n      this._clearLastPriceMarkExtendTextUpdateTimer()\r\n      const intervals: number[] = []\r\n      this._styles.candle.priceMark.last.extendTexts.forEach(item => {\r\n        const updateInterval = item.updateInterval\r\n        if (item.show && updateInterval > 0 && !intervals.includes(updateInterval)) {\r\n          intervals.push(updateInterval)\r\n          const timer = setInterval(() => {\r\n            this._chart.updatePane(UpdateLevel.Main, PaneIdConstants.CANDLE)\r\n          }, updateInterval)\r\n          this._lastPriceMarkExtendTextUpdateTimers.push(timer)\r\n        }\r\n      })\r\n    }\r\n  }\r\n\r\n  getStyles (): Styles { return this._styles }\r\n\r\n  setFormatter (formatter: Partial<Formatter>): void {\r\n    merge(this._formatter, formatter)\r\n  }\r\n\r\n  getFormatter (): Formatter { return this._formatter }\r\n\r\n  getInnerFormatter (): {\r\n    formatDate: (timestamp: number, template: string, type: FormatDateType) => string\r\n    formatBigNumber: FormatBigNumber,\r\n    formatExtendText: FormatExtendText\r\n    } {\r\n    return this._innerFormatter\r\n  }\r\n\r\n  setLocale (locale: string): void { this._locale = locale }\r\n\r\n  getLocale (): string { return this._locale }\r\n\r\n  setTimezone (timezone: string): void {\r\n    if (\r\n      !isValid(this._dateTimeFormat) ||\r\n      (this.getTimezone() !== timezone)\r\n    ) {\r\n      const options: Intl.DateTimeFormatOptions = {\r\n        hour12: false,\r\n        year: 'numeric',\r\n        month: '2-digit',\r\n        day: '2-digit',\r\n        hour: '2-digit',\r\n        minute: '2-digit',\r\n        second: '2-digit'\r\n      }\r\n      if (timezone.length > 0) {\r\n        options.timeZone = timezone\r\n      }\r\n      let dateTimeFormat: Nullable<Intl.DateTimeFormat> = null\r\n      try {\r\n        dateTimeFormat = new Intl.DateTimeFormat('en', options)\r\n      } catch (e) {\r\n        logWarn('', '', 'Timezone is error!!!')\r\n      }\r\n      if (dateTimeFormat !== null) {\r\n        this._dateTimeFormat = dateTimeFormat\r\n      }\r\n    }\r\n  }\r\n\r\n  getTimezone (): string { return this._dateTimeFormat.resolvedOptions().timeZone }\r\n\r\n  getDateTimeFormat (): Intl.DateTimeFormat {\r\n    return this._dateTimeFormat\r\n  }\r\n\r\n  setThousandsSeparator (thousandsSeparator: Partial<ThousandsSeparator>): void {\r\n    merge(this._thousandsSeparator, thousandsSeparator)\r\n  }\r\n\r\n  getThousandsSeparator (): ThousandsSeparator { return this._thousandsSeparator }\r\n\r\n  setDecimalFold (decimalFold: Partial<DecimalFold>): void { merge(this._decimalFold, decimalFold) }\r\n\r\n  getDecimalFold (): DecimalFold { return this._decimalFold }\r\n\r\n  setSymbol (symbol: PickPartial<SymbolInfo, 'pricePrecision' | 'volumePrecision'>): void {\r\n    this.resetData(() => {\r\n      // eslint-disable-next-line @typescript-eslint/ban-ts-comment -- ignore\r\n      // @ts-expect-error\r\n      this._symbol = {\r\n        pricePrecision: SymbolDefaultPrecisionConstants.PRICE,\r\n        volumePrecision: SymbolDefaultPrecisionConstants.VOLUME,\r\n        ...this._symbol,\r\n        ...symbol\r\n      }\r\n      this._synchronizeIndicatorSeriesPrecision()\r\n    })\r\n  }\r\n\r\n  getSymbol (): Nullable<SymbolInfo> {\r\n    return this._symbol\r\n  }\r\n\r\n  setPeriod (period: Period): void {\r\n    this.resetData(() => {\r\n      this._period = period\r\n    })\r\n  }\r\n\r\n  getPeriod (): Nullable<Period> {\r\n    return this._period\r\n  }\r\n\r\n  getDataList (): KLineData[] {\r\n    return this._dataList\r\n  }\r\n\r\n  getVisibleRangeDataList (): VisibleRangeData[] {\r\n    return this._visibleRangeDataList\r\n  }\r\n\r\n  getVisibleRangeHighLowPrice (): Array<{ price: number; x: number }> {\r\n    return this._visibleRangeHighLowPrice\r\n  }\r\n\r\n  private _addData (\r\n    data: KLineData | KLineData[],\r\n    type: DataLoadType,\r\n    more?: DataLoadMore\r\n  ): void {\r\n    let success = false\r\n    let adjustFlag = false\r\n    let dataLengthChange = 0\r\n    if (isArray<KLineData>(data)) {\r\n      const realMore = { backward: false, forward: false }\r\n      if (isBoolean(more)) {\r\n        realMore.backward = more\r\n        realMore.forward = more\r\n      } else {\r\n        realMore.backward = more?.backward ?? false\r\n        realMore.forward = more?.forward ?? false\r\n      }\r\n      dataLengthChange = data.length\r\n      switch (type) {\r\n        case 'init': {\r\n          this._clearData()\r\n          this._dataList = data\r\n          this._dataLoadMore.backward = realMore.backward\r\n          this._dataLoadMore.forward = realMore.forward\r\n          this.setOffsetRightDistance(this._offsetRightDistance)\r\n          adjustFlag = true\r\n          break\r\n        }\r\n        case 'backward': {\r\n          this._dataList = this._dataList.concat(data)\r\n          this._dataLoadMore.backward = realMore.backward\r\n          this._lastBarRightSideDiffBarCount -= dataLengthChange\r\n          adjustFlag = dataLengthChange > 0\r\n          break\r\n        }\r\n        case 'forward': {\r\n          this._dataList = data.concat(this._dataList)\r\n          this._dataLoadMore.forward = realMore.forward\r\n          adjustFlag = dataLengthChange > 0\r\n          break\r\n        }\r\n        default: {\r\n          break\r\n        }\r\n      }\r\n      success = true\r\n    } else {\r\n      const dataCount = this._dataList.length\r\n      // Determine where individual data should be added\r\n      const timestamp = data.timestamp\r\n      const lastDataTimestamp = formatValue(this._dataList[dataCount - 1], 'timestamp', 0) as number\r\n      if (timestamp > lastDataTimestamp) {\r\n        this._dataList.push(data)\r\n        let lastBarRightSideDiffBarCount = this.getLastBarRightSideDiffBarCount()\r\n        if (lastBarRightSideDiffBarCount < 0) {\r\n          this.setLastBarRightSideDiffBarCount(--lastBarRightSideDiffBarCount)\r\n        }\r\n        dataLengthChange = 1\r\n        success = true\r\n        adjustFlag = true\r\n      } else if (timestamp === lastDataTimestamp) {\r\n        this._dataList[dataCount - 1] = data\r\n        success = true\r\n        adjustFlag = true\r\n      }\r\n    }\r\n    if (success) {\r\n      if (adjustFlag) {\r\n        this._adjustVisibleRange()\r\n        this.setCrosshair(this._crosshair, { notInvalidate: true })\r\n        const filterIndicators = this.getIndicatorsByFilter({})\r\n        filterIndicators.forEach(indicator => {\r\n          this._addIndicatorCalcTask(indicator, type)\r\n        })\r\n        this._chart.layout({\r\n          measureWidth: true,\r\n          update: true,\r\n          buildYAxisTick: true,\r\n          cacheYAxisWidth: type !== 'init'\r\n        })\r\n      }\r\n    }\r\n  }\r\n\r\n  setDataLoader (dataLoader: DataLoader): void {\r\n    this.resetData(() => {\r\n      this._dataLoader = dataLoader\r\n    })\r\n  }\r\n\r\n  private _calcOptimalBarSpace (): void {\r\n    const specialBarSpace = 4\r\n    const ratio = 1 - BAR_GAP_RATIO * Math.atan(Math.max(specialBarSpace, this._barSpace) - specialBarSpace) / (Math.PI * 0.5)\r\n    let gapBarSpace = Math.min(Math.floor(this._barSpace * ratio), Math.floor(this._barSpace))\r\n    if (gapBarSpace % 2 === 0 && gapBarSpace + 2 >= this._barSpace) {\r\n      --gapBarSpace\r\n    }\r\n    this._gapBarSpace = Math.max(1, gapBarSpace)\r\n  }\r\n\r\n  private _adjustVisibleRange (): void {\r\n    const totalBarCount = this._dataList.length\r\n    const visibleBarCount = this._totalBarSpace / this._barSpace\r\n\r\n    let leftMinVisibleBarCount = 0\r\n    let rightMinVisibleBarCount = 0\r\n\r\n    if (this._scrollLimitRole === 'distance') {\r\n      leftMinVisibleBarCount = (this._totalBarSpace - this._maxOffsetDistance.right) / this._barSpace\r\n      rightMinVisibleBarCount = (this._totalBarSpace - this._maxOffsetDistance.left) / this._barSpace\r\n    } else {\r\n      leftMinVisibleBarCount = this._minVisibleBarCount.left\r\n      rightMinVisibleBarCount = this._minVisibleBarCount.right\r\n    }\r\n\r\n    leftMinVisibleBarCount = Math.max(0, leftMinVisibleBarCount)\r\n    rightMinVisibleBarCount = Math.max(0, rightMinVisibleBarCount)\r\n\r\n    const maxRightOffsetBarCount = visibleBarCount - Math.min(leftMinVisibleBarCount, totalBarCount)\r\n    if (this._lastBarRightSideDiffBarCount > maxRightOffsetBarCount) {\r\n      this._lastBarRightSideDiffBarCount = maxRightOffsetBarCount\r\n    }\r\n\r\n    const minRightOffsetBarCount = -totalBarCount + Math.min(rightMinVisibleBarCount, totalBarCount)\r\n    if (this._lastBarRightSideDiffBarCount < minRightOffsetBarCount) {\r\n      this._lastBarRightSideDiffBarCount = minRightOffsetBarCount\r\n    }\r\n\r\n    let to = Math.round(this._lastBarRightSideDiffBarCount + totalBarCount + 0.5)\r\n    const realTo = to\r\n    if (to > totalBarCount) {\r\n      to = totalBarCount\r\n    }\r\n    let from = Math.round(to - visibleBarCount) - 1\r\n    if (from < 0) {\r\n      from = 0\r\n    }\r\n    const realFrom = this._lastBarRightSideDiffBarCount > 0 ? Math.round(totalBarCount + this._lastBarRightSideDiffBarCount - visibleBarCount) - 1 : from\r\n    this._visibleRange = { from, to, realFrom, realTo }\r\n    this.executeAction('onVisibleRangeChange', this._visibleRange)\r\n    this._visibleRangeDataList = []\r\n    this._visibleRangeHighLowPrice = [\r\n      { x: 0, price: Number.MIN_SAFE_INTEGER },\r\n      { x: 0, price: Number.MAX_SAFE_INTEGER }\r\n    ]\r\n    for (let i = realFrom; i < realTo; i++) {\r\n      const kLineData = this._dataList[i]\r\n      const x = this.dataIndexToCoordinate(i)\r\n      this._visibleRangeDataList.push({\r\n        dataIndex: i,\r\n        x,\r\n        data: {\r\n          prev: this._dataList[i - 1] ?? kLineData,\r\n          current: kLineData,\r\n          next: this._dataList[i + 1] ?? kLineData\r\n        }\r\n      })\r\n      if (isValid(kLineData)) {\r\n        if (this._visibleRangeHighLowPrice[0].price < kLineData.high) {\r\n          this._visibleRangeHighLowPrice[0].price = kLineData.high\r\n          this._visibleRangeHighLowPrice[0].x = x\r\n        }\r\n        if (this._visibleRangeHighLowPrice[1].price > kLineData.low) {\r\n          this._visibleRangeHighLowPrice[1].price = kLineData.low\r\n          this._visibleRangeHighLowPrice[1].x = x\r\n        }\r\n      }\r\n    }\r\n    // More processing and loading, more loading if there are callback methods and no data is being loaded\r\n    if (from === 0) {\r\n      if (this._dataLoadMore.forward) {\r\n        this._processDataLoad('forward')\r\n      }\r\n    } else if (to === totalBarCount) {\r\n      if (this._dataLoadMore.backward) {\r\n        this._processDataLoad('backward')\r\n      }\r\n    }\r\n  }\r\n\r\n  private _processDataLoad (type: DataLoadType): void {\r\n    if (!this._loading && isValid(this._dataLoader) && isValid(this._symbol) && isValid(this._period)) {\r\n      this._loading = true\r\n      const params: DataLoaderGetBarsParams = {\r\n        type,\r\n        symbol: this._symbol,\r\n        period: this._period,\r\n        timestamp: null,\r\n        callback: (data: KLineData[], more?: boolean) => {\r\n          this._loading = false\r\n          this._addData(data, type, more)\r\n          if (type === 'init') {\r\n            this._dataLoader?.subscribeBar?.({\r\n              symbol: this._symbol!,\r\n              period: this._period!,\r\n              callback: (data: KLineData) => {\r\n                this._addData(data, 'update')\r\n              }\r\n            })\r\n          }\r\n        }\r\n      }\r\n      switch (type) {\r\n        case 'backward': {\r\n          params.timestamp = this._dataList[this._dataList.length - 1]?.timestamp ?? null\r\n          break\r\n        }\r\n        case 'forward': {\r\n          params.timestamp = this._dataList[0]?.timestamp ?? null\r\n          break\r\n        }\r\n        default: {\r\n          break\r\n        }\r\n      }\r\n      void this._dataLoader.getBars(params)\r\n    }\r\n  }\r\n\r\n  private _processDataUnsubscribe (): void {\r\n    if (isValid(this._dataLoader) && isValid(this._symbol) && isValid(this._period)) {\r\n      this._dataLoader.unsubscribeBar?.({\r\n        symbol: this._symbol,\r\n        period: this._period\r\n      })\r\n    }\r\n  }\r\n\r\n  resetData (fn?: () => void): void {\r\n    this._processDataUnsubscribe()\r\n    fn?.()\r\n    this._loading = false\r\n    this._processDataLoad('init')\r\n  }\r\n\r\n  getBarSpace (): BarSpace {\r\n    return {\r\n      bar: this._barSpace,\r\n      halfBar: this._barSpace / 2,\r\n      gapBar: this._gapBarSpace,\r\n      halfGapBar: Math.floor(this._gapBarSpace / 2)\r\n    }\r\n  }\r\n\r\n  setBarSpace (barSpace: number, adjustBeforeFunc?: () => void): void {\r\n    if (barSpace < BarSpaceLimitConstants.MIN || barSpace > BarSpaceLimitConstants.MAX || this._barSpace === barSpace) {\r\n      return\r\n    }\r\n    this._barSpace = barSpace\r\n    this._calcOptimalBarSpace()\r\n    adjustBeforeFunc?.()\r\n    this._adjustVisibleRange()\r\n    this.setCrosshair(this._crosshair, { notInvalidate: true })\r\n    this._chart.layout({\r\n      measureWidth: true,\r\n      update: true,\r\n      buildYAxisTick: true,\r\n      cacheYAxisWidth: true\r\n    })\r\n  }\r\n\r\n  setTotalBarSpace (totalSpace: number): void {\r\n    if (this._totalBarSpace !== totalSpace) {\r\n      this._totalBarSpace = totalSpace\r\n      this._adjustVisibleRange()\r\n      this.setCrosshair(this._crosshair, { notInvalidate: true })\r\n    }\r\n  }\r\n\r\n  setOffsetRightDistance (distance: number, isUpdate?: boolean): this {\r\n    this._offsetRightDistance = this._scrollLimitRole === 'distance' ? Math.min(this._maxOffsetDistance.right, distance) : distance\r\n    this._lastBarRightSideDiffBarCount = this._offsetRightDistance / this._barSpace\r\n    if (isUpdate ?? false) {\r\n      this._adjustVisibleRange()\r\n      this.setCrosshair(this._crosshair, { notInvalidate: true })\r\n      this._chart.layout({\r\n        measureWidth: true,\r\n        update: true,\r\n        buildYAxisTick: true,\r\n        cacheYAxisWidth: true\r\n      })\r\n    }\r\n    return this\r\n  }\r\n\r\n  getInitialOffsetRightDistance (): number {\r\n    return this._offsetRightDistance\r\n  }\r\n\r\n  getOffsetRightDistance (): number {\r\n    return Math.max(0, this._lastBarRightSideDiffBarCount * this._barSpace)\r\n  }\r\n\r\n  getLastBarRightSideDiffBarCount (): number {\r\n    return this._lastBarRightSideDiffBarCount\r\n  }\r\n\r\n  setLastBarRightSideDiffBarCount (barCount: number): void {\r\n    this._lastBarRightSideDiffBarCount = barCount\r\n  }\r\n\r\n  setMaxOffsetLeftDistance (distance: number): void {\r\n    this._scrollLimitRole = 'distance'\r\n    this._maxOffsetDistance.left = distance\r\n  }\r\n\r\n  setMaxOffsetRightDistance (distance: number): void {\r\n    this._scrollLimitRole = 'distance'\r\n    this._maxOffsetDistance.right = distance\r\n  }\r\n\r\n  setLeftMinVisibleBarCount (barCount: number): void {\r\n    this._scrollLimitRole = 'bar_count'\r\n    this._minVisibleBarCount.left = barCount\r\n  }\r\n\r\n  setRightMinVisibleBarCount (barCount: number): void {\r\n    this._scrollLimitRole = 'bar_count'\r\n    this._minVisibleBarCount.right = barCount\r\n  }\r\n\r\n  getVisibleRange (): VisibleRange {\r\n    return this._visibleRange\r\n  }\r\n\r\n  startScroll (): void {\r\n    this._startLastBarRightSideDiffBarCount = this._lastBarRightSideDiffBarCount\r\n  }\r\n\r\n  scroll (distance: number): void {\r\n    if (!this._scrollEnabled) {\r\n      return\r\n    }\r\n    const distanceBarCount = distance / this._barSpace\r\n    const prevLastBarRightSideDistance = this._lastBarRightSideDiffBarCount * this._barSpace\r\n    this._lastBarRightSideDiffBarCount = this._startLastBarRightSideDiffBarCount - distanceBarCount\r\n    this._adjustVisibleRange()\r\n    this.setCrosshair(this._crosshair, { notInvalidate: true })\r\n    this._chart.layout({\r\n      measureWidth: true,\r\n      update: true,\r\n      buildYAxisTick: true,\r\n      cacheYAxisWidth: true\r\n    })\r\n    const realDistance = Math.round(\r\n      prevLastBarRightSideDistance - this._lastBarRightSideDiffBarCount * this._barSpace\r\n    )\r\n    if (realDistance !== 0) {\r\n      this.executeAction('onScroll', { distance: realDistance })\r\n    }\r\n  }\r\n\r\n  getDataByDataIndex (dataIndex: number): Nullable<KLineData> {\r\n    return this._dataList[dataIndex] ?? null\r\n  }\r\n\r\n  coordinateToFloatIndex (x: number): number {\r\n    const dataCount = this._dataList.length\r\n    const deltaFromRight = (this._totalBarSpace - x) / this._barSpace\r\n    const index = dataCount + this._lastBarRightSideDiffBarCount - deltaFromRight\r\n    return Math.round(index * 1000000) / 1000000\r\n  }\r\n\r\n  dataIndexToTimestamp (dataIndex: number): Nullable<number> {\r\n    const length = this._dataList.length\r\n    if (length === 0) {\r\n      return null\r\n    }\r\n    const data = this.getDataByDataIndex(dataIndex)\r\n    if (isValid(data)) {\r\n      return data.timestamp\r\n    }\r\n    if (isValid(this._period)) {\r\n      const lastIndex = length - 1\r\n      let referenceTimestamp: Nullable<number | null> = null\r\n      let diff = 0\r\n      if (dataIndex > lastIndex) {\r\n        referenceTimestamp = this._dataList[lastIndex].timestamp\r\n        diff = dataIndex - lastIndex\r\n      } else if (dataIndex < 0) {\r\n        referenceTimestamp = this._dataList[0].timestamp\r\n        diff = dataIndex\r\n      }\r\n      if (isNumber(referenceTimestamp)) {\r\n        const { type, span } = this._period\r\n        switch (type) {\r\n          case 'second': {\r\n            return referenceTimestamp + span * 1000 * diff\r\n          }\r\n          case 'minute': {\r\n            return referenceTimestamp + span * 60 * 1000 * diff\r\n          }\r\n          case 'hour': {\r\n            return referenceTimestamp + span * 60 * 60 * 1000 * diff\r\n          }\r\n          case 'day': {\r\n            return referenceTimestamp + span * 24 * 60 * 60 * 1000 * diff\r\n          }\r\n          case 'week': {\r\n            return referenceTimestamp + span * 7 * 24 * 60 * 60 * 1000 * diff\r\n          }\r\n          case 'month': {\r\n            const date = new Date(referenceTimestamp)\r\n            const referenceDay = date.getDate()\r\n\r\n            date.setDate(1)\r\n\r\n            date.setMonth(date.getMonth() + span * diff)\r\n            const lastDayOfTargetMonth = new Date(\r\n              date.getFullYear(),\r\n              date.getMonth() + 1,\r\n              0\r\n            ).getDate()\r\n            date.setDate(Math.min(referenceDay, lastDayOfTargetMonth))\r\n            return date.getTime()\r\n          }\r\n          case 'year': {\r\n            const date = new Date(referenceTimestamp)\r\n            date.setFullYear(date.getFullYear() + span * diff)\r\n            return date.getTime()\r\n          }\r\n        }\r\n      }\r\n    }\r\n    return null\r\n  }\r\n\r\n  timestampToDataIndex (timestamp: number): number {\r\n    const length = this._dataList.length\r\n    if (length === 0) {\r\n      return 0\r\n    }\r\n    if (isValid(this._period)) {\r\n      let referenceTimestamp: Nullable<number | null> = null\r\n      let baseDataIndex = 0\r\n\r\n      const lastIndex = length - 1\r\n      const lastTimestamp = this._dataList[lastIndex].timestamp\r\n      if (timestamp > lastTimestamp) {\r\n        referenceTimestamp = lastTimestamp\r\n        baseDataIndex = lastIndex\r\n      }\r\n      const firstTimestamp = this._dataList[0].timestamp\r\n      if (timestamp < firstTimestamp) {\r\n        referenceTimestamp = firstTimestamp\r\n        baseDataIndex = 0\r\n      }\r\n      if (isNumber(referenceTimestamp)) {\r\n        const { type, span } = this._period\r\n        switch (type) {\r\n          case 'second': {\r\n            return baseDataIndex + Math.floor((timestamp - referenceTimestamp) / (span * 1000))\r\n          }\r\n          case 'minute': {\r\n            return baseDataIndex + Math.floor((timestamp - referenceTimestamp) / (span * 60 * 1000))\r\n          }\r\n          case 'hour': {\r\n            return baseDataIndex + Math.floor((timestamp - referenceTimestamp) / (span * 60 * 60 * 1000))\r\n          }\r\n          case 'day': {\r\n            return baseDataIndex + Math.floor((timestamp - referenceTimestamp) / (span * 24 * 60 * 60 * 1000))\r\n          }\r\n          case 'week': {\r\n            return baseDataIndex + Math.floor((timestamp - referenceTimestamp) / (span * 7 * 24 * 60 * 60 * 1000))\r\n          }\r\n          case 'month': {\r\n            const referenceDate = new Date(referenceTimestamp)\r\n            const currentDate = new Date(timestamp)\r\n            const referenceYear = referenceDate.getFullYear()\r\n            const currentYear = currentDate.getFullYear()\r\n            const referenceMonth = referenceDate.getMonth()\r\n            const currentMonth = currentDate.getMonth()\r\n            return baseDataIndex + Math.floor(((currentYear - referenceYear) * 12 + (currentMonth - referenceMonth)) / span)\r\n          }\r\n          case 'year': {\r\n            const referenceYear = new Date(referenceTimestamp).getFullYear()\r\n            const currentYear = new Date(timestamp).getFullYear()\r\n            return baseDataIndex + Math.floor((currentYear - referenceYear) / span)\r\n          }\r\n        }\r\n      }\r\n    }\r\n    return binarySearchNearest(this._dataList, 'timestamp', timestamp)\r\n  }\r\n\r\n  dataIndexToCoordinate (dataIndex: number): number {\r\n    const dataCount = this._dataList.length\r\n    const deltaFromRight = dataCount + this._lastBarRightSideDiffBarCount - dataIndex\r\n    return Math.floor(this._totalBarSpace - (deltaFromRight - 0.5) * this._barSpace + 0.5)\r\n  }\r\n\r\n  coordinateToDataIndex (x: number): number {\r\n    return Math.ceil(this.coordinateToFloatIndex(x)) - 1\r\n  }\r\n\r\n  zoom (scale: number, coordinate?: Partial<Coordinate>): void {\r\n    if (!this._zoomEnabled) {\r\n      return\r\n    }\r\n    let zoomCoordinate: Nullable<Partial<Coordinate>> = coordinate ?? null\r\n    if (!isNumber(zoomCoordinate?.x)) {\r\n      zoomCoordinate = { x: this._crosshair.x ?? this._totalBarSpace / 2 }\r\n    }\r\n    const x = zoomCoordinate.x!\r\n    const floatIndex = this.coordinateToFloatIndex(x)\r\n    const prevBarSpace = this._barSpace\r\n    const barSpace = this._barSpace + scale * (this._barSpace / SCALE_MULTIPLIER)\r\n    this.setBarSpace(barSpace, () => {\r\n      this._lastBarRightSideDiffBarCount += (floatIndex - this.coordinateToFloatIndex(x))\r\n    })\r\n    const realScale = this._barSpace / prevBarSpace\r\n    if (realScale !== 1) {\r\n      this.executeAction('onZoom', { scale: realScale })\r\n    }\r\n  }\r\n\r\n  setZoomEnabled (enabled: boolean): void {\r\n    this._zoomEnabled = enabled\r\n  }\r\n\r\n  isZoomEnabled (): boolean {\r\n    return this._zoomEnabled\r\n  }\r\n\r\n  setScrollEnabled (enabled: boolean): void {\r\n    this._scrollEnabled = enabled\r\n  }\r\n\r\n  isScrollEnabled (): boolean {\r\n    return this._scrollEnabled\r\n  }\r\n\r\n  setCrosshair (\r\n    crosshair?: Crosshair,\r\n    options?: { notInvalidate?: boolean, notExecuteAction?: boolean, forceInvalidate?: boolean }\r\n  ): void {\r\n    const { notInvalidate, notExecuteAction, forceInvalidate } = options ?? {}\r\n    const cr = crosshair ?? {}\r\n    let realDataIndex = 0\r\n    let dataIndex = 0\r\n    if (isNumber(cr.x)) {\r\n      realDataIndex = this.coordinateToDataIndex(cr.x)\r\n      if (realDataIndex < 0) {\r\n        dataIndex = 0\r\n      } else if (realDataIndex > this._dataList.length - 1) {\r\n        dataIndex = this._dataList.length - 1\r\n      } else {\r\n        dataIndex = realDataIndex\r\n      }\r\n    } else {\r\n      realDataIndex = this._dataList.length - 1\r\n      dataIndex = realDataIndex\r\n    }\r\n    const kLineData: Nullable<KLineData> = this._dataList[dataIndex]\r\n    const realX = this.dataIndexToCoordinate(realDataIndex)\r\n    const prevCrosshair = { x: this._crosshair.x, y: this._crosshair.y, paneId: this._crosshair.paneId }\r\n    this._crosshair = { ...cr, realX, kLineData, realDataIndex, dataIndex, timestamp: this.dataIndexToTimestamp(realDataIndex) ?? undefined }\r\n    if (\r\n      prevCrosshair.x !== cr.x ||\r\n      prevCrosshair.y !== cr.y ||\r\n      prevCrosshair.paneId !== cr.paneId ||\r\n      (forceInvalidate ?? false)\r\n    ) {\r\n      if (isValid(kLineData) && !(notExecuteAction ?? false) && this.hasAction('onCrosshairChange') && isString(this._crosshair.paneId)) {\r\n        this.executeAction('onCrosshairChange', crosshair)\r\n      }\r\n      if (!(notInvalidate ?? false)) {\r\n        this._chart.updatePane(UpdateLevel.Overlay)\r\n      }\r\n    }\r\n  }\r\n\r\n  getCrosshair (): Crosshair {\r\n    return this._crosshair\r\n  }\r\n\r\n  executeAction (type: ActionType, data?: unknown): void {\r\n    this._actions.get(type)?.execute(data)\r\n  }\r\n\r\n  subscribeAction (type: ActionType, callback: ActionCallback): void {\r\n    if (!this._actions.has(type)) {\r\n      this._actions.set(type, new Action())\r\n    }\r\n    this._actions.get(type)?.subscribe(callback)\r\n  }\r\n\r\n  unsubscribeAction (type: ActionType, callback?: ActionCallback): void {\r\n    const action = this._actions.get(type)\r\n    if (isValid(action)) {\r\n      action.unsubscribe(callback)\r\n      if (action.isEmpty()) {\r\n        this._actions.delete(type)\r\n      }\r\n    }\r\n  }\r\n\r\n  hasAction (type: ActionType): boolean {\r\n    const action = this._actions.get(type)\r\n    return isValid(action) && !action.isEmpty()\r\n  }\r\n\r\n  private _sortIndicators (paneId?: string): void {\r\n    if (isString(paneId)) {\r\n      this._indicators.get(paneId)?.sort((i1, i2) => i1.zLevel - i2.zLevel)\r\n    } else {\r\n      this._indicators.forEach(paneIndicators => {\r\n        paneIndicators.sort((i1, i2) => i1.zLevel - i2.zLevel)\r\n      })\r\n    }\r\n  }\r\n\r\n  private _addIndicatorCalcTask (indicator: IndicatorImp, dataLoadType: DataLoadType): void {\r\n    indicator.onDataStateChange?.({\r\n      state: 'loading',\r\n      type: dataLoadType,\r\n      indicator\r\n    })\r\n    void this._taskScheduler.add<boolean>({\r\n      id: generateTaskId(indicator.id),\r\n      handler: async () => await indicator.calcImp(this._dataList).then(result => result)\r\n    }).then(result => {\r\n      if (result) {\r\n        this._chart.layout({\r\n          measureWidth: true,\r\n          update: true,\r\n          buildYAxisTick: true,\r\n          cacheYAxisWidth: dataLoadType !== 'init'\r\n        })\r\n        indicator.onDataStateChange?.({\r\n          state: 'ready',\r\n          type: dataLoadType,\r\n          indicator\r\n        })\r\n      }\r\n    }).catch((e: unknown) => {\r\n      if (e !== 'canceled') {\r\n        indicator.onDataStateChange?.({\r\n          state: 'error',\r\n          type: dataLoadType,\r\n          indicator\r\n        })\r\n      }\r\n    })\r\n  }\r\n\r\n  addIndicator (create: PickRequired<IndicatorCreate, 'id' | 'name'>, paneId: string, isStack: boolean): boolean {\r\n    const { name } = create\r\n    const filterIndicators = this.getIndicatorsByFilter(create)\r\n    if (filterIndicators.length > 0) {\r\n      return false\r\n    }\r\n    let paneIndicators = this.getIndicatorsByPaneId(paneId)\r\n    const IndicatorClazz = getIndicatorClass(name)!\r\n    const indicator = new IndicatorClazz()\r\n\r\n    this._synchronizeIndicatorSeriesPrecision(indicator)\r\n    indicator.paneId = paneId\r\n    indicator.override(create)\r\n    if (!isStack) {\r\n      this.removeIndicator({ paneId })\r\n      paneIndicators = []\r\n    }\r\n    paneIndicators.push(indicator)\r\n    this._indicators.set(paneId, paneIndicators)\r\n    this._sortIndicators(paneId)\r\n    this._addIndicatorCalcTask(indicator, 'init')\r\n    return true\r\n  }\r\n\r\n  getIndicatorsByPaneId (paneId: string): IndicatorImp[] {\r\n    return this._indicators.get(paneId) ?? []\r\n  }\r\n\r\n  getIndicatorsByFilter (filter: IndicatorFilter): IndicatorImp[] {\r\n    const { paneId, name, id } = filter\r\n    const match: ((overlay: IndicatorImp) => boolean) = indicator => {\r\n      if (isValid(id)) {\r\n        return indicator.id === id\r\n      }\r\n      return !isValid(name) || indicator.name === name\r\n    }\r\n    let indicators: IndicatorImp[] = []\r\n    if (isValid(paneId)) {\r\n      indicators = indicators.concat(this.getIndicatorsByPaneId(paneId).filter(match))\r\n    } else {\r\n      this._indicators.forEach(paneIndicators => {\r\n        indicators = indicators.concat(paneIndicators.filter(match))\r\n      })\r\n    }\r\n    return indicators\r\n  }\r\n\r\n  removeIndicator (filter: IndicatorFilter): boolean {\r\n    let removed = false\r\n    const filterIndicators = this.getIndicatorsByFilter(filter)\r\n    filterIndicators.forEach(indicator => {\r\n      const paneIndicators = this.getIndicatorsByPaneId(indicator.paneId)\r\n      const index = paneIndicators.findIndex(ins => ins.id === indicator.id)\r\n      if (index > -1) {\r\n        this._taskScheduler.remove(generateTaskId(indicator.id))\r\n        paneIndicators.splice(index, 1)\r\n        removed = true\r\n      }\r\n      if (paneIndicators.length === 0) {\r\n        this._indicators.delete(indicator.paneId)\r\n      }\r\n    })\r\n    return removed\r\n  }\r\n\r\n  hasIndicators (paneId: string): boolean {\r\n    return this._indicators.has(paneId)\r\n  }\r\n\r\n  private _synchronizeIndicatorSeriesPrecision (indicator?: IndicatorImp): void {\r\n    if (isValid(this._symbol)) {\r\n      const {\r\n        pricePrecision = SymbolDefaultPrecisionConstants.PRICE,\r\n        volumePrecision = SymbolDefaultPrecisionConstants.VOLUME\r\n      } = this._symbol\r\n      const synchronize: ((indicator: IndicatorImp) => void) = indicator => {\r\n        switch (indicator.series) {\r\n          case 'price': {\r\n            indicator.setSeriesPrecision(pricePrecision)\r\n            break\r\n          }\r\n          case 'volume': {\r\n            indicator.setSeriesPrecision(volumePrecision)\r\n            break\r\n          }\r\n          default: { break }\r\n        }\r\n      }\r\n\r\n      if (isValid(indicator)) {\r\n        synchronize(indicator)\r\n      } else {\r\n        this._indicators.forEach(paneIndicators => {\r\n          paneIndicators.forEach(indicator => {\r\n            synchronize(indicator)\r\n          })\r\n        })\r\n      }\r\n    }\r\n  }\r\n\r\n  overrideIndicator (override: IndicatorOverride): boolean {\r\n    let updateFlag = false\r\n    let sortFlag = false\r\n    const filterIndicators = this.getIndicatorsByFilter(override)\r\n    filterIndicators.forEach(indicator => {\r\n      indicator.override(override)\r\n      const { calc, draw, sort } = indicator.shouldUpdateImp()\r\n      if (sort) {\r\n        sortFlag = true\r\n      }\r\n      if (calc) {\r\n        this._addIndicatorCalcTask(indicator, 'update')\r\n      } else {\r\n        if (draw) {\r\n          updateFlag = true\r\n        }\r\n      }\r\n    })\r\n\r\n    // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition -- ignore\r\n    if (sortFlag) {\r\n      this._sortIndicators()\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition -- ignore\r\n    if (updateFlag) {\r\n      this._chart.layout({ update: true })\r\n      return true\r\n    }\r\n    return false\r\n  }\r\n\r\n  getOverlaysByFilter (filter: OverlayFilter): OverlayImp[] {\r\n    const { id, groupId, paneId, name } = filter\r\n    const match: ((overlay: OverlayImp) => boolean) = overlay => {\r\n      if (isValid(id)) {\r\n        return overlay.id === id\r\n      } else {\r\n        if (isValid(groupId)) {\r\n          return overlay.groupId === groupId && (!isValid(name) || overlay.name === name)\r\n        }\r\n      }\r\n      return !isValid(name) || overlay.name === name\r\n    }\r\n\r\n    let overlays: OverlayImp[] = []\r\n    if (isValid(paneId)) {\r\n      overlays = overlays.concat(this.getOverlaysByPaneId(paneId).filter(match))\r\n    } else {\r\n      this._overlays.forEach(paneOverlays => {\r\n        overlays = overlays.concat(paneOverlays.filter(match))\r\n      })\r\n    }\r\n    const progressOverlay = this._progressOverlayInfo?.overlay\r\n    if (isValid(progressOverlay) && match(progressOverlay)) {\r\n      overlays.push(progressOverlay)\r\n    }\r\n    return overlays\r\n  }\r\n\r\n  getOverlaysByPaneId (paneId?: string): OverlayImp[] {\r\n    if (!isString(paneId)) {\r\n      let overlays: OverlayImp[] = []\r\n      this._overlays.forEach(paneOverlays => {\r\n        overlays = overlays.concat(paneOverlays)\r\n      })\r\n      return overlays\r\n    }\r\n    return this._overlays.get(paneId) ?? []\r\n  }\r\n\r\n  private _sortOverlays (paneId?: string): void {\r\n    if (isString(paneId)) {\r\n      this._overlays.get(paneId)?.sort((o1, o2) => o1.zLevel - o2.zLevel)\r\n    } else {\r\n      this._overlays.forEach(paneOverlays => {\r\n        paneOverlays.sort((o1, o2) => o1.zLevel - o2.zLevel)\r\n      })\r\n    }\r\n  }\r\n\r\n  addOverlays (os: OverlayCreate[], appointPaneFlags: boolean[]): Array<Nullable<string>> {\r\n    const updatePaneIds: string[] = []\r\n    const ids = os.map((create, index) => {\r\n      if (isValid(create.id)) {\r\n        let findOverlay: Nullable<OverlayImp> = null\r\n        for (const item of this._overlays) {\r\n          const overlays = item[1]\r\n          const overlay = overlays.find(o => o.id === create.id)\r\n          if (isValid(overlay)) {\r\n            findOverlay = overlay\r\n            break\r\n          }\r\n        }\r\n        if (isValid(findOverlay)) {\r\n          return create.id\r\n        }\r\n      }\r\n      const OverlayClazz = getOverlayInnerClass(create.name)\r\n      if (isValid(OverlayClazz)) {\r\n        const id = create.id ?? createId(OVERLAY_ID_PREFIX)\r\n        const overlay = new OverlayClazz()\r\n        const paneId = create.paneId ?? PaneIdConstants.CANDLE\r\n        create.id = id\r\n        create.groupId ??= id\r\n        const zLevel = this.getOverlaysByPaneId(paneId).length\r\n        create.zLevel ??= zLevel\r\n        overlay.override(create)\r\n        if (!updatePaneIds.includes(paneId)) {\r\n          updatePaneIds.push(paneId)\r\n        }\r\n        if (overlay.isDrawing()) {\r\n          this._progressOverlayInfo = { paneId, overlay, appointPaneFlag: appointPaneFlags[index] }\r\n        } else {\r\n          if (!this._overlays.has(paneId)) {\r\n            this._overlays.set(paneId, [])\r\n          }\r\n          this._overlays.get(paneId)?.push(overlay)\r\n        }\r\n        if (overlay.isStart()) {\r\n          overlay.onDrawStart?.(({ overlay, chart: this._chart }))\r\n        }\r\n        return id\r\n      }\r\n      return null\r\n    })\r\n    if (updatePaneIds.length > 0) {\r\n      this._sortOverlays()\r\n      updatePaneIds.forEach(paneId => {\r\n        this._chart.updatePane(UpdateLevel.Overlay, paneId)\r\n      })\r\n      this._chart.updatePane(UpdateLevel.Overlay, PaneIdConstants.X_AXIS)\r\n    }\r\n    return ids\r\n  }\r\n\r\n  getProgressOverlayInfo (): Nullable<ProgressOverlayInfo> {\r\n    return this._progressOverlayInfo\r\n  }\r\n\r\n  progressOverlayComplete (): void {\r\n    if (this._progressOverlayInfo !== null) {\r\n      const { overlay, paneId } = this._progressOverlayInfo\r\n      if (!overlay.isDrawing()) {\r\n        if (!this._overlays.has(paneId)) {\r\n          this._overlays.set(paneId, [])\r\n        }\r\n        this._overlays.get(paneId)?.push(overlay)\r\n        this._sortOverlays(paneId)\r\n        this._progressOverlayInfo = null\r\n      }\r\n    }\r\n  }\r\n\r\n  updateProgressOverlayInfo (paneId: string, appointPaneFlag?: boolean): void {\r\n    if (this._progressOverlayInfo !== null) {\r\n      if (isBoolean(appointPaneFlag) && appointPaneFlag) {\r\n        this._progressOverlayInfo.appointPaneFlag = appointPaneFlag\r\n      }\r\n      this._progressOverlayInfo.paneId = paneId\r\n      this._progressOverlayInfo.overlay.override({ paneId })\r\n    }\r\n  }\r\n\r\n  overrideOverlay (override: OverlayOverride): boolean {\r\n    let sortFlag = false\r\n    const updatePaneIds: string[] = []\r\n    const filterOverlays = this.getOverlaysByFilter(override)\r\n    filterOverlays.forEach(overlay => {\r\n      overlay.override(override)\r\n      const { sort, draw } = overlay.shouldUpdate()\r\n      if (sort) {\r\n        sortFlag = true\r\n      }\r\n      if (sort || draw) {\r\n        if (!updatePaneIds.includes(overlay.paneId)) {\r\n          updatePaneIds.push(overlay.paneId)\r\n        }\r\n      }\r\n    })\r\n\r\n    // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition -- ignore\r\n    if (sortFlag) {\r\n      this._sortOverlays()\r\n    }\r\n    if (updatePaneIds.length > 0) {\r\n      updatePaneIds.forEach(paneId => {\r\n        this._chart.updatePane(UpdateLevel.Overlay, paneId)\r\n      })\r\n      this._chart.updatePane(UpdateLevel.Overlay, PaneIdConstants.X_AXIS)\r\n      return true\r\n    }\r\n    return false\r\n  }\r\n\r\n  removeOverlay (filter: OverlayFilter): boolean {\r\n    const updatePaneIds: string[] = []\r\n    const filterOverlays = this.getOverlaysByFilter(filter)\r\n    filterOverlays.forEach(overlay => {\r\n      const paneId = overlay.paneId\r\n      const paneOverlays = this.getOverlaysByPaneId(overlay.paneId)\r\n      overlay.onRemoved?.({ overlay, chart: this._chart })\r\n      if (!updatePaneIds.includes(paneId)) {\r\n        updatePaneIds.push(paneId)\r\n      }\r\n      if (overlay.isDrawing()) {\r\n        this._progressOverlayInfo = null\r\n      } else {\r\n        const index = paneOverlays.findIndex(o => o.id === overlay.id)\r\n        if (index > -1) {\r\n          paneOverlays.splice(index, 1)\r\n        }\r\n      }\r\n      if (paneOverlays.length === 0) {\r\n        this._overlays.delete(paneId)\r\n      }\r\n    })\r\n    if (updatePaneIds.length > 0) {\r\n      updatePaneIds.forEach(paneId => {\r\n        this._chart.updatePane(UpdateLevel.Overlay, paneId)\r\n      })\r\n      this._chart.updatePane(UpdateLevel.Overlay, PaneIdConstants.X_AXIS)\r\n      return true\r\n    }\r\n    return false\r\n  }\r\n\r\n  setPressedOverlayInfo (info: EventOverlayInfo): void {\r\n    this._pressedOverlayInfo = info\r\n  }\r\n\r\n  getPressedOverlayInfo (): EventOverlayInfo {\r\n    return this._pressedOverlayInfo\r\n  }\r\n\r\n  setHoverOverlayInfo (\r\n    info: EventOverlayInfo,\r\n    processOnMouseEnterEvent: ProcessOverlayEventCallback,\r\n    processOnMouseLeaveEvent: ProcessOverlayEventCallback\r\n  ): void {\r\n    const { overlay, figureType, figureIndex, figure } = this._hoverOverlayInfo\r\n    const infoOverlay = info.overlay\r\n    if (\r\n      overlay?.id !== infoOverlay?.id ||\r\n      figureType !== info.figureType ||\r\n      figureIndex !== info.figureIndex\r\n    ) {\r\n      this._hoverOverlayInfo = info\r\n      if (overlay?.id !== infoOverlay?.id) {\r\n        let ignoreUpdateFlag = false\r\n        let sortFlag = false\r\n        if (overlay !== null) {\r\n          overlay.override({ zLevel: overlay.getPrevZLevel() })\r\n          sortFlag = true\r\n          if (processOnMouseLeaveEvent(overlay, figure)) {\r\n            ignoreUpdateFlag = true\r\n          }\r\n        }\r\n\r\n        if (infoOverlay !== null) {\r\n          infoOverlay.setPrevZLevel(infoOverlay.zLevel)\r\n          infoOverlay.override({ zLevel: Number.MAX_SAFE_INTEGER })\r\n          sortFlag = true\r\n          if (processOnMouseEnterEvent(infoOverlay, info.figure)) {\r\n            ignoreUpdateFlag = true\r\n          }\r\n        }\r\n        if (sortFlag) {\r\n          this._sortOverlays()\r\n        }\r\n        if (!ignoreUpdateFlag) {\r\n          this._chart.updatePane(UpdateLevel.Overlay)\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  getHoverOverlayInfo (): EventOverlayInfo {\r\n    return this._hoverOverlayInfo\r\n  }\r\n\r\n  setClickOverlayInfo (\r\n    info: EventOverlayInfo,\r\n    processOnSelectedEvent: ProcessOverlayEventCallback,\r\n    processOnDeselectedEvent: ProcessOverlayEventCallback\r\n  ): void {\r\n    const { paneId, overlay, figureType, figure, figureIndex } = this._clickOverlayInfo\r\n    const infoOverlay = info.overlay\r\n    if (overlay?.id !== infoOverlay?.id || figureType !== info.figureType || figureIndex !== info.figureIndex) {\r\n      this._clickOverlayInfo = info\r\n      if (overlay?.id !== infoOverlay?.id) {\r\n        if (isValid(overlay)) {\r\n          processOnDeselectedEvent(overlay, figure)\r\n        }\r\n        if (isValid(infoOverlay)) {\r\n          processOnSelectedEvent(infoOverlay, info.figure)\r\n        }\r\n        this._chart.updatePane(UpdateLevel.Overlay, info.paneId)\r\n        if (paneId !== info.paneId) {\r\n          this._chart.updatePane(UpdateLevel.Overlay, paneId)\r\n        }\r\n        this._chart.updatePane(UpdateLevel.Overlay, PaneIdConstants.X_AXIS)\r\n      }\r\n    }\r\n  }\r\n\r\n  getClickOverlayInfo (): EventOverlayInfo {\r\n    return this._clickOverlayInfo\r\n  }\r\n\r\n  isOverlayEmpty (): boolean {\r\n    return this._overlays.size === 0 && this._progressOverlayInfo === null\r\n  }\r\n\r\n  isOverlayDrawing (): boolean {\r\n    return this._progressOverlayInfo?.overlay.isDrawing() ?? false\r\n  }\r\n\r\n  private _clearLastPriceMarkExtendTextUpdateTimer (): void {\r\n    this._lastPriceMarkExtendTextUpdateTimers.forEach(timer => {\r\n      clearInterval(timer)\r\n    })\r\n    this._lastPriceMarkExtendTextUpdateTimers = []\r\n  }\r\n\r\n  private _clearData (): void {\r\n    this._dataLoadMore.backward = false\r\n    this._dataLoadMore.forward = false\r\n    this._loading = false\r\n    this._dataList = []\r\n    this._visibleRangeDataList = []\r\n    this._visibleRangeHighLowPrice = [\r\n      { x: 0, price: Number.MIN_SAFE_INTEGER },\r\n      { x: 0, price: Number.MAX_SAFE_INTEGER }\r\n    ]\r\n    this._visibleRange = getDefaultVisibleRange()\r\n    this._crosshair = {}\r\n  }\r\n\r\n  getChart (): Chart {\r\n    return this._chart\r\n  }\r\n\r\n  destroy (): void {\r\n    this._clearData()\r\n    this._clearLastPriceMarkExtendTextUpdateTimer()\r\n    this._taskScheduler.clear()\r\n    this._overlays.clear()\r\n    this._indicators.clear()\r\n    this._actions.clear()\r\n  }\r\n}\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nexport const WidgetNameConstants = {\r\n  MAIN: 'main',\r\n  X_AXIS: 'xAxis',\r\n  Y_AXIS: 'yAxis',\r\n  SEPARATOR: 'separator'\r\n}\r\n\r\nexport const REAL_SEPARATOR_HEIGHT = 7\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport { getPixelRatio } from './utils/canvas'\r\nimport { createDom } from './utils/dom'\r\nimport { isValid } from './utils/typeChecks'\r\nimport { requestAnimationFrame, DEFAULT_REQUEST_ID } from './utils/compatible'\r\n\r\ntype DrawListener = () => void\r\n\r\nasync function isSupportedDevicePixelContentBox (): Promise<boolean> {\r\n  return await new Promise((resolve: (val: boolean) => void) => {\r\n    const ro = new ResizeObserver((entries: ResizeObserverEntry[]) => {\r\n      resolve(entries.every(entry => 'devicePixelContentBoxSize' in entry))\r\n      ro.disconnect()\r\n    })\r\n    ro.observe(document.body, { box: 'device-pixel-content-box' })\r\n  }).catch(() => false)\r\n}\r\n\r\nexport default class Canvas {\r\n  private readonly _element: HTMLCanvasElement\r\n  private _resizeObserver: ResizeObserver\r\n  private _mediaQueryList: MediaQueryList\r\n\r\n  private readonly _ctx: CanvasRenderingContext2D\r\n\r\n  private readonly _listener: DrawListener\r\n\r\n  private _supportedDevicePixelContentBox = false\r\n\r\n  private _width = 0\r\n  private _height = 0\r\n\r\n  private _pixelWidth = 0\r\n  private _pixelHeight = 0\r\n\r\n  private _nextPixelWidth = 0\r\n  private _nextPixelHeight = 0\r\n\r\n  private _requestAnimationId = DEFAULT_REQUEST_ID\r\n\r\n  private readonly _mediaQueryListener: () => void = () => {\r\n    const pixelRatio = getPixelRatio(this._element)\r\n    this._nextPixelWidth = Math.round(this._element.clientWidth * pixelRatio)\r\n    this._nextPixelHeight = Math.round(this._element.clientHeight * pixelRatio)\r\n    this._resetPixelRatio()\r\n  }\r\n\r\n  constructor (style: Partial<CSSStyleDeclaration>, listener: DrawListener) {\r\n    this._listener = listener\r\n    this._element = createDom('canvas', style)\r\n    this._ctx = this._element.getContext('2d')!\r\n    isSupportedDevicePixelContentBox().then(result => {\r\n      this._supportedDevicePixelContentBox = result\r\n      if (result) {\r\n        this._resizeObserver = new ResizeObserver((entries: ResizeObserverEntry[]) => {\r\n          const entry = entries.find((entry: ResizeObserverEntry) => entry.target === this._element)\r\n          const size = entry?.devicePixelContentBoxSize[0]\r\n          if (isValid(size)) {\r\n            this._nextPixelWidth = size.inlineSize\r\n            this._nextPixelHeight = size.blockSize\r\n            if (this._pixelWidth !== this._nextPixelWidth || this._pixelHeight !== this._nextPixelHeight) {\r\n              this._resetPixelRatio()\r\n            }\r\n          }\r\n        })\r\n        this._resizeObserver.observe(this._element, { box: 'device-pixel-content-box' })\r\n      } else {\r\n        this._mediaQueryList = window.matchMedia(`(resolution: ${getPixelRatio(this._element)}dppx)`)\r\n        // eslint-disable-next-line @typescript-eslint/no-deprecated -- ignore\r\n        this._mediaQueryList.addListener(this._mediaQueryListener)\r\n      }\r\n    }).catch((_: unknown) => false)\r\n  }\r\n\r\n  private _resetPixelRatio (): void {\r\n    this._executeListener(() => {\r\n      const width = this._element.clientWidth\r\n      const height = this._element.clientHeight\r\n      this._width = width\r\n      this._height = height\r\n      this._pixelWidth = this._nextPixelWidth\r\n      this._pixelHeight = this._nextPixelHeight\r\n      this._element.width = this._nextPixelWidth\r\n      this._element.height = this._nextPixelHeight\r\n      const horizontalPixelRatio = this._nextPixelWidth / width\r\n      const verticalPixelRatio = this._nextPixelHeight / height\r\n      this._ctx.scale(horizontalPixelRatio, verticalPixelRatio)\r\n    })\r\n  }\r\n\r\n  private _executeListener (fn?: () => void): void {\r\n    if (this._requestAnimationId === DEFAULT_REQUEST_ID) {\r\n      this._requestAnimationId = requestAnimationFrame(() => {\r\n        this._ctx.clearRect(0, 0, this._width, this._height)\r\n        fn?.()\r\n        this._listener()\r\n        this._requestAnimationId = DEFAULT_REQUEST_ID\r\n      })\r\n    }\r\n  }\r\n\r\n  update (w: number, h: number): void {\r\n    if (this._width !== w || this._height !== h) {\r\n      this._element.style.width = `${w}px`\r\n      this._element.style.height = `${h}px`\r\n      if (!this._supportedDevicePixelContentBox) {\r\n        const pixelRatio = getPixelRatio(this._element)\r\n        this._nextPixelWidth = Math.round(w * pixelRatio)\r\n        this._nextPixelHeight = Math.round(h * pixelRatio)\r\n        this._resetPixelRatio()\r\n      }\r\n    } else {\r\n      this._executeListener()\r\n    }\r\n  }\r\n\r\n  getElement (): HTMLCanvasElement {\r\n    return this._element\r\n  }\r\n\r\n  getContext (): CanvasRenderingContext2D {\r\n    return this._ctx\r\n  }\r\n\r\n  destroy (): void {\r\n    if (isValid(this._resizeObserver)) {\r\n      this._resizeObserver.unobserve(this._element)\r\n    }\r\n    if (isValid(this._mediaQueryList)) {\r\n      // eslint-disable-next-line @typescript-eslint/no-deprecated -- ignore\r\n      this._mediaQueryList.removeListener(this._mediaQueryListener)\r\n    }\r\n  }\r\n}\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport type Bounding from '../common/Bounding'\r\nimport { createDefaultBounding } from '../common/Bounding'\r\nimport type Updater from '../common/Updater'\r\nimport { UpdateLevel } from '../common/Updater'\r\nimport Eventful from '../common/Eventful'\r\n\r\nimport type Pane from '../pane/Pane'\r\n\r\nimport { isString, merge } from '../common/utils/typeChecks'\r\nimport type { MouseTouchEvent } from '../common/EventHandler'\r\nimport type Nullable from '../common/Nullable'\r\n\r\nexport default abstract class Widget<P extends Pane = Pane> extends Eventful implements Updater {\r\n  /**\r\n   * root container\r\n   */\r\n  private readonly _rootContainer: HTMLElement\r\n\r\n  /**\r\n   * Parent pane\r\n   */\r\n  private readonly _pane: P\r\n\r\n  /**\r\n   * wrapper container\r\n   */\r\n  private readonly _container: HTMLElement\r\n\r\n  private readonly _bounding: Bounding = createDefaultBounding()\r\n\r\n  private _cursor = 'crosshair'\r\n\r\n  private _forceCursor: Nullable<string> = null\r\n\r\n  constructor (rootContainer: HTMLElement, pane: P) {\r\n    super()\r\n    this._pane = pane\r\n    this._rootContainer = rootContainer\r\n    this._container = this.createContainer()\r\n    rootContainer.appendChild(this._container)\r\n  }\r\n\r\n  setBounding (bounding: Partial<Bounding>): this {\r\n    merge(this._bounding, bounding)\r\n    return this\r\n  }\r\n\r\n  getContainer (): HTMLElement { return this._container }\r\n\r\n  getBounding (): Bounding {\r\n    return this._bounding\r\n  }\r\n\r\n  getPane (): P {\r\n    return this._pane\r\n  }\r\n\r\n  override checkEventOn (_: MouseTouchEvent): boolean {\r\n    return true\r\n  }\r\n\r\n  setCursor (cursor: string): void {\r\n    if (!isString(this._forceCursor)) {\r\n      if (cursor !== this._cursor) {\r\n        this._cursor = cursor\r\n        this._container.style.cursor = this._cursor\r\n      }\r\n    }\r\n  }\r\n\r\n  setForceCursor (cursor: Nullable<string>): void {\r\n    if (cursor !== this._forceCursor) {\r\n      this._forceCursor = cursor\r\n      this._container.style.cursor = this._forceCursor ?? this._cursor\r\n    }\r\n  }\r\n\r\n  getForceCursor (): Nullable<string> {\r\n    return this._forceCursor\r\n  }\r\n\r\n  update (level?: UpdateLevel): void {\r\n    this.updateImp(this._container, this._bounding, level ?? UpdateLevel.Drawer)\r\n  }\r\n\r\n  destroy (): void {\r\n    this._rootContainer.removeChild(this._container)\r\n  }\r\n\r\n  abstract getName (): string\r\n\r\n  protected abstract createContainer (): HTMLElement\r\n\r\n  protected abstract updateImp (container: HTMLElement, bounding: Bounding, level: UpdateLevel): void\r\n}\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport type Bounding from '../common/Bounding'\r\nimport { UpdateLevel } from '../common/Updater'\r\nimport Canvas from '../common/Canvas'\r\n\r\nimport type DrawPane from '../pane/DrawPane'\r\n\r\nimport Widget from './Widget'\r\n\r\nimport { createDom } from '../common/utils/dom'\r\nimport { getPixelRatio } from '../common/utils/canvas'\r\n\r\nexport default abstract class DrawWidget<P extends DrawPane = DrawPane> extends Widget<P> {\r\n  private readonly _mainCanvas: Canvas\r\n  private readonly _overlayCanvas: Canvas\r\n\r\n  constructor (rootContainer: HTMLElement, pane: P) {\r\n    super(rootContainer, pane)\r\n    this._mainCanvas = new Canvas({\r\n      position: 'absolute',\r\n      top: '0',\r\n      left: '0',\r\n      zIndex: '2',\r\n      boxSizing: 'border-box'\r\n    }, () => {\r\n      this.updateMain(this._mainCanvas.getContext())\r\n    })\r\n    this._overlayCanvas = new Canvas({\r\n      position: 'absolute',\r\n      top: '0',\r\n      left: '0',\r\n      zIndex: '2',\r\n      boxSizing: 'border-box'\r\n    }, () => {\r\n      this.updateOverlay(this._overlayCanvas.getContext())\r\n    })\r\n    const container = this.getContainer()\r\n    container.appendChild(this._mainCanvas.getElement())\r\n    container.appendChild(this._overlayCanvas.getElement())\r\n  }\r\n\r\n  override createContainer (): HTMLElement {\r\n    return createDom('div', {\r\n      margin: '0',\r\n      padding: '0',\r\n      position: 'absolute',\r\n      top: '0',\r\n      overflow: 'hidden',\r\n      boxSizing: 'border-box',\r\n      zIndex: '1'\r\n    })\r\n  }\r\n\r\n  override updateImp (container: HTMLElement, bounding: Bounding, level: UpdateLevel): void {\r\n    const { width, height, left } = bounding\r\n    container.style.left = `${left}px`\r\n\r\n    let l = level\r\n    const w = container.clientWidth\r\n    const h = container.clientHeight\r\n    if (width !== w || height !== h) {\r\n      container.style.width = `${width}px`\r\n      container.style.height = `${height}px`\r\n      l = UpdateLevel.Drawer\r\n    }\r\n    switch (l) {\r\n      case UpdateLevel.Main: {\r\n        this._mainCanvas.update(width, height)\r\n        break\r\n      }\r\n      case UpdateLevel.Overlay: {\r\n        this._overlayCanvas.update(width, height)\r\n        break\r\n      }\r\n      case UpdateLevel.Drawer:\r\n      case UpdateLevel.All: {\r\n        this._mainCanvas.update(width, height)\r\n        this._overlayCanvas.update(width, height)\r\n        break\r\n      }\r\n      default: {\r\n        break\r\n      }\r\n    }\r\n  }\r\n\r\n  destroy (): void {\r\n    this._mainCanvas.destroy()\r\n    this._overlayCanvas.destroy()\r\n  }\r\n\r\n  getImage (includeOverlay: boolean): HTMLCanvasElement {\r\n    const { width, height } = this.getBounding()\r\n    const canvas = createDom('canvas', {\r\n      width: `${width}px`,\r\n      height: `${height}px`,\r\n      boxSizing: 'border-box'\r\n    })\r\n    const ctx = canvas.getContext('2d')!\r\n    const pixelRatio = getPixelRatio(canvas)\r\n    canvas.width = width * pixelRatio\r\n    canvas.height = height * pixelRatio\r\n    ctx.scale(pixelRatio, pixelRatio)\r\n\r\n    ctx.drawImage(this._mainCanvas.getElement(), 0, 0, width, height)\r\n\r\n    if (includeOverlay) {\r\n      ctx.drawImage(this._overlayCanvas.getElement(), 0, 0, width, height)\r\n    }\r\n    return canvas\r\n  }\r\n\r\n  protected abstract updateMain (ctx: CanvasRenderingContext2D): void\r\n  protected abstract updateOverlay (ctx: CanvasRenderingContext2D): void\r\n}\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport type Coordinate from '../../common/Coordinate'\r\nimport type { PolygonStyle } from '../../common/Styles'\r\nimport { isString } from '../../common/utils/typeChecks'\r\nimport { isTransparent } from '../../common/utils/color'\r\n\r\nimport type { FigureTemplate } from '../../component/Figure'\r\n\r\nexport function checkCoordinateOnCircle (coordinate: Coordinate, attrs: CircleAttrs | CircleAttrs[]): boolean {\r\n  let circles: CircleAttrs[] = []\r\n  circles = circles.concat(attrs)\r\n\r\n  for (const circle of circles) {\r\n    const { x, y, r } = circle\r\n    const difX = coordinate.x - x\r\n    const difY = coordinate.y - y\r\n    if (!(difX * difX + difY * difY > r * r)) {\r\n      return true\r\n    }\r\n  }\r\n  return false\r\n}\r\n\r\nexport function drawCircle (ctx: CanvasRenderingContext2D, attrs: CircleAttrs | CircleAttrs[], styles: Partial<PolygonStyle>): void {\r\n  let circles: CircleAttrs[] = []\r\n  circles = circles.concat(attrs)\r\n\r\n  const {\r\n    style = 'fill',\r\n    color = 'currentColor',\r\n    borderSize = 1,\r\n    borderColor = 'currentColor',\r\n    borderStyle = 'solid',\r\n    borderDashedValue = [2, 2]\r\n  } = styles\r\n\r\n  const solid = (style === 'fill' || styles.style === 'stroke_fill') && (!isString(color) || !isTransparent(color))\r\n  if (solid) {\r\n    ctx.fillStyle = color\r\n    circles.forEach(({ x, y, r }) => {\r\n      ctx.beginPath()\r\n      ctx.arc(x, y, r, 0, Math.PI * 2)\r\n      ctx.closePath()\r\n      ctx.fill()\r\n    })\r\n  }\r\n  if ((style === 'stroke' || styles.style === 'stroke_fill') && borderSize > 0 && !isTransparent(borderColor)) {\r\n    ctx.strokeStyle = borderColor\r\n    ctx.lineWidth = borderSize\r\n    if (borderStyle === 'dashed') {\r\n      ctx.setLineDash(borderDashedValue)\r\n    } else {\r\n      ctx.setLineDash([])\r\n    }\r\n    circles.forEach(({ x, y, r }) => {\r\n      if (!solid || r > borderSize) {\r\n        ctx.beginPath()\r\n        ctx.arc(x, y, r, 0, Math.PI * 2)\r\n        ctx.closePath()\r\n        ctx.stroke()\r\n      }\r\n    })\r\n  }\r\n}\r\n\r\nexport interface CircleAttrs {\r\n  x: number\r\n  y: number\r\n  r: number\r\n}\r\n\r\nconst circle: FigureTemplate<CircleAttrs | CircleAttrs[], Partial<PolygonStyle>> = {\r\n  name: 'circle',\r\n  checkEventOn: checkCoordinateOnCircle,\r\n  draw: (ctx: CanvasRenderingContext2D, attrs: CircleAttrs | CircleAttrs[], styles: Partial<PolygonStyle>) => {\r\n    drawCircle(ctx, attrs, styles)\r\n  }\r\n}\r\n\r\nexport default circle\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport type Coordinate from '../../common/Coordinate'\r\nimport type { PolygonStyle } from '../../common/Styles'\r\nimport { isString } from '../../common/utils/typeChecks'\r\nimport { isTransparent } from '../../common/utils/color'\r\n\r\nimport type { FigureTemplate } from '../../component/Figure'\r\n\r\nexport function checkCoordinateOnPolygon (coordinate: Coordinate, attrs: PolygonAttrs | PolygonAttrs[]): boolean {\r\n  let polygons: PolygonAttrs[] = []\r\n  polygons = polygons.concat(attrs)\r\n  for (const polygon of polygons) {\r\n    let on = false\r\n    const { coordinates } = polygon\r\n    for (let i = 0, j = coordinates.length - 1; i < coordinates.length; j = i++) {\r\n      if (\r\n        (coordinates[i].y > coordinate.y) !== (coordinates[j].y > coordinate.y) &&\r\n        (coordinate.x < (coordinates[j].x - coordinates[i].x) * (coordinate.y - coordinates[i].y) / (coordinates[j].y - coordinates[i].y) + coordinates[i].x)\r\n      ) {\r\n        on = !on\r\n      }\r\n    }\r\n    if (on) {\r\n      return true\r\n    }\r\n  }\r\n  return false\r\n}\r\n\r\nexport function drawPolygon (ctx: CanvasRenderingContext2D, attrs: PolygonAttrs | PolygonAttrs[], styles: Partial<PolygonStyle>): void {\r\n  let polygons: PolygonAttrs[] = []\r\n  polygons = polygons.concat(attrs)\r\n  const {\r\n    style = 'fill',\r\n    color = 'currentColor',\r\n    borderSize = 1,\r\n    borderColor = 'currentColor',\r\n    borderStyle = 'solid',\r\n    borderDashedValue = [2, 2]\r\n  } = styles\r\n  if (\r\n    (style === 'fill' || styles.style === 'stroke_fill') &&\r\n    (!isString(color) || !isTransparent(color))) {\r\n    ctx.fillStyle = color\r\n    polygons.forEach(({ coordinates }) => {\r\n      ctx.beginPath()\r\n      ctx.moveTo(coordinates[0].x, coordinates[0].y)\r\n      for (let i = 1; i < coordinates.length; i++) {\r\n        ctx.lineTo(coordinates[i].x, coordinates[i].y)\r\n      }\r\n      ctx.closePath()\r\n      ctx.fill()\r\n    })\r\n  }\r\n  if ((style === 'stroke' || styles.style === 'stroke_fill') && borderSize > 0 && !isTransparent(borderColor)) {\r\n    ctx.strokeStyle = borderColor\r\n    ctx.lineWidth = borderSize\r\n    if (borderStyle === 'dashed') {\r\n      ctx.setLineDash(borderDashedValue)\r\n    } else {\r\n      ctx.setLineDash([])\r\n    }\r\n    polygons.forEach(({ coordinates }) => {\r\n      ctx.beginPath()\r\n      ctx.moveTo(coordinates[0].x, coordinates[0].y)\r\n      for (let i = 1; i < coordinates.length; i++) {\r\n        ctx.lineTo(coordinates[i].x, coordinates[i].y)\r\n      }\r\n      ctx.closePath()\r\n      ctx.stroke()\r\n    })\r\n  }\r\n}\r\n\r\nexport interface PolygonAttrs {\r\n  coordinates: Coordinate[]\r\n}\r\n\r\nconst polygon: FigureTemplate<PolygonAttrs | PolygonAttrs[], Partial<PolygonStyle>> = {\r\n  name: 'polygon',\r\n  checkEventOn: checkCoordinateOnPolygon,\r\n  draw: (ctx: CanvasRenderingContext2D, attrs: PolygonAttrs | PolygonAttrs[], styles: Partial<PolygonStyle>) => {\r\n    drawPolygon(ctx, attrs, styles)\r\n  }\r\n}\r\n\r\nexport default polygon\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport type Coordinate from '../../common/Coordinate'\r\nimport type { RectStyle } from '../../common/Styles'\r\nimport { isTransparent } from '../../common/utils/color'\r\nimport { isString } from '../../common/utils/typeChecks'\r\n\r\nimport { type FigureTemplate, DEVIATION } from '../../component/Figure'\r\n\r\nexport function checkCoordinateOnRect (coordinate: Coordinate, attrs: RectAttrs | RectAttrs[]): boolean {\r\n  let rects: RectAttrs[] = []\r\n  rects = rects.concat(attrs)\r\n  for (const rect of rects) {\r\n    let x = rect.x\r\n    let width = rect.width\r\n    if (width < DEVIATION * 2) {\r\n      x -= DEVIATION\r\n      width = DEVIATION * 2\r\n    }\r\n    let y = rect.y\r\n    let height = rect.height\r\n    if (height < DEVIATION * 2) {\r\n      y -= DEVIATION\r\n      height = DEVIATION * 2\r\n    }\r\n    if (\r\n      coordinate.x >= x &&\r\n      coordinate.x <= x + width &&\r\n      coordinate.y >= y &&\r\n      coordinate.y <= y + height\r\n    ) {\r\n      return true\r\n    }\r\n  }\r\n  return false\r\n}\r\n\r\nexport function drawRect (ctx: CanvasRenderingContext2D, attrs: RectAttrs | RectAttrs[], styles: Partial<RectStyle>): void {\r\n  let rects: RectAttrs[] = []\r\n  rects = rects.concat(attrs)\r\n  const {\r\n    style = 'fill',\r\n    color = 'transparent',\r\n    borderSize = 1,\r\n    borderColor = 'transparent',\r\n    borderStyle = 'solid',\r\n    borderRadius: r = 0,\r\n    borderDashedValue = [2, 2]\r\n  } = styles\r\n  // eslint-disable-next-line @typescript-eslint/unbound-method, @typescript-eslint/no-unnecessary-condition -- ignore\r\n  const draw = ctx.roundRect ?? ctx.rect\r\n  const solid = (style === 'fill' || styles.style === 'stroke_fill') && (!isString(color) || !isTransparent(color))\r\n  if (solid) {\r\n    ctx.fillStyle = color\r\n    rects.forEach(({ x, y, width: w, height: h }) => {\r\n      ctx.beginPath()\r\n      draw.call(ctx, x, y, w, h, r)\r\n      ctx.closePath()\r\n      ctx.fill()\r\n    })\r\n  }\r\n  if ((style === 'stroke' || styles.style === 'stroke_fill') && borderSize > 0 && !isTransparent(borderColor)) {\r\n    ctx.strokeStyle = borderColor\r\n    ctx.fillStyle = borderColor\r\n    ctx.lineWidth = borderSize\r\n    if (borderStyle === 'dashed') {\r\n      ctx.setLineDash(borderDashedValue)\r\n    } else {\r\n      ctx.setLineDash([])\r\n    }\r\n    const correction = borderSize % 2 === 1 ? 0.5 : 0\r\n    const doubleCorrection = Math.round(correction * 2)\r\n    rects.forEach(({ x, y, width: w, height: h }) => {\r\n      if (w > borderSize * 2 && h > borderSize * 2) {\r\n        ctx.beginPath()\r\n        draw.call(ctx, x + correction, y + correction, w - doubleCorrection, h - doubleCorrection, r)\r\n        ctx.closePath()\r\n        ctx.stroke()\r\n      } else {\r\n        if (!solid) {\r\n          ctx.fillRect(x, y, w, h)\r\n        }\r\n      }\r\n    })\r\n  }\r\n}\r\n\r\nexport interface RectAttrs {\r\n  x: number\r\n  y: number\r\n  width: number\r\n  height: number\r\n}\r\n\r\nconst rect: FigureTemplate<RectAttrs | RectAttrs[], Partial<RectStyle>> = {\r\n  name: 'rect',\r\n  checkEventOn: checkCoordinateOnRect,\r\n  draw: (ctx: CanvasRenderingContext2D, attrs: RectAttrs | RectAttrs[], styles: Partial<RectStyle>) => {\r\n    drawRect(ctx, attrs, styles)\r\n  }\r\n}\r\n\r\nexport default rect\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport type Coordinate from '../../common/Coordinate'\r\nimport type { TextStyle } from '../../common/Styles'\r\n\r\nimport { createFont, calcTextWidth } from '../../common/utils/canvas'\r\n\r\nimport type { FigureTemplate } from '../../component/Figure'\r\n\r\nimport { type RectAttrs, drawRect } from './rect'\r\n\r\nexport function getTextRect (attrs: TextAttrs, styles: Partial<TextStyle>): RectAttrs {\r\n  const { size = 12, paddingLeft = 0, paddingTop = 0, paddingRight = 0, paddingBottom = 0, weight = 'normal', family } = styles\r\n  const { x, y, text, align = 'left', baseline = 'top', width: w, height: h } = attrs\r\n  const width = w ?? (paddingLeft + calcTextWidth(text, size, weight, family) + paddingRight)\r\n  const height = h ?? (paddingTop + size + paddingBottom)\r\n  let startX = 0\r\n  switch (align) {\r\n    case 'left':\r\n    case 'start': {\r\n      startX = x\r\n      break\r\n    }\r\n    case 'right':\r\n    case 'end': {\r\n      startX = x - width\r\n      break\r\n    }\r\n    default: {\r\n      startX = x - width / 2\r\n      break\r\n    }\r\n  }\r\n  let startY = 0\r\n  switch (baseline) {\r\n    case 'top':\r\n    case 'hanging': {\r\n      startY = y\r\n      break\r\n    }\r\n    case 'bottom':\r\n    case 'ideographic':\r\n    case 'alphabetic': {\r\n      startY = y - height\r\n      break\r\n    }\r\n    default: {\r\n      startY = y - height / 2\r\n      break\r\n    }\r\n  }\r\n  return { x: startX, y: startY, width, height }\r\n}\r\n\r\nexport function checkCoordinateOnText (coordinate: Coordinate, attrs: TextAttrs | TextAttrs[], styles: Partial<TextStyle>): boolean {\r\n  let texts: TextAttrs[] = []\r\n  texts = texts.concat(attrs)\r\n  for (const text of texts) {\r\n    const { x, y, width, height } = getTextRect(text, styles)\r\n    if (\r\n      coordinate.x >= x &&\r\n      coordinate.x <= x + width &&\r\n      coordinate.y >= y &&\r\n      coordinate.y <= y + height\r\n    ) {\r\n      return true\r\n    }\r\n  }\r\n  return false\r\n}\r\n\r\nexport function drawText (ctx: CanvasRenderingContext2D, attrs: TextAttrs | TextAttrs[], styles: Partial<TextStyle>): void {\r\n  let texts: TextAttrs[] = []\r\n  texts = texts.concat(attrs)\r\n  const {\r\n    color = 'currentColor',\r\n    size = 12,\r\n    family,\r\n    weight,\r\n    paddingLeft = 0,\r\n    paddingTop = 0,\r\n    paddingRight = 0\r\n  } = styles\r\n  const rects = texts.map(text => getTextRect(text, styles))\r\n  drawRect(ctx, rects, { ...styles, color: styles.backgroundColor })\r\n\r\n  ctx.textAlign = 'left'\r\n  ctx.textBaseline = 'top'\r\n  ctx.font = createFont(size, weight, family)\r\n  ctx.fillStyle = color\r\n\r\n  texts.forEach((text, index) => {\r\n    const rect = rects[index]\r\n    ctx.fillText(text.text, rect.x + paddingLeft, rect.y + paddingTop, rect.width - paddingLeft - paddingRight)\r\n  })\r\n}\r\n\r\nexport interface TextAttrs {\r\n  x: number\r\n  y: number\r\n  text: string\r\n  width?: number\r\n  height?: number\r\n  align?: CanvasTextAlign\r\n  baseline?: CanvasTextBaseline\r\n}\r\n\r\nconst text: FigureTemplate<TextAttrs | TextAttrs[], Partial<TextStyle>> = {\r\n  name: 'text',\r\n  checkEventOn: checkCoordinateOnText,\r\n  draw: (ctx: CanvasRenderingContext2D, attrs: TextAttrs | TextAttrs[], styles: Partial<TextStyle>) => {\r\n    drawText(ctx, attrs, styles)\r\n  }\r\n}\r\n\r\nexport default text\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nexport default interface Coordinate {\r\n  x: number\r\n  y: number\r\n}\r\n\r\nexport function getDistance (coordinate1: Coordinate, coordinate2: Coordinate): number {\r\n  const xDif = coordinate1.x - coordinate2.x\r\n  const yDif = coordinate1.y - coordinate2.y\r\n  return Math.sqrt(xDif * xDif + yDif * yDif)\r\n}\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport type Coordinate from '../../common/Coordinate'\r\nimport { getDistance } from '../../common/Coordinate'\r\nimport type { LineStyle } from '../../common/Styles'\r\n\r\nimport { type FigureTemplate, DEVIATION } from '../../component/Figure'\r\n\r\nimport type { CircleAttrs } from './circle'\r\n\r\nexport function checkCoordinateOnArc (coordinate: Coordinate, attrs: ArcAttrs | ArcAttrs[]): boolean {\r\n  let arcs: ArcAttrs[] = []\r\n  arcs = arcs.concat(attrs)\r\n  for (const arc of arcs) {\r\n    if (Math.abs(getDistance(coordinate, arc) - arc.r) < DEVIATION) {\r\n      const { r, startAngle, endAngle } = arc\r\n      const startCoordinateX = r * Math.cos(startAngle) + arc.x\r\n      const startCoordinateY = r * Math.sin(startAngle) + arc.y\r\n      const endCoordinateX = r * Math.cos(endAngle) + arc.x\r\n      const endCoordinateY = r * Math.sin(endAngle) + arc.y\r\n      if (\r\n        coordinate.x <= Math.max(startCoordinateX, endCoordinateX) + DEVIATION &&\r\n        coordinate.x >= Math.min(startCoordinateX, endCoordinateX) - DEVIATION &&\r\n        coordinate.y <= Math.max(startCoordinateY, endCoordinateY) + DEVIATION &&\r\n        coordinate.y >= Math.min(startCoordinateY, endCoordinateY) - DEVIATION\r\n      ) {\r\n        return true\r\n      }\r\n    }\r\n  }\r\n\r\n  return false\r\n}\r\n\r\nexport function drawArc (ctx: CanvasRenderingContext2D, attrs: ArcAttrs | ArcAttrs[], styles: Partial<LineStyle>): void {\r\n  let arcs: ArcAttrs[] = []\r\n  arcs = arcs.concat(attrs)\r\n  const { style = 'solid', size = 1, color = 'currentColor', dashedValue = [2, 2] } = styles\r\n  ctx.lineWidth = size\r\n  ctx.strokeStyle = color\r\n  if (style === 'dashed') {\r\n    ctx.setLineDash(dashedValue)\r\n  } else {\r\n    ctx.setLineDash([])\r\n  }\r\n  arcs.forEach(({ x, y, r, startAngle, endAngle }) => {\r\n    ctx.beginPath()\r\n    ctx.arc(x, y, r, startAngle, endAngle)\r\n    ctx.stroke()\r\n    ctx.closePath()\r\n  })\r\n}\r\n\r\nexport interface ArcAttrs extends CircleAttrs {\r\n  startAngle: number\r\n  endAngle: number\r\n}\r\n\r\nconst arc: FigureTemplate<ArcAttrs | ArcAttrs[], Partial<LineStyle>> = {\r\n  name: 'arc',\r\n  checkEventOn: checkCoordinateOnArc,\r\n  draw: (ctx: CanvasRenderingContext2D, attrs: ArcAttrs | ArcAttrs[], styles: Partial<LineStyle>) => {\r\n    drawArc(ctx, attrs, styles)\r\n  }\r\n}\r\n\r\nexport default arc\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport type { PathStyle } from '../../common/Styles'\r\nimport { isValid } from '../../common/utils/typeChecks'\r\n\r\nimport type { FigureTemplate } from '../../component/Figure'\r\nimport { checkCoordinateOnRect } from './rect'\r\n\r\nfunction drawEllipticalArc (ctx: CanvasRenderingContext2D, x1: number, y1: number, args: number[], offsetX: number, offsetY: number, isRelative: boolean): void {\r\n  const [rx, ry, rotation, largeArcFlag, sweepFlag, x2, y2] = args\r\n\r\n  const targetX = isRelative ? x1 + x2 : x2 + offsetX\r\n  const targetY = isRelative ? y1 + y2 : y2 + offsetY\r\n\r\n  const segments = ellipticalArcToBeziers(x1, y1, rx, ry, rotation, largeArcFlag, sweepFlag, targetX, targetY)\r\n\r\n  segments.forEach(segment => {\r\n    ctx.bezierCurveTo(segment[0], segment[1], segment[2], segment[3], segment[4], segment[5])\r\n  })\r\n}\r\n\r\nfunction ellipticalArcToBeziers (x1: number, y1: number, rx: number, ry: number, rotation: number, largeArcFlag: number, sweepFlag: number, x2: number, y2: number): number[][] {\r\n  const { cx, cy, startAngle, deltaAngle } = computeEllipticalArcParameters(\r\n    x1, y1, rx, ry, rotation, largeArcFlag, sweepFlag, x2, y2\r\n  )\r\n\r\n  const segments: number[][] = []\r\n  const numSegments = Math.ceil(Math.abs(deltaAngle) / (Math.PI / 2))\r\n  for (let i = 0; i < numSegments; i++) {\r\n    const start = startAngle + (i * deltaAngle) / numSegments\r\n    const end = startAngle + ((i + 1) * deltaAngle) / numSegments\r\n\r\n    const bezier = ellipticalArcToBezier(cx, cy, rx, ry, rotation, start, end)\r\n    segments.push(bezier)\r\n  }\r\n\r\n  return segments\r\n}\r\n\r\nfunction computeEllipticalArcParameters (x1: number, y1: number, rx: number, ry: number, rotation: number, largeArcFlag: number, sweepFlag: number, x2: number, y2: number): { cx: number; cy: number; startAngle: number; deltaAngle: number } {\r\n  const phi = (rotation * Math.PI) / 180\r\n\r\n  const dx = (x1 - x2) / 2\r\n  const dy = (y1 - y2) / 2\r\n  const x1p = Math.cos(phi) * dx + Math.sin(phi) * dy\r\n  const y1p = -Math.sin(phi) * dx + Math.cos(phi) * dy\r\n\r\n  const lambda = (x1p ** 2) / (rx ** 2) + (y1p ** 2) / (ry ** 2)\r\n  if (lambda > 1) {\r\n    rx *= Math.sqrt(lambda)\r\n    ry *= Math.sqrt(lambda)\r\n  }\r\n\r\n  const sign = largeArcFlag === sweepFlag ? -1 : 1\r\n  const numerator = (rx ** 2) * (ry ** 2) - (rx ** 2) * (y1p ** 2) - (ry ** 2) * (x1p ** 2)\r\n  const denominator = (rx ** 2) * (y1p ** 2) + (ry ** 2) * (x1p ** 2)\r\n  const cxp = sign * Math.sqrt(Math.abs(numerator / denominator)) * (rx * y1p / ry)\r\n  const cyp = sign * Math.sqrt(Math.abs(numerator / denominator)) * (-ry * x1p / rx)\r\n\r\n  const cx = Math.cos(phi) * cxp - Math.sin(phi) * cyp + (x1 + x2) / 2\r\n  const cy = Math.sin(phi) * cxp + Math.cos(phi) * cyp + (y1 + y2) / 2\r\n\r\n  const startAngle = Math.atan2((y1p - cyp) / ry, (x1p - cxp) / rx)\r\n  let deltaAngle = Math.atan2((-y1p - cyp) / ry, (-x1p - cxp) / rx) - startAngle\r\n\r\n  if (deltaAngle < 0 && sweepFlag === 1) {\r\n    deltaAngle += 2 * Math.PI\r\n  } else if (deltaAngle > 0 && sweepFlag === 0) {\r\n    deltaAngle -= 2 * Math.PI\r\n  }\r\n\r\n  return { cx, cy, startAngle, deltaAngle }\r\n}\r\n\r\n/**\r\n * Ellipse arc segment to Bezier curve\r\n * @param cx\r\n * @param cy\r\n * @param rx\r\n * @param ry\r\n * @param rotation\r\n * @param startAngle\r\n * @param endAngle\r\n * @returns\r\n */\r\nfunction ellipticalArcToBezier (cx: number, cy: number, rx: number, ry: number, rotation: number, startAngle: number, endAngle: number): number[] {\r\n  // ËÆ°ÁÆóÊéßÂà∂ÁÇπ\r\n  const alpha = Math.sin(endAngle - startAngle) * (Math.sqrt(4 + 3 * Math.tan((endAngle - startAngle) / 2) ** 2) - 1) / 3\r\n  const cosPhi = Math.cos(rotation)\r\n  const sinPhi = Math.sin(rotation)\r\n\r\n  const x1 = cx + rx * Math.cos(startAngle) * cosPhi - ry * Math.sin(startAngle) * sinPhi\r\n  const y1 = cy + rx * Math.cos(startAngle) * sinPhi + ry * Math.sin(startAngle) * cosPhi\r\n\r\n  const x2 = cx + rx * Math.cos(endAngle) * cosPhi - ry * Math.sin(endAngle) * sinPhi\r\n  const y2 = cy + rx * Math.cos(endAngle) * sinPhi + ry * Math.sin(endAngle) * cosPhi\r\n\r\n  const cp1x = x1 + alpha * (-rx * Math.sin(startAngle) * cosPhi - ry * Math.cos(startAngle) * sinPhi)\r\n  const cp1y = y1 + alpha * (-rx * Math.sin(startAngle) * sinPhi + ry * Math.cos(startAngle) * cosPhi)\r\n\r\n  const cp2x = x2 - alpha * (-rx * Math.sin(endAngle) * cosPhi - ry * Math.cos(endAngle) * sinPhi)\r\n  const cp2y = y2 - alpha * (-rx * Math.sin(endAngle) * sinPhi + ry * Math.cos(endAngle) * cosPhi)\r\n\r\n  return [cp1x, cp1y, cp2x, cp2y, x2, y2]\r\n}\r\n\r\nexport function drawPath (ctx: CanvasRenderingContext2D, attrs: PathAttrs | PathAttrs[], styles: Partial<PathStyle>): void {\r\n  let paths: PathAttrs[] = []\r\n  paths = paths.concat(attrs)\r\n  const { lineWidth = 1, color = 'currentColor' } = styles\r\n  ctx.lineWidth = lineWidth\r\n  ctx.strokeStyle = color\r\n  ctx.setLineDash([])\r\n  paths.forEach(({ x, y, path }) => {\r\n    const commands = path.match(/[MLHVCSQTAZ][^MLHVCSQTAZ]*/gi)\r\n    if (isValid(commands)) {\r\n      const offsetX = x\r\n      const offsetY = y\r\n      ctx.beginPath()\r\n      commands.forEach(command => {\r\n        let currentX = 0\r\n        let currentY = 0\r\n        let startX = 0\r\n        let startY = 0\r\n        const type = command[0]\r\n        const args = command.slice(1).trim().split(/[\\s,]+/).map(Number)\r\n        switch (type) {\r\n          case 'M':\r\n            currentX = args[0] + offsetX\r\n            currentY = args[1] + offsetY\r\n            ctx.moveTo(currentX, currentY)\r\n            startX = currentX\r\n            startY = currentY\r\n            break\r\n          case 'm':\r\n            currentX += args[0]\r\n            currentY += args[1]\r\n            ctx.moveTo(currentX, currentY)\r\n            startX = currentX\r\n            startY = currentY\r\n            break\r\n          case 'L':\r\n            currentX = args[0] + offsetX\r\n            currentY = args[1] + offsetY\r\n            ctx.lineTo(currentX, currentY)\r\n            break\r\n          case 'l':\r\n            currentX += args[0]\r\n            currentY += args[1]\r\n            ctx.lineTo(currentX, currentY)\r\n            break\r\n          case 'H':\r\n            currentX = args[0] + offsetX\r\n            ctx.lineTo(currentX, currentY)\r\n            break\r\n          case 'h':\r\n            currentX += args[0]\r\n            ctx.lineTo(currentX, currentY)\r\n            break\r\n          case 'V':\r\n            currentY = args[0] + offsetY\r\n            ctx.lineTo(currentX, currentY)\r\n            break\r\n          case 'v':\r\n            currentY += args[0]\r\n            ctx.lineTo(currentX, currentY)\r\n            break\r\n          case 'C':\r\n            ctx.bezierCurveTo(\r\n              args[0] + offsetX, args[1] + offsetY,\r\n              args[2] + offsetX, args[3] + offsetY,\r\n              args[4] + offsetX, args[5] + offsetY\r\n            )\r\n            currentX = args[4] + offsetX\r\n            currentY = args[5] + offsetY\r\n            break\r\n          case 'c':\r\n            ctx.bezierCurveTo(\r\n              currentX + args[0], currentY + args[1],\r\n              currentX + args[2], currentY + args[3],\r\n              currentX + args[4], currentY + args[5]\r\n            )\r\n            currentX += args[4]\r\n            currentY += args[5]\r\n            break\r\n          case 'S':\r\n            ctx.bezierCurveTo(\r\n              currentX, currentY,\r\n              args[0] + offsetX, args[1] + offsetY,\r\n              args[2] + offsetX, args[3] + offsetY\r\n            )\r\n            currentX = args[2] + offsetX\r\n            currentY = args[3] + offsetY\r\n            break\r\n          case 's':\r\n            ctx.bezierCurveTo(\r\n              currentX, currentY,\r\n              currentX + args[0], currentY + args[1],\r\n              currentX + args[2], currentY + args[3]\r\n            )\r\n            currentX += args[2]\r\n            currentY += args[3]\r\n            break\r\n          case 'Q':\r\n            ctx.quadraticCurveTo(\r\n              args[0] + offsetX, args[1] + offsetY,\r\n              args[2] + offsetX, args[3] + offsetY\r\n            )\r\n            currentX = args[2] + offsetX\r\n            currentY = args[3] + offsetY\r\n            break\r\n          case 'q':\r\n            ctx.quadraticCurveTo(\r\n              currentX + args[0], currentY + args[1],\r\n              currentX + args[2], currentY + args[3]\r\n            )\r\n            currentX += args[2]\r\n            currentY += args[3]\r\n            break\r\n          case 'T':\r\n            ctx.quadraticCurveTo(\r\n              currentX, currentY,\r\n              args[0] + offsetX, args[1] + offsetY\r\n            )\r\n            currentX = args[0] + offsetX\r\n            currentY = args[1] + offsetY\r\n            break\r\n          case 't':\r\n            ctx.quadraticCurveTo(\r\n              currentX, currentY,\r\n              currentX + args[0], currentY + args[1]\r\n            )\r\n            currentX += args[0]\r\n            currentY += args[1]\r\n            break\r\n          case 'A':\r\n            // arc\r\n            // reference https://www.w3.org/TR/SVG/implnote.html#ArcImplementationNotes\r\n            drawEllipticalArc(ctx, currentX, currentY, args, offsetX, offsetY, false)\r\n            currentX = args[5] + offsetX\r\n            currentY = args[6] + offsetY\r\n            break\r\n          case 'a':\r\n            // arc\r\n            // reference https://www.w3.org/TR/SVG/implnote.html#ArcImplementationNotes\r\n            drawEllipticalArc(ctx, currentX, currentY, args, offsetX, offsetY, true)\r\n            currentX += args[5]\r\n            currentY += args[6]\r\n            break\r\n          case 'Z':\r\n          case 'z':\r\n            ctx.closePath()\r\n            currentX = startX\r\n            currentY = startY\r\n            break\r\n          default: { break }\r\n        }\r\n      })\r\n      if (styles.style === 'fill') {\r\n        ctx.fill()\r\n      } else {\r\n        ctx.stroke()\r\n      }\r\n    }\r\n  })\r\n}\r\n\r\nexport interface PathAttrs {\r\n  x: number\r\n  y: number\r\n  width: number\r\n  height: number\r\n  path: string\r\n}\r\n\r\nconst path: FigureTemplate<PathAttrs | PathAttrs[], Partial<PathStyle>> = {\r\n  name: 'path',\r\n  checkEventOn: checkCoordinateOnRect,\r\n  draw: (ctx: CanvasRenderingContext2D, attrs: PathAttrs | PathAttrs[], styles: Partial<PathStyle>) => {\r\n    drawPath(ctx, attrs, styles)\r\n  }\r\n}\r\n\r\nexport default path\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport type Nullable from '../../common/Nullable'\r\n\r\nimport FigureImp, { type FigureTemplate, type FigureConstructor, type FigureInnerConstructor } from '../../component/Figure'\r\n\r\nimport circle from './circle'\r\nimport line from './line'\r\nimport polygon from './polygon'\r\nimport rect from './rect'\r\nimport text from './text'\r\nimport arc from './arc'\r\nimport path from './path'\r\n\r\nconst figures: Record<string, FigureInnerConstructor> = {}\r\n\r\nconst extensions = [circle, line, polygon, rect, text, arc, path]\r\nextensions.forEach((figure: FigureTemplate) => {\r\n  figures[figure.name] = FigureImp.extend(figure)\r\n})\r\n\r\nfunction getSupportedFigures (): string[] {\r\n  return Object.keys(figures)\r\n}\r\n\r\nfunction registerFigure<A = unknown, S = unknown> (figure: FigureTemplate<A, S>): void {\r\n  figures[figure.name] = FigureImp.extend(figure)\r\n}\r\n\r\nfunction getInnerFigureClass (name: string): Nullable<FigureInnerConstructor> {\r\n  return figures[name] ?? null\r\n}\r\n\r\nfunction getFigureClass<A = unknown, S = unknown> (name: string): Nullable<FigureConstructor<A, S>> {\r\n  return figures[name] ?? null\r\n}\r\n\r\nexport { getSupportedFigures, getFigureClass, getInnerFigureClass, registerFigure }\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport type Nullable from '../common/Nullable'\r\nimport type { EventHandler, EventName, MouseTouchEvent } from '../common/EventHandler'\r\nimport Eventful from '../common/Eventful'\r\nimport { isValid } from '../common/utils/typeChecks'\r\n\r\nimport type Figure from '../component/Figure'\r\nimport type { Axis } from '../component/Axis'\r\nimport type { FigureCreate } from '../component/Figure'\r\n\r\nimport { getInnerFigureClass } from '../extension/figure/index'\r\n\r\nimport type DrawWidget from '../widget/DrawWidget'\r\nimport type DrawPane from '../pane/DrawPane'\r\n\r\nexport default abstract class View<C extends Axis = Axis> extends Eventful {\r\n  /**\r\n   * Parent widget\r\n   */\r\n  private readonly _widget: DrawWidget<DrawPane<C>>\r\n\r\n  constructor (widget: DrawWidget<DrawPane<C>>) {\r\n    super()\r\n    this._widget = widget\r\n  }\r\n\r\n  getWidget (): DrawWidget<DrawPane<C>> { return this._widget }\r\n\r\n  protected createFigure (create: FigureCreate, eventHandler?: EventHandler): Nullable<Figure> {\r\n    const FigureClazz = getInnerFigureClass(create.name)\r\n    if (FigureClazz !== null) {\r\n      const figure = new FigureClazz(create)\r\n      if (isValid(eventHandler)) {\r\n        for (const key in eventHandler) {\r\n          // eslint-disable-next-line no-prototype-builtins -- ignore\r\n          if (eventHandler.hasOwnProperty(key)) {\r\n            // eslint-disable-next-line @typescript-eslint/no-unsafe-argument -- ignore\r\n            figure.registerEvent(key as EventName, eventHandler[key])\r\n          }\r\n        }\r\n        this.addChild(figure)\r\n      }\r\n      return figure\r\n    }\r\n    return null\r\n  }\r\n\r\n  draw (ctx: CanvasRenderingContext2D, ...extend: unknown[]): void {\r\n    this.clear()\r\n    this.drawImp(ctx, extend)\r\n  }\r\n\r\n  checkEventOn (_: MouseTouchEvent): boolean {\r\n    return true\r\n  }\r\n\r\n  protected abstract drawImp (ctx: CanvasRenderingContext2D, ...extend: unknown[]): void\r\n}\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport type { LineAttrs } from '../extension/figure/line'\r\n\r\nimport View from './View'\r\n\r\nexport default class GridView extends View {\r\n  override drawImp (ctx: CanvasRenderingContext2D): void {\r\n    const widget = this.getWidget()\r\n    const pane = this.getWidget().getPane()\r\n    const chart = pane.getChart()\r\n    const bounding = widget.getBounding()\r\n\r\n    const styles = chart.getStyles().grid\r\n    const show = styles.show\r\n\r\n    if (show) {\r\n      ctx.save()\r\n      ctx.globalCompositeOperation = 'destination-over'\r\n      const horizontalStyles = styles.horizontal\r\n      const horizontalShow = horizontalStyles.show\r\n      if (horizontalShow) {\r\n        const yAxis = pane.getAxisComponent()\r\n        const attrs: LineAttrs[] = yAxis.getTicks().map(tick => ({\r\n          coordinates: [\r\n            { x: 0, y: tick.coord },\r\n            { x: bounding.width, y: tick.coord }\r\n          ]\r\n        }))\r\n        this.createFigure({\r\n          name: 'line',\r\n          attrs,\r\n          styles: horizontalStyles\r\n        })?.draw(ctx)\r\n      }\r\n      const verticalStyles = styles.vertical\r\n      const verticalShow = verticalStyles.show\r\n      if (verticalShow) {\r\n        const xAxis = chart.getXAxisPane().getAxisComponent()\r\n        const attrs: LineAttrs[] = xAxis.getTicks().map(tick => ({\r\n          coordinates: [\r\n            { x: tick.coord, y: 0 },\r\n            { x: tick.coord, y: bounding.height }\r\n          ]\r\n        }))\r\n        this.createFigure({\r\n          name: 'line',\r\n          attrs,\r\n          styles: verticalStyles\r\n        })?.draw(ctx)\r\n      }\r\n      ctx.restore()\r\n    }\r\n  }\r\n}\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport View from './View'\r\nimport type { VisibleRangeData } from '../common/Data'\r\nimport type BarSpace from '../common/BarSpace'\r\nimport type { YAxis } from '../component/YAxis'\r\n\r\nexport type EachChildCallback = (\r\n  data: VisibleRangeData,\r\n  barSpace: BarSpace,\r\n  index: number\r\n) => void\r\n\r\nexport default abstract class ChildrenView extends View<YAxis> {\r\n  protected eachChildren (childCallback: EachChildCallback): void {\r\n    const pane = this.getWidget().getPane()\r\n    const chartStore = pane.getChart().getChartStore()\r\n    const visibleRangeDataList = chartStore.getVisibleRangeDataList()\r\n    const barSpace = chartStore.getBarSpace()\r\n    const dataLength = visibleRangeDataList.length\r\n    let index = 0\r\n    while (index < dataLength) {\r\n      childCallback(visibleRangeDataList[index], barSpace, index)\r\n      ++index\r\n    }\r\n  }\r\n}\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport type Nullable from '../common/Nullable'\r\nimport type { VisibleRangeData } from '../common/Data'\r\nimport type BarSpace from '../common/BarSpace'\r\nimport { isValid } from '../common/utils/typeChecks'\r\nimport type { EventHandler } from '../common/EventHandler'\r\nimport type { CandleType, CandleBarColor, RectStyle } from '../common/Styles'\r\n\r\nimport type { FigureCreate } from '../component/Figure'\r\nimport type { RectAttrs } from '../extension/figure/rect'\r\n\r\nimport ChildrenView from './ChildrenView'\r\n\r\nimport { PaneIdConstants } from '../pane/types'\r\n\r\nexport interface CandleBarOptions {\r\n  type: Exclude<CandleType, 'area'>\r\n  styles: CandleBarColor\r\n}\r\n\r\nexport default class CandleBarView extends ChildrenView {\r\n  private readonly _boundCandleBarClickEvent = (data: VisibleRangeData) => () => {\r\n    this.getWidget().getPane().getChart().getChartStore().executeAction('onCandleBarClick', data)\r\n    return false\r\n  }\r\n\r\n  override drawImp (ctx: CanvasRenderingContext2D): void {\r\n    const pane = this.getWidget().getPane()\r\n    const isMain = pane.getId() === PaneIdConstants.CANDLE\r\n    const chartStore = pane.getChart().getChartStore()\r\n    const candleBarOptions = this.getCandleBarOptions()\r\n    if (candleBarOptions !== null) {\r\n      const { type, styles } = candleBarOptions\r\n      let ohlcSize = 0\r\n      let halfOhlcSize = 0\r\n      if (candleBarOptions.type === 'ohlc') {\r\n        const { gapBar } = chartStore.getBarSpace()\r\n        ohlcSize = Math.min(Math.max(Math.round(gapBar * 0.2), 1), 8)\r\n        if (ohlcSize > 2 && ohlcSize % 2 === 1) {\r\n          ohlcSize--\r\n        }\r\n        halfOhlcSize = Math.floor(ohlcSize / 2)\r\n      }\r\n      const yAxis = pane.getAxisComponent()\r\n      this.eachChildren((visibleData, barSpace) => {\r\n        const { x, data: { current, prev } } = visibleData\r\n        if (isValid(current)) {\r\n          const { open, high, low, close } = current\r\n          const comparePrice = styles.compareRule === 'current_open' ? open : (prev?.close ?? close)\r\n          const colors: string[] = []\r\n          if (close > comparePrice) {\r\n            colors[0] = styles.upColor\r\n            colors[1] = styles.upBorderColor\r\n            colors[2] = styles.upWickColor\r\n          } else if (close < comparePrice) {\r\n            colors[0] = styles.downColor\r\n            colors[1] = styles.downBorderColor\r\n            colors[2] = styles.downWickColor\r\n          } else {\r\n            colors[0] = styles.noChangeColor\r\n            colors[1] = styles.noChangeBorderColor\r\n            colors[2] = styles.noChangeWickColor\r\n          }\r\n          const openY = yAxis.convertToPixel(open)\r\n          const closeY = yAxis.convertToPixel(close)\r\n          const priceY = [\r\n            openY, closeY,\r\n            yAxis.convertToPixel(high),\r\n            yAxis.convertToPixel(low)\r\n          ]\r\n          priceY.sort((a, b) => a - b)\r\n\r\n          const correction = barSpace.gapBar % 2 === 0 ? 1 : 0\r\n          let rects: Array<FigureCreate<RectAttrs | RectAttrs[], Partial<RectStyle>>> = []\r\n          switch (type) {\r\n            case 'candle_solid': {\r\n              rects = this._createSolidBar(x, priceY, barSpace, colors, correction)\r\n              break\r\n            }\r\n            case 'candle_stroke': {\r\n              rects = this._createStrokeBar(x, priceY, barSpace, colors, correction)\r\n              break\r\n            }\r\n            case 'candle_up_stroke': {\r\n              if (close > open) {\r\n                rects = this._createStrokeBar(x, priceY, barSpace, colors, correction)\r\n              } else {\r\n                rects = this._createSolidBar(x, priceY, barSpace, colors, correction)\r\n              }\r\n              break\r\n            }\r\n            case 'candle_down_stroke': {\r\n              if (open > close) {\r\n                rects = this._createStrokeBar(x, priceY, barSpace, colors, correction)\r\n              } else {\r\n                rects = this._createSolidBar(x, priceY, barSpace, colors, correction)\r\n              }\r\n              break\r\n            }\r\n            case 'ohlc': {\r\n              rects = [\r\n                {\r\n                  name: 'rect',\r\n                  attrs: [\r\n                    {\r\n                      x: x - halfOhlcSize,\r\n                      y: priceY[0],\r\n                      width: ohlcSize,\r\n                      height: priceY[3] - priceY[0]\r\n                    },\r\n                    {\r\n                      x: x - barSpace.halfGapBar,\r\n                      y: openY + ohlcSize > priceY[3] ? priceY[3] - ohlcSize : openY,\r\n                      width: barSpace.halfGapBar - halfOhlcSize,\r\n                      height: ohlcSize\r\n                    },\r\n                    {\r\n                      x: x + halfOhlcSize,\r\n                      y: closeY + ohlcSize > priceY[3] ? priceY[3] - ohlcSize : closeY,\r\n                      width: barSpace.halfGapBar - halfOhlcSize,\r\n                      height: ohlcSize\r\n                    }\r\n                  ],\r\n                  styles: { color: colors[0] }\r\n                }\r\n              ]\r\n              break\r\n            }\r\n          }\r\n          rects.forEach(rect => {\r\n            let handler: Nullable<EventHandler> = null\r\n            if (isMain) {\r\n              handler = {\r\n                mouseClickEvent: this._boundCandleBarClickEvent(visibleData)\r\n              }\r\n            }\r\n            this.createFigure(rect, handler ?? undefined)?.draw(ctx)\r\n          })\r\n        }\r\n      })\r\n    }\r\n  }\r\n\r\n  protected getCandleBarOptions (): Nullable<CandleBarOptions> {\r\n    const candleStyles = this.getWidget().getPane().getChart().getStyles().candle\r\n    return {\r\n      type: candleStyles.type as Exclude<CandleType, 'area'>,\r\n      styles: candleStyles.bar\r\n    }\r\n  }\r\n\r\n  private _createSolidBar (x: number, priceY: number[], barSpace: BarSpace, colors: string[], correction: number): Array<FigureCreate<RectAttrs | RectAttrs[], Partial<RectStyle>>> {\r\n    return [\r\n      {\r\n        name: 'rect',\r\n        attrs: {\r\n          x,\r\n          y: priceY[0],\r\n          width: 1,\r\n          height: priceY[3] - priceY[0]\r\n        },\r\n        styles: { color: colors[2] }\r\n      },\r\n      {\r\n        name: 'rect',\r\n        attrs: {\r\n          x: x - barSpace.halfGapBar,\r\n          y: priceY[1],\r\n          width: barSpace.gapBar + correction,\r\n          height: Math.max(1, priceY[2] - priceY[1])\r\n        },\r\n        styles: {\r\n          style: 'stroke_fill',\r\n          color: colors[0],\r\n          borderColor: colors[1]\r\n        }\r\n      }\r\n    ]\r\n  }\r\n\r\n  private _createStrokeBar (x: number, priceY: number[], barSpace: BarSpace, colors: string[], correction: number): Array<FigureCreate<RectAttrs | RectAttrs[], Partial<RectStyle>>> {\r\n    return [\r\n      {\r\n        name: 'rect',\r\n        attrs: [\r\n          {\r\n            x,\r\n            y: priceY[0],\r\n            width: 1,\r\n            height: priceY[1] - priceY[0]\r\n          },\r\n          {\r\n            x,\r\n            y: priceY[2],\r\n            width: 1,\r\n            height: priceY[3] - priceY[2]\r\n          }\r\n        ],\r\n        styles: { color: colors[2] }\r\n      },\r\n      {\r\n        name: 'rect',\r\n        attrs: {\r\n          x: x - barSpace.halfGapBar,\r\n          y: priceY[1],\r\n          width: barSpace.gapBar + correction,\r\n          height: Math.max(1, priceY[2] - priceY[1])\r\n        },\r\n        styles: {\r\n          style: 'stroke',\r\n          borderColor: colors[1]\r\n        }\r\n      }\r\n    ]\r\n  }\r\n}\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport type Nullable from '../common/Nullable'\r\nimport type { CandleColorCompareRule, SmoothLineStyle } from '../common/Styles'\r\nimport { formatValue } from '../common/utils/format'\r\nimport { isNumber, isValid } from '../common/utils/typeChecks'\r\nimport type Coordinate from '../common/Coordinate'\r\n\r\nimport { eachFigures, type IndicatorFigure, type IndicatorFigureAttrs, type IndicatorFigureStyle } from '../component/Indicator'\r\n\r\nimport CandleBarView, { type CandleBarOptions } from './CandleBarView'\r\n\r\nexport default class IndicatorView extends CandleBarView {\r\n  override getCandleBarOptions (): Nullable<CandleBarOptions> {\r\n    const pane = this.getWidget().getPane()\r\n    const yAxis = pane.getAxisComponent()\r\n    if (!yAxis.isInCandle()) {\r\n      const chartStore = pane.getChart().getChartStore()\r\n      const indicators = chartStore.getIndicatorsByPaneId(pane.getId())\r\n      for (const indicator of indicators) {\r\n        if (indicator.shouldOhlc && indicator.visible) {\r\n          const indicatorStyles = indicator.styles\r\n          const defaultStyles = chartStore.getStyles().indicator\r\n          const compareRule = formatValue(indicatorStyles, 'ohlc.compareRule', defaultStyles.ohlc.compareRule) as CandleColorCompareRule\r\n          const upColor = formatValue(indicatorStyles, 'ohlc.upColor', defaultStyles.ohlc.upColor) as string\r\n          const downColor = formatValue(indicatorStyles, 'ohlc.downColor', defaultStyles.ohlc.downColor) as string\r\n          const noChangeColor = formatValue(indicatorStyles, 'ohlc.noChangeColor', defaultStyles.ohlc.noChangeColor) as string\r\n          return {\r\n            type: 'ohlc',\r\n            styles: {\r\n              compareRule,\r\n              upColor,\r\n              downColor,\r\n              noChangeColor,\r\n              upBorderColor: upColor,\r\n              downBorderColor: downColor,\r\n              noChangeBorderColor: noChangeColor,\r\n              upWickColor: upColor,\r\n              downWickColor: downColor,\r\n              noChangeWickColor: noChangeColor\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n    return null\r\n  }\r\n\r\n  override drawImp (ctx: CanvasRenderingContext2D): void {\r\n    super.drawImp(ctx)\r\n    const widget = this.getWidget()\r\n    const pane = widget.getPane()\r\n    const chart = pane.getChart()\r\n    const bounding = widget.getBounding()\r\n    const xAxis = chart.getXAxisPane().getAxisComponent()\r\n    const yAxis = pane.getAxisComponent()\r\n    const chartStore = chart.getChartStore()\r\n    const indicators = chartStore.getIndicatorsByPaneId(pane.getId())\r\n    const defaultStyles = chartStore.getStyles().indicator\r\n    ctx.save()\r\n    indicators.forEach(indicator => {\r\n      if (indicator.visible) {\r\n        if (indicator.zLevel < 0) {\r\n          ctx.globalCompositeOperation = 'destination-over'\r\n        } else {\r\n          ctx.globalCompositeOperation = 'source-over'\r\n        }\r\n        let isCover = false\r\n        if (indicator.draw !== null) {\r\n          ctx.save()\r\n          isCover = indicator.draw({\r\n            ctx,\r\n            chart,\r\n            indicator,\r\n            bounding,\r\n            xAxis,\r\n            yAxis\r\n          })\r\n          ctx.restore()\r\n        }\r\n        if (!isCover) {\r\n          const result = indicator.result\r\n          const lines: Array<Array<{ coordinates: Coordinate[], styles: Partial<SmoothLineStyle> }>> = []\r\n\r\n          this.eachChildren((data, barSpace) => {\r\n            const { halfGapBar } = barSpace\r\n            const { dataIndex, x, data: kLineNeighborData } = data\r\n            const prevX = xAxis.convertToPixel(dataIndex - 1)\r\n            const nextX = xAxis.convertToPixel(dataIndex + 1)\r\n            // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment -- ignore\r\n            const prevData: Record<string, unknown> = result[kLineNeighborData.prev?.timestamp ?? ''] ?? {}\r\n            // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment -- ignore\r\n            const currentData: Record<string, unknown> = result[kLineNeighborData.current?.timestamp ?? ''] ?? {}\r\n            // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment -- ignore\r\n            const nextData: Record<string, unknown> = result[kLineNeighborData.next?.timestamp ?? ''] ?? {}\r\n            const prevCoordinate = { x: prevX }\r\n            const currentCoordinate = { x }\r\n            const nextCoordinate = { x: nextX }\r\n            indicator.figures.forEach(({ key }) => {\r\n              const prevValue = prevData[key]\r\n              if (isNumber(prevValue)) {\r\n                prevCoordinate[key] = yAxis.convertToPixel(prevValue)\r\n              }\r\n              const currentValue = currentData[key]\r\n              if (isNumber(currentValue)) {\r\n                currentCoordinate[key] = yAxis.convertToPixel(currentValue)\r\n              }\r\n              const nextValue = nextData[key]\r\n              if (isNumber(nextValue)) {\r\n                nextCoordinate[key] = yAxis.convertToPixel(nextValue)\r\n              }\r\n            })\r\n            eachFigures(\r\n              indicator,\r\n              {\r\n                prev: kLineNeighborData.prev?.timestamp ?? null,\r\n                current: kLineNeighborData.current?.timestamp ?? null,\r\n                next: kLineNeighborData.next?.timestamp ?? null\r\n              },\r\n              defaultStyles,\r\n              (figure: IndicatorFigure, figureStyles: IndicatorFigureStyle, figureIndex: number) => {\r\n                if (isValid(currentData[figure.key])) {\r\n                // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment -- ignore\r\n                  const valueY = currentCoordinate[figure.key]\r\n                  let attrs = figure.attrs?.({\r\n                    data: { prev: prevData, current: currentData, next: nextData },\r\n                    coordinate: { prev: prevCoordinate, current: currentCoordinate, next: nextCoordinate },\r\n                    bounding,\r\n                    barSpace,\r\n                    xAxis,\r\n                    yAxis\r\n                  })\r\n                  if (!isValid<IndicatorFigureAttrs>(attrs)) {\r\n                    switch (figure.type) {\r\n                      case 'circle': {\r\n                      // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment -- ignore\r\n                        attrs = { x, y: valueY, r: Math.max(1, halfGapBar) }\r\n                        break\r\n                      }\r\n                      case 'rect':\r\n                      case 'bar': {\r\n                        const baseValue = figure.baseValue ?? yAxis.getRange().from\r\n                        const baseValueY = yAxis.convertToPixel(baseValue)\r\n                        let height = Math.abs(baseValueY - (valueY as number))\r\n                        if (baseValue !== currentData[figure.key]) {\r\n                          height = Math.max(1, height)\r\n                        }\r\n                        let y = 0\r\n                        if (valueY > baseValueY) {\r\n                          y = baseValueY\r\n                        } else {\r\n                        // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment -- ignore\r\n                          y = valueY\r\n                        }\r\n                        attrs = {\r\n                          x: x - halfGapBar,\r\n                          y,\r\n                          width: Math.max(1, halfGapBar * 2),\r\n                          height\r\n                        }\r\n                        break\r\n                      }\r\n                      case 'line': {\r\n                        if (!isValid(lines[figureIndex])) {\r\n                          lines[figureIndex] = []\r\n                        }\r\n                        if (isNumber(currentCoordinate[figure.key]) && isNumber(nextCoordinate[figure.key])) {\r\n                          lines[figureIndex].push({\r\n                            coordinates: [\r\n                            // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment -- ignore\r\n                              { x: currentCoordinate.x, y: currentCoordinate[figure.key] },\r\n                              // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment -- ignore\r\n                              { x: nextCoordinate.x, y: nextCoordinate[figure.key] }\r\n                            ],\r\n                            styles: figureStyles as unknown as SmoothLineStyle\r\n                          })\r\n                        }\r\n                        break\r\n                      }\r\n                      default: { break }\r\n                    }\r\n                  }\r\n                  const type = figure.type!\r\n                  if (isValid<IndicatorFigureAttrs>(attrs) && type !== 'line') {\r\n                    this.createFigure({\r\n                      name: type === 'bar' ? 'rect' : type,\r\n                      attrs,\r\n                      styles: figureStyles\r\n                    })?.draw(ctx)\r\n                  }\r\n                }\r\n              })\r\n          })\r\n\r\n          // merge line and render\r\n          lines.forEach(items => {\r\n            if (items.length > 1) {\r\n              const mergeLines = [\r\n                {\r\n                  coordinates: [items[0].coordinates[0], items[0].coordinates[1]],\r\n                  styles: items[0].styles\r\n                }\r\n              ]\r\n              for (let i = 1; i < items.length; i++) {\r\n                const lastMergeLine = mergeLines[mergeLines.length - 1]\r\n                const current = items[i]\r\n                const lastMergeLineLastCoordinate = lastMergeLine.coordinates[lastMergeLine.coordinates.length - 1]\r\n                if (\r\n                  lastMergeLineLastCoordinate.x === current.coordinates[0].x &&\r\n                  lastMergeLineLastCoordinate.y === current.coordinates[0].y &&\r\n                  lastMergeLine.styles.style === current.styles.style &&\r\n                  lastMergeLine.styles.color === current.styles.color &&\r\n                  lastMergeLine.styles.size === current.styles.size &&\r\n                  lastMergeLine.styles.smooth === current.styles.smooth &&\r\n                  lastMergeLine.styles.dashedValue?.[0] === current.styles.dashedValue?.[0] &&\r\n                  lastMergeLine.styles.dashedValue?.[1] === current.styles.dashedValue?.[1]\r\n                ) {\r\n                  lastMergeLine.coordinates.push(current.coordinates[1])\r\n                } else {\r\n                  mergeLines.push({\r\n                    coordinates: [current.coordinates[0], current.coordinates[1]],\r\n                    styles: current.styles\r\n                  })\r\n                }\r\n              }\r\n              mergeLines.forEach(({ coordinates, styles }) => {\r\n                this.createFigure({\r\n                  name: 'line',\r\n                  attrs: { coordinates },\r\n                  styles\r\n                })?.draw(ctx)\r\n              })\r\n            }\r\n          })\r\n        }\r\n      }\r\n    })\r\n    ctx.restore()\r\n  }\r\n}\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport type Coordinate from '../common/Coordinate'\r\nimport type { CrosshairDirectionStyle } from '../common/Styles'\r\nimport { isString } from '../common/utils/typeChecks'\r\n\r\nimport View from './View'\r\n\r\nexport default class CrosshairLineView extends View {\r\n  override drawImp (ctx: CanvasRenderingContext2D): void {\r\n    const widget = this.getWidget()\r\n    const pane = widget.getPane()\r\n    const bounding = widget.getBounding()\r\n    const chartStore = widget.getPane().getChart().getChartStore()\r\n    const crosshair = chartStore.getCrosshair()\r\n    const styles = chartStore.getStyles().crosshair\r\n    if (isString(crosshair.paneId) && styles.show) {\r\n      if (crosshair.paneId === pane.getId()) {\r\n        const y = crosshair.y!\r\n        this._drawLine(\r\n          ctx,\r\n          [\r\n            { x: 0, y },\r\n            { x: bounding.width, y }\r\n          ],\r\n          styles.horizontal\r\n        )\r\n      }\r\n      const x = crosshair.realX!\r\n      this._drawLine(\r\n        ctx,\r\n        [\r\n          { x, y: 0 },\r\n          { x, y: bounding.height }\r\n        ],\r\n        styles.vertical\r\n      )\r\n    }\r\n  }\r\n\r\n  private _drawLine (ctx: CanvasRenderingContext2D, coordinates: Coordinate[], styles: CrosshairDirectionStyle): void {\r\n    if (styles.show) {\r\n      const lineStyles = styles.line\r\n      if (lineStyles.show) {\r\n        this.createFigure({\r\n          name: 'line',\r\n          attrs: { coordinates },\r\n          styles: lineStyles\r\n        })?.draw(ctx)\r\n      }\r\n    }\r\n  }\r\n}\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport type Crosshair from '../common/Crosshair'\r\nimport type { TooltipStyle, TooltipTextStyle, TooltipLegend, TooltipLegendChild, TooltipFeatureStyle, FeatureIconFontStyle, FeaturePathStyle } from '../common/Styles'\r\nimport { formatPrecision } from '../common/utils/format'\r\nimport { isValid, isObject, isString, isNumber, isFunction } from '../common/utils/typeChecks'\r\nimport { createFont } from '../common/utils/canvas'\r\nimport type Coordinate from '../common/Coordinate'\r\nimport type Nullable from '../common/Nullable'\r\nimport type { ActionType } from '../common/Action'\r\n\r\nimport type { YAxis } from '../component/YAxis'\r\n\r\nimport type { Indicator, IndicatorFigure, IndicatorFigureStyle, IndicatorTooltipData } from '../component/Indicator'\r\nimport { eachFigures } from '../component/Indicator'\r\n\r\nimport type DrawPane from '../pane/DrawPane'\r\nimport type DrawWidget from '../widget/DrawWidget'\r\nimport View from './View'\r\n\r\ninterface TooltipFeatureInfo {\r\n  paneId: string\r\n  indicator?: Indicator\r\n  feature: TooltipFeatureStyle\r\n}\r\n\r\nexport default class IndicatorTooltipView extends View<YAxis> {\r\n  private _activeFeatureInfo: Nullable<TooltipFeatureInfo> = null\r\n\r\n  private readonly _featureClickEvent = (type: ActionType, featureInfo: TooltipFeatureInfo) => () => {\r\n    const pane = this.getWidget().getPane()\r\n    pane.getChart().getChartStore().executeAction(type, featureInfo)\r\n    return true\r\n  }\r\n\r\n  private readonly _featureMouseMoveEvent = (featureInfo: TooltipFeatureInfo) => () => {\r\n    this._activeFeatureInfo = featureInfo\r\n    return true\r\n  }\r\n\r\n  constructor (widget: DrawWidget<DrawPane<YAxis>>) {\r\n    super(widget)\r\n    this.registerEvent('mouseMoveEvent', _ => {\r\n      this._activeFeatureInfo = null\r\n      return false\r\n    })\r\n  }\r\n\r\n  override drawImp (ctx: CanvasRenderingContext2D): void {\r\n    const widget = this.getWidget()\r\n    const pane = widget.getPane()\r\n    const chartStore = pane.getChart().getChartStore()\r\n    const crosshair = chartStore.getCrosshair()\r\n    if (isValid(crosshair.kLineData)) {\r\n      const bounding = widget.getBounding()\r\n      const { offsetLeft, offsetTop, offsetRight } = chartStore.getStyles().indicator.tooltip\r\n      this.drawIndicatorTooltip(\r\n        ctx, offsetLeft, offsetTop,\r\n        bounding.width - offsetRight\r\n      )\r\n    }\r\n  }\r\n\r\n  protected drawIndicatorTooltip (\r\n    ctx: CanvasRenderingContext2D,\r\n    left: number,\r\n    top: number,\r\n    maxWidth: number\r\n  ): number {\r\n    const pane = this.getWidget().getPane()\r\n    const chartStore = pane.getChart().getChartStore()\r\n    const styles = chartStore.getStyles().indicator\r\n    const tooltipStyles = styles.tooltip\r\n    if (this.isDrawTooltip(chartStore.getCrosshair(), tooltipStyles)) {\r\n      const indicators = chartStore.getIndicatorsByPaneId(pane.getId())\r\n      const tooltipTitleStyles = tooltipStyles.title\r\n      const tooltipLegendStyles = tooltipStyles.legend\r\n      indicators.forEach(indicator => {\r\n        let prevRowHeight = 0\r\n        const coordinate = { x: left, y: top }\r\n        const { name, calcParamsText, legends, features: featuresStyles } = this.getIndicatorTooltipData(indicator)\r\n        const nameValid = name.length > 0\r\n        const legendValid = legends.length > 0\r\n        if (nameValid || legendValid) {\r\n          const features = this.classifyTooltipFeatures(featuresStyles)\r\n          prevRowHeight = this.drawStandardTooltipFeatures(\r\n            ctx, features[0],\r\n            coordinate, indicator,\r\n            left, prevRowHeight, maxWidth\r\n          )\r\n\r\n          if (nameValid) {\r\n            let text = name\r\n            if (calcParamsText.length > 0) {\r\n              text = `${text}${calcParamsText}`\r\n            }\r\n            const color = tooltipTitleStyles.color\r\n            prevRowHeight = this.drawStandardTooltipLegends(\r\n              ctx,\r\n              [\r\n                {\r\n                  title: { text: '', color },\r\n                  value: { text, color }\r\n                }\r\n              ],\r\n              coordinate, left, prevRowHeight, maxWidth, tooltipTitleStyles\r\n            )\r\n          }\r\n\r\n          prevRowHeight = this.drawStandardTooltipFeatures(\r\n            ctx, features[1],\r\n            coordinate, indicator,\r\n            left, prevRowHeight, maxWidth\r\n          )\r\n\r\n          if (legendValid) {\r\n            prevRowHeight = this.drawStandardTooltipLegends(\r\n              ctx, legends, coordinate,\r\n              left, prevRowHeight, maxWidth, tooltipLegendStyles\r\n            )\r\n          }\r\n\r\n          // draw right features\r\n          prevRowHeight = this.drawStandardTooltipFeatures(\r\n            ctx, features[2],\r\n            coordinate, indicator,\r\n            left, prevRowHeight, maxWidth\r\n          )\r\n          top = coordinate.y + prevRowHeight\r\n        }\r\n      })\r\n    }\r\n    return top\r\n  }\r\n\r\n  protected drawStandardTooltipFeatures (\r\n    ctx: CanvasRenderingContext2D,\r\n    features: TooltipFeatureStyle[],\r\n    coordinate: Coordinate,\r\n    indicator: Nullable<Indicator>,\r\n    left: number,\r\n    prevRowHeight: number,\r\n    maxWidth: number\r\n  ): number {\r\n    if (features.length > 0) {\r\n      let width = 0\r\n      let height = 0\r\n      features.forEach(feature => {\r\n        const {\r\n          marginLeft = 0, marginTop = 0, marginRight = 0, marginBottom = 0,\r\n          paddingLeft = 0, paddingTop = 0, paddingRight = 0, paddingBottom = 0,\r\n          size = 0, type, content\r\n        } = feature\r\n        let contentWidth = 0\r\n        if (type === 'icon_font') {\r\n          const iconFont = content as FeatureIconFontStyle\r\n          ctx.font = createFont(size, 'normal', iconFont.family)\r\n          contentWidth = ctx.measureText(iconFont.code).width\r\n        } else {\r\n          contentWidth = size\r\n        }\r\n        width += (marginLeft + paddingLeft + contentWidth + paddingRight + marginRight)\r\n        height = Math.max(height, marginTop + paddingTop + size + paddingBottom + marginBottom)\r\n      })\r\n      if (coordinate.x + width > maxWidth) {\r\n        coordinate.x = left\r\n        coordinate.y += prevRowHeight\r\n        prevRowHeight = height\r\n      } else {\r\n        prevRowHeight = Math.max(prevRowHeight, height)\r\n      }\r\n      const pane = this.getWidget().getPane()\r\n      const paneId = pane.getId()\r\n\r\n      features.forEach(feature => {\r\n        const {\r\n          marginLeft = 0, marginTop = 0, marginRight = 0,\r\n          paddingLeft = 0, paddingTop = 0, paddingRight = 0, paddingBottom = 0,\r\n          backgroundColor, activeBackgroundColor, borderRadius,\r\n          size = 0, color, activeColor, type, content\r\n        } = feature\r\n\r\n        let finalColor = color\r\n        let finalBackgroundColor = backgroundColor\r\n        if (\r\n          this._activeFeatureInfo?.paneId === paneId &&\r\n          this._activeFeatureInfo.indicator?.id === indicator?.id &&\r\n          this._activeFeatureInfo.feature.id === feature.id\r\n        ) {\r\n          // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition -- ignore\r\n          finalColor = activeColor ?? color\r\n          // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition -- ignore\r\n          finalBackgroundColor = activeBackgroundColor ?? backgroundColor\r\n        }\r\n        let actionType: ActionType = 'onCandleTooltipFeatureClick'\r\n        const featureInfo: TooltipFeatureInfo = {\r\n          paneId, feature\r\n        }\r\n        if (isValid(indicator)) {\r\n          actionType = 'onIndicatorTooltipFeatureClick'\r\n          featureInfo.indicator = indicator\r\n        }\r\n        const eventHandler = {\r\n          mouseClickEvent: this._featureClickEvent(actionType, featureInfo),\r\n          mouseMoveEvent: this._featureMouseMoveEvent(featureInfo)\r\n        }\r\n        let contentWidth = 0\r\n        if (type === 'icon_font') {\r\n          const iconFont = content as FeatureIconFontStyle\r\n          this.createFigure({\r\n            name: 'text',\r\n            attrs: { text: iconFont.code, x: coordinate.x + marginLeft, y: coordinate.y + marginTop },\r\n            styles: {\r\n              paddingLeft,\r\n              paddingTop,\r\n              paddingRight,\r\n              paddingBottom,\r\n              borderRadius,\r\n              size,\r\n              family: iconFont.family,\r\n              color: finalColor,\r\n              backgroundColor: finalBackgroundColor\r\n            }\r\n          }, eventHandler)?.draw(ctx)\r\n          contentWidth = ctx.measureText(iconFont.code).width\r\n        } else {\r\n          this.createFigure({\r\n            name: 'rect',\r\n            attrs: { x: coordinate.x + marginLeft, y: coordinate.y + marginTop, width: size, height: size },\r\n            styles: {\r\n              paddingLeft,\r\n              paddingTop,\r\n              paddingRight,\r\n              paddingBottom,\r\n              color: finalBackgroundColor\r\n            }\r\n          }, eventHandler)?.draw(ctx)\r\n          const path = content as FeaturePathStyle\r\n          this.createFigure({\r\n            name: 'path',\r\n            attrs: { path: path.path, x: coordinate.x + marginLeft + paddingLeft, y: coordinate.y + marginTop + paddingTop, width: size, height: size },\r\n            styles: {\r\n              style: path.style,\r\n              lineWidth: path.lineWidth,\r\n              color: finalColor\r\n            }\r\n          })?.draw(ctx)\r\n          contentWidth = size\r\n        }\r\n        coordinate.x += (marginLeft + paddingLeft + contentWidth + paddingRight + marginRight)\r\n      })\r\n    }\r\n    return prevRowHeight\r\n  }\r\n\r\n  protected drawStandardTooltipLegends (\r\n    ctx: CanvasRenderingContext2D,\r\n    legends: TooltipLegend[],\r\n    coordinate: Coordinate,\r\n    left: number,\r\n    prevRowHeight: number,\r\n    maxWidth: number,\r\n    styles: TooltipTextStyle\r\n  ): number {\r\n    if (legends.length > 0) {\r\n      const { marginLeft, marginTop, marginRight, marginBottom, size, family, weight } = styles\r\n      ctx.font = createFont(size, weight, family)\r\n      legends.forEach(data => {\r\n        const title = data.title as TooltipLegendChild\r\n        const value = data.value as TooltipLegendChild\r\n        const titleTextWidth = ctx.measureText(title.text).width\r\n        const valueTextWidth = ctx.measureText(value.text).width\r\n        const totalTextWidth = titleTextWidth + valueTextWidth\r\n        const h = marginTop + size + marginBottom\r\n        if (coordinate.x + marginLeft + totalTextWidth + marginRight > maxWidth) {\r\n          coordinate.x = left\r\n          coordinate.y += prevRowHeight\r\n          prevRowHeight = h\r\n        } else {\r\n          prevRowHeight = Math.max(prevRowHeight, h)\r\n        }\r\n        if (title.text.length > 0) {\r\n          this.createFigure({\r\n            name: 'text',\r\n            attrs: { x: coordinate.x + marginLeft, y: coordinate.y + marginTop, text: title.text },\r\n            styles: { color: title.color, size, family, weight }\r\n          })?.draw(ctx)\r\n        }\r\n        this.createFigure({\r\n          name: 'text',\r\n          attrs: { x: coordinate.x + marginLeft + titleTextWidth, y: coordinate.y + marginTop, text: value.text },\r\n          styles: { color: value.color, size, family, weight }\r\n        })?.draw(ctx)\r\n        coordinate.x += (marginLeft + totalTextWidth + marginRight)\r\n      })\r\n    }\r\n    return prevRowHeight\r\n  }\r\n\r\n  protected isDrawTooltip (crosshair: Crosshair, styles: TooltipStyle): boolean {\r\n    const showRule = styles.showRule\r\n    return showRule === 'always' ||\r\n      (showRule === 'follow_cross' && isString(crosshair.paneId))\r\n  }\r\n\r\n  protected getIndicatorTooltipData (indicator: Indicator): IndicatorTooltipData {\r\n    const chartStore = this.getWidget().getPane().getChart().getChartStore()\r\n    const styles = chartStore.getStyles().indicator\r\n    const tooltipStyles = styles.tooltip\r\n    const tooltipTitleStyles = tooltipStyles.title\r\n    let name = ''\r\n    let calcParamsText = ''\r\n    if (tooltipTitleStyles.show) {\r\n      if (tooltipTitleStyles.showName) {\r\n        name = indicator.shortName\r\n      }\r\n      if (tooltipTitleStyles.showParams) {\r\n        const calcParams = indicator.calcParams\r\n        if (calcParams.length > 0) {\r\n          calcParamsText = `(${calcParams.join(',')})`\r\n        }\r\n      }\r\n    }\r\n    const tooltipData: IndicatorTooltipData = { name, calcParamsText, legends: [], features: tooltipStyles.features }\r\n\r\n    const dataIndex = chartStore.getCrosshair().dataIndex!\r\n    const result = indicator.result\r\n\r\n    const formatter = chartStore.getInnerFormatter()\r\n    const decimalFold = chartStore.getDecimalFold()\r\n    const thousandsSeparator = chartStore.getThousandsSeparator()\r\n    const legends: TooltipLegend[] = []\r\n    if (indicator.visible) {\r\n      const kLineDataList = chartStore.getDataList()\r\n      const kLineData = kLineDataList[dataIndex] ?? {}\r\n      const prevKLineData = kLineDataList[dataIndex - 1] ?? {}\r\n      let data = result[kLineData.timestamp]\r\n      if (!isValid(data) && dataIndex === kLineDataList.length - 1) {\r\n        data = result[prevKLineData.timestamp]\r\n      }\r\n      const defaultValue = tooltipStyles.legend.defaultValue\r\n      eachFigures(\r\n        indicator,\r\n        {\r\n          prev: prevKLineData.timestamp,\r\n          current: kLineData.timestamp,\r\n          next: kLineDataList[dataIndex]?.timestamp\r\n        },\r\n        styles,\r\n        (figure: IndicatorFigure, figureStyles: Required<IndicatorFigureStyle>) => {\r\n          if (isString(figure.title)) {\r\n            const color = figureStyles.color\r\n            // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment -- ignore\r\n            let value = data?.[figure.key]\r\n            if (isNumber(value)) {\r\n              value = formatPrecision(value, indicator.precision)\r\n              if (indicator.shouldFormatBigNumber) {\r\n                value = formatter.formatBigNumber(value as string)\r\n              }\r\n              value = decimalFold.format(thousandsSeparator.format(value as string))\r\n            }\r\n            legends.push({ title: { text: figure.title, color }, value: { text: (value ?? defaultValue) as string, color } })\r\n          }\r\n        })\r\n      tooltipData.legends = legends\r\n    }\r\n\r\n    if (isFunction(indicator.createTooltipDataSource)) {\r\n      const widget = this.getWidget()\r\n      const pane = widget.getPane()\r\n      const chart = pane.getChart()\r\n      const { name: customName, calcParamsText: customCalcParamsText, legends: customLegends, features: customFeatures } = indicator.createTooltipDataSource({\r\n        chart,\r\n        indicator,\r\n        crosshair: chartStore.getCrosshair(),\r\n        bounding: widget.getBounding(),\r\n        xAxis: pane.getChart().getXAxisPane().getAxisComponent(),\r\n        yAxis: pane.getAxisComponent()\r\n      })\r\n      if (tooltipTitleStyles.show) {\r\n        if (isString(customName) && tooltipTitleStyles.showName) {\r\n          tooltipData.name = customName\r\n        }\r\n        if (isString(customCalcParamsText) && tooltipTitleStyles.showParams) {\r\n          tooltipData.calcParamsText = customCalcParamsText\r\n        }\r\n      }\r\n\r\n      if (isValid(customFeatures)) {\r\n        tooltipData.features = customFeatures\r\n      }\r\n      if (isValid(customLegends) && indicator.visible) {\r\n        const optimizedLegends: TooltipLegend[] = []\r\n        const color = styles.tooltip.legend.color\r\n        customLegends.forEach(data => {\r\n          let title = { text: '', color }\r\n          if (isObject(data.title)) {\r\n            title = data.title\r\n          } else {\r\n            title.text = data.title\r\n          }\r\n          let value = { text: '', color }\r\n          if (isObject(data.value)) {\r\n            value = data.value\r\n          } else {\r\n            value.text = data.value\r\n          }\r\n          if (isNumber(Number(value.text))) {\r\n            value.text = decimalFold.format(thousandsSeparator.format(value.text))\r\n          }\r\n          optimizedLegends.push({ title, value })\r\n        })\r\n        tooltipData.legends = optimizedLegends\r\n      }\r\n    }\r\n    return tooltipData\r\n  }\r\n\r\n  protected classifyTooltipFeatures (features: TooltipFeatureStyle[]): TooltipFeatureStyle[][] {\r\n    const leftFeatures: TooltipFeatureStyle[] = []\r\n    const middleFeatures: TooltipFeatureStyle[] = []\r\n    const rightFeatures: TooltipFeatureStyle[] = []\r\n    features.forEach(feature => {\r\n      switch (feature.position) {\r\n        case 'left': {\r\n          leftFeatures.push(feature)\r\n          break\r\n        }\r\n        case 'middle': {\r\n          middleFeatures.push(feature)\r\n          break\r\n        }\r\n        case 'right': {\r\n          rightFeatures.push(feature)\r\n          break\r\n        }\r\n      }\r\n    })\r\n    return [leftFeatures, middleFeatures, rightFeatures]\r\n  }\r\n}\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport type Nullable from '../common/Nullable'\r\nimport type Coordinate from '../common/Coordinate'\r\nimport type Point from '../common/Point'\r\nimport type { EventHandler, EventName, MouseTouchEvent, MouseTouchEventCallback } from '../common/EventHandler'\r\nimport { isFunction, isNumber, isValid } from '../common/utils/typeChecks'\r\n\r\nimport type { Axis } from '../component/Axis'\r\nimport type { YAxis } from '../component/YAxis'\r\nimport type { OverlayFigure, Overlay } from '../component/Overlay'\r\nimport type OverlayImp from '../component/Overlay'\r\nimport { checkOverlayFigureEvent, OVERLAY_FIGURE_KEY_PREFIX } from '../component/Overlay'\r\n\r\nimport type { EventOverlayInfoFigureType } from '../Store'\r\n\r\nimport { PaneIdConstants } from '../pane/types'\r\n\r\nimport type DrawWidget from '../widget/DrawWidget'\r\nimport type DrawPane from '../pane/DrawPane'\r\n\r\nimport View from './View'\r\n\r\nexport default class OverlayView<C extends Axis = YAxis> extends View<C> {\r\n  constructor (widget: DrawWidget<DrawPane<C>>) {\r\n    super(widget)\r\n    this._initEvent()\r\n  }\r\n\r\n  private _initEvent (): void {\r\n    const widget = this.getWidget()\r\n    const pane = widget.getPane()\r\n    const paneId = pane.getId()\r\n    const chart = pane.getChart()\r\n    const chartStore = chart.getChartStore()\r\n    this.registerEvent('mouseMoveEvent', event => {\r\n      const progressOverlayInfo = chartStore.getProgressOverlayInfo()\r\n      if (progressOverlayInfo !== null) {\r\n        const overlay = progressOverlayInfo.overlay\r\n        let progressOverlayPaneId = progressOverlayInfo.paneId\r\n        if (overlay.isStart()) {\r\n          chartStore.updateProgressOverlayInfo(paneId)\r\n          progressOverlayPaneId = paneId\r\n        }\r\n        const index = overlay.points.length - 1\r\n        if (overlay.isDrawing() && progressOverlayPaneId === paneId) {\r\n          overlay.eventMoveForDrawing(this._coordinateToPoint(overlay, event))\r\n          overlay.onDrawing?.({ chart, overlay, ...event })\r\n        }\r\n        return this._figureMouseMoveEvent(\r\n          overlay,\r\n          'point',\r\n          index,\r\n          { key: `${OVERLAY_FIGURE_KEY_PREFIX}point_${index}`, type: 'circle', attrs: {} }\r\n        )(event)\r\n      }\r\n      chartStore.setHoverOverlayInfo(\r\n        {\r\n          paneId,\r\n          overlay: null,\r\n          figureType: 'none',\r\n          figureIndex: -1,\r\n          figure: null\r\n        },\r\n        (o, f) => this._processOverlayMouseEnterEvent(o, f, event),\r\n        (o, f) => this._processOverlayMouseLeaveEvent(o, f, event)\r\n      )\r\n      widget.setForceCursor(null)\r\n      return false\r\n    }).registerEvent('mouseClickEvent', event => {\r\n      const progressOverlayInfo = chartStore.getProgressOverlayInfo()\r\n      if (progressOverlayInfo !== null) {\r\n        const overlay = progressOverlayInfo.overlay\r\n        let progressOverlayPaneId = progressOverlayInfo.paneId\r\n        if (overlay.isStart()) {\r\n          chartStore.updateProgressOverlayInfo(paneId, true)\r\n          progressOverlayPaneId = paneId\r\n        }\r\n        const index = overlay.points.length - 1\r\n        if (overlay.isDrawing() && progressOverlayPaneId === paneId) {\r\n          overlay.eventMoveForDrawing(this._coordinateToPoint(overlay, event))\r\n          overlay.onDrawing?.({ chart, overlay, ...event })\r\n          overlay.nextStep()\r\n          if (!overlay.isDrawing()) {\r\n            chartStore.progressOverlayComplete()\r\n            overlay.onDrawEnd?.({ chart, overlay, ...event })\r\n          }\r\n        }\r\n        return this._figureMouseClickEvent(\r\n          overlay,\r\n          'point',\r\n          index,\r\n          {\r\n            key: `${OVERLAY_FIGURE_KEY_PREFIX}point_${index}`,\r\n            type: 'circle',\r\n            attrs: {}\r\n          }\r\n        )(event)\r\n      }\r\n      chartStore.setClickOverlayInfo(\r\n        {\r\n          paneId,\r\n          overlay: null,\r\n          figureType: 'none',\r\n          figureIndex: -1,\r\n          figure: null\r\n        },\r\n        (o, f) => this._processOverlaySelectedEvent(o, f, event),\r\n        (o, f) => this._processOverlayDeselectedEvent(o, f, event)\r\n      )\r\n      return false\r\n    }).registerEvent('mouseDoubleClickEvent', event => {\r\n      const progressOverlayInfo = chartStore.getProgressOverlayInfo()\r\n      if (progressOverlayInfo !== null) {\r\n        const overlay = progressOverlayInfo.overlay\r\n        const progressOverlayPaneId = progressOverlayInfo.paneId\r\n        if (overlay.isDrawing() && progressOverlayPaneId === paneId) {\r\n          overlay.forceComplete()\r\n          if (!overlay.isDrawing()) {\r\n            chartStore.progressOverlayComplete()\r\n            overlay.onDrawEnd?.({ chart, overlay, ...event })\r\n          }\r\n        }\r\n        const index = overlay.points.length - 1\r\n        return this._figureMouseClickEvent(\r\n          overlay,\r\n          'point',\r\n          index,\r\n          {\r\n            key: `${OVERLAY_FIGURE_KEY_PREFIX}point_${index}`,\r\n            type: 'circle',\r\n            attrs: {}\r\n          }\r\n        )(event)\r\n      }\r\n      return false\r\n    }).registerEvent('mouseRightClickEvent', event => {\r\n      const progressOverlayInfo = chartStore.getProgressOverlayInfo()\r\n      if (progressOverlayInfo !== null) {\r\n        const overlay = progressOverlayInfo.overlay\r\n        if (overlay.isDrawing()) {\r\n          const index = overlay.points.length - 1\r\n          return this._figureMouseRightClickEvent(\r\n            overlay,\r\n            'point',\r\n            index,\r\n            {\r\n              key: `${OVERLAY_FIGURE_KEY_PREFIX}point_${index}`,\r\n              type: 'circle',\r\n              attrs: {}\r\n            }\r\n          )(event)\r\n        }\r\n      }\r\n      return false\r\n    }).registerEvent('mouseUpEvent', event => {\r\n      const { overlay, figure } = chartStore.getPressedOverlayInfo()\r\n      if (overlay !== null) {\r\n        if (checkOverlayFigureEvent('onPressedMoveEnd', figure)) {\r\n          overlay.onPressedMoveEnd?.({ chart, overlay, figure: figure ?? undefined, ...event })\r\n        }\r\n      }\r\n      chartStore.setPressedOverlayInfo({\r\n        paneId,\r\n        overlay: null,\r\n        figureType: 'none',\r\n        figureIndex: -1,\r\n        figure: null\r\n      })\r\n      return false\r\n    }).registerEvent('pressedMouseMoveEvent', event => {\r\n      const { overlay, figureType, figureIndex, figure } = chartStore.getPressedOverlayInfo()\r\n      if (overlay !== null) {\r\n        if (checkOverlayFigureEvent('onPressedMoving', figure)) {\r\n          if (!overlay.lock) {\r\n            const point = this._coordinateToPoint(overlay, event)\r\n            if (figureType === 'point') {\r\n              overlay.eventPressedPointMove(point, figureIndex)\r\n            } else {\r\n              overlay.eventPressedOtherMove(point, this.getWidget().getPane().getChart().getChartStore())\r\n            }\r\n            let prevented = false\r\n            overlay.onPressedMoving?.({ chart, overlay, figure: figure ?? undefined, ...event, preventDefault: () => { prevented = true } })\r\n            // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition -- ignore\r\n            if (prevented) {\r\n              this.getWidget().setForceCursor(null)\r\n            } else {\r\n              this.getWidget().setForceCursor('pointer')\r\n            }\r\n          }\r\n          return true\r\n        }\r\n      }\r\n      this.getWidget().setForceCursor(null)\r\n      return false\r\n    })\r\n  }\r\n\r\n  private _createFigureEvents (\r\n    overlay: OverlayImp,\r\n    figureType: EventOverlayInfoFigureType,\r\n    figureIndex: number,\r\n    figure: OverlayFigure\r\n  ): Nullable<EventHandler> {\r\n    if (overlay.isDrawing()) {\r\n      return null\r\n    }\r\n    return {\r\n      mouseMoveEvent: this._figureMouseMoveEvent(overlay, figureType, figureIndex, figure),\r\n      mouseDownEvent: this._figureMouseDownEvent(overlay, figureType, figureIndex, figure),\r\n      mouseClickEvent: this._figureMouseClickEvent(overlay, figureType, figureIndex, figure),\r\n      mouseRightClickEvent: this._figureMouseRightClickEvent(overlay, figureType, figureIndex, figure),\r\n      mouseDoubleClickEvent: this._figureMouseDoubleClickEvent(overlay, figureType, figureIndex, figure)\r\n    }\r\n  }\r\n\r\n  private _processOverlayMouseEnterEvent (overlay: OverlayImp, figure: Nullable<OverlayFigure>, event: MouseTouchEvent): boolean {\r\n    if (isFunction(overlay.onMouseEnter) && checkOverlayFigureEvent('onMouseEnter', figure)) {\r\n      overlay.onMouseEnter({ chart: this.getWidget().getPane().getChart(), overlay, figure: figure ?? undefined, ...event })\r\n      return true\r\n    }\r\n    return false\r\n  }\r\n\r\n  private _processOverlayMouseLeaveEvent (overlay: OverlayImp, figure: Nullable<OverlayFigure>, event: MouseTouchEvent): boolean {\r\n    if (isFunction(overlay.onMouseLeave) && checkOverlayFigureEvent('onMouseLeave', figure)) {\r\n      overlay.onMouseLeave({ chart: this.getWidget().getPane().getChart(), overlay, figure: figure ?? undefined, ...event })\r\n      return true\r\n    }\r\n    return false\r\n  }\r\n\r\n  private _processOverlaySelectedEvent (overlay: OverlayImp, figure: Nullable<OverlayFigure>, event: MouseTouchEvent): boolean {\r\n    if (checkOverlayFigureEvent('onSelected', figure)) {\r\n      overlay.onSelected?.({ chart: this.getWidget().getPane().getChart(), overlay, figure: figure ?? undefined, ...event })\r\n      return true\r\n    }\r\n    return false\r\n  }\r\n\r\n  private _processOverlayDeselectedEvent (overlay: OverlayImp, figure: Nullable<OverlayFigure>, event: MouseTouchEvent): boolean {\r\n    if (checkOverlayFigureEvent('onDeselected', figure)) {\r\n      overlay.onDeselected?.({ chart: this.getWidget().getPane().getChart(), overlay, figure: figure ?? undefined, ...event })\r\n      return true\r\n    }\r\n    return false\r\n  }\r\n\r\n  private _figureMouseMoveEvent (overlay: OverlayImp, figureType: EventOverlayInfoFigureType, figureIndex: number, figure: OverlayFigure): MouseTouchEventCallback {\r\n    return (event: MouseTouchEvent) => {\r\n      const pane = this.getWidget().getPane()\r\n      const check = !overlay.isDrawing() && checkOverlayFigureEvent('onMouseMove', figure)\r\n      if (check) {\r\n        let prevented = false\r\n        overlay.onMouseMove?.({ chart: pane.getChart(), overlay, figure, ...event, preventDefault: () => { prevented = true } })\r\n        // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition -- ignore\r\n        if (prevented) {\r\n          this.getWidget().setForceCursor(null)\r\n        } else {\r\n          this.getWidget().setForceCursor('pointer')\r\n        }\r\n      }\r\n\r\n      pane.getChart().getChartStore().setHoverOverlayInfo(\r\n        { paneId: pane.getId(), overlay, figureType, figure, figureIndex },\r\n        (o, f) => this._processOverlayMouseEnterEvent(o, f, event),\r\n        (o, f) => this._processOverlayMouseLeaveEvent(o, f, event)\r\n      )\r\n      return check\r\n    }\r\n  }\r\n\r\n  private _figureMouseDownEvent (overlay: OverlayImp, figureType: EventOverlayInfoFigureType, figureIndex: number, figure: OverlayFigure): MouseTouchEventCallback {\r\n    return (event: MouseTouchEvent) => {\r\n      const pane = this.getWidget().getPane()\r\n      const paneId = pane.getId()\r\n      overlay.startPressedMove(this._coordinateToPoint(overlay, event))\r\n      if (checkOverlayFigureEvent('onPressedMoveStart', figure)) {\r\n        overlay.onPressedMoveStart?.({ chart: pane.getChart(), overlay, figure, ...event })\r\n        pane.getChart().getChartStore().setPressedOverlayInfo({ paneId, overlay, figureType, figureIndex, figure })\r\n        return !overlay.isDrawing()\r\n      }\r\n      return false\r\n    }\r\n  }\r\n\r\n  private _figureMouseClickEvent (overlay: OverlayImp, figureType: EventOverlayInfoFigureType, figureIndex: number, figure: OverlayFigure): MouseTouchEventCallback {\r\n    return (event: MouseTouchEvent) => {\r\n      const pane = this.getWidget().getPane()\r\n      const paneId = pane.getId()\r\n      const check = !overlay.isDrawing() && checkOverlayFigureEvent('onClick', figure)\r\n      if (check) {\r\n        overlay.onClick?.({ chart: this.getWidget().getPane().getChart(), overlay, figure, ...event })\r\n      }\r\n      pane.getChart().getChartStore().setClickOverlayInfo(\r\n        { paneId, overlay, figureType, figureIndex, figure },\r\n        (o, f) => this._processOverlaySelectedEvent(o, f, event),\r\n        (o, f) => this._processOverlayDeselectedEvent(o, f, event)\r\n      )\r\n      return check\r\n    }\r\n  }\r\n\r\n  private _figureMouseDoubleClickEvent (overlay: OverlayImp, _figureType: EventOverlayInfoFigureType, _figureIndex: number, figure: OverlayFigure): MouseTouchEventCallback {\r\n    return (event: MouseTouchEvent) => {\r\n      if (checkOverlayFigureEvent('onDoubleClick', figure)) {\r\n        overlay.onDoubleClick?.({ ...event, chart: this.getWidget().getPane().getChart(), figure, overlay })\r\n        return !overlay.isDrawing()\r\n      }\r\n      return false\r\n    }\r\n  }\r\n\r\n  private _figureMouseRightClickEvent (overlay: OverlayImp, _figureType: EventOverlayInfoFigureType, _figureIndex: number, figure: OverlayFigure): MouseTouchEventCallback {\r\n    return (event: MouseTouchEvent) => {\r\n      if (checkOverlayFigureEvent('onRightClick', figure)) {\r\n        let prevented = false\r\n        overlay.onRightClick?.({ chart: this.getWidget().getPane().getChart(), overlay, figure, ...event, preventDefault: () => { prevented = true } })\r\n        // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition -- ignore\r\n        if (!prevented) {\r\n          this.getWidget().getPane().getChart().getChartStore().removeOverlay(overlay)\r\n        }\r\n        return !overlay.isDrawing()\r\n      }\r\n      return false\r\n    }\r\n  }\r\n\r\n  private _coordinateToPoint (o: Overlay, coordinate: Coordinate): Partial<Point> {\r\n    const point: Partial<Point> = {}\r\n    const pane = this.getWidget().getPane()\r\n    const chart = pane.getChart()\r\n    const paneId = pane.getId()\r\n    const chartStore = chart.getChartStore()\r\n    if (this.coordinateToPointTimestampDataIndexFlag()) {\r\n      const xAxis = chart.getXAxisPane().getAxisComponent()\r\n      const dataIndex = xAxis.convertFromPixel(coordinate.x)\r\n      const timestamp = chartStore.dataIndexToTimestamp(dataIndex) ?? undefined\r\n      point.timestamp = timestamp\r\n      point.dataIndex = dataIndex\r\n    }\r\n    if (this.coordinateToPointValueFlag()) {\r\n      const yAxis = pane.getAxisComponent()\r\n      let value = yAxis.convertFromPixel(coordinate.y)\r\n      if (o.mode !== 'normal' && paneId === PaneIdConstants.CANDLE && isNumber(point.dataIndex)) {\r\n        const kLineData = chartStore.getDataByDataIndex(point.dataIndex)\r\n        if (kLineData !== null) {\r\n          const modeSensitivity = o.modeSensitivity\r\n          if (value > kLineData.high) {\r\n            if (o.mode === 'weak_magnet') {\r\n              const highY = yAxis.convertToPixel(kLineData.high)\r\n              const buffValue = yAxis.convertFromPixel(highY - modeSensitivity)\r\n              if (value < buffValue) {\r\n                value = kLineData.high\r\n              }\r\n            } else {\r\n              value = kLineData.high\r\n            }\r\n          } else if (value < kLineData.low) {\r\n            if (o.mode === 'weak_magnet') {\r\n              const lowY = yAxis.convertToPixel(kLineData.low)\r\n              const buffValue = yAxis.convertFromPixel(lowY - modeSensitivity)\r\n              if (value > buffValue) {\r\n                value = kLineData.low\r\n              }\r\n            } else {\r\n              value = kLineData.low\r\n            }\r\n          } else {\r\n            const max = Math.max(kLineData.open, kLineData.close)\r\n            const min = Math.min(kLineData.open, kLineData.close)\r\n            if (value > max) {\r\n              if (value - max < kLineData.high - value) {\r\n                value = max\r\n              } else {\r\n                value = kLineData.high\r\n              }\r\n            } else if (value < min) {\r\n              if (value - kLineData.low < min - value) {\r\n                value = kLineData.low\r\n              } else {\r\n                value = min\r\n              }\r\n            } else if (max - value < value - min) {\r\n              value = max\r\n            } else {\r\n              value = min\r\n            }\r\n          }\r\n        }\r\n      }\r\n      point.value = value\r\n    }\r\n    return point\r\n  }\r\n\r\n  protected coordinateToPointValueFlag (): boolean {\r\n    return true\r\n  }\r\n\r\n  protected coordinateToPointTimestampDataIndexFlag (): boolean {\r\n    return true\r\n  }\r\n\r\n  override dispatchEvent (name: EventName, event: MouseTouchEvent): boolean {\r\n    if (this.getWidget().getPane().getChart().getChartStore().isOverlayDrawing()) {\r\n      return this.onEvent(name, event)\r\n    }\r\n    return super.dispatchEvent(name, event)\r\n  }\r\n\r\n  override drawImp (ctx: CanvasRenderingContext2D): void {\r\n    const overlays = this.getCompleteOverlays()\r\n    overlays.forEach(overlay => {\r\n      if (overlay.visible) {\r\n        this._drawOverlay(ctx, overlay)\r\n      }\r\n    })\r\n    const progressOverlay = this.getProgressOverlay()\r\n    if (isValid(progressOverlay) && progressOverlay.visible) {\r\n      this._drawOverlay(ctx, progressOverlay)\r\n    }\r\n  }\r\n\r\n  private _drawOverlay (\r\n    ctx: CanvasRenderingContext2D,\r\n    overlay: OverlayImp\r\n  ): void {\r\n    const { points } = overlay\r\n    const pane = this.getWidget().getPane()\r\n    const chart = pane.getChart()\r\n    const chartStore = chart.getChartStore()\r\n    const yAxis = pane.getAxisComponent() as unknown as Nullable<YAxis>\r\n    const xAxis = chart.getXAxisPane().getAxisComponent()\r\n    const coordinates = points.map(point => {\r\n      let dataIndex: Nullable<number> = null\r\n      if (isNumber(point.timestamp)) {\r\n        dataIndex = chartStore.timestampToDataIndex(point.timestamp)\r\n      }\r\n      const coordinate = { x: 0, y: 0 }\r\n      if (isNumber(dataIndex)) {\r\n        coordinate.x = xAxis.convertToPixel(dataIndex)\r\n      }\r\n      if (isNumber(point.value)) {\r\n        coordinate.y = yAxis?.convertToPixel(point.value) ?? 0\r\n      }\r\n      return coordinate\r\n    })\r\n    if (coordinates.length > 0) {\r\n      // eslint-disable-next-line @typescript-eslint/ban-ts-comment -- ignore\r\n      // @ts-expect-error\r\n      const figures = [].concat(this.getFigures(overlay, coordinates))\r\n      this.drawFigures(\r\n        ctx,\r\n        overlay,\r\n        figures\r\n      )\r\n    }\r\n    this.drawDefaultFigures(\r\n      ctx,\r\n      overlay,\r\n      coordinates\r\n    )\r\n  }\r\n\r\n  protected drawFigures (ctx: CanvasRenderingContext2D, overlay: OverlayImp, figures: OverlayFigure[]): void {\r\n    const defaultStyles = this.getWidget().getPane().getChart().getStyles().overlay\r\n    figures.forEach((figure, figureIndex) => {\r\n      const { type, styles, attrs } = figure\r\n      // eslint-disable-next-line @typescript-eslint/ban-ts-comment -- ignore\r\n      // @ts-expect-error\r\n      const attrsArray = [].concat(attrs)\r\n      attrsArray.forEach((ats) => {\r\n        const events = this._createFigureEvents(overlay, 'other', figureIndex, figure)\r\n        // eslint-disable-next-line @typescript-eslint/ban-ts-comment -- ignore\r\n        // @ts-expect-error\r\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment -- ignore\r\n        const ss = { ...defaultStyles[type], ...overlay.styles?.[type], ...styles }\r\n        this.createFigure({\r\n          name: type, attrs: ats, styles: ss\r\n        }, events ?? undefined)?.draw(ctx)\r\n      })\r\n    })\r\n  }\r\n\r\n  protected getCompleteOverlays (): OverlayImp[] {\r\n    const pane = this.getWidget().getPane()\r\n    return pane.getChart().getChartStore().getOverlaysByPaneId(pane.getId())\r\n  }\r\n\r\n  protected getProgressOverlay (): Nullable<OverlayImp> {\r\n    const pane = this.getWidget().getPane()\r\n    const info = pane.getChart().getChartStore().getProgressOverlayInfo()\r\n    if (isValid(info) && info.paneId === pane.getId()) {\r\n      return info.overlay\r\n    }\r\n    return null\r\n  }\r\n\r\n  protected getFigures (\r\n    o: Overlay,\r\n    coordinates: Coordinate[]\r\n  ): OverlayFigure | OverlayFigure[] {\r\n    const widget = this.getWidget()\r\n    const pane = widget.getPane()\r\n    const chart = pane.getChart()\r\n    const yAxis = pane.getAxisComponent() as unknown as Nullable<YAxis>\r\n    const xAxis = chart.getXAxisPane().getAxisComponent()\r\n    const bounding = widget.getBounding()\r\n    return o.createPointFigures?.({ chart, overlay: o, coordinates, bounding, xAxis, yAxis }) ?? []\r\n  }\r\n\r\n  protected drawDefaultFigures (\r\n    ctx: CanvasRenderingContext2D,\r\n    overlay: OverlayImp,\r\n    coordinates: Coordinate[]\r\n  ): void {\r\n    if (overlay.needDefaultPointFigure) {\r\n      const chartStore = this.getWidget().getPane().getChart().getChartStore()\r\n      const hoverOverlayInfo = chartStore.getHoverOverlayInfo()\r\n      const clickOverlayInfo = chartStore.getClickOverlayInfo()\r\n      if (\r\n        (hoverOverlayInfo.overlay?.id === overlay.id && hoverOverlayInfo.figureType !== 'none') ||\r\n        (clickOverlayInfo.overlay?.id === overlay.id && clickOverlayInfo.figureType !== 'none')\r\n      ) {\r\n        const defaultStyles = chartStore.getStyles().overlay\r\n        const styles = overlay.styles\r\n        const pointStyles = { ...defaultStyles.point, ...styles?.point }\r\n        coordinates.forEach(({ x, y }, index) => {\r\n          let radius = pointStyles.radius\r\n          let color = pointStyles.color\r\n          let borderColor = pointStyles.borderColor\r\n          let borderSize = pointStyles.borderSize\r\n          if (\r\n            hoverOverlayInfo.overlay?.id === overlay.id &&\r\n            hoverOverlayInfo.figureType === 'point' &&\r\n            hoverOverlayInfo.figure?.key === `${OVERLAY_FIGURE_KEY_PREFIX}point_${index}`\r\n          ) {\r\n            radius = pointStyles.activeRadius\r\n            color = pointStyles.activeColor\r\n            borderColor = pointStyles.activeBorderColor\r\n            borderSize = pointStyles.activeBorderSize\r\n          }\r\n\r\n          this.createFigure(\r\n            {\r\n              name: 'circle',\r\n              attrs: { x, y, r: radius + borderSize },\r\n              styles: { color: borderColor }\r\n            },\r\n            this._createFigureEvents(\r\n              overlay,\r\n              'point',\r\n              index,\r\n              {\r\n                key: `${OVERLAY_FIGURE_KEY_PREFIX}point_${index}`,\r\n                type: 'circle',\r\n                attrs: { x, y, r: radius + borderSize },\r\n                styles: { color: borderColor }\r\n              }\r\n            ) ?? undefined\r\n          )?.draw(ctx)\r\n          this.createFigure({\r\n            name: 'circle',\r\n            attrs: { x, y, r: radius },\r\n            styles: { color }\r\n          })?.draw(ctx)\r\n        })\r\n      }\r\n    }\r\n  }\r\n}\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport type DrawPane from '../pane/DrawPane'\r\n\r\nimport { WidgetNameConstants } from './types'\r\nimport DrawWidget from './DrawWidget'\r\n\r\nimport type { YAxis } from '../component/YAxis'\r\n\r\nimport GridView from '../view/GridView'\r\nimport IndicatorView from '../view/IndicatorView'\r\nimport CrosshairLineView from '../view/CrosshairLineView'\r\nimport IndicatorTooltipView from '../view/IndicatorTooltipView'\r\nimport OverlayView from '../view/OverlayView'\r\n\r\nexport default class IndicatorWidget extends DrawWidget<DrawPane<YAxis>> {\r\n  private readonly _gridView = new GridView(this)\r\n  private readonly _indicatorView = new IndicatorView(this)\r\n  private readonly _crosshairLineView = new CrosshairLineView(this)\r\n  private readonly _tooltipView = this.createTooltipView()\r\n  private readonly _overlayView = new OverlayView(this)\r\n\r\n  constructor (rootContainer: HTMLElement, pane: DrawPane<YAxis>) {\r\n    super(rootContainer, pane)\r\n    this.addChild(this._tooltipView)\r\n    this.addChild(this._overlayView)\r\n  }\r\n\r\n  getName (): string {\r\n    return WidgetNameConstants.MAIN\r\n  }\r\n\r\n  protected updateMain (ctx: CanvasRenderingContext2D): void {\r\n    if (this.getPane().getOptions().state !== 'minimize') {\r\n      this.updateMainContent(ctx)\r\n      this._indicatorView.draw(ctx)\r\n      this._gridView.draw(ctx)\r\n    }\r\n  }\r\n\r\n  protected createTooltipView (): IndicatorTooltipView {\r\n    return new IndicatorTooltipView(this)\r\n  }\r\n\r\n  protected updateMainContent (_ctx: CanvasRenderingContext2D): void {\r\n    // to do it\r\n  }\r\n\r\n  protected updateOverlayContent (_ctx: CanvasRenderingContext2D): void {\r\n    // to do it\r\n  }\r\n\r\n  override updateOverlay (ctx: CanvasRenderingContext2D): void {\r\n    if (this.getPane().getOptions().state !== 'minimize') {\r\n      this._overlayView.draw(ctx)\r\n      this._crosshairLineView.draw(ctx)\r\n      this.updateOverlayContent(ctx)\r\n    }\r\n    this._tooltipView.draw(ctx)\r\n  }\r\n}\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport type Coordinate from '../common/Coordinate'\r\nimport type { GradientColor } from '../common/Styles'\r\nimport Animation from '../common/Animation'\r\nimport { isNumber, isArray, isValid } from '../common/utils/typeChecks'\r\nimport { UpdateLevel } from '../common/Updater'\r\n\r\nimport ChildrenView from './ChildrenView'\r\n\r\nimport { lineTo } from '../extension/figure/line'\r\nimport type Nullable from '../common/Nullable'\r\n\r\nexport default class CandleAreaView extends ChildrenView {\r\n  private readonly _ripplePoint = this.createFigure({\r\n    name: 'circle',\r\n    attrs: {\r\n      x: 0,\r\n      y: 0,\r\n      r: 0\r\n    },\r\n    styles: {\r\n      style: 'fill'\r\n    }\r\n  })\r\n\r\n  private _animationFrameTime = 0\r\n\r\n  private readonly _animation = new Animation({ iterationCount: Infinity }).doFrame((time) => {\r\n    this._animationFrameTime = time\r\n    const pane = this.getWidget().getPane()\r\n    pane.getChart().updatePane(UpdateLevel.Main, pane.getId())\r\n  })\r\n\r\n  override drawImp (ctx: CanvasRenderingContext2D): void {\r\n    const widget = this.getWidget()\r\n    const pane = widget.getPane()\r\n    const chart = pane.getChart()\r\n    const dataList = chart.getDataList()\r\n    const lastDataIndex = dataList.length - 1\r\n    const bounding = widget.getBounding()\r\n    const yAxis = pane.getAxisComponent()\r\n    const styles = chart.getStyles().candle.area\r\n    const coordinates: Coordinate[] = []\r\n    let minY = Number.MAX_SAFE_INTEGER\r\n    let areaStartX: number = Number.MIN_SAFE_INTEGER\r\n    let ripplePointCoordinate: Nullable<Coordinate> = null\r\n    this.eachChildren((data) => {\r\n      const x = data.x\r\n      const { current: kLineData } = data.data\r\n      const value = kLineData?.[styles.value]\r\n      if (isNumber(value)) {\r\n        const y = yAxis.convertToPixel(value)\r\n        if (areaStartX === Number.MIN_SAFE_INTEGER) {\r\n          areaStartX = x\r\n        }\r\n        coordinates.push({ x, y })\r\n        minY = Math.min(minY, y)\r\n        if (data.dataIndex === lastDataIndex) {\r\n          ripplePointCoordinate = { x, y }\r\n        }\r\n      }\r\n    })\r\n\r\n    if (coordinates.length > 0) {\r\n      this.createFigure({\r\n        name: 'line',\r\n        attrs: { coordinates },\r\n        styles: {\r\n          color: styles.lineColor,\r\n          size: styles.lineSize,\r\n          smooth: styles.smooth\r\n        }\r\n      }\r\n      )?.draw(ctx)\r\n\r\n      // render area\r\n      const backgroundColor = styles.backgroundColor\r\n      let color: string | CanvasGradient = ''\r\n      if (isArray<GradientColor>(backgroundColor)) {\r\n        const gradient = ctx.createLinearGradient(0, bounding.height, 0, minY)\r\n        try {\r\n          backgroundColor.forEach(({ offset, color }) => {\r\n            gradient.addColorStop(offset, color)\r\n          })\r\n        } catch (e) {\r\n        }\r\n        color = gradient\r\n      } else {\r\n        color = backgroundColor\r\n      }\r\n      ctx.fillStyle = color\r\n      ctx.beginPath()\r\n      ctx.moveTo(areaStartX, bounding.height)\r\n      ctx.lineTo(coordinates[0].x, coordinates[0].y)\r\n      lineTo(ctx, coordinates, styles.smooth)\r\n      ctx.lineTo(coordinates[coordinates.length - 1].x, bounding.height)\r\n      ctx.closePath()\r\n      ctx.fill()\r\n    }\r\n\r\n    const pointStyles = styles.point\r\n    if (pointStyles.show && isValid(ripplePointCoordinate)) {\r\n      this.createFigure({\r\n        name: 'circle',\r\n        attrs: {\r\n          x: ripplePointCoordinate!.x,\r\n          y: ripplePointCoordinate!.y,\r\n          r: pointStyles.radius\r\n        },\r\n        styles: {\r\n          style: 'fill',\r\n          color: pointStyles.color\r\n        }\r\n      })?.draw(ctx)\r\n      let rippleRadius = pointStyles.rippleRadius\r\n      if (pointStyles.animation) {\r\n        rippleRadius = pointStyles.radius + this._animationFrameTime / pointStyles.animationDuration * (pointStyles.rippleRadius - pointStyles.radius)\r\n        this._animation.setDuration(pointStyles.animationDuration).start()\r\n      }\r\n      this._ripplePoint\r\n        ?.setAttrs({\r\n          x: ripplePointCoordinate!.x,\r\n          y: ripplePointCoordinate!.y,\r\n          r: rippleRadius\r\n        })\r\n        .setStyles({ style: 'fill', color: pointStyles.rippleColor }).draw(ctx)\r\n    } else {\r\n      this.stopAnimation()\r\n    }\r\n  }\r\n\r\n  stopAnimation (): void {\r\n    this._animation.stop()\r\n  }\r\n}\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport type Coordinate from '../common/Coordinate'\r\nimport type { CandleHighLowPriceMarkStyle } from '../common/Styles'\r\nimport { formatPrecision } from '../common/utils/format'\r\nimport { SymbolDefaultPrecisionConstants } from '../common/SymbolInfo'\r\n\r\nimport View from './View'\r\n\r\nimport type { YAxis } from '../component/YAxis'\r\n\r\nexport default class CandleHighLowPriceView extends View<YAxis> {\r\n  override drawImp (ctx: CanvasRenderingContext2D): void {\r\n    const widget = this.getWidget()\r\n    const pane = widget.getPane()\r\n    const chartStore = pane.getChart().getChartStore()\r\n    const priceMarkStyles = chartStore.getStyles().candle.priceMark\r\n    const highPriceMarkStyles = priceMarkStyles.high\r\n    const lowPriceMarkStyles = priceMarkStyles.low\r\n    if (priceMarkStyles.show && (highPriceMarkStyles.show || lowPriceMarkStyles.show)) {\r\n      const highestLowestPrice = chartStore.getVisibleRangeHighLowPrice()\r\n      const precision = chartStore.getSymbol()?.pricePrecision ?? SymbolDefaultPrecisionConstants.PRICE\r\n      const yAxis = pane.getAxisComponent()\r\n\r\n      const { price: high, x: highX } = highestLowestPrice[0]\r\n      const { price: low, x: lowX } = highestLowestPrice[1]\r\n      const highY = yAxis.convertToPixel(high)\r\n      const lowY = yAxis.convertToPixel(low)\r\n      const decimalFold = chartStore.getDecimalFold()\r\n      const thousandsSeparator = chartStore.getThousandsSeparator()\r\n      if (highPriceMarkStyles.show && high !== Number.MIN_SAFE_INTEGER) {\r\n        this._drawMark(\r\n          ctx,\r\n          decimalFold.format(thousandsSeparator.format(formatPrecision(high, precision))),\r\n          { x: highX, y: highY },\r\n          highY < lowY ? [-2, -5] : [2, 5],\r\n          highPriceMarkStyles\r\n        )\r\n      }\r\n      if (lowPriceMarkStyles.show && low !== Number.MAX_SAFE_INTEGER) {\r\n        this._drawMark(\r\n          ctx,\r\n          decimalFold.format(thousandsSeparator.format(formatPrecision(low, precision))),\r\n          { x: lowX, y: lowY },\r\n          highY < lowY ? [2, 5] : [-2, -5],\r\n          lowPriceMarkStyles\r\n        )\r\n      }\r\n    }\r\n  }\r\n\r\n  private _drawMark (\r\n    ctx: CanvasRenderingContext2D,\r\n    text: string,\r\n    coordinate: Coordinate,\r\n    offsets: number[],\r\n    styles: CandleHighLowPriceMarkStyle\r\n  ): void {\r\n    const startX = coordinate.x\r\n    const startY = coordinate.y + offsets[0]\r\n    this.createFigure({\r\n      name: 'line',\r\n      attrs: {\r\n        coordinates: [\r\n          { x: startX - 2, y: startY + offsets[0] },\r\n          { x: startX, y: startY },\r\n          { x: startX + 2, y: startY + offsets[0] }\r\n        ]\r\n      },\r\n      styles: { color: styles.color }\r\n    })?.draw(ctx)\r\n\r\n    let lineEndX = 0\r\n    let textStartX = 0\r\n    let textAlign = 'left'\r\n    const { width } = this.getWidget().getBounding()\r\n    if (startX > width / 2) {\r\n      lineEndX = startX - 5\r\n      textStartX = lineEndX - styles.textOffset\r\n      textAlign = 'right'\r\n    } else {\r\n      lineEndX = startX + 5\r\n      textAlign = 'left'\r\n      textStartX = lineEndX + styles.textOffset\r\n    }\r\n\r\n    const y = startY + offsets[1]\r\n    this.createFigure({\r\n      name: 'line',\r\n      attrs: {\r\n        coordinates: [\r\n          { x: startX, y: startY },\r\n          { x: startX, y },\r\n          { x: lineEndX, y }\r\n        ]\r\n      },\r\n      styles: { color: styles.color }\r\n    })?.draw(ctx)\r\n    this.createFigure({\r\n      name: 'text',\r\n      attrs: {\r\n        x: textStartX,\r\n        y,\r\n        text,\r\n        align: textAlign,\r\n        baseline: 'middle'\r\n      },\r\n      styles: {\r\n        color: styles.color,\r\n        size: styles.textSize,\r\n        family: styles.textFamily,\r\n        weight: styles.textWeight\r\n      }\r\n    })?.draw(ctx)\r\n  }\r\n}\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport { isValid } from '../common/utils/typeChecks'\r\nimport type YAxis from '../component/YAxis'\r\n\r\nimport View from './View'\r\n\r\nexport default class CandleLastPriceView extends View {\r\n  override drawImp (ctx: CanvasRenderingContext2D): void {\r\n    const widget = this.getWidget()\r\n    const pane = widget.getPane()\r\n    const bounding = widget.getBounding()\r\n    const chartStore = pane.getChart().getChartStore()\r\n    const priceMarkStyles = chartStore.getStyles().candle.priceMark\r\n    const lastPriceMarkStyles = priceMarkStyles.last\r\n    const lastPriceMarkLineStyles = lastPriceMarkStyles.line\r\n    if (priceMarkStyles.show && lastPriceMarkStyles.show && lastPriceMarkLineStyles.show) {\r\n      const yAxis = pane.getAxisComponent() as YAxis\r\n      const dataList = chartStore.getDataList()\r\n      const data = dataList[dataList.length - 1]\r\n      if (isValid(data)) {\r\n        const { close, open } = data\r\n        const comparePrice = lastPriceMarkStyles.compareRule === 'current_open' ? open : (dataList[dataList.length - 2]?.close ?? close)\r\n        const priceY = yAxis.convertToNicePixel(close)\r\n        let color = ''\r\n        if (close > comparePrice) {\r\n          color = lastPriceMarkStyles.upColor\r\n        } else if (close < comparePrice) {\r\n          color = lastPriceMarkStyles.downColor\r\n        } else {\r\n          color = lastPriceMarkStyles.noChangeColor\r\n        }\r\n        this.createFigure({\r\n          name: 'line',\r\n          attrs: {\r\n            coordinates: [\r\n              { x: 0, y: priceY },\r\n              { x: bounding.width, y: priceY }\r\n            ]\r\n          },\r\n          styles: {\r\n            style: lastPriceMarkLineStyles.style,\r\n            color,\r\n            size: lastPriceMarkLineStyles.size,\r\n            dashedValue: lastPriceMarkLineStyles.dashedValue\r\n          }\r\n        })?.draw(ctx)\r\n      }\r\n    }\r\n  }\r\n}\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nexport type PeriodType = 'second' | 'minute' | 'hour' | 'day' | 'week' | 'month' | 'year'\r\n\r\nexport interface Period {\r\n  type: PeriodType\r\n  span: number\r\n}\r\n\r\nexport const PeriodTypeXAxisFormat: Record<PeriodType, string> = {\r\n  second: 'HH:mm:ss',\r\n  minute: 'HH:mm',\r\n  hour: 'MM-DD HH:mm',\r\n  day: 'YYYY-MM-DD',\r\n  week: 'YYYY-MM-DD',\r\n  month: 'YYYY-MM',\r\n  year: 'YYYY'\r\n}\r\n\r\nexport const PeriodTypeCrosshairTooltipFormat: Record<PeriodType, string> = {\r\n  second: 'HH:mm:ss',\r\n  minute: 'YYYY-MM-DD HH:mm',\r\n  hour: 'YYYY-MM-DD HH:mm',\r\n  day: 'YYYY-MM-DD',\r\n  week: 'YYYY-MM-DD',\r\n  month: 'YYYY-MM',\r\n  year: 'YYYY'\r\n}\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport type { Locales } from '../../Options'\r\n\r\nconst zhCN: Locales = {\r\n  time: 'Êó∂Èó¥Ôºö',\r\n  open: 'ÂºÄÔºö',\r\n  high: 'È´òÔºö',\r\n  low: '‰ΩéÔºö',\r\n  close: 'Êî∂Ôºö',\r\n  volume: 'Êàê‰∫§ÈáèÔºö',\r\n  turnover: 'Êàê‰∫§È¢ùÔºö',\r\n  change: 'Ê∂®ÂπÖÔºö',\r\n  second: 'Áßí',\r\n  minute: '',\r\n  hour: 'Â∞èÊó∂',\r\n  day: 'Â§©',\r\n  week: 'Âë®',\r\n  month: 'Êúà',\r\n  year: 'Âπ¥'\r\n}\r\n\r\nexport default zhCN\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport type { Locales } from '../../Options'\r\n\r\nconst enUS: Locales = {\r\n  time: 'Time: ',\r\n  open: 'Open: ',\r\n  high: 'High: ',\r\n  low: 'Low: ',\r\n  close: 'Close: ',\r\n  volume: 'Volume: ',\r\n  turnover: 'Turnover: ',\r\n  change: 'Change: ',\r\n  second: 'S',\r\n  minute: '',\r\n  hour: 'H',\r\n  day: 'D',\r\n  week: 'W',\r\n  month: 'M',\r\n  year: 'Y'\r\n}\r\n\r\nexport default enUS\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport type { Locales } from '../../Options'\r\n\r\nimport zhCN from './zh-CN'\r\nimport enUS from './en-US'\r\n\r\nconst locales: Record<string, Locales> = {\r\n  'zh-CN': zhCN,\r\n  'en-US': enUS\r\n}\r\n\r\nfunction registerLocale (locale: string, ls: Locales): void {\r\n  locales[locale] = { ...locales[locale], ...ls }\r\n}\r\n\r\nfunction getSupportedLocales (): string[] {\r\n  return Object.keys(locales)\r\n}\r\n\r\nfunction i18n (key: string, locale: string): string {\r\n  return locales[locale][key] ?? key\r\n}\r\n\r\nexport { i18n, registerLocale, getSupportedLocales }\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport type {\r\n  TooltipLegend, TooltipLegendChild\r\n} from '../common/Styles'\r\nimport { formatPrecision, formatTemplateString } from '../common/utils/format'\r\nimport { createFont } from '../common/utils/canvas'\r\nimport { isFunction, isObject, isValid } from '../common/utils/typeChecks'\r\nimport { PeriodTypeCrosshairTooltipFormat } from '../common/Period'\r\nimport { SymbolDefaultPrecisionConstants } from '../common/SymbolInfo'\r\n\r\nimport { PaneIdConstants } from '../pane/types'\r\n\r\nimport IndicatorTooltipView from './IndicatorTooltipView'\r\n\r\nimport { i18n } from '../extension/i18n/index'\r\n\r\nexport default class CandleTooltipView extends IndicatorTooltipView {\r\n  override drawImp (ctx: CanvasRenderingContext2D): void {\r\n    const widget = this.getWidget()\r\n    const chartStore = widget.getPane().getChart().getChartStore()\r\n    const crosshair = chartStore.getCrosshair()\r\n    if (isValid(crosshair.kLineData)) {\r\n      const bounding = widget.getBounding()\r\n      const styles = chartStore.getStyles()\r\n      const candleStyles = styles.candle\r\n      const indicatorStyles = styles.indicator\r\n      if (\r\n        candleStyles.tooltip.showType === 'rect' &&\r\n        indicatorStyles.tooltip.showType === 'rect'\r\n      ) {\r\n        const isDrawCandleTooltip = this.isDrawTooltip(crosshair, candleStyles.tooltip)\r\n        const isDrawIndicatorTooltip = this.isDrawTooltip(crosshair, indicatorStyles.tooltip)\r\n        this._drawRectTooltip(\r\n          ctx, isDrawCandleTooltip, isDrawIndicatorTooltip,\r\n          candleStyles.tooltip.offsetTop\r\n        )\r\n      } else if (\r\n        candleStyles.tooltip.showType === 'standard' &&\r\n        indicatorStyles.tooltip.showType === 'standard'\r\n      ) {\r\n        const { offsetLeft, offsetTop, offsetRight } = candleStyles.tooltip\r\n        const maxWidth = bounding.width - offsetRight\r\n        const top = this._drawCandleStandardTooltip(\r\n          ctx, offsetLeft, offsetTop, maxWidth\r\n        )\r\n        this.drawIndicatorTooltip(ctx, offsetLeft, top, maxWidth)\r\n      } else if (\r\n        candleStyles.tooltip.showType === 'rect' &&\r\n        indicatorStyles.tooltip.showType === 'standard'\r\n      ) {\r\n        const { offsetLeft, offsetTop, offsetRight } = candleStyles.tooltip\r\n        const maxWidth = bounding.width - offsetRight\r\n        const top = this.drawIndicatorTooltip(\r\n          ctx, offsetLeft, offsetTop, maxWidth\r\n        )\r\n        const isDrawCandleTooltip = this.isDrawTooltip(crosshair, candleStyles.tooltip)\r\n        this._drawRectTooltip(\r\n          ctx, isDrawCandleTooltip, false, top\r\n        )\r\n      } else {\r\n        const { offsetLeft, offsetTop, offsetRight } = candleStyles.tooltip\r\n        const maxWidth = bounding.width - offsetRight\r\n        const top = this._drawCandleStandardTooltip(\r\n          ctx, offsetLeft, offsetTop, maxWidth\r\n        )\r\n        const isDrawIndicatorTooltip = this.isDrawTooltip(crosshair, indicatorStyles.tooltip)\r\n        this._drawRectTooltip(\r\n          ctx, false, isDrawIndicatorTooltip, top\r\n        )\r\n      }\r\n    }\r\n  }\r\n\r\n  private _drawCandleStandardTooltip (\r\n    ctx: CanvasRenderingContext2D,\r\n    left: number,\r\n    top: number,\r\n    maxWidth: number\r\n  ): number {\r\n    const chartStore = this.getWidget().getPane().getChart().getChartStore()\r\n    const styles = chartStore.getStyles().candle\r\n    const tooltipStyles = styles.tooltip\r\n    const tooltipLegendStyles = tooltipStyles.legend\r\n    let prevRowHeight = 0\r\n    const coordinate = { x: left, y: top }\r\n    const crosshair = chartStore.getCrosshair()\r\n    if (this.isDrawTooltip(crosshair, tooltipStyles)) {\r\n      const tooltipTitleStyles = tooltipStyles.title\r\n      if (tooltipTitleStyles.show) {\r\n        const { type = '', span = '' } = chartStore.getPeriod() ?? {}\r\n        const text = formatTemplateString(tooltipTitleStyles.template, { ...chartStore.getSymbol(), period: `${span}${i18n(type, chartStore.getLocale())}` })\r\n        const color = tooltipTitleStyles.color\r\n        const height = this.drawStandardTooltipLegends(\r\n          ctx, [\r\n            {\r\n              title: { text: '', color },\r\n              value: { text, color }\r\n            }\r\n          ], { x: left, y: top }, left,\r\n          0, maxWidth, tooltipTitleStyles\r\n        )\r\n        coordinate.y = coordinate.y + height\r\n      }\r\n\r\n      const legends = this._getCandleTooltipLegends()\r\n      const features = this.classifyTooltipFeatures(tooltipStyles.features)\r\n      prevRowHeight = this.drawStandardTooltipFeatures(\r\n        ctx, features[0], coordinate,\r\n        null, left, prevRowHeight, maxWidth\r\n      )\r\n      prevRowHeight = this.drawStandardTooltipFeatures(\r\n        ctx, features[1], coordinate,\r\n        null, left, prevRowHeight, maxWidth\r\n      )\r\n      if (legends.length > 0) {\r\n        prevRowHeight = this.drawStandardTooltipLegends(\r\n          ctx, legends, coordinate, left,\r\n          prevRowHeight, maxWidth, tooltipLegendStyles\r\n        )\r\n      }\r\n\r\n      prevRowHeight = this.drawStandardTooltipFeatures(\r\n        ctx, features[2], coordinate,\r\n        null, left, prevRowHeight, maxWidth\r\n      )\r\n    }\r\n    return coordinate.y + prevRowHeight\r\n  }\r\n\r\n  private _drawRectTooltip (\r\n    ctx: CanvasRenderingContext2D,\r\n    isDrawCandleTooltip: boolean,\r\n    isDrawIndicatorTooltip: boolean,\r\n    top: number\r\n  ): void {\r\n    const widget = this.getWidget()\r\n    const pane = widget.getPane()\r\n    const chartStore = pane.getChart().getChartStore()\r\n\r\n    const styles = chartStore.getStyles()\r\n    const candleStyles = styles.candle\r\n    const indicatorStyles = styles.indicator\r\n    const candleTooltipStyles = candleStyles.tooltip\r\n    const indicatorTooltipStyles = indicatorStyles.tooltip\r\n    if (isDrawCandleTooltip || isDrawIndicatorTooltip) {\r\n      const candleLegends = this._getCandleTooltipLegends()\r\n      const { offsetLeft, offsetTop, offsetRight, offsetBottom } = candleTooltipStyles\r\n\r\n      const {\r\n        marginLeft: baseLegendMarginLeft,\r\n        marginRight: baseLegendMarginRight,\r\n        marginTop: baseLegendMarginTop,\r\n        marginBottom: baseLegendMarginBottom,\r\n        size: baseLegendSize,\r\n        weight: baseLegendWeight,\r\n        family: baseLegendFamily\r\n      } = candleTooltipStyles.legend\r\n\r\n      const {\r\n        position: rectPosition,\r\n        paddingLeft: rectPaddingLeft,\r\n        paddingRight: rectPaddingRight,\r\n        paddingTop: rectPaddingTop,\r\n        paddingBottom: rectPaddingBottom,\r\n        offsetLeft: rectOffsetLeft,\r\n        offsetRight: rectOffsetRight,\r\n        offsetTop: rectOffsetTop,\r\n        offsetBottom: rectOffsetBottom,\r\n        borderSize: rectBorderSize,\r\n        borderRadius: rectBorderRadius,\r\n        borderColor: rectBorderColor,\r\n        color: rectBackgroundColor\r\n      } = candleTooltipStyles.rect\r\n\r\n      let maxTextWidth = 0\r\n      let rectWidth = 0\r\n      let rectHeight = 0\r\n      if (isDrawCandleTooltip) {\r\n        ctx.font = createFont(baseLegendSize, baseLegendWeight, baseLegendFamily)\r\n        candleLegends.forEach(data => {\r\n          const title = data.title as TooltipLegendChild\r\n          const value = data.value as TooltipLegendChild\r\n          const text = `${title.text}${value.text}`\r\n          const labelWidth = ctx.measureText(text).width + baseLegendMarginLeft + baseLegendMarginRight\r\n          maxTextWidth = Math.max(maxTextWidth, labelWidth)\r\n        })\r\n        rectHeight += ((baseLegendMarginBottom + baseLegendMarginTop + baseLegendSize) * candleLegends.length)\r\n      }\r\n\r\n      const {\r\n        marginLeft: indicatorLegendMarginLeft,\r\n        marginRight: indicatorLegendMarginRight,\r\n        marginTop: indicatorLegendMarginTop,\r\n        marginBottom: indicatorLegendMarginBottom,\r\n        size: indicatorLegendSize,\r\n        weight: indicatorLegendWeight,\r\n        family: indicatorLegendFamily\r\n      } = indicatorTooltipStyles.legend\r\n      const indicatorLegendsArray: TooltipLegend[][] = []\r\n      if (isDrawIndicatorTooltip) {\r\n        const indicators = chartStore.getIndicatorsByPaneId(pane.getId())\r\n        ctx.font = createFont(indicatorLegendSize, indicatorLegendWeight, indicatorLegendFamily)\r\n        indicators.forEach(indicator => {\r\n          const tooltipDataLegends = this.getIndicatorTooltipData(indicator).legends\r\n          indicatorLegendsArray.push(tooltipDataLegends)\r\n          tooltipDataLegends.forEach(data => {\r\n            const title = data.title as TooltipLegendChild\r\n            const value = data.value as TooltipLegendChild\r\n            const text = `${title.text}${value.text}`\r\n            const textWidth = ctx.measureText(text).width + indicatorLegendMarginLeft + indicatorLegendMarginRight\r\n            maxTextWidth = Math.max(maxTextWidth, textWidth)\r\n            rectHeight += (indicatorLegendMarginTop + indicatorLegendMarginBottom + indicatorLegendSize)\r\n          })\r\n        })\r\n      }\r\n      rectWidth += maxTextWidth\r\n      if (rectWidth !== 0 && rectHeight !== 0) {\r\n        const crosshair = chartStore.getCrosshair()\r\n        const bounding = widget.getBounding()\r\n        const yAxisBounding = pane.getYAxisWidget()!.getBounding()\r\n        rectWidth += (rectBorderSize * 2 + rectPaddingLeft + rectPaddingRight)\r\n        rectHeight += (rectBorderSize * 2 + rectPaddingTop + rectPaddingBottom)\r\n        const centerX = bounding.width / 2\r\n        const isPointer = rectPosition === 'pointer' && crosshair.paneId === PaneIdConstants.CANDLE\r\n        const isLeft = (crosshair.realX ?? 0) > centerX\r\n        let rectX = 0\r\n        if (isPointer) {\r\n          const realX = crosshair.realX!\r\n          if (isLeft) {\r\n            rectX = realX - rectOffsetRight - rectWidth\r\n          } else {\r\n            rectX = realX + rectOffsetLeft\r\n          }\r\n        } else {\r\n          const yAxis = this.getWidget().getPane().getAxisComponent()\r\n          if (isLeft) {\r\n            rectX = rectOffsetLeft + offsetLeft\r\n            if (yAxis.inside && yAxis.position === 'left') {\r\n              rectX += yAxisBounding.width\r\n            }\r\n          } else {\r\n            rectX = bounding.width - rectOffsetRight - rectWidth - offsetRight\r\n            if (yAxis.inside && yAxis.position === 'right') {\r\n              rectX -= yAxisBounding.width\r\n            }\r\n          }\r\n        }\r\n\r\n        let rectY = top + rectOffsetTop\r\n        if (isPointer) {\r\n          const y = crosshair.y!\r\n          rectY = y - rectHeight / 2\r\n          if (rectY + rectHeight > bounding.height - rectOffsetBottom - offsetBottom) {\r\n            rectY = bounding.height - rectOffsetBottom - rectHeight - offsetBottom\r\n          }\r\n          if (rectY < top + rectOffsetTop) {\r\n            rectY = top + rectOffsetTop + offsetTop\r\n          }\r\n        }\r\n        this.createFigure({\r\n          name: 'rect',\r\n          attrs: {\r\n            x: rectX,\r\n            y: rectY,\r\n            width: rectWidth,\r\n            height: rectHeight\r\n          },\r\n          styles: {\r\n            style: 'stroke_fill',\r\n            color: rectBackgroundColor,\r\n            borderColor: rectBorderColor,\r\n            borderSize: rectBorderSize,\r\n            borderRadius: rectBorderRadius\r\n          }\r\n        })?.draw(ctx)\r\n        const candleTextX = rectX + rectBorderSize + rectPaddingLeft + baseLegendMarginLeft\r\n        let textY = rectY + rectBorderSize + rectPaddingTop\r\n        if (isDrawCandleTooltip) {\r\n          // render candle texts\r\n          candleLegends.forEach(data => {\r\n            textY += baseLegendMarginTop\r\n            const title = data.title as TooltipLegendChild\r\n            this.createFigure({\r\n              name: 'text',\r\n              attrs: {\r\n                x: candleTextX,\r\n                y: textY,\r\n                text: title.text\r\n              },\r\n              styles: {\r\n                color: title.color,\r\n                size: baseLegendSize,\r\n                family: baseLegendFamily,\r\n                weight: baseLegendWeight\r\n              }\r\n            })?.draw(ctx)\r\n            const value = data.value as TooltipLegendChild\r\n            this.createFigure({\r\n              name: 'text',\r\n              attrs: {\r\n                x: rectX + rectWidth - rectBorderSize - baseLegendMarginRight - rectPaddingRight,\r\n                y: textY,\r\n                text: value.text,\r\n                align: 'right'\r\n              },\r\n              styles: {\r\n                color: value.color,\r\n                size: baseLegendSize,\r\n                family: baseLegendFamily,\r\n                weight: baseLegendWeight\r\n              }\r\n            })?.draw(ctx)\r\n            textY += (baseLegendSize + baseLegendMarginBottom)\r\n          })\r\n        }\r\n        if (isDrawIndicatorTooltip) {\r\n          // render indicator legends\r\n          const indicatorTextX = rectX + rectBorderSize + rectPaddingLeft + indicatorLegendMarginLeft\r\n          indicatorLegendsArray.forEach(legends => {\r\n            legends.forEach(data => {\r\n              textY += indicatorLegendMarginTop\r\n              const title = data.title as TooltipLegendChild\r\n              const value = data.value as TooltipLegendChild\r\n              this.createFigure({\r\n                name: 'text',\r\n                attrs: {\r\n                  x: indicatorTextX,\r\n                  y: textY,\r\n                  text: title.text\r\n                },\r\n                styles: {\r\n                  color: title.color,\r\n                  size: indicatorLegendSize,\r\n                  family: indicatorLegendFamily,\r\n                  weight: indicatorLegendWeight\r\n                }\r\n              })?.draw(ctx)\r\n\r\n              this.createFigure({\r\n                name: 'text',\r\n                attrs: {\r\n                  x: rectX + rectWidth - rectBorderSize - indicatorLegendMarginRight - rectPaddingRight,\r\n                  y: textY,\r\n                  text: value.text,\r\n                  align: 'right'\r\n                },\r\n                styles: {\r\n                  color: value.color,\r\n                  size: indicatorLegendSize,\r\n                  family: indicatorLegendFamily,\r\n                  weight: indicatorLegendWeight\r\n                }\r\n              })?.draw(ctx)\r\n              textY += (indicatorLegendSize + indicatorLegendMarginBottom)\r\n            })\r\n          })\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  private _getCandleTooltipLegends (): TooltipLegend[] {\r\n    const chartStore = this.getWidget().getPane().getChart().getChartStore()\r\n    const styles = chartStore.getStyles().candle\r\n    const dataList = chartStore.getDataList()\r\n    const formatter = chartStore.getInnerFormatter()\r\n    const decimalFold = chartStore.getDecimalFold()\r\n    const thousandsSeparator = chartStore.getThousandsSeparator()\r\n    const locale = chartStore.getLocale()\r\n    const { pricePrecision = SymbolDefaultPrecisionConstants.PRICE, volumePrecision = SymbolDefaultPrecisionConstants.VOLUME } = chartStore.getSymbol() ?? {}\r\n    const period = chartStore.getPeriod()\r\n    const dataIndex = chartStore.getCrosshair().dataIndex ?? 0\r\n\r\n    const tooltipStyles = styles.tooltip\r\n    const { color: textColor, defaultValue, template } = tooltipStyles.legend\r\n    const prev = dataList[dataIndex - 1] ?? null\r\n    const current = dataList[dataIndex]\r\n\r\n    // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition -- ignore\r\n    const prevClose = prev?.close ?? current.close\r\n    const changeValue = current.close - prevClose\r\n    const mapping = {\r\n      ...current,\r\n      time: formatter.formatDate(current.timestamp, PeriodTypeCrosshairTooltipFormat[period?.type ?? 'day'], 'tooltip'),\r\n      open: decimalFold.format(thousandsSeparator.format(formatPrecision(current.open, pricePrecision))),\r\n      high: decimalFold.format(thousandsSeparator.format(formatPrecision(current.high, pricePrecision))),\r\n      low: decimalFold.format(thousandsSeparator.format(formatPrecision(current.low, pricePrecision))),\r\n      close: decimalFold.format(thousandsSeparator.format(formatPrecision(current.close, pricePrecision))),\r\n      volume: decimalFold.format(thousandsSeparator.format(\r\n        formatter.formatBigNumber(formatPrecision(current.volume ?? defaultValue, volumePrecision))\r\n      )),\r\n      turnover: decimalFold.format(thousandsSeparator.format(\r\n        formatPrecision(current.turnover ?? defaultValue, pricePrecision)\r\n      )),\r\n      change: prevClose === 0 ? defaultValue : `${thousandsSeparator.format(formatPrecision(changeValue / prevClose * 100))}%`\r\n    }\r\n    const legends = (\r\n      isFunction(template)\r\n        ? template({ prev, current, next: dataList[dataIndex + 1] ?? null }, styles)\r\n        : template\r\n    )\r\n    return legends.map(({ title, value }) => {\r\n      let t: TooltipLegendChild = { text: '', color: textColor }\r\n      if (isObject(title)) {\r\n        t = { ...title }\r\n      } else {\r\n        t.text = title\r\n      }\r\n      t.text = i18n(t.text, locale)\r\n      let v = { text: defaultValue, color: textColor }\r\n      if (isObject(value)) {\r\n        v = { ...value }\r\n      } else {\r\n        v.text = value\r\n      }\r\n      if (isValid(/{change}/.exec(v.text))) {\r\n        v.color = changeValue === 0 ? styles.priceMark.last.noChangeColor : (changeValue > 0 ? styles.priceMark.last.upColor : styles.priceMark.last.downColor)\r\n      }\r\n      v.text = formatTemplateString(v.text, mapping)\r\n      return { title: t, value: v }\r\n    })\r\n  }\r\n}\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport type Nullable from '../common/Nullable'\r\nimport type Crosshair from '../common/Crosshair'\r\nimport type { FeatureIconFontStyle, FeaturePathStyle, FeatureStyle } from '../common/Styles'\r\nimport { isString } from '../common/utils/typeChecks'\r\nimport { calcTextWidth } from '../common/utils/canvas'\r\nimport { SymbolDefaultPrecisionConstants } from '../common/SymbolInfo'\r\n\r\nimport type { YAxis } from '../component/YAxis'\r\n\r\nimport type DrawPane from '../pane/DrawPane'\r\nimport type DrawWidget from '../widget/DrawWidget'\r\nimport View from './View'\r\n\r\ninterface CrosshairFeatureInfo {\r\n  crosshair: Crosshair\r\n  feature: FeatureStyle\r\n}\r\n\r\nexport default class CrosshairFeatureView extends View<YAxis> {\r\n  private _activeFeatureInfo: Nullable<CrosshairFeatureInfo> = null\r\n\r\n  private readonly _featureClickEvent = (featureInfo: CrosshairFeatureInfo) => () => {\r\n    const pane = this.getWidget().getPane()\r\n    pane.getChart().getChartStore().executeAction('onCrosshairFeatureClick', featureInfo)\r\n    return true\r\n  }\r\n\r\n  private readonly _featureMouseMoveEvent = (featureInfo: CrosshairFeatureInfo) => () => {\r\n    this._activeFeatureInfo = featureInfo\r\n    this.getWidget().setForceCursor('pointer')\r\n    return true\r\n  }\r\n\r\n  constructor (widget: DrawWidget<DrawPane<YAxis>>) {\r\n    super(widget)\r\n    this.registerEvent('mouseMoveEvent', _ => {\r\n      this._activeFeatureInfo = null\r\n      this.getWidget().setForceCursor(null)\r\n      return false\r\n    })\r\n  }\r\n\r\n  override drawImp (ctx: CanvasRenderingContext2D): void {\r\n    const widget = this.getWidget()\r\n    const pane = widget.getPane()\r\n    const chartStore = widget.getPane().getChart().getChartStore()\r\n    const crosshair = chartStore.getCrosshair()\r\n    const weight = this.getWidget()\r\n    const yAxis = weight.getPane().getAxisComponent()\r\n    if (isString(crosshair.paneId) && crosshair.paneId === pane.getId() && yAxis.isInCandle()) {\r\n      const styles = chartStore.getStyles().crosshair\r\n      const features = styles.horizontal.features\r\n      if (styles.show && styles.horizontal.show && features.length > 0) {\r\n        const isRight = yAxis.position === 'right'\r\n        const bounding = weight.getBounding()\r\n\r\n        let yAxisTextWidth = 0\r\n        const horizontalTextStyles = styles.horizontal.text\r\n        if (yAxis.inside && horizontalTextStyles.show) {\r\n          const value = yAxis.convertFromPixel(crosshair.y!)\r\n          const range = yAxis.getRange()\r\n          let text = yAxis.displayValueToText(\r\n            yAxis.realValueToDisplayValue(\r\n              yAxis.valueToRealValue(value, { range }),\r\n              { range }\r\n            ),\r\n            chartStore.getSymbol()?.pricePrecision ?? SymbolDefaultPrecisionConstants.PRICE\r\n          )\r\n          text = chartStore.getDecimalFold().format(chartStore.getThousandsSeparator().format(text))\r\n          yAxisTextWidth = horizontalTextStyles.paddingLeft +\r\n            calcTextWidth(text, horizontalTextStyles.size, horizontalTextStyles.weight, horizontalTextStyles.family) +\r\n            horizontalTextStyles.paddingRight\r\n        }\r\n\r\n        let x = yAxisTextWidth\r\n        if (isRight) {\r\n          x = bounding.width - yAxisTextWidth\r\n        }\r\n        const y = crosshair.y!\r\n        features.forEach(feature => {\r\n          const {\r\n            marginLeft = 0, marginTop = 0, marginRight = 0,\r\n            paddingLeft = 0, paddingTop = 0, paddingRight = 0, paddingBottom = 0,\r\n            color, activeColor, backgroundColor, activeBackgroundColor,\r\n            borderRadius, size = 0, type, content\r\n          } = feature\r\n          let width = size\r\n          if (type === 'icon_font') {\r\n            const iconFont = content as FeatureIconFontStyle\r\n            width = paddingLeft + calcTextWidth(iconFont.code, size, 'normal', iconFont.family) + paddingRight\r\n          }\r\n          if (isRight) {\r\n            x -= (width + marginRight)\r\n          } else {\r\n            x += marginLeft\r\n          }\r\n          let finalColor = color\r\n          let finalBackgroundColor = backgroundColor\r\n          if (this._activeFeatureInfo?.feature.id === feature.id) {\r\n            // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition -- ignore\r\n            finalColor = activeColor ?? color\r\n            // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition -- ignore\r\n            finalBackgroundColor = activeBackgroundColor ?? backgroundColor\r\n          }\r\n          const eventHandler = {\r\n            mouseClickEvent: this._featureClickEvent({ crosshair, feature }),\r\n            mouseMoveEvent: this._featureMouseMoveEvent({ crosshair, feature })\r\n          }\r\n          if (type === 'icon_font') {\r\n            const iconFont = content as FeatureIconFontStyle\r\n            this.createFigure({\r\n              name: 'text',\r\n              attrs: {\r\n                text: iconFont.code,\r\n                x,\r\n                y: y + marginTop,\r\n                baseline: 'middle'\r\n              },\r\n              styles: {\r\n                paddingLeft,\r\n                paddingTop,\r\n                paddingRight,\r\n                paddingBottom,\r\n                borderRadius,\r\n                size,\r\n                family: iconFont.family,\r\n                color: finalColor,\r\n                backgroundColor: finalBackgroundColor\r\n              }\r\n            }, eventHandler)?.draw(ctx)\r\n          } else {\r\n            this.createFigure({\r\n              name: 'rect',\r\n              attrs: { x, y: y + marginTop - size / 2, width: size, height: size },\r\n              styles: {\r\n                paddingLeft,\r\n                paddingTop,\r\n                paddingRight,\r\n                paddingBottom,\r\n                color: finalBackgroundColor\r\n              }\r\n            }, eventHandler)?.draw(ctx)\r\n            const path = content as FeaturePathStyle\r\n            this.createFigure({\r\n              name: 'path',\r\n              attrs: { path: path.path, x, y: y + marginTop + paddingTop - size / 2, width: size, height: size },\r\n              styles: {\r\n                style: path.style,\r\n                lineWidth: path.lineWidth,\r\n                color: finalColor\r\n              }\r\n            })?.draw(ctx)\r\n          }\r\n          if (isRight) {\r\n            x -= marginLeft\r\n          } else {\r\n            x += (width + marginRight)\r\n          }\r\n        })\r\n      }\r\n    }\r\n  }\r\n}\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport IndicatorWidget from './IndicatorWidget'\r\n\r\nimport CandleBarView from '../view/CandleBarView'\r\nimport CandleAreaView from '../view/CandleAreaView'\r\nimport CandleHighLowPriceView from '../view/CandleHighLowPriceView'\r\nimport CandleLastPriceLineView from '../view/CandleLastPriceLineView'\r\n\r\nimport type IndicatorTooltipView from '../view/IndicatorTooltipView'\r\nimport CandleTooltipView from '../view/CandleTooltipView'\r\nimport CrosshairFeatureView from '../view/CrosshairFeatureView'\r\n\r\nimport type AxisPane from '../pane/DrawPane'\r\n\r\nimport type { YAxis } from '../component/YAxis'\r\n\r\nexport default class CandleWidget extends IndicatorWidget {\r\n  private readonly _candleBarView = new CandleBarView(this)\r\n  private readonly _candleAreaView = new CandleAreaView(this)\r\n  private readonly _candleHighLowPriceView = new CandleHighLowPriceView(this)\r\n  private readonly _candleLastPriceLineView = new CandleLastPriceLineView(this)\r\n  private readonly _crosshairFeatureView = new CrosshairFeatureView(this)\r\n\r\n  constructor (rootContainer: HTMLElement, pane: AxisPane<YAxis>) {\r\n    super(rootContainer, pane)\r\n    this.addChild(this._candleBarView)\r\n    this.addChild(this._crosshairFeatureView)\r\n  }\r\n\r\n  override updateMainContent (ctx: CanvasRenderingContext2D): void {\r\n    const candleStyles = this.getPane().getChart().getStyles().candle\r\n    if (candleStyles.type !== 'area') {\r\n      this._candleBarView.draw(ctx)\r\n      this._candleHighLowPriceView.draw(ctx)\r\n      this._candleAreaView.stopAnimation()\r\n    } else {\r\n      this._candleAreaView.draw(ctx)\r\n    }\r\n    this._candleLastPriceLineView.draw(ctx)\r\n  }\r\n\r\n  override updateOverlayContent (ctx: CanvasRenderingContext2D): void {\r\n    this._crosshairFeatureView.draw(ctx)\r\n  }\r\n\r\n  override createTooltipView (): IndicatorTooltipView {\r\n    return new CandleTooltipView(this)\r\n  }\r\n}\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport type Bounding from '../common/Bounding'\r\nimport type { AxisStyle, Styles } from '../common/Styles'\r\n\r\nimport type { LineAttrs } from '../extension/figure/line'\r\nimport type { TextAttrs } from '../extension/figure/text'\r\n\r\nimport type { AxisTick, Axis } from '../component/Axis'\r\n\r\nimport View from './View'\r\n\r\nexport default abstract class AxisView<C extends Axis = Axis> extends View<C> {\r\n  override drawImp (ctx: CanvasRenderingContext2D, extend: unknown[]): void {\r\n    const widget = this.getWidget()\r\n    const pane = widget.getPane()\r\n    const bounding = widget.getBounding()\r\n    const axis = pane.getAxisComponent()\r\n    const styles: AxisStyle = this.getAxisStyles(pane.getChart().getStyles())\r\n    if (styles.show) {\r\n      if (styles.axisLine.show) {\r\n        this.createFigure({\r\n          name: 'line',\r\n          attrs: this.createAxisLine(bounding, styles),\r\n          styles: styles.axisLine\r\n        })?.draw(ctx)\r\n      }\r\n      if (!(extend[0] as boolean)) {\r\n        const ticks = axis.getTicks()\r\n        if (styles.tickLine.show) {\r\n          const lines = this.createTickLines(ticks, bounding, styles)\r\n          lines.forEach(line => {\r\n            this.createFigure({\r\n              name: 'line',\r\n              attrs: line,\r\n              styles: styles.tickLine\r\n            })?.draw(ctx)\r\n          })\r\n        }\r\n        if (styles.tickText.show) {\r\n          const texts = this.createTickTexts(ticks, bounding, styles)\r\n          this.createFigure({\r\n            name: 'text',\r\n            attrs: texts,\r\n            styles: styles.tickText\r\n          })?.draw(ctx)\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  protected abstract getAxisStyles (styles: Styles): AxisStyle\r\n\r\n  protected abstract createAxisLine (bounding: Bounding, styles: AxisStyle): LineAttrs\r\n  protected abstract createTickLines (ticks: AxisTick[], bounding: Bounding, styles: AxisStyle): LineAttrs[]\r\n  protected abstract createTickTexts (tick: AxisTick[], bounding: Bounding, styles: AxisStyle): TextAttrs[]\r\n}\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport type Bounding from '../common/Bounding'\r\nimport type { AxisStyle, Styles } from '../common/Styles'\r\n\r\nimport type { LineAttrs } from '../extension/figure/line'\r\nimport type { TextAttrs } from '../extension/figure/text'\r\n\r\nimport type { AxisTick } from '../component/Axis'\r\nimport type { YAxis } from '../component/YAxis'\r\n\r\nimport AxisView from './AxisView'\r\n\r\nexport default class YAxisView extends AxisView<YAxis> {\r\n  override getAxisStyles (styles: Styles): AxisStyle {\r\n    return styles.yAxis\r\n  }\r\n\r\n  override createAxisLine (bounding: Bounding, styles: AxisStyle): LineAttrs {\r\n    const yAxis = this.getWidget().getPane().getAxisComponent()\r\n    const size = styles.axisLine.size\r\n    let x = 0\r\n    if (yAxis.isFromZero()) {\r\n      x = 0\r\n    } else {\r\n      x = bounding.width - size\r\n    }\r\n    return {\r\n      coordinates: [\r\n        { x, y: 0 },\r\n        { x, y: bounding.height }\r\n      ]\r\n    }\r\n  }\r\n\r\n  override createTickLines (ticks: AxisTick[], bounding: Bounding, styles: AxisStyle): LineAttrs[] {\r\n    const yAxis = this.getWidget().getPane().getAxisComponent()\r\n    const axisLineStyles = styles.axisLine\r\n    const tickLineStyles = styles.tickLine\r\n\r\n    let startX = 0\r\n    let endX = 0\r\n    if (yAxis.isFromZero()) {\r\n      startX = 0\r\n      if (axisLineStyles.show) {\r\n        startX += axisLineStyles.size\r\n      }\r\n      endX = startX + tickLineStyles.length\r\n    } else {\r\n      startX = bounding.width\r\n      if (axisLineStyles.show) {\r\n        startX -= axisLineStyles.size\r\n      }\r\n      endX = startX - tickLineStyles.length\r\n    }\r\n    return ticks.map(tick => ({\r\n      coordinates: [\r\n        { x: startX, y: tick.coord },\r\n        { x: endX, y: tick.coord }\r\n      ]\r\n    }))\r\n  }\r\n\r\n  override createTickTexts (ticks: AxisTick[], bounding: Bounding, styles: AxisStyle): TextAttrs[] {\r\n    const yAxis = this.getWidget().getPane().getAxisComponent()\r\n    const axisLineStyles = styles.axisLine\r\n    const tickLineStyles = styles.tickLine\r\n    const tickTextStyles = styles.tickText\r\n\r\n    let x = 0\r\n    if (yAxis.isFromZero()) {\r\n      x = tickTextStyles.marginStart\r\n      if (axisLineStyles.show) {\r\n        x += axisLineStyles.size\r\n      }\r\n      if (tickLineStyles.show) {\r\n        x += tickLineStyles.length\r\n      }\r\n    } else {\r\n      x = bounding.width - tickTextStyles.marginEnd\r\n      if (axisLineStyles.show) {\r\n        x -= axisLineStyles.size\r\n      }\r\n      if (tickLineStyles.show) {\r\n        x -= tickLineStyles.length\r\n      }\r\n    }\r\n    const textAlign = this.getWidget().getPane().getAxisComponent().isFromZero() ? 'left' : 'right'\r\n    return ticks.map(tick => ({\r\n      x,\r\n      y: tick.coord,\r\n      text: tick.text,\r\n      align: textAlign,\r\n      baseline: 'middle'\r\n    }))\r\n  }\r\n}\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport { isValid } from '../common/utils/typeChecks'\r\nimport { calcTextWidth } from '../common/utils/canvas'\r\nimport type { TextStyle } from '../common/Styles'\r\nimport { SymbolDefaultPrecisionConstants } from '../common/SymbolInfo'\r\n\r\nimport View from './View'\r\n\r\nimport type { FigureCreate } from '../component/Figure'\r\nimport type YAxis from '../component/YAxis'\r\nimport type { TextAttrs } from '../extension/figure/text'\r\n\r\nexport default class CandleLastPriceLabelView extends View {\r\n  override drawImp (ctx: CanvasRenderingContext2D): void {\r\n    const widget = this.getWidget()\r\n    const pane = widget.getPane()\r\n    const bounding = widget.getBounding()\r\n    const chartStore = pane.getChart().getChartStore()\r\n    const priceMarkStyles = chartStore.getStyles().candle.priceMark\r\n    const lastPriceMarkStyles = priceMarkStyles.last\r\n    const lastPriceMarkTextStyles = lastPriceMarkStyles.text\r\n    if (priceMarkStyles.show && lastPriceMarkStyles.show && lastPriceMarkTextStyles.show) {\r\n      const precision = chartStore.getSymbol()?.pricePrecision ?? SymbolDefaultPrecisionConstants.PRICE\r\n      const yAxis = pane.getAxisComponent() as YAxis\r\n      const dataList = chartStore.getDataList()\r\n      const data = dataList[dataList.length - 1]\r\n      if (isValid(data)) {\r\n        const { close, open } = data\r\n        const comparePrice = lastPriceMarkStyles.compareRule === 'current_open' ? open : (dataList[dataList.length - 2]?.close ?? close)\r\n        const priceY = yAxis.convertToNicePixel(close)\r\n        let backgroundColor = ''\r\n        if (close > comparePrice) {\r\n          backgroundColor = lastPriceMarkStyles.upColor\r\n        } else if (close < comparePrice) {\r\n          backgroundColor = lastPriceMarkStyles.downColor\r\n        } else {\r\n          backgroundColor = lastPriceMarkStyles.noChangeColor\r\n        }\r\n        let x = 0\r\n        let textAlgin: CanvasTextAlign = 'left'\r\n        if (yAxis.isFromZero()) {\r\n          x = 0\r\n          textAlgin = 'left'\r\n        } else {\r\n          x = bounding.width\r\n          textAlgin = 'right'\r\n        }\r\n\r\n        const textFigures: Array<FigureCreate<TextAttrs, TextStyle>> = []\r\n        const yAxisRange = yAxis.getRange()\r\n        let priceText = yAxis.displayValueToText(\r\n          yAxis.realValueToDisplayValue(\r\n            yAxis.valueToRealValue(close, { range: yAxisRange }),\r\n            { range: yAxisRange }\r\n          ),\r\n          precision\r\n        )\r\n        priceText = chartStore.getDecimalFold().format(chartStore.getThousandsSeparator().format(priceText))\r\n        const { paddingLeft, paddingRight, paddingTop, paddingBottom, size, family, weight } = lastPriceMarkTextStyles\r\n        let textWidth = paddingLeft + calcTextWidth(priceText, size, weight, family) + paddingRight\r\n        const priceTextHeight = paddingTop + size + paddingBottom\r\n        textFigures.push({\r\n          name: 'text',\r\n          attrs: {\r\n            x,\r\n            y: priceY,\r\n            width: textWidth,\r\n            height: priceTextHeight,\r\n            text: priceText,\r\n            align: textAlgin,\r\n            baseline: 'middle'\r\n          },\r\n          styles: {\r\n            ...lastPriceMarkTextStyles,\r\n            backgroundColor\r\n          }\r\n        })\r\n        const formatExtendText = chartStore.getInnerFormatter().formatExtendText\r\n        const priceTextHalfHeight = size / 2\r\n        let aboveY = priceY - priceTextHalfHeight - paddingTop\r\n        let belowY = priceY + priceTextHalfHeight + paddingBottom\r\n        lastPriceMarkStyles.extendTexts.forEach((item, index) => {\r\n          const text = formatExtendText({ type: 'last_price', data, index })\r\n          if (text.length > 0 && item.show) {\r\n            const textHalfHeight = item.size / 2\r\n            let textY = 0\r\n            if (item.position === 'above_price') {\r\n              aboveY -= (item.paddingBottom + textHalfHeight)\r\n              textY = aboveY\r\n              aboveY -= (textHalfHeight + item.paddingTop)\r\n            } else {\r\n              belowY += (item.paddingTop + textHalfHeight)\r\n              textY = belowY\r\n              belowY += (textHalfHeight + item.paddingBottom)\r\n            }\r\n            textWidth = Math.max(textWidth, item.paddingLeft + calcTextWidth(text, item.size, item.weight, item.family) + item.paddingRight)\r\n            textFigures.push({\r\n              name: 'text',\r\n              attrs: {\r\n                x,\r\n                y: textY,\r\n                width: textWidth,\r\n                height: item.paddingTop + item.size + item.paddingBottom,\r\n                text,\r\n                align: textAlgin,\r\n                baseline: 'middle'\r\n              },\r\n              styles: { ...item, backgroundColor }\r\n            })\r\n          }\r\n        })\r\n        textFigures.forEach(figure => {\r\n          figure.attrs.width = textWidth\r\n          this.createFigure(figure)?.draw(ctx)\r\n        })\r\n      }\r\n    }\r\n  }\r\n}\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport { isNumber, isValid } from '../common/utils/typeChecks'\r\n\r\nimport { eachFigures, type IndicatorFigure, type IndicatorFigureStyle } from '../component/Indicator'\r\n\r\nimport View from './View'\r\n\r\nimport type { YAxis } from '../component/YAxis'\r\n\r\nexport default class IndicatorLastValueView extends View<YAxis> {\r\n  override drawImp (ctx: CanvasRenderingContext2D): void {\r\n    const widget = this.getWidget()\r\n    const pane = widget.getPane()\r\n    const bounding = widget.getBounding()\r\n    const chartStore = pane.getChart().getChartStore()\r\n    const defaultStyles = chartStore.getStyles().indicator\r\n    const lastValueMarkStyles = defaultStyles.lastValueMark\r\n    const lastValueMarkTextStyles = lastValueMarkStyles.text\r\n    if (lastValueMarkStyles.show) {\r\n      const yAxis = pane.getAxisComponent()\r\n      const yAxisRange = yAxis.getRange()\r\n      const dataList = chartStore.getDataList()\r\n      const kLineData = dataList[dataList.length - 1] ?? {}\r\n      const prevKLineData = dataList[dataList.length - 2] ?? {}\r\n      const indicators = chartStore.getIndicatorsByPaneId(pane.getId())\r\n      const formatter = chartStore.getInnerFormatter()\r\n      const decimalFold = chartStore.getDecimalFold()\r\n      const thousandsSeparator = chartStore.getThousandsSeparator()\r\n      indicators.forEach(indicator => {\r\n        const result = indicator.result\r\n        const data = result[kLineData.timestamp] ?? result[prevKLineData.timestamp] ?? {}\r\n        if (isValid(data) && indicator.visible) {\r\n          const precision = indicator.precision\r\n          eachFigures(\r\n            indicator,\r\n            {\r\n              prev: prevKLineData.timestamp,\r\n              current: kLineData.timestamp,\r\n              next: null\r\n            },\r\n            defaultStyles,\r\n            (figure: IndicatorFigure, figureStyles: Required<IndicatorFigureStyle>) => {\r\n            // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment -- ignore\r\n              const value = data[figure.key]\r\n              if (isNumber(value)) {\r\n                const y = yAxis.convertToNicePixel(value)\r\n                let text = yAxis.displayValueToText(\r\n                  yAxis.realValueToDisplayValue(\r\n                    yAxis.valueToRealValue(value, { range: yAxisRange }),\r\n                    { range: yAxisRange }\r\n                  ),\r\n                  precision\r\n                )\r\n                if (indicator.shouldFormatBigNumber) {\r\n                  text = formatter.formatBigNumber(text)\r\n                }\r\n                text = decimalFold.format(thousandsSeparator.format(text))\r\n                let x = 0\r\n                let textAlign: CanvasTextAlign = 'left'\r\n                if (yAxis.isFromZero()) {\r\n                  x = 0\r\n                  textAlign = 'left'\r\n                } else {\r\n                  x = bounding.width\r\n                  textAlign = 'right'\r\n                }\r\n\r\n                this.createFigure({\r\n                  name: 'text',\r\n                  attrs: {\r\n                    x,\r\n                    y,\r\n                    text,\r\n                    align: textAlign,\r\n                    baseline: 'middle'\r\n                  },\r\n                  styles: {\r\n                    ...lastValueMarkTextStyles,\r\n                    backgroundColor: figureStyles.color\r\n                  }\r\n                })?.draw(ctx)\r\n              }\r\n            })\r\n        }\r\n      })\r\n    }\r\n  }\r\n}\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport type Nullable from '../common/Nullable'\r\nimport type Coordinate from '../common/Coordinate'\r\nimport { formatPrecision } from '../common/utils/format'\r\nimport { isNumber } from '../common/utils/typeChecks'\r\nimport { SymbolDefaultPrecisionConstants } from '../common/SymbolInfo'\r\n\r\nimport type { Axis } from '../component/Axis'\r\nimport type { YAxis } from '../component/YAxis'\r\nimport type { OverlayFigure, Overlay } from '../component/Overlay'\r\nimport type OverlayImp from '../component/Overlay'\r\n\r\nimport OverlayView from './OverlayView'\r\n\r\nimport type YAxisImp from '../component/YAxis'\r\n\r\nexport default class OverlayYAxisView<C extends Axis = YAxis> extends OverlayView<C> {\r\n  override coordinateToPointTimestampDataIndexFlag (): boolean {\r\n    return false\r\n  }\r\n\r\n  override drawDefaultFigures (\r\n    ctx: CanvasRenderingContext2D,\r\n    overlay: OverlayImp,\r\n    coordinates: Coordinate[]\r\n  ): void {\r\n    this.drawFigures(\r\n      ctx,\r\n      overlay,\r\n      this.getDefaultFigures(overlay, coordinates)\r\n    )\r\n  }\r\n\r\n  protected getDefaultFigures (\r\n    overlay: Overlay,\r\n    coordinates: Coordinate[]\r\n  ): OverlayFigure[] {\r\n    const widget = this.getWidget()\r\n    const pane = widget.getPane()\r\n    const chartStore = pane.getChart().getChartStore()\r\n    const clickOverlayInfo = chartStore.getClickOverlayInfo()\r\n    const figures: OverlayFigure[] = []\r\n    if (\r\n      overlay.needDefaultYAxisFigure &&\r\n      overlay.id === clickOverlayInfo.overlay?.id &&\r\n      clickOverlayInfo.paneId === pane.getId()\r\n    ) {\r\n      const yAxis = pane.getAxisComponent() as unknown as YAxisImp\r\n      const bounding = widget.getBounding()\r\n      let topY = Number.MAX_SAFE_INTEGER\r\n      let bottomY = Number.MIN_SAFE_INTEGER\r\n      const isFromZero = yAxis.isFromZero()\r\n      let textAlign: CanvasTextAlign = 'left'\r\n      let x = 0\r\n      if (isFromZero) {\r\n        textAlign = 'left'\r\n        x = 0\r\n      } else {\r\n        textAlign = 'right'\r\n        x = bounding.width\r\n      }\r\n      const decimalFold = chartStore.getDecimalFold()\r\n      const thousandsSeparator = chartStore.getThousandsSeparator()\r\n      coordinates.forEach((coordinate, index) => {\r\n        const point = overlay.points[index]\r\n        if (isNumber(point.value)) {\r\n          topY = Math.min(topY, coordinate.y)\r\n          bottomY = Math.max(bottomY, coordinate.y)\r\n          const text = decimalFold.format(thousandsSeparator.format(formatPrecision(point.value, chartStore.getSymbol()?.pricePrecision ?? SymbolDefaultPrecisionConstants.PRICE)))\r\n          figures.push({ type: 'text', attrs: { x, y: coordinate.y, text, align: textAlign, baseline: 'middle' }, ignoreEvent: true })\r\n        }\r\n      })\r\n      if (coordinates.length > 1) {\r\n        figures.unshift({ type: 'rect', attrs: { x: 0, y: topY, width: bounding.width, height: bottomY - topY }, ignoreEvent: true })\r\n      }\r\n    }\r\n    return figures\r\n  }\r\n\r\n  override getFigures (\r\n    overlay: Overlay,\r\n    coordinates: Coordinate[]\r\n  ): OverlayFigure | OverlayFigure[] {\r\n    const widget = this.getWidget()\r\n    const pane = widget.getPane()\r\n    const chart = pane.getChart()\r\n    const yAxis = pane.getAxisComponent() as unknown as Nullable<YAxis>\r\n    const xAxis = chart.getXAxisPane().getAxisComponent()\r\n    const bounding = widget.getBounding()\r\n    return overlay.createYAxisFigures?.({ chart, overlay, coordinates, bounding, xAxis, yAxis }) ?? []\r\n  }\r\n}\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport type Bounding from '../common/Bounding'\r\nimport type Crosshair from '../common/Crosshair'\r\nimport type { CrosshairStyle, CrosshairDirectionStyle, StateTextStyle } from '../common/Styles'\r\nimport { isString } from '../common/utils/typeChecks'\r\nimport { createFont } from '../common/utils/canvas'\r\nimport { SymbolDefaultPrecisionConstants } from '../common/SymbolInfo'\r\n\r\nimport type { Axis } from '../component/Axis'\r\nimport type YAxis from '../component/YAxis'\r\n\r\nimport type { TextAttrs } from '../extension/figure/text'\r\n\r\nimport type ChartStore from '../Store'\r\n\r\nimport View from './View'\r\n\r\nexport default class CrosshairHorizontalLabelView<C extends Axis = YAxis> extends View<C> {\r\n  override drawImp (ctx: CanvasRenderingContext2D): void {\r\n    const widget = this.getWidget()\r\n    const pane = widget.getPane()\r\n    const chartStore = widget.getPane().getChart().getChartStore()\r\n    const crosshair = chartStore.getCrosshair()\r\n    if (isString(crosshair.paneId) && this.compare(crosshair, pane.getId())) {\r\n      const styles = chartStore.getStyles().crosshair\r\n      if (styles.show) {\r\n        const directionStyles = this.getDirectionStyles(styles)\r\n        const textStyles = directionStyles.text\r\n        if (directionStyles.show && textStyles.show) {\r\n          const bounding = widget.getBounding()\r\n          const axis = pane.getAxisComponent()\r\n          const text = this.getText(crosshair, chartStore, axis)\r\n          ctx.font = createFont(textStyles.size, textStyles.weight, textStyles.family)\r\n          this.createFigure({\r\n            name: 'text',\r\n            attrs: this.getTextAttrs(text, ctx.measureText(text).width, crosshair, bounding, axis, textStyles),\r\n            styles: textStyles\r\n          })?.draw(ctx)\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  protected compare (crosshair: Crosshair, paneId: string): boolean {\r\n    return crosshair.paneId === paneId\r\n  }\r\n\r\n  protected getDirectionStyles (styles: CrosshairStyle): CrosshairDirectionStyle {\r\n    return styles.horizontal\r\n  }\r\n\r\n  protected getText (crosshair: Crosshair, chartStore: ChartStore, axis: Axis): string {\r\n    const yAxis = axis as unknown as YAxis\r\n    const value = axis.convertFromPixel(crosshair.y!)\r\n    let precision = 0\r\n    let shouldFormatBigNumber = false\r\n    if (yAxis.isInCandle()) {\r\n      precision = chartStore.getSymbol()?.pricePrecision ?? SymbolDefaultPrecisionConstants.PRICE\r\n    } else {\r\n      const indicators = chartStore.getIndicatorsByPaneId(crosshair.paneId!)\r\n      indicators.forEach(indicator => {\r\n        precision = Math.max(indicator.precision, precision)\r\n        shouldFormatBigNumber ||= indicator.shouldFormatBigNumber\r\n      })\r\n    }\r\n    const yAxisRange = yAxis.getRange()\r\n    let text = yAxis.displayValueToText(\r\n      yAxis.realValueToDisplayValue(\r\n        yAxis.valueToRealValue(value, { range: yAxisRange }),\r\n        { range: yAxisRange }\r\n      ),\r\n      precision\r\n    )\r\n\r\n    // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition -- ignore\r\n    if (shouldFormatBigNumber) {\r\n      text = chartStore.getInnerFormatter().formatBigNumber(text)\r\n    }\r\n    return chartStore.getDecimalFold().format(chartStore.getThousandsSeparator().format(text))\r\n  }\r\n\r\n  protected getTextAttrs (text: string, _textWidth: number, crosshair: Crosshair, bounding: Bounding, axis: Axis, _styles: StateTextStyle): TextAttrs {\r\n    const yAxis = axis as unknown as YAxis\r\n    let x = 0\r\n    let textAlign: CanvasTextAlign = 'left'\r\n    if (yAxis.isFromZero()) {\r\n      x = 0\r\n      textAlign = 'left'\r\n    } else {\r\n      x = bounding.width\r\n      textAlign = 'right'\r\n    }\r\n\r\n    return { x, y: crosshair.y!, text, align: textAlign, baseline: 'middle' }\r\n  }\r\n}\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport type DrawPane from '../pane/DrawPane'\r\n\r\nimport { WidgetNameConstants } from './types'\r\nimport DrawWidget from './DrawWidget'\r\n\r\nimport type { YAxis } from '../component/YAxis'\r\n\r\nimport YAxisView from '../view/YAxisView'\r\nimport CandleLastPriceLabelView from '../view/CandleLastPriceLabelView'\r\nimport IndicatorLastValueView from '../view/IndicatorLastValueView'\r\nimport OverlayYAxisView from '../view/OverlayYAxisView'\r\nimport CrosshairHorizontalLabelView from '../view/CrosshairHorizontalLabelView'\r\n\r\nexport default class YAxisWidget extends DrawWidget<DrawPane<YAxis>> {\r\n  private readonly _yAxisView = new YAxisView(this)\r\n  private readonly _candleLastPriceLabelView = new CandleLastPriceLabelView(this)\r\n  private readonly _indicatorLastValueView = new IndicatorLastValueView(this)\r\n  private readonly _overlayYAxisView = new OverlayYAxisView(this)\r\n  private readonly _crosshairHorizontalLabelView = new CrosshairHorizontalLabelView(this)\r\n\r\n  constructor (rootContainer: HTMLElement, pane: DrawPane<YAxis>) {\r\n    super(rootContainer, pane)\r\n    this.setCursor('ns-resize')\r\n    this.addChild(this._overlayYAxisView)\r\n  }\r\n\r\n  override getName (): string {\r\n    return WidgetNameConstants.Y_AXIS\r\n  }\r\n\r\n  override updateMain (ctx: CanvasRenderingContext2D): void {\r\n    const minimize = this.getPane().getOptions().state === 'minimize'\r\n    this._yAxisView.draw(ctx, minimize)\r\n    if (!minimize) {\r\n      if (this.getPane().getAxisComponent().isInCandle()) {\r\n        this._candleLastPriceLabelView.draw(ctx)\r\n      }\r\n      this._indicatorLastValueView.draw(ctx)\r\n    }\r\n  }\r\n\r\n  override updateOverlay (ctx: CanvasRenderingContext2D): void {\r\n    if (this.getPane().getOptions().state !== 'minimize') {\r\n      this._overlayYAxisView.draw(ctx)\r\n      this._crosshairHorizontalLabelView.draw(ctx)\r\n    }\r\n  }\r\n}\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport type VisibleRange from '../common/VisibleRange'\r\n\r\nimport type DrawPane from '../pane/DrawPane'\r\n\r\nimport type Bounding from '../common/Bounding'\r\nimport type { Chart } from '../Chart'\r\n\r\nexport interface AxisTick {\r\n  coord: number\r\n  value: number | string\r\n  text: string\r\n}\r\n\r\nexport interface AxisRange extends VisibleRange {\r\n  readonly range: number\r\n  readonly realRange: number\r\n  readonly displayFrom: number\r\n  readonly displayTo: number\r\n  readonly displayRange: number\r\n}\r\n\r\nexport interface AxisGap {\r\n  top?: number\r\n  bottom?: number\r\n}\r\n\r\nexport type AxisPosition = 'left' | 'right'\r\n\r\nexport interface AxisValueToValueParams {\r\n  range: AxisRange\r\n}\r\n\r\nexport type AxisValueToValueCallback = (value: number, params: AxisValueToValueParams) => number\r\n\r\nexport interface AxisCreateRangeParams {\r\n  chart: Chart\r\n  paneId: string\r\n  defaultRange: AxisRange\r\n}\r\n\r\nexport type AxisCreateRangeCallback = (params: AxisCreateRangeParams) => AxisRange\r\n\r\nexport interface AxisCreateTicksParams {\r\n  range: AxisRange\r\n  bounding: Bounding\r\n  defaultTicks: AxisTick[]\r\n}\r\n\r\nexport type AxisCreateTicksCallback = (params: AxisCreateTicksParams) => AxisTick[]\r\n\r\nexport type AxisMinSpanCallback = (value: number) => number\r\n\r\nexport interface AxisTemplate {\r\n  name: string\r\n  reverse?: boolean\r\n  inside?: boolean\r\n  position?: AxisPosition\r\n  scrollZoomEnabled?: boolean\r\n  gap?: AxisGap\r\n  valueToRealValue?: AxisValueToValueCallback\r\n  realValueToDisplayValue?: AxisValueToValueCallback\r\n  displayValueToRealValue?: AxisValueToValueCallback\r\n  realValueToValue?: AxisValueToValueCallback\r\n  displayValueToText?: (value: number, precision: number) => string\r\n  minSpan?: AxisMinSpanCallback\r\n  createRange?: AxisCreateRangeCallback\r\n  createTicks?: AxisCreateTicksCallback\r\n}\r\n\r\nexport interface Axis {\r\n  override: (axis: AxisTemplate) => void\r\n  getTicks: () => AxisTick[]\r\n  getRange: () => AxisRange\r\n  getAutoSize: () => number\r\n  convertToPixel: (value: number) => number\r\n  convertFromPixel: (px: number) => number\r\n}\r\n\r\nexport type AxisCreate = Omit<AxisTemplate, 'displayValueToText' | 'valueToRealValue' | 'realValueToDisplayValue' | 'displayValueToRealValue' | 'realValueToValue'>\r\n\r\nfunction getDefaultAxisRange (): AxisRange {\r\n  return {\r\n    from: 0,\r\n    to: 0,\r\n    range: 0,\r\n    realFrom: 0,\r\n    realTo: 0,\r\n    realRange: 0,\r\n    displayFrom: 0,\r\n    displayTo: 0,\r\n    displayRange: 0\r\n  }\r\n}\r\n\r\nexport default abstract class AxisImp implements Axis {\r\n  name: string\r\n  scrollZoomEnabled = true\r\n  createTicks: AxisCreateTicksCallback\r\n\r\n  private readonly _parent: DrawPane\r\n\r\n  private _range = getDefaultAxisRange()\r\n  private _prevRange = getDefaultAxisRange()\r\n  private _ticks: AxisTick[] = []\r\n\r\n  private _autoCalcTickFlag = true\r\n\r\n  constructor (parent: DrawPane) {\r\n    this._parent = parent\r\n  }\r\n\r\n  getParent (): DrawPane { return this._parent }\r\n\r\n  buildTicks (force: boolean): boolean {\r\n    if (this._autoCalcTickFlag) {\r\n      this._range = this.createRangeImp()\r\n    }\r\n    if (this._prevRange.from !== this._range.from || this._prevRange.to !== this._range.to || force) {\r\n      this._prevRange = this._range\r\n      this._ticks = this.createTicksImp()\r\n      return true\r\n    }\r\n    return false\r\n  }\r\n\r\n  getTicks (): AxisTick[] {\r\n    return this._ticks\r\n  }\r\n\r\n  setRange (range: AxisRange): void {\r\n    this._autoCalcTickFlag = false\r\n    this._range = range\r\n  }\r\n\r\n  getRange (): AxisRange { return this._range }\r\n\r\n  setAutoCalcTickFlag (flag: boolean): void {\r\n    this._autoCalcTickFlag = flag\r\n  }\r\n\r\n  getAutoCalcTickFlag (): boolean { return this._autoCalcTickFlag }\r\n\r\n  protected abstract createRangeImp (): AxisRange\r\n\r\n  protected abstract createTicksImp (): AxisTick[]\r\n\r\n  protected abstract getBounding (): Bounding\r\n\r\n  abstract override (axis: AxisTemplate): void\r\n\r\n  abstract getAutoSize (): number\r\n\r\n  abstract convertToPixel (value: number): number\r\n  abstract convertFromPixel (px: number): number\r\n}\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport type Bounding from '../common/Bounding'\r\nimport { isFunction, isNumber, isString, isValid, merge } from '../common/utils/typeChecks'\r\nimport { index10, getPrecision, nice, round } from '../common/utils/number'\r\nimport { calcTextWidth } from '../common/utils/canvas'\r\nimport { formatPrecision } from '../common/utils/format'\r\nimport { SymbolDefaultPrecisionConstants } from '../common/SymbolInfo'\r\n\r\nimport AxisImp, {\r\n  type AxisTemplate, type Axis, type AxisRange,\r\n  type AxisTick, type AxisValueToValueCallback,\r\n  type AxisMinSpanCallback, type AxisCreateRangeCallback,\r\n  type AxisPosition\r\n} from './Axis'\r\n\r\nimport type DrawPane from '../pane/DrawPane'\r\n\r\nimport { PaneIdConstants } from '../pane/types'\r\n\r\nexport type YAxisTemplate = AxisTemplate\r\n\r\nconst TICK_COUNT = 8\r\n\r\nexport interface YAxis extends Axis, Required<YAxisTemplate> {\r\n  isFromZero: () => boolean\r\n  isInCandle: () => boolean\r\n  convertToNicePixel: (value: number) => number\r\n}\r\n\r\nexport type YAxisConstructor = new (parent: DrawPane) => YAxis\r\n\r\nexport default abstract class YAxisImp extends AxisImp implements YAxis {\r\n  reverse = false\r\n  inside = false\r\n  position: AxisPosition = 'right'\r\n  gap = {\r\n    top: 0.2,\r\n    bottom: 0.1\r\n  }\r\n\r\n  createRange: AxisCreateRangeCallback = params => params.defaultRange\r\n  minSpan: AxisMinSpanCallback = precision => index10(-precision)\r\n  valueToRealValue: AxisValueToValueCallback = value => value\r\n  realValueToDisplayValue: AxisValueToValueCallback = value => value\r\n  displayValueToRealValue: AxisValueToValueCallback = value => value\r\n  realValueToValue: AxisValueToValueCallback = value => value\r\n  displayValueToText: ((value: number, precision: number) => string) = (value, precision) => formatPrecision(value, precision)\r\n\r\n  constructor (parent: DrawPane, yAxis: YAxisTemplate) {\r\n    super(parent)\r\n    this.override(yAxis)\r\n  }\r\n\r\n  override (yAxis: YAxisTemplate): void {\r\n    const {\r\n      name,\r\n      gap,\r\n      ...others\r\n    } = yAxis\r\n    if (!isString(this.name)) {\r\n      this.name = name\r\n    }\r\n    merge(this.gap, gap)\r\n    merge(this, others)\r\n  }\r\n\r\n  protected override createRangeImp (): AxisRange {\r\n    const parent = this.getParent()\r\n    const chart = parent.getChart()\r\n    const chartStore = chart.getChartStore()\r\n    const paneId = parent.getId()\r\n    let min = Number.MAX_SAFE_INTEGER\r\n    let max = Number.MIN_SAFE_INTEGER\r\n    let shouldOhlc = false\r\n    let specifyMin = Number.MAX_SAFE_INTEGER\r\n    let specifyMax = Number.MIN_SAFE_INTEGER\r\n    let indicatorPrecision = Number.MAX_SAFE_INTEGER\r\n    const indicators = chartStore.getIndicatorsByPaneId(paneId)\r\n    indicators.forEach(indicator => {\r\n      shouldOhlc ||= indicator.shouldOhlc\r\n      indicatorPrecision = Math.min(indicatorPrecision, indicator.precision)\r\n      if (isNumber(indicator.minValue)) {\r\n        specifyMin = Math.min(specifyMin, indicator.minValue)\r\n      }\r\n      if (isNumber(indicator.maxValue)) {\r\n        specifyMax = Math.max(specifyMax, indicator.maxValue)\r\n      }\r\n    })\r\n\r\n    let precision = 4\r\n    const inCandle = this.isInCandle()\r\n    if (inCandle) {\r\n      const pricePrecision = chartStore.getSymbol()?.pricePrecision ?? SymbolDefaultPrecisionConstants.PRICE\r\n      if (indicatorPrecision !== Number.MAX_SAFE_INTEGER) {\r\n        precision = Math.min(indicatorPrecision, pricePrecision)\r\n      } else {\r\n        precision = pricePrecision\r\n      }\r\n    } else {\r\n      if (indicatorPrecision !== Number.MAX_SAFE_INTEGER) {\r\n        precision = indicatorPrecision\r\n      }\r\n    }\r\n    const visibleRangeDataList = chartStore.getVisibleRangeDataList()\r\n    const candleStyles = chart.getStyles().candle\r\n    const isArea = candleStyles.type === 'area'\r\n    const areaValueKey = candleStyles.area.value\r\n    const shouldCompareHighLow = (inCandle && !isArea) || (!inCandle && shouldOhlc)\r\n    visibleRangeDataList.forEach((visibleData) => {\r\n      const kLineData = visibleData.data.current\r\n      if (isValid(kLineData)) {\r\n        if (shouldCompareHighLow) {\r\n          min = Math.min(min, kLineData.low)\r\n          max = Math.max(max, kLineData.high)\r\n        }\r\n        if (inCandle && isArea) {\r\n          const value = kLineData[areaValueKey]\r\n          if (isNumber(value)) {\r\n            min = Math.min(min, value)\r\n            max = Math.max(max, value)\r\n          }\r\n        }\r\n        indicators.forEach(({ result, figures }) => {\r\n          const data = result[kLineData.timestamp] ?? {}\r\n          figures.forEach(figure => {\r\n          // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment -- ignore\r\n            const value = data[figure.key]\r\n            if (isNumber(value)) {\r\n              min = Math.min(min, value)\r\n              max = Math.max(max, value)\r\n            }\r\n          })\r\n        })\r\n      }\r\n    })\r\n\r\n    if (min !== Number.MAX_SAFE_INTEGER && max !== Number.MIN_SAFE_INTEGER) {\r\n      min = Math.min(specifyMin, min)\r\n      max = Math.max(specifyMax, max)\r\n    } else {\r\n      min = 0\r\n      max = 10\r\n    }\r\n    const defaultDiff = max - min\r\n    const defaultRange = {\r\n      from: min,\r\n      to: max,\r\n      range: defaultDiff,\r\n      realFrom: min,\r\n      realTo: max,\r\n      realRange: defaultDiff,\r\n      displayFrom: min,\r\n      displayTo: max,\r\n      displayRange: defaultDiff\r\n    }\r\n\r\n    const range = this.createRange({\r\n      chart,\r\n      paneId,\r\n      defaultRange\r\n    })\r\n    let realFrom = range.realFrom\r\n    let realTo = range.realTo\r\n    let realRange = range.realRange\r\n    const minSpan = this.minSpan(precision)\r\n    if (\r\n      realFrom === realTo || realRange < minSpan\r\n    ) {\r\n      const minCheck = specifyMin === realFrom\r\n      const maxCheck = specifyMax === realTo\r\n      const halfTickCount = TICK_COUNT / 2\r\n      realFrom = minCheck ? realFrom : (maxCheck ? realFrom - TICK_COUNT * minSpan : realFrom - halfTickCount * minSpan)\r\n      realTo = maxCheck ? realTo : (minCheck ? realTo + TICK_COUNT * minSpan : realTo + halfTickCount * minSpan)\r\n    }\r\n\r\n    const height = this.getBounding().height\r\n    const { top, bottom } = this.gap\r\n    let topRate = top\r\n    if (topRate >= 1) {\r\n      topRate = topRate / height\r\n    }\r\n    let bottomRate = bottom\r\n    if (bottomRate >= 1) {\r\n      bottomRate = bottomRate / height\r\n    }\r\n    realRange = realTo - realFrom\r\n    realFrom = realFrom - realRange * bottomRate\r\n    realTo = realTo + realRange * topRate\r\n\r\n    const from = this.realValueToValue(realFrom, { range })\r\n    const to = this.realValueToValue(realTo, { range })\r\n    const displayFrom = this.realValueToDisplayValue(realFrom, { range })\r\n    const displayTo = this.realValueToDisplayValue(realTo, { range })\r\n    return {\r\n      from,\r\n      to,\r\n      range: to - from,\r\n      realFrom,\r\n      realTo,\r\n      realRange: realTo - realFrom,\r\n      displayFrom,\r\n      displayTo,\r\n      displayRange: displayTo - displayFrom\r\n    }\r\n  }\r\n\r\n  /**\r\n   * ÊòØÂê¶ÊòØËú°ÁÉõÂõæËΩ¥\r\n   * @return {boolean}\r\n   */\r\n  isInCandle (): boolean {\r\n    return this.getParent().getId() === PaneIdConstants.CANDLE\r\n  }\r\n\r\n  /**\r\n   * ÊòØÂê¶‰ªéyËΩ¥0ÂºÄÂßã\r\n   * @return {boolean}\r\n   */\r\n  isFromZero (): boolean {\r\n    return (\r\n      (this.position === 'left' && this.inside) ||\r\n      (this.position === 'right' && !this.inside)\r\n    )\r\n  }\r\n\r\n  protected override createTicksImp (): AxisTick[] {\r\n    const range = this.getRange()\r\n    const { displayFrom, displayTo, displayRange } = range\r\n    const ticks: AxisTick[] = []\r\n\r\n    if (displayRange >= 0) {\r\n      const interval = nice(displayRange / TICK_COUNT)\r\n      const precision = getPrecision(interval)\r\n\r\n      const first = round(Math.ceil(displayFrom / interval) * interval, precision)\r\n      const last = round(Math.floor(displayTo / interval) * interval, precision)\r\n      let n = 0\r\n      let f = first\r\n\r\n      if (interval !== 0) {\r\n        while (f <= last) {\r\n          const v = f.toFixed(precision)\r\n          ticks[n] = { text: v, coord: 0, value: v }\r\n          ++n\r\n          f += interval\r\n        }\r\n      }\r\n    }\r\n\r\n    const pane = this.getParent()\r\n    const height = pane.getYAxisWidget()?.getBounding().height ?? 0\r\n    const chartStore = pane.getChart().getChartStore()\r\n    const optimalTicks: AxisTick[] = []\r\n    const indicators = chartStore.getIndicatorsByPaneId(pane.getId())\r\n    const styles = chartStore.getStyles()\r\n    let precision = 0\r\n    let shouldFormatBigNumber = false\r\n    if (this.isInCandle()) {\r\n      precision = chartStore.getSymbol()?.pricePrecision ?? SymbolDefaultPrecisionConstants.PRICE\r\n    } else {\r\n      indicators.forEach(indicator => {\r\n        precision = Math.max(precision, indicator.precision)\r\n        shouldFormatBigNumber ||= indicator.shouldFormatBigNumber\r\n      })\r\n    }\r\n    const formatter = chartStore.getInnerFormatter()\r\n    const thousandsSeparator = chartStore.getThousandsSeparator()\r\n    const decimalFold = chartStore.getDecimalFold()\r\n    const textHeight = styles.xAxis.tickText.size\r\n    let validY = NaN\r\n    ticks.forEach(({ value }) => {\r\n      let v = this.displayValueToText(+value, precision)\r\n      const y = this.convertToPixel(\r\n        this.realValueToValue(\r\n          this.displayValueToRealValue(+value, { range }),\r\n          { range }\r\n        )\r\n      )\r\n      if (shouldFormatBigNumber) {\r\n        v = formatter.formatBigNumber(value)\r\n      }\r\n      v = decimalFold.format(thousandsSeparator.format(v))\r\n      const validYNumber = isNumber(validY)\r\n      if (\r\n        y > textHeight &&\r\n        y < height - textHeight &&\r\n        ((validYNumber && (Math.abs(validY - y) > textHeight * 2)) || !validYNumber)) {\r\n        optimalTicks.push({ text: v, coord: y, value })\r\n        validY = y\r\n      }\r\n    })\r\n    if (isFunction(this.createTicks)) {\r\n      return this.createTicks({\r\n        range: this.getRange(),\r\n        bounding: this.getBounding(),\r\n        defaultTicks: optimalTicks\r\n      })\r\n    }\r\n    return optimalTicks\r\n  }\r\n\r\n  override getAutoSize (): number {\r\n    const pane = this.getParent()\r\n    const chart = pane.getChart()\r\n    const chartStore = chart.getChartStore()\r\n    const styles = chartStore.getStyles()\r\n    const yAxisStyles = styles.yAxis\r\n    const width = yAxisStyles.size\r\n    if (width !== 'auto') {\r\n      return width\r\n    }\r\n    let yAxisWidth = 0\r\n    if (yAxisStyles.show) {\r\n      if (yAxisStyles.axisLine.show) {\r\n        yAxisWidth += yAxisStyles.axisLine.size\r\n      }\r\n      if (yAxisStyles.tickLine.show) {\r\n        yAxisWidth += yAxisStyles.tickLine.length\r\n      }\r\n      if (yAxisStyles.tickText.show) {\r\n        let textWidth = 0\r\n        this.getTicks().forEach(tick => {\r\n          textWidth = Math.max(textWidth, calcTextWidth(tick.text, yAxisStyles.tickText.size, yAxisStyles.tickText.weight, yAxisStyles.tickText.family))\r\n        })\r\n        yAxisWidth += (yAxisStyles.tickText.marginStart + yAxisStyles.tickText.marginEnd + textWidth)\r\n      }\r\n    }\r\n\r\n    const priceMarkStyles = styles.candle.priceMark\r\n    const lastPriceMarkTextVisible = priceMarkStyles.show && priceMarkStyles.last.show && priceMarkStyles.last.text.show\r\n    let lastPriceTextWidth = 0\r\n\r\n    const crosshairStyles = styles.crosshair\r\n    const crosshairHorizontalTextVisible = crosshairStyles.show && crosshairStyles.horizontal.show && crosshairStyles.horizontal.text.show\r\n    let crosshairHorizontalTextWidth = 0\r\n\r\n    if (lastPriceMarkTextVisible || crosshairHorizontalTextVisible) {\r\n      const pricePrecision = chartStore.getSymbol()?.pricePrecision ?? SymbolDefaultPrecisionConstants.PRICE\r\n      const max = this.getRange().displayTo\r\n\r\n      if (lastPriceMarkTextVisible) {\r\n        const dataList = chartStore.getDataList()\r\n        const data = dataList[dataList.length - 1]\r\n        if (isValid(data)) {\r\n          const { paddingLeft, paddingRight, size, family, weight } = priceMarkStyles.last.text\r\n          lastPriceTextWidth = paddingLeft + calcTextWidth(formatPrecision(data.close, pricePrecision), size, weight, family) + paddingRight\r\n          const formatExtendText = chartStore.getInnerFormatter().formatExtendText\r\n          priceMarkStyles.last.extendTexts.forEach((item, index) => {\r\n            const text = formatExtendText({ type: 'last_price', data, index })\r\n            if (text.length > 0 && item.show) {\r\n              lastPriceTextWidth = Math.max(lastPriceTextWidth, item.paddingLeft + calcTextWidth(text, item.size, item.weight, item.family) + item.paddingRight)\r\n            }\r\n          })\r\n        }\r\n      }\r\n\r\n      if (crosshairHorizontalTextVisible) {\r\n        const indicators = chartStore.getIndicatorsByPaneId(pane.getId())\r\n        let indicatorPrecision = 0\r\n        let shouldFormatBigNumber = false\r\n        indicators.forEach(indicator => {\r\n          indicatorPrecision = Math.max(indicator.precision, indicatorPrecision)\r\n          shouldFormatBigNumber ||= indicator.shouldFormatBigNumber\r\n        })\r\n        let precision = 2\r\n        if (this.isInCandle()) {\r\n          const lastValueMarkStyles = styles.indicator.lastValueMark\r\n          if (lastValueMarkStyles.show && lastValueMarkStyles.text.show) {\r\n            precision = Math.max(indicatorPrecision, pricePrecision)\r\n          } else {\r\n            precision = pricePrecision\r\n          }\r\n        } else {\r\n          precision = indicatorPrecision\r\n        }\r\n        let valueText = formatPrecision(max, precision)\r\n        // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition -- ignore\r\n        if (shouldFormatBigNumber) {\r\n          valueText = chartStore.getInnerFormatter().formatBigNumber(valueText)\r\n        }\r\n        valueText = chartStore.getDecimalFold().format(valueText)\r\n        crosshairHorizontalTextWidth += (\r\n          crosshairStyles.horizontal.text.paddingLeft +\r\n          crosshairStyles.horizontal.text.paddingRight +\r\n          crosshairStyles.horizontal.text.borderSize * 2 +\r\n          calcTextWidth(\r\n            valueText,\r\n            crosshairStyles.horizontal.text.size,\r\n            crosshairStyles.horizontal.text.weight,\r\n            crosshairStyles.horizontal.text.family\r\n          )\r\n        )\r\n      }\r\n    }\r\n    return Math.max(yAxisWidth, lastPriceTextWidth, crosshairHorizontalTextWidth)\r\n  }\r\n\r\n  protected override getBounding (): Bounding {\r\n    return this.getParent().getYAxisWidget()!.getBounding()\r\n  }\r\n\r\n  convertFromPixel (pixel: number): number {\r\n    const height = this.getBounding().height\r\n    const range = this.getRange()\r\n    const { realFrom, realRange } = range\r\n    const rate = this.reverse ? pixel / height : 1 - pixel / height\r\n    const realValue = rate * realRange + realFrom\r\n    return this.realValueToValue(realValue, { range })\r\n  }\r\n\r\n  convertToPixel (value: number): number {\r\n    const range = this.getRange()\r\n    const realValue = this.valueToRealValue(value, { range })\r\n    const height = this.getParent().getYAxisWidget()?.getBounding().height ?? 0\r\n    const { realFrom, realRange } = range\r\n    const rate = (realValue - realFrom) / realRange\r\n    return this.reverse ? Math.round(rate * height) : Math.round((1 - rate) * height)\r\n  }\r\n\r\n  convertToNicePixel (value: number): number {\r\n    const height = this.getParent().getYAxisWidget()?.getBounding().height ?? 0\r\n    const pixel = this.convertToPixel(value)\r\n    return Math.round(Math.max(height * 0.05, Math.min(pixel, height * 0.98)))\r\n  }\r\n\r\n  static extend (template: YAxisTemplate): YAxisConstructor {\r\n    class Custom extends YAxisImp {\r\n      constructor (parent: DrawPane) {\r\n        super(parent, template)\r\n      }\r\n    }\r\n    return Custom\r\n  }\r\n}\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport type { AxisTemplate } from '../../component/Axis'\r\n\r\nconst normal: AxisTemplate = {\r\n  name: 'normal'\r\n}\r\n\r\nexport default normal\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport { formatPrecision } from '../../common/utils/format'\r\nimport { isValid } from '../../common/utils/typeChecks'\r\nimport type { AxisTemplate } from '../../component/Axis'\r\n\r\nconst percentage: AxisTemplate = {\r\n  name: 'percentage',\r\n  minSpan: () => Math.pow(10, -2),\r\n  displayValueToText: value => `${formatPrecision(value, 2)}%`,\r\n  valueToRealValue: (value, { range }) => (value - range.from) / range.range * range.realRange + range.realFrom,\r\n  realValueToValue: (value, { range }) => (value - range.realFrom) / range.realRange * range.range + range.from,\r\n  createRange: ({ chart, defaultRange }) => {\r\n    const kLineDataList = chart.getDataList()\r\n    const visibleRange = chart.getVisibleRange()\r\n    const kLineData = kLineDataList[visibleRange.from]\r\n    if (isValid(kLineData)) {\r\n      const { from, to, range } = defaultRange\r\n      const realFrom = (defaultRange.from - kLineData.close) / kLineData.close * 100\r\n      const realTo = (defaultRange.to - kLineData.close) / kLineData.close * 100\r\n      const realRange = realTo - realFrom\r\n      return {\r\n        from,\r\n        to,\r\n        range,\r\n        realFrom,\r\n        realTo,\r\n        realRange,\r\n        displayFrom: realFrom,\r\n        displayTo: realTo,\r\n        displayRange: realRange\r\n      }\r\n    }\r\n    return defaultRange\r\n  }\r\n}\r\n\r\nexport default percentage\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport { log10, index10 } from '../../common/utils/number'\r\nimport type { AxisTemplate } from '../../component/Axis'\r\n\r\nconst logarithm: AxisTemplate = {\r\n  name: 'logarithm',\r\n  minSpan: (precision) => 0.05 * index10(-precision),\r\n  valueToRealValue: (value) => value < 0 ? -log10(Math.abs(value)) : log10(value),\r\n  realValueToDisplayValue: (value) => value < 0 ? -index10(Math.abs(value)) : index10(value),\r\n  displayValueToRealValue: (value) => value < 0 ? -log10(Math.abs(value)) : log10(value),\r\n  realValueToValue: (value) => value < 0 ? -index10(Math.abs(value)) : index10(value),\r\n  createRange: ({ defaultRange }) => {\r\n    const { from, to, range } = defaultRange\r\n    const realFrom = from < 0 ? -log10(Math.abs(from)) : log10(from)\r\n    const realTo = to < 0 ? -log10(Math.abs(to)) : log10(to)\r\n    return {\r\n      from,\r\n      to,\r\n      range,\r\n      realFrom,\r\n      realTo,\r\n      realRange: realTo - realFrom,\r\n      displayFrom: from,\r\n      displayTo: to,\r\n      displayRange: range\r\n    }\r\n  }\r\n}\r\n\r\nexport default logarithm\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport YAxisImp, { type YAxisTemplate, type YAxisConstructor } from '../../component/YAxis'\r\n\r\nimport normal from './normal'\r\nimport percentage from './percentage'\r\nimport logarithm from './logarithm'\r\n\r\nconst yAxises: Record<string, YAxisConstructor> = {\r\n  normal: YAxisImp.extend(normal),\r\n  percentage: YAxisImp.extend(percentage),\r\n  logarithm: YAxisImp.extend(logarithm)\r\n}\r\n\r\nfunction registerYAxis (axis: YAxisTemplate): void {\r\n  yAxises[axis.name] = YAxisImp.extend(axis)\r\n}\r\n\r\nfunction getYAxisClass (name: string): YAxisConstructor {\r\n  return yAxises[name] ?? yAxises.normal\r\n}\r\n\r\nexport {\r\n  registerYAxis,\r\n  getYAxisClass\r\n}\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport type Updater from '../common/Updater'\r\nimport { UpdateLevel } from '../common/Updater'\r\nimport type Bounding from '../common/Bounding'\r\nimport { createDefaultBounding } from '../common/Bounding'\r\nimport { createDom } from '../common/utils/dom'\r\nimport { merge } from '../common/utils/typeChecks'\r\n\r\nimport type Chart from '../Chart'\r\n\r\nexport default abstract class Pane implements Updater {\r\n  private readonly _container: HTMLElement\r\n  private readonly _id: string\r\n  private readonly _chart: Chart\r\n\r\n  private readonly _bounding = createDefaultBounding()\r\n\r\n  private readonly _originalBounding = createDefaultBounding()\r\n\r\n  private _visible = true\r\n\r\n  constructor (chart: Chart, id: string) {\r\n    this._chart = chart\r\n    this._id = id\r\n    this._container = createDom('div', {\r\n      width: '100%',\r\n      margin: '0',\r\n      padding: '0',\r\n      position: 'relative',\r\n      overflow: 'hidden',\r\n      boxSizing: 'border-box'\r\n    })\r\n  }\r\n\r\n  getContainer (): HTMLElement {\r\n    return this._container\r\n  }\r\n\r\n  setVisible (visible: boolean): void {\r\n    if (this._visible !== visible) {\r\n      this._container.style.display = visible ? 'block' : 'none'\r\n      this._visible = visible\r\n    }\r\n  }\r\n\r\n  getVisible (): boolean {\r\n    return this._visible\r\n  }\r\n\r\n  getId (): string {\r\n    return this._id\r\n  }\r\n\r\n  getChart (): Chart {\r\n    return this._chart\r\n  }\r\n\r\n  getBounding (): Bounding {\r\n    return this._bounding\r\n  }\r\n\r\n  setOriginalBounding (bounding: Partial<Bounding>): void {\r\n    merge(this._originalBounding, bounding)\r\n  }\r\n\r\n  getOriginalBounding (): Bounding {\r\n    return this._originalBounding\r\n  }\r\n\r\n  update (level?: UpdateLevel): void {\r\n    if (this._bounding.height !== this._container.clientHeight) {\r\n      this._container.style.height = `${this._bounding.height}px`\r\n    }\r\n    this.updateImp(level ?? UpdateLevel.Drawer, this._container, this._bounding)\r\n  }\r\n\r\n  abstract setBounding (...bounding: Array<Partial<Bounding>>): Pane\r\n\r\n  abstract getImage (includeOverlay: boolean): HTMLCanvasElement\r\n\r\n  abstract updateImp (level: UpdateLevel, container: HTMLElement, bounding: Bounding): void\r\n}\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport type DeepRequired from '../common/DeepRequired'\r\nimport type Nullable from '../common/Nullable'\r\nimport type { UpdateLevel } from '../common/Updater'\r\nimport type Bounding from '../common/Bounding'\r\n\r\nimport { isValid, merge } from '../common/utils/typeChecks'\r\n\r\nimport type { Axis } from '../component/Axis'\r\n\r\nimport type DrawWidget from '../widget/DrawWidget'\r\nimport type YAxisWidget from '../widget/YAxisWidget'\r\n\r\nimport Pane from './Pane'\r\nimport { type PaneOptions, PANE_DEFAULT_HEIGHT, PANE_MIN_HEIGHT, PaneIdConstants } from './types'\r\n\r\nimport type Chart from '../Chart'\r\n\r\nimport { createDom } from '../common/utils/dom'\r\nimport { getPixelRatio } from '../common/utils/canvas'\r\nimport YAxisImp, { type YAxis } from '../component/YAxis'\r\n\r\nexport default abstract class DrawPane<C extends Axis = Axis> extends Pane {\r\n  private readonly _mainWidget: DrawWidget<DrawPane<C>>\r\n  private readonly _yAxisWidget: Nullable<YAxisWidget> = null\r\n\r\n  private _axis: C\r\n\r\n  private readonly _options: DeepRequired<PaneOptions> = {\r\n    id: '',\r\n    minHeight: PANE_MIN_HEIGHT,\r\n    dragEnabled: true,\r\n    order: 0,\r\n    height: PANE_DEFAULT_HEIGHT,\r\n    state: 'normal',\r\n    axis: { name: 'normal', scrollZoomEnabled: true }\r\n  }\r\n\r\n  constructor (chart: Chart, id: string, options: Omit<PaneOptions, 'id' | 'height'>) {\r\n    super(chart, id)\r\n    const container = this.getContainer()\r\n    this._mainWidget = this.createMainWidget(container)\r\n    this._yAxisWidget = this.createYAxisWidget(container)\r\n    this.setOptions(options)\r\n  }\r\n\r\n  setOptions (options: PaneOptions): this {\r\n    const paneId = this.getId()\r\n    if (paneId === PaneIdConstants.CANDLE || paneId === PaneIdConstants.X_AXIS) {\r\n      const axisName = options.axis?.name\r\n      if (\r\n        !isValid(this._axis) ||\r\n        (isValid(axisName) && this._options.axis.name !== axisName)\r\n      ) {\r\n        this._axis = this.createAxisComponent(axisName ?? 'normal')\r\n      }\r\n    } else {\r\n      if (!isValid(this._axis)) {\r\n        this._axis = this.createAxisComponent('normal')\r\n      }\r\n    }\r\n    if (this._axis instanceof YAxisImp) {\r\n      this._axis.setAutoCalcTickFlag(true)\r\n    }\r\n    merge(this._options, options)\r\n    this._axis.override({\r\n      ...this._options.axis,\r\n      name: options.axis?.name ?? 'normal'\r\n    })\r\n    let container: Nullable<HTMLElement> = null\r\n    let cursor = 'default'\r\n    if (this.getId() === PaneIdConstants.X_AXIS) {\r\n      container = this.getMainWidget().getContainer()\r\n      cursor = 'ew-resize'\r\n    } else {\r\n      container = this.getYAxisWidget()!.getContainer()\r\n      cursor = 'ns-resize'\r\n    }\r\n    if (options.axis?.scrollZoomEnabled ?? true) {\r\n      container.style.cursor = cursor\r\n    } else {\r\n      container.style.cursor = 'default'\r\n    }\r\n    return this\r\n  }\r\n\r\n  getOptions (): DeepRequired<PaneOptions> { return this._options }\r\n\r\n  getAxisComponent (): C {\r\n    return this._axis\r\n  }\r\n\r\n  override setBounding (\r\n    rootBounding: Partial<Bounding>,\r\n    mainBounding?: Partial<Bounding>,\r\n    leftYAxisBounding?: Partial<Bounding>,\r\n    rightYAxisBounding?: Partial<Bounding>\r\n  ): this {\r\n    merge(this.getBounding(), rootBounding)\r\n    const contentBounding: Partial<Bounding> = {}\r\n    if (isValid(rootBounding.height)) {\r\n      contentBounding.height = rootBounding.height\r\n    }\r\n    if (isValid(rootBounding.top)) {\r\n      contentBounding.top = rootBounding.top\r\n    }\r\n    this._mainWidget.setBounding(contentBounding)\r\n    const mainBoundingValid = isValid(mainBounding)\r\n    if (mainBoundingValid) {\r\n      this._mainWidget.setBounding(mainBounding)\r\n    }\r\n    if (isValid(this._yAxisWidget)) {\r\n      this._yAxisWidget.setBounding(contentBounding)\r\n      const yAxis = this._axis as unknown as YAxis\r\n      if (yAxis.position === 'left') {\r\n        if (isValid(leftYAxisBounding)) {\r\n          this._yAxisWidget.setBounding({ ...leftYAxisBounding, left: 0 })\r\n        }\r\n      } else {\r\n        if (isValid(rightYAxisBounding)) {\r\n          this._yAxisWidget.setBounding(rightYAxisBounding)\r\n          if (mainBoundingValid) {\r\n            this._yAxisWidget.setBounding({\r\n              left: (mainBounding.left ?? 0) +\r\n                (mainBounding.width ?? 0) +\r\n                (mainBounding.right ?? 0) -\r\n                (rightYAxisBounding.width ?? 0)\r\n            })\r\n          }\r\n        }\r\n      }\r\n    }\r\n    return this\r\n  }\r\n\r\n  getMainWidget (): DrawWidget<DrawPane<C>> { return this._mainWidget }\r\n\r\n  getYAxisWidget (): Nullable<YAxisWidget> { return this._yAxisWidget }\r\n\r\n  override updateImp (level: UpdateLevel): void {\r\n    this._mainWidget.update(level)\r\n    this._yAxisWidget?.update(level)\r\n  }\r\n\r\n  destroy (): void {\r\n    this._mainWidget.destroy()\r\n    this._yAxisWidget?.destroy()\r\n  }\r\n\r\n  override getImage (includeOverlay: boolean): HTMLCanvasElement {\r\n    const { width, height } = this.getBounding()\r\n    const canvas = createDom('canvas', {\r\n      width: `${width}px`,\r\n      height: `${height}px`,\r\n      boxSizing: 'border-box'\r\n    })\r\n    const ctx = canvas.getContext('2d')!\r\n    const pixelRatio = getPixelRatio(canvas)\r\n    canvas.width = width * pixelRatio\r\n    canvas.height = height * pixelRatio\r\n    ctx.scale(pixelRatio, pixelRatio)\r\n\r\n    const mainBounding = this._mainWidget.getBounding()\r\n    ctx.drawImage(\r\n      this._mainWidget.getImage(includeOverlay),\r\n      mainBounding.left, 0,\r\n      mainBounding.width, mainBounding.height\r\n    )\r\n    if (this._yAxisWidget !== null) {\r\n      const yAxisBounding = this._yAxisWidget.getBounding()\r\n      ctx.drawImage(\r\n        this._yAxisWidget.getImage(includeOverlay),\r\n        yAxisBounding.left, 0,\r\n        yAxisBounding.width, yAxisBounding.height\r\n      )\r\n    }\r\n    return canvas\r\n  }\r\n\r\n  protected abstract createAxisComponent (name: string): C\r\n\r\n  protected createYAxisWidget (_container: HTMLElement): Nullable<YAxisWidget> { return null }\r\n\r\n  protected abstract createMainWidget (container: HTMLElement): DrawWidget<DrawPane<C>>\r\n}\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport type Nullable from '../common/Nullable'\r\n\r\nimport type DrawWidget from '../widget/DrawWidget'\r\nimport IndicatorWidget from '../widget/IndicatorWidget'\r\nimport YAxisWidget from '../widget/YAxisWidget'\r\n\r\nimport type { YAxis } from '../component/YAxis'\r\n\r\nimport { getYAxisClass } from '../extension/y-axis'\r\n\r\nimport DrawPane from './DrawPane'\r\n\r\nexport default class IndicatorPane extends DrawPane<YAxis> {\r\n  override createAxisComponent (name?: string): YAxis {\r\n    const YAxisClass = getYAxisClass(name ?? 'default')\r\n    return new YAxisClass(this)\r\n  }\r\n\r\n  override createMainWidget (container: HTMLElement): DrawWidget<DrawPane<YAxis>> {\r\n    return new IndicatorWidget(container, this)\r\n  }\r\n\r\n  override createYAxisWidget (container: HTMLElement): Nullable<YAxisWidget> {\r\n    return new YAxisWidget(container, this)\r\n  }\r\n}\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport type DrawWidget from '../widget/DrawWidget'\r\nimport CandleWidget from '../widget/CandleWidget'\r\n\r\nimport type DrawPane from './DrawPane'\r\nimport IndicatorPane from './IndicatorPane'\r\nimport type { YAxis } from '../component/YAxis'\r\n\r\nexport default class CandlePane extends IndicatorPane {\r\n  override createMainWidget (container: HTMLElement): DrawWidget<DrawPane<YAxis>> {\r\n    return new CandleWidget(container, this)\r\n  }\r\n}\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport type Bounding from '../common/Bounding'\r\nimport type { AxisStyle, Styles } from '../common/Styles'\r\n\r\nimport type { LineAttrs } from '../extension/figure/line'\r\nimport type { TextAttrs } from '../extension/figure/text'\r\n\r\nimport type { AxisTick } from '../component/Axis'\r\nimport type { XAxis } from '../component/XAxis'\r\n\r\nimport AxisView from './AxisView'\r\n\r\nexport default class XAxisView extends AxisView<XAxis> {\r\n  override getAxisStyles (styles: Styles): AxisStyle {\r\n    return styles.xAxis\r\n  }\r\n\r\n  override createAxisLine (bounding: Bounding): LineAttrs {\r\n    return {\r\n      coordinates: [\r\n        { x: 0, y: 0 },\r\n        { x: bounding.width, y: 0 }\r\n      ]\r\n    }\r\n  }\r\n\r\n  override createTickLines (ticks: AxisTick[], _bounding: Bounding, styles: AxisStyle): LineAttrs[] {\r\n    const tickLineStyles = styles.tickLine\r\n    const axisLineSize = styles.axisLine.size\r\n    return ticks.map(tick => ({\r\n      coordinates: [\r\n        { x: tick.coord, y: 0 },\r\n        { x: tick.coord, y: axisLineSize + tickLineStyles.length }\r\n      ]\r\n    }))\r\n  }\r\n\r\n  override createTickTexts (ticks: AxisTick[], _bounding: Bounding, styles: AxisStyle): TextAttrs[] {\r\n    const tickTickStyles = styles.tickText\r\n    const axisLineSize = styles.axisLine.size\r\n    const tickLineLength = styles.tickLine.length\r\n    return ticks.map(tick => ({\r\n      x: tick.coord,\r\n      y: axisLineSize + tickLineLength + tickTickStyles.marginStart,\r\n      text: tick.text,\r\n      align: 'center',\r\n      baseline: 'top'\r\n    }))\r\n  }\r\n}\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport type Nullable from '../common/Nullable'\r\nimport type Coordinate from '../common/Coordinate'\r\n\r\nimport { isNumber } from '../common/utils/typeChecks'\r\n\r\nimport type { XAxis } from '../component/XAxis'\r\nimport type { YAxis } from '../component/YAxis'\r\nimport type { OverlayFigure, Overlay } from '../component/Overlay'\r\nimport type OverlayImp from '../component/Overlay'\r\n\r\nimport OverlayYAxisView from './OverlayYAxisView'\r\n\r\nexport default class OverlayXAxisView extends OverlayYAxisView<XAxis> {\r\n  override coordinateToPointTimestampDataIndexFlag (): boolean {\r\n    return true\r\n  }\r\n\r\n  override coordinateToPointValueFlag (): boolean {\r\n    return false\r\n  }\r\n\r\n  override getCompleteOverlays (): OverlayImp[] {\r\n    return this.getWidget().getPane().getChart().getChartStore().getOverlaysByPaneId()\r\n  }\r\n\r\n  override getProgressOverlay (): Nullable<OverlayImp> {\r\n    return this.getWidget().getPane().getChart().getChartStore().getProgressOverlayInfo()?.overlay ?? null\r\n  }\r\n\r\n  override getDefaultFigures (\r\n    overlay: Overlay,\r\n    coordinates: Coordinate[]\r\n  ): OverlayFigure[] {\r\n    const figures: OverlayFigure[] = []\r\n    const widget = this.getWidget()\r\n    const pane = widget.getPane()\r\n    const chartStore = pane.getChart().getChartStore()\r\n    const clickOverlayInfo = chartStore.getClickOverlayInfo()\r\n    if (overlay.needDefaultXAxisFigure && overlay.id === clickOverlayInfo.overlay?.id) {\r\n      let leftX = Number.MAX_SAFE_INTEGER\r\n      let rightX = Number.MIN_SAFE_INTEGER\r\n      coordinates.forEach((coordinate, index) => {\r\n        leftX = Math.min(leftX, coordinate.x)\r\n        rightX = Math.max(rightX, coordinate.x)\r\n        const point = overlay.points[index]\r\n        if (isNumber(point.timestamp)) {\r\n          const text = chartStore.getInnerFormatter().formatDate(point.timestamp, 'YYYY-MM-DD HH:mm', 'crosshair')\r\n          figures.push({ type: 'text', attrs: { x: coordinate.x, y: 0, text, align: 'center' }, ignoreEvent: true })\r\n        }\r\n      })\r\n      if (coordinates.length > 1) {\r\n        figures.unshift({ type: 'rect', attrs: { x: leftX, y: 0, width: rightX - leftX, height: widget.getBounding().height }, ignoreEvent: true })\r\n      }\r\n    }\r\n    return figures\r\n  }\r\n\r\n  override getFigures (\r\n    o: Overlay,\r\n    coordinates: Coordinate[]\r\n  ): OverlayFigure | OverlayFigure[] {\r\n    const widget = this.getWidget()\r\n    const pane = widget.getPane()\r\n    const chart = pane.getChart()\r\n    const yAxis = pane.getAxisComponent() as unknown as Nullable<YAxis>\r\n    const xAxis = chart.getXAxisPane().getAxisComponent()\r\n    const bounding = widget.getBounding()\r\n    return o.createXAxisFigures?.({ chart, overlay: o, coordinates, bounding, xAxis, yAxis }) ?? []\r\n  }\r\n}\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport type Bounding from '../common/Bounding'\r\nimport type Crosshair from '../common/Crosshair'\r\nimport type { CrosshairStyle, CrosshairDirectionStyle, StateTextStyle } from '../common/Styles'\r\nimport { isValid } from '../common/utils/typeChecks'\r\n\r\nimport type { Axis } from '../component/Axis'\r\nimport type { XAxis } from '../component/XAxis'\r\n\r\nimport type ChartStore from '../Store'\r\n\r\nimport CrosshairHorizontalLabelView from './CrosshairHorizontalLabelView'\r\nimport type { TextAttrs } from '../extension/figure/text'\r\nimport { PeriodTypeCrosshairTooltipFormat } from '../common/Period'\r\n\r\nexport default class CrosshairVerticalLabelView extends CrosshairHorizontalLabelView<XAxis> {\r\n  override compare (crosshair: Crosshair): boolean {\r\n    return isValid(crosshair.timestamp)\r\n  }\r\n\r\n  override getDirectionStyles (styles: CrosshairStyle): CrosshairDirectionStyle {\r\n    return styles.vertical\r\n  }\r\n\r\n  override getText (crosshair: Crosshair, chartStore: ChartStore): string {\r\n    const timestamp = crosshair.timestamp!\r\n    return chartStore.getInnerFormatter().formatDate(timestamp, PeriodTypeCrosshairTooltipFormat[chartStore.getPeriod()?.type ?? 'day'], 'crosshair')\r\n  }\r\n\r\n  override getTextAttrs (text: string, textWidth: number, crosshair: Crosshair, bounding: Bounding, _axis: Axis, styles: StateTextStyle): TextAttrs {\r\n    const x = crosshair.realX!\r\n    let optimalX = 0\r\n    let align: CanvasTextAlign = 'center'\r\n    if (x - textWidth / 2 - styles.paddingLeft < 0) {\r\n      optimalX = 0\r\n      align = 'left'\r\n    } else if (x + textWidth / 2 + styles.paddingRight > bounding.width) {\r\n      optimalX = bounding.width\r\n      align = 'right'\r\n    } else {\r\n      optimalX = x\r\n    }\r\n    return { x: optimalX, y: 0, text, align, baseline: 'top' }\r\n  }\r\n}\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport { WidgetNameConstants } from './types'\r\nimport DrawWidget from './DrawWidget'\r\n\r\nimport type DrawPane from '../pane/DrawPane'\r\n\r\nimport type { XAxis } from '../component/XAxis'\r\n\r\nimport XAxisView from '../view/XAxisView'\r\nimport OverlayXAxisView from '../view/OverlayXAxisView'\r\nimport CrosshairVerticalLabelView from '../view/CrosshairVerticalLabelView'\r\n\r\nexport default class XAxisWidget extends DrawWidget<DrawPane<XAxis>> {\r\n  private readonly _xAxisView = new XAxisView(this)\r\n  private readonly _overlayXAxisView = new OverlayXAxisView(this)\r\n  private readonly _crosshairVerticalLabelView = new CrosshairVerticalLabelView(this)\r\n\r\n  constructor (rootContainer: HTMLElement, pane: DrawPane<XAxis>) {\r\n    super(rootContainer, pane)\r\n    this.setCursor('ew-resize')\r\n    this.addChild(this._overlayXAxisView)\r\n  }\r\n\r\n  override getName (): string {\r\n    return WidgetNameConstants.X_AXIS\r\n  }\r\n\r\n  override updateMain (ctx: CanvasRenderingContext2D): void {\r\n    this._xAxisView.draw(ctx)\r\n  }\r\n\r\n  override updateOverlay (ctx: CanvasRenderingContext2D): void {\r\n    this._overlayXAxisView.draw(ctx)\r\n    this._crosshairVerticalLabelView.draw(ctx)\r\n  }\r\n}\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport type Nullable from '../common/Nullable'\r\nimport type Bounding from '../common/Bounding'\r\nimport { isFunction, isNumber, isString } from '../common/utils/typeChecks'\r\n\r\nimport AxisImp, { type AxisTemplate, type Axis, type AxisRange, type AxisTick } from './Axis'\r\n\r\nimport type DrawPane from '../pane/DrawPane'\r\nimport { calcTextWidth } from '../common/utils/canvas'\r\nimport { PeriodTypeXAxisFormat } from '../common/Period'\r\n\r\nexport type XAxisTemplate = Pick<AxisTemplate, 'name' | 'scrollZoomEnabled' | 'createTicks'>\r\n\r\nexport interface XAxis extends Axis, Required<XAxisTemplate> {\r\n  convertTimestampFromPixel: (pixel: number) => Nullable<number>\r\n  convertTimestampToPixel: (timestamp: number) => number\r\n}\r\n\r\nexport type XAxisConstructor = new (parent: DrawPane) => XAxis\r\n\r\nexport default abstract class XAxisImp extends AxisImp implements XAxis {\r\n  constructor (parent: DrawPane, xAxis: XAxisTemplate) {\r\n    super(parent)\r\n    this.override(xAxis)\r\n  }\r\n\r\n  override (xAxis: XAxisTemplate): void {\r\n    const {\r\n      name,\r\n      scrollZoomEnabled,\r\n      createTicks\r\n    } = xAxis\r\n    if (!isString(this.name)) {\r\n      this.name = name\r\n    }\r\n    this.scrollZoomEnabled = scrollZoomEnabled ?? this.scrollZoomEnabled\r\n    this.createTicks = createTicks ?? this.createTicks\r\n  }\r\n\r\n  protected override createRangeImp (): AxisRange {\r\n    const chartStore = this.getParent().getChart().getChartStore()\r\n    const visibleDataRange = chartStore.getVisibleRange()\r\n    const { realFrom, realTo } = visibleDataRange\r\n    const af = realFrom\r\n    const at = realTo\r\n    const diff = realTo - realFrom + 1\r\n    const range = {\r\n      from: af,\r\n      to: at,\r\n      range: diff,\r\n      realFrom: af,\r\n      realTo: at,\r\n      realRange: diff,\r\n      displayFrom: af,\r\n      displayTo: at,\r\n      displayRange: diff\r\n    }\r\n    return range\r\n  }\r\n\r\n  protected override createTicksImp (): AxisTick[] {\r\n    const { realFrom, realTo, from } = this.getRange()\r\n    const chartStore = this.getParent().getChart().getChartStore()\r\n    const formatDate = chartStore.getInnerFormatter().formatDate\r\n    const period = chartStore.getPeriod()\r\n    const ticks: AxisTick[] = []\r\n\r\n    const barSpace = chartStore.getBarSpace().bar\r\n    const textStyles = chartStore.getStyles().xAxis.tickText\r\n    const tickTextWidth = Math.max(calcTextWidth('YYYY-MM-DD HH:mm:ss', textStyles.size, textStyles.weight, textStyles.family), this.getBounding().width / 8)\r\n    let tickBetweenBarCount = Math.ceil(tickTextWidth / barSpace)\r\n    if (tickBetweenBarCount % 2 !== 0) {\r\n      tickBetweenBarCount += 1\r\n    }\r\n    const startDataIndex = Math.max(0, Math.floor(realFrom / tickBetweenBarCount) * tickBetweenBarCount)\r\n\r\n    for (let i = startDataIndex; i < realTo; i += tickBetweenBarCount) {\r\n      if (i >= from) {\r\n        const timestamp = chartStore.dataIndexToTimestamp(i)\r\n        if (isNumber(timestamp)) {\r\n          ticks.push({\r\n            coord: this.convertToPixel(i),\r\n            value: timestamp,\r\n            text: formatDate(timestamp, PeriodTypeXAxisFormat[period?.type ?? 'day'], 'xAxis')\r\n          })\r\n        }\r\n      }\r\n    }\r\n\r\n    if (isFunction(this.createTicks)) {\r\n      return this.createTicks({\r\n        range: this.getRange(),\r\n        bounding: this.getBounding(),\r\n        defaultTicks: ticks\r\n      })\r\n    }\r\n    return ticks\r\n  }\r\n\r\n  override getAutoSize (): number {\r\n    const styles = this.getParent().getChart().getStyles()\r\n    const xAxisStyles = styles.xAxis\r\n    const height = xAxisStyles.size\r\n    if (height !== 'auto') {\r\n      return height\r\n    }\r\n    const crosshairStyles = styles.crosshair\r\n    let xAxisHeight = 0\r\n    if (xAxisStyles.show) {\r\n      if (xAxisStyles.axisLine.show) {\r\n        xAxisHeight += xAxisStyles.axisLine.size\r\n      }\r\n      if (xAxisStyles.tickLine.show) {\r\n        xAxisHeight += xAxisStyles.tickLine.length\r\n      }\r\n      if (xAxisStyles.tickText.show) {\r\n        xAxisHeight += (xAxisStyles.tickText.marginStart + xAxisStyles.tickText.marginEnd + xAxisStyles.tickText.size)\r\n      }\r\n    }\r\n    let crosshairVerticalTextHeight = 0\r\n    if (\r\n      crosshairStyles.show &&\r\n      crosshairStyles.vertical.show &&\r\n      crosshairStyles.vertical.text.show\r\n    ) {\r\n      crosshairVerticalTextHeight += (\r\n        crosshairStyles.vertical.text.paddingTop +\r\n        crosshairStyles.vertical.text.paddingBottom +\r\n        crosshairStyles.vertical.text.borderSize * 2 +\r\n        crosshairStyles.vertical.text.size\r\n      )\r\n    }\r\n    return Math.max(xAxisHeight, crosshairVerticalTextHeight)\r\n  }\r\n\r\n  protected override getBounding (): Bounding {\r\n    return this.getParent().getMainWidget().getBounding()\r\n  }\r\n\r\n  convertTimestampFromPixel (pixel: number): Nullable<number> {\r\n    const chartStore = this.getParent().getChart().getChartStore()\r\n    const dataIndex = chartStore.coordinateToDataIndex(pixel)\r\n    return chartStore.dataIndexToTimestamp(dataIndex)\r\n  }\r\n\r\n  convertTimestampToPixel (timestamp: number): number {\r\n    const chartStore = this.getParent().getChart().getChartStore()\r\n    const dataIndex = chartStore.timestampToDataIndex(timestamp)\r\n    return chartStore.dataIndexToCoordinate(dataIndex)\r\n  }\r\n\r\n  convertFromPixel (pixel: number): number {\r\n    return this.getParent().getChart().getChartStore().coordinateToDataIndex(pixel)\r\n  }\r\n\r\n  convertToPixel (value: number): number {\r\n    return this.getParent().getChart().getChartStore().dataIndexToCoordinate(value)\r\n  }\r\n\r\n  static extend (template: XAxisTemplate): XAxisConstructor {\r\n    class Custom extends XAxisImp {\r\n      constructor (parent: DrawPane) {\r\n        super(parent, template)\r\n      }\r\n    }\r\n    return Custom\r\n  }\r\n}\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport type { AxisTemplate } from '../../component/Axis'\r\n\r\nconst normal: AxisTemplate = {\r\n  name: 'normal'\r\n}\r\n\r\nexport default normal\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport XAxisImp, { type XAxisTemplate, type XAxisConstructor } from '../../component/XAxis'\r\n\r\nimport normal from './normal'\r\n\r\nconst xAxises: Record<string, XAxisConstructor> = {\r\n  normal: XAxisImp.extend(normal)\r\n}\r\n\r\nfunction registerXAxis (axis: XAxisTemplate): void {\r\n  xAxises[axis.name] = XAxisImp.extend(axis)\r\n}\r\n\r\nfunction getXAxisClass (name: string): XAxisConstructor {\r\n  return xAxises[name] ?? xAxises.normal\r\n}\r\n\r\nexport {\r\n  registerXAxis,\r\n  getXAxisClass\r\n}\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport type DrawWidget from '../widget/DrawWidget'\r\nimport XAxisWidget from '../widget/XAxisWidget'\r\n\r\nimport type { XAxis } from '../component/XAxis'\r\n\r\nimport DrawPane from './DrawPane'\r\n\r\nimport { getXAxisClass } from '../extension/x-axis'\r\n\r\nexport default class XAxisPane extends DrawPane<XAxis> {\r\n  override createAxisComponent (name: string): XAxis {\r\n    const XAxisClass = getXAxisClass(name)\r\n    return new XAxisClass(this)\r\n  }\r\n\r\n  override createMainWidget (container: HTMLElement): DrawWidget<DrawPane<XAxis>> {\r\n    return new XAxisWidget(container, this)\r\n  }\r\n}\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nexport function throttle (func: (...args: unknown[]) => unknown, wait?: number): () => void {\r\n  let previous = 0\r\n  return function () {\r\n    const now = Date.now()\r\n    if (now - previous > (wait ?? 20)) {\r\n      func.apply(this, arguments)\r\n      previous = now\r\n    }\r\n  }\r\n}\r\n\r\n// export function memoize<R1 = any, R2 = any> (func: (...args: any[]) => R1, resolver?: (...args: any[]) => R2): (...args: any[]) => R1 {\r\n//   if (!isFunction(func) || (isValid(resolver) && !isFunction(resolver))) {\r\n//     throw new TypeError('Expected a function')\r\n//   }\r\n//   const memoized = function (...args: any[]): any {\r\n//     const key = isFunction(resolver) ? resolver.apply(this, args) : args[0]\r\n//     const cache = memoized.cache\r\n\r\n//     if (cache.has(key)) {\r\n//       return cache.get(key)\r\n//     }\r\n//     const result = func.apply(this, args)\r\n//     // eslint-disable-next-line @typescript-eslint/strict-boolean-expressions\r\n//     memoized.cache = cache.set(key, result) || cache\r\n//     return result\r\n//   }\r\n//   // eslint-disable-next-line @typescript-eslint/strict-boolean-expressions\r\n//   memoized.cache = new (memoize.Cache || Map)()\r\n//   return memoized\r\n// }\r\n// memoize.Cache = Map\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport type Bounding from '../common/Bounding'\r\nimport { UpdateLevel } from '../common/Updater'\r\nimport type { MouseTouchEvent } from '../common/EventHandler'\r\nimport { createDom } from '../common/utils/dom'\r\nimport { throttle } from '../common/utils/performance'\r\nimport type Nullable from '../common/Nullable'\r\nimport { isValid } from '../common/utils/typeChecks'\r\n\r\nimport Widget from './Widget'\r\nimport { WidgetNameConstants, REAL_SEPARATOR_HEIGHT } from './types'\r\n\r\nimport type SeparatorPane from '../pane/SeparatorPane'\r\nimport type DrawPane from '../pane/DrawPane'\r\n\r\nexport default class SeparatorWidget extends Widget<SeparatorPane> {\r\n  private _dragFlag = false\r\n  private _dragStartY = 0\r\n\r\n  private _topPaneHeight = 0\r\n  private _bottomPaneHeight = 0\r\n\r\n  private _topPane: Nullable<DrawPane> = null\r\n  private _bottomPane: Nullable<DrawPane> = null\r\n\r\n  constructor (rootContainer: HTMLElement, pane: SeparatorPane) {\r\n    super(rootContainer, pane)\r\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-argument -- ignore\r\n    this.registerEvent('touchStartEvent', this._mouseDownEvent.bind(this))\r\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-argument -- ignore\r\n      .registerEvent('touchMoveEvent', this._pressedMouseMoveEvent.bind(this))\r\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-argument -- ignore\r\n      .registerEvent('touchEndEvent', this._mouseUpEvent.bind(this))\r\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-argument -- ignore\r\n      .registerEvent('mouseDownEvent', this._mouseDownEvent.bind(this))\r\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-argument -- ignore\r\n      .registerEvent('mouseUpEvent', this._mouseUpEvent.bind(this))\r\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-argument -- ignore\r\n      .registerEvent('pressedMouseMoveEvent', this._pressedMouseMoveEvent.bind(this))\r\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-argument -- ignore\r\n      .registerEvent('mouseEnterEvent', this._mouseEnterEvent.bind(this))\r\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-argument -- ignore\r\n      .registerEvent('mouseLeaveEvent', this._mouseLeaveEvent.bind(this))\r\n  }\r\n\r\n  override getName (): string {\r\n    return WidgetNameConstants.SEPARATOR\r\n  }\r\n\r\n  private _mouseDownEvent (event: MouseTouchEvent): boolean {\r\n    this._dragFlag = true\r\n    this._dragStartY = event.pageY\r\n    const pane = this.getPane()\r\n    const chart = pane.getChart()\r\n    this._topPane = pane.getTopPane()\r\n    this._bottomPane = pane.getBottomPane()\r\n    const drawPanes = chart.getDrawPanes()\r\n    if (this._topPane.getOptions().state === 'minimize') {\r\n      const index = drawPanes.findIndex(pane => pane.getId() === this._topPane?.getId())\r\n      for (let i = index - 1; i > -1; i--) {\r\n        const pane = drawPanes[i]\r\n        if (pane.getOptions().state !== 'minimize') {\r\n          this._topPane = pane\r\n          break\r\n        }\r\n      }\r\n    }\r\n    if (this._bottomPane.getOptions().state === 'minimize') {\r\n      const index = drawPanes.findIndex(pane => pane.getId() === this._bottomPane?.getId())\r\n      for (let i = index + 1; i < drawPanes.length; i++) {\r\n        const pane = drawPanes[i]\r\n        if (pane.getOptions().state !== 'minimize') {\r\n          this._bottomPane = pane\r\n          break\r\n        }\r\n      }\r\n    }\r\n    this._topPaneHeight = this._topPane.getBounding().height\r\n    this._bottomPaneHeight = this._bottomPane.getBounding().height\r\n    return true\r\n  }\r\n\r\n  private _mouseUpEvent (): boolean {\r\n    this._dragFlag = false\r\n    this._topPane = null\r\n    this._bottomPane = null\r\n    this._topPaneHeight = 0\r\n    this._bottomPaneHeight = 0\r\n    return this._mouseLeaveEvent()\r\n  }\r\n\r\n  // eslint-disable-next-line @typescript-eslint/unbound-method -- ignore\r\n  private readonly _pressedMouseMoveEvent = throttle(this._pressedTouchMouseMoveEvent, 20)\r\n\r\n  private _pressedTouchMouseMoveEvent (event: MouseTouchEvent): boolean {\r\n    const dragDistance = event.pageY - this._dragStartY\r\n\r\n    const isUpDrag = dragDistance < 0\r\n    if (isValid(this._topPane) && isValid(this._bottomPane)) {\r\n      const bottomPaneOptions = this._bottomPane.getOptions()\r\n      if (\r\n        this._topPane.getOptions().state !== 'minimize' &&\r\n        bottomPaneOptions.state !== 'minimize' &&\r\n        bottomPaneOptions.dragEnabled\r\n      ) {\r\n        let reducedPane: Nullable<DrawPane> = null\r\n        let increasedPane: Nullable<DrawPane> = null\r\n        let startDragReducedPaneHeight = 0\r\n        let startDragIncreasedPaneHeight = 0\r\n        if (isUpDrag) {\r\n          reducedPane = this._topPane\r\n          increasedPane = this._bottomPane\r\n          startDragReducedPaneHeight = this._topPaneHeight\r\n          startDragIncreasedPaneHeight = this._bottomPaneHeight\r\n        } else {\r\n          reducedPane = this._bottomPane\r\n          increasedPane = this._topPane\r\n          startDragReducedPaneHeight = this._bottomPaneHeight\r\n          startDragIncreasedPaneHeight = this._topPaneHeight\r\n        }\r\n        const reducedPaneMinHeight = reducedPane.getOptions().minHeight\r\n        if (startDragReducedPaneHeight > reducedPaneMinHeight) {\r\n          const reducedPaneHeight = Math.max(startDragReducedPaneHeight - Math.abs(dragDistance), reducedPaneMinHeight)\r\n          const diffHeight = startDragReducedPaneHeight - reducedPaneHeight\r\n          reducedPane.setBounding({ height: reducedPaneHeight })\r\n          increasedPane.setBounding({ height: startDragIncreasedPaneHeight + diffHeight })\r\n          const currentPane = this.getPane()\r\n          const chart = currentPane.getChart()\r\n          chart.getChartStore().executeAction('onPaneDrag', { paneId: currentPane.getId() })\r\n          chart.layout({\r\n            measureHeight: true,\r\n            measureWidth: true,\r\n            update: true,\r\n            buildYAxisTick: true,\r\n            forceBuildYAxisTick: true\r\n          })\r\n        }\r\n      }\r\n    }\r\n\r\n    return true\r\n  }\r\n\r\n  private _mouseEnterEvent (): boolean {\r\n    const pane = this.getPane()\r\n    const bottomPane = pane.getBottomPane()\r\n    if (bottomPane.getOptions().dragEnabled) {\r\n      const chart = pane.getChart()\r\n      const styles = chart.getStyles().separator\r\n      this.getContainer().style.background = styles.activeBackgroundColor\r\n      return true\r\n    }\r\n    return false\r\n  }\r\n\r\n  private _mouseLeaveEvent (): boolean {\r\n    if (!this._dragFlag) {\r\n      this.getContainer().style.background = 'transparent'\r\n      return true\r\n    }\r\n    return false\r\n  }\r\n\r\n  override createContainer (): HTMLElement {\r\n    return createDom('div', {\r\n      width: '100%',\r\n      height: `${REAL_SEPARATOR_HEIGHT}px`,\r\n      margin: '0',\r\n      padding: '0',\r\n      position: 'absolute',\r\n      top: '-3px',\r\n      zIndex: '20',\r\n      boxSizing: 'border-box',\r\n      cursor: 'ns-resize'\r\n    })\r\n  }\r\n\r\n  override updateImp (container: HTMLElement, _bounding: Bounding, level: UpdateLevel): void {\r\n    if (level === UpdateLevel.All || level === UpdateLevel.Separator) {\r\n      const styles = this.getPane().getChart().getStyles().separator\r\n      container.style.top = `${-Math.floor((REAL_SEPARATOR_HEIGHT - styles.size) / 2)}px`\r\n      container.style.height = `${REAL_SEPARATOR_HEIGHT}px`\r\n    }\r\n  }\r\n}\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport { UpdateLevel } from '../common/Updater'\r\nimport type Bounding from '../common/Bounding'\r\nimport { merge } from '../common/utils/typeChecks'\r\nimport { createDom } from '../common/utils/dom'\r\nimport { getPixelRatio } from '../common/utils/canvas'\r\n\r\nimport type Chart from '../Chart'\r\n\r\nimport type DrawPane from './DrawPane'\r\nimport Pane from './Pane'\r\n\r\nimport SeparatorWidget from '../widget/SeparatorWidget'\r\n\r\nexport default class SeparatorPane extends Pane {\r\n  private _topPane: DrawPane\r\n  private _bottomPane: DrawPane\r\n\r\n  private readonly _separatorWidget: SeparatorWidget\r\n\r\n  constructor (chart: Chart, id: string, topPane: DrawPane, bottomPane: DrawPane) {\r\n    super(chart, id)\r\n    this.getContainer().style.overflow = ''\r\n    this._topPane = topPane\r\n    this._bottomPane = bottomPane\r\n    this._separatorWidget = new SeparatorWidget(this.getContainer(), this)\r\n  }\r\n\r\n  override setBounding (rootBounding: Partial<Bounding>): Pane {\r\n    merge(this.getBounding(), rootBounding)\r\n    return this\r\n  }\r\n\r\n  getTopPane (): DrawPane {\r\n    return this._topPane\r\n  }\r\n\r\n  setTopPane (pane: DrawPane): Pane {\r\n    this._topPane = pane\r\n    return this\r\n  }\r\n\r\n  getBottomPane (): DrawPane {\r\n    return this._bottomPane\r\n  }\r\n\r\n  setBottomPane (pane: DrawPane): Pane {\r\n    this._bottomPane = pane\r\n    return this\r\n  }\r\n\r\n  getWidget (): SeparatorWidget { return this._separatorWidget }\r\n\r\n  override getImage (_includeOverlay: boolean): HTMLCanvasElement {\r\n    const { width, height } = this.getBounding()\r\n\r\n    const styles = this.getChart().getStyles().separator\r\n    const canvas = createDom('canvas', {\r\n      width: `${width}px`,\r\n      height: `${height}px`,\r\n      boxSizing: 'border-box'\r\n    })\r\n    const ctx = canvas.getContext('2d')!\r\n    const pixelRatio = getPixelRatio(canvas)\r\n    canvas.width = width * pixelRatio\r\n    canvas.height = height * pixelRatio\r\n    ctx.scale(pixelRatio, pixelRatio)\r\n    ctx.fillStyle = styles.color\r\n    ctx.fillRect(0, 0, width, height)\r\n    return canvas\r\n  }\r\n\r\n  override updateImp (level: UpdateLevel, container: HTMLElement, bounding: Bounding): void {\r\n    if (level === UpdateLevel.All || level === UpdateLevel.Separator) {\r\n      const styles = this.getChart().getStyles().separator\r\n      container.style.backgroundColor = styles.color\r\n      container.style.height = `${bounding.height}px`\r\n      container.style.marginLeft = `${bounding.left}px`\r\n      container.style.width = `${bounding.width}px`\r\n      this._separatorWidget.update(level)\r\n    }\r\n  }\r\n}\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nexport function isFF (): boolean {\r\n  if (typeof window === 'undefined') {\r\n    return false\r\n  }\r\n  return window.navigator.userAgent.toLowerCase().includes('firefox')\r\n}\r\n\r\nexport function isIOS (): boolean {\r\n  if (typeof window === 'undefined') {\r\n    return false\r\n  }\r\n  return /iPhone|iPad|iPod|iOS/.test(window.navigator.userAgent)\r\n}\r\n","/* eslint-disable eslint-comments/require-description -- ignore */\r\n\r\n/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\n/**\r\n * This file uses most of the logic of lightweight-charts/mouse-event-handler.ts(https://github.com/tradingview/lightweight-charts) for reference.\r\n * Makes some modifications to add some events.\r\n * The use of the source code of this file is also subject to the terms\r\n * and consitions of the license of \"lightweight-charts\" (Apache License V2, see\r\n * </licenses/LICENSE-lightweight-charts>).\r\n */\r\n\r\nimport type Coordinate from './Coordinate'\r\n\r\nimport type Nullable from './Nullable'\r\n\r\nimport { isFF, isIOS } from './utils/platform'\r\nimport { isValid } from './utils/typeChecks'\r\n\r\nexport interface MouseTouchEvent extends Coordinate {\r\n  pageX: number\r\n  pageY: number\r\n  isTouch?: boolean\r\n  preventDefault?: () => void\r\n}\r\n\r\nexport type MouseTouchEventCallback = (event: MouseTouchEvent, other?: number) => boolean\r\n\r\nexport interface EventHandler {\r\n  pinchStartEvent?: MouseTouchEventCallback\r\n  pinchEvent?: MouseTouchEventCallback\r\n  pinchEndEvent?: MouseTouchEventCallback\r\n\r\n  mouseWheelHortEvent?: MouseTouchEventCallback\r\n  mouseWheelVertEvent?: MouseTouchEventCallback\r\n\r\n  mouseClickEvent?: MouseTouchEventCallback\r\n  mouseRightClickEvent?: MouseTouchEventCallback\r\n  tapEvent?: MouseTouchEventCallback\r\n\r\n  mouseDoubleClickEvent?: MouseTouchEventCallback\r\n  doubleTapEvent?: MouseTouchEventCallback\r\n\r\n  mouseDownEvent?: MouseTouchEventCallback\r\n  touchStartEvent?: MouseTouchEventCallback\r\n\r\n  mouseUpEvent?: MouseTouchEventCallback\r\n  touchEndEvent?: MouseTouchEventCallback\r\n\r\n  mouseDownOutsideEvent?: MouseTouchEventCallback\r\n\r\n  mouseEnterEvent?: MouseTouchEventCallback\r\n  mouseLeaveEvent?: MouseTouchEventCallback\r\n\r\n  mouseMoveEvent?: MouseTouchEventCallback\r\n\r\n  pressedMouseMoveEvent?: MouseTouchEventCallback\r\n  touchMoveEvent?: MouseTouchEventCallback\r\n\r\n  longTapEvent?: MouseTouchEventCallback\r\n}\r\n\r\nexport type EventName = keyof EventHandler\r\n\r\nexport interface EventOptions {\r\n  treatVertDragAsPageScroll: () => boolean\r\n  treatHorzDragAsPageScroll: () => boolean\r\n}\r\n\r\n// we can use `const name = 500;` but with `const enum` this values will be inlined into code\r\n// so we do not need to have it as variables\r\nconst Delay = {\r\n  ResetClick: 500,\r\n  LongTap: 500,\r\n  PreventFiresTouchEvents: 500\r\n}\r\n\r\nconst ManhattanDistance = {\r\n  CancelClick: 5,\r\n  CancelTap: 5,\r\n  DoubleClick: 5,\r\n  DoubleTap: 30\r\n}\r\n\r\nconst MouseEventButton = {\r\n  Left: 0,\r\n  Middle: 1,\r\n  Right: 2\r\n}\r\n\r\nexport const TOUCH_MIN_RADIUS = 10\r\n\r\ntype TimerId = ReturnType<typeof setTimeout>\r\n\r\ninterface MouseTouchMoveWithDownInfo {\r\n  xOffset: number\r\n  yOffset: number\r\n  manhattanDistance: number\r\n}\r\n\r\n// TODO: get rid of a lot of boolean flags, probably we should replace it with some enum\r\nexport default class EventHandlerImp {\r\n  private readonly _target: HTMLElement\r\n  private readonly _handler: EventHandler\r\n\r\n  private readonly _options: EventOptions\r\n\r\n  private _clickCount = 0\r\n  private _clickTimeoutId: Nullable<TimerId> = null\r\n  private _clickCoordinate: Coordinate = { x: Number.NEGATIVE_INFINITY, y: Number.POSITIVE_INFINITY }\r\n\r\n  private _tapCount = 0\r\n  private _tapTimeoutId: Nullable<TimerId> = null\r\n  private _tapCoordinate: Coordinate = { x: Number.NEGATIVE_INFINITY, y: Number.POSITIVE_INFINITY }\r\n\r\n  private _longTapTimeoutId: Nullable<TimerId> = null\r\n  private _longTapActive = false\r\n\r\n  private _mouseMoveStartCoordinate: Nullable<Coordinate> = null\r\n\r\n  private _touchMoveStartCoordinate: Nullable<Coordinate> = null\r\n  private _touchMoveExceededManhattanDistance = false\r\n\r\n  private _cancelClick = false\r\n  private _cancelTap = false\r\n\r\n  private _unsubscribeOutsideMouseEvents: Nullable<() => void> = null\r\n  private _unsubscribeOutsideTouchEvents: Nullable<() => void> = null\r\n  private _unsubscribeMobileSafariEvents: Nullable<() => void> = null\r\n\r\n  private _unsubscribeMousemove: Nullable<() => void> = null\r\n\r\n  private _unsubscribeMouseWheel: Nullable<() => void> = null\r\n\r\n  private _unsubscribeContextMenu: Nullable<() => void> = null\r\n\r\n  private _unsubscribeRootMouseEvents: Nullable<() => void> = null\r\n  private _unsubscribeRootTouchEvents: Nullable<() => void> = null\r\n\r\n  private _startPinchMiddleCoordinate: Nullable<Coordinate> = null\r\n  private _startPinchDistance = 0\r\n  private _pinchPrevented = false\r\n  private _preventTouchDragProcess = false\r\n\r\n  private _mousePressed = false\r\n\r\n  private _lastTouchEventTimeStamp = 0\r\n\r\n  // for touchstart/touchmove/touchend events we handle only first touch\r\n  // i.e. we don't support several active touches at the same time (except pinch event)\r\n  private _activeTouchId: Nullable<number> = null\r\n\r\n  // accept all mouse leave events if it's not an iOS device\r\n  // see _mouseEnterHandler, _mouseMoveHandler, _mouseLeaveHandler\r\n  private _acceptMouseLeave = !isIOS()\r\n\r\n  constructor (\r\n    target: HTMLElement,\r\n    handler: EventHandler,\r\n    options: EventOptions\r\n  ) {\r\n    this._target = target\r\n    this._handler = handler\r\n    this._options = options\r\n\r\n    this._init()\r\n  }\r\n\r\n  destroy (): void {\r\n    if (this._unsubscribeOutsideMouseEvents !== null) {\r\n      this._unsubscribeOutsideMouseEvents()\r\n      this._unsubscribeOutsideMouseEvents = null\r\n    }\r\n\r\n    if (this._unsubscribeOutsideTouchEvents !== null) {\r\n      this._unsubscribeOutsideTouchEvents()\r\n      this._unsubscribeOutsideTouchEvents = null\r\n    }\r\n\r\n    if (this._unsubscribeMousemove !== null) {\r\n      this._unsubscribeMousemove()\r\n      this._unsubscribeMousemove = null\r\n    }\r\n\r\n    if (this._unsubscribeMouseWheel !== null) {\r\n      this._unsubscribeMouseWheel()\r\n      this._unsubscribeMouseWheel = null\r\n    }\r\n\r\n    if (this._unsubscribeContextMenu !== null) {\r\n      this._unsubscribeContextMenu()\r\n      this._unsubscribeContextMenu = null\r\n    }\r\n\r\n    if (this._unsubscribeRootMouseEvents !== null) {\r\n      this._unsubscribeRootMouseEvents()\r\n      this._unsubscribeRootMouseEvents = null\r\n    }\r\n\r\n    if (this._unsubscribeRootTouchEvents !== null) {\r\n      this._unsubscribeRootTouchEvents()\r\n      this._unsubscribeRootTouchEvents = null\r\n    }\r\n\r\n    if (this._unsubscribeMobileSafariEvents !== null) {\r\n      this._unsubscribeMobileSafariEvents()\r\n      this._unsubscribeMobileSafariEvents = null\r\n    }\r\n\r\n    this._clearLongTapTimeout()\r\n    this._resetClickTimeout()\r\n  }\r\n\r\n  private _mouseEnterHandler (enterEvent: MouseEvent): void {\r\n    this._unsubscribeMousemove?.()\r\n    this._unsubscribeMouseWheel?.()\r\n    this._unsubscribeContextMenu?.()\r\n\r\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\r\n    const boundMouseMoveHandler = this._mouseMoveHandler.bind(this)\r\n    this._unsubscribeMousemove = () => {\r\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\r\n      this._target.removeEventListener('mousemove', boundMouseMoveHandler)\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\r\n    this._target.addEventListener('mousemove', boundMouseMoveHandler)\r\n\r\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\r\n    const boundMouseWheel = this._mouseWheelHandler.bind(this)\r\n    this._unsubscribeMouseWheel = () => {\r\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\r\n      this._target.removeEventListener('wheel', boundMouseWheel)\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\r\n    this._target.addEventListener('wheel', boundMouseWheel, { passive: false })\r\n\r\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\r\n    const boundContextMenu = this._contextMenuHandler.bind(this)\r\n    this._unsubscribeContextMenu = () => {\r\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\r\n      this._target.removeEventListener('contextmenu', boundContextMenu)\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\r\n    this._target.addEventListener('contextmenu', boundContextMenu, { passive: false })\r\n\r\n    if (this._firesTouchEvents(enterEvent)) {\r\n      return\r\n    }\r\n\r\n    this._processEvent(this._makeCompatEvent(enterEvent), this._handler.mouseEnterEvent)\r\n    this._acceptMouseLeave = true\r\n  }\r\n\r\n  private _resetClickTimeout (): void {\r\n    if (this._clickTimeoutId !== null) {\r\n      clearTimeout(this._clickTimeoutId)\r\n    }\r\n\r\n    this._clickCount = 0\r\n    this._clickTimeoutId = null\r\n    this._clickCoordinate = { x: Number.NEGATIVE_INFINITY, y: Number.POSITIVE_INFINITY }\r\n  }\r\n\r\n  private _resetTapTimeout (): void {\r\n    if (this._tapTimeoutId !== null) {\r\n      clearTimeout(this._tapTimeoutId)\r\n    }\r\n\r\n    this._tapCount = 0\r\n    this._tapTimeoutId = null\r\n    this._tapCoordinate = { x: Number.NEGATIVE_INFINITY, y: Number.POSITIVE_INFINITY }\r\n  }\r\n\r\n  private _mouseMoveHandler (moveEvent: MouseEvent): void {\r\n    if (this._mousePressed || this._touchMoveStartCoordinate !== null) {\r\n      return\r\n    }\r\n\r\n    if (this._firesTouchEvents(moveEvent)) {\r\n      return\r\n    }\r\n\r\n    this._processEvent(this._makeCompatEvent(moveEvent), this._handler.mouseMoveEvent)\r\n    this._acceptMouseLeave = true\r\n  }\r\n\r\n  private _mouseWheelHandler (wheelEvent: WheelEvent): void {\r\n    if (Math.abs(wheelEvent.deltaX) > Math.abs(wheelEvent.deltaY)) {\r\n      if (!isValid(this._handler.mouseWheelHortEvent)) {\r\n        return\r\n      }\r\n      this._preventDefault(wheelEvent)\r\n      if (Math.abs(wheelEvent.deltaX) === 0) {\r\n        return\r\n      }\r\n      this._handler.mouseWheelHortEvent(this._makeCompatEvent(wheelEvent), -wheelEvent.deltaX)\r\n    } else {\r\n      if (!isValid(this._handler.mouseWheelVertEvent)) {\r\n        return\r\n      }\r\n      let deltaY = -(wheelEvent.deltaY / 100)\r\n      if (deltaY === 0) {\r\n        return\r\n      }\r\n      this._preventDefault(wheelEvent)\r\n\r\n      switch (wheelEvent.deltaMode) {\r\n        case wheelEvent.DOM_DELTA_PAGE: {\r\n          deltaY *= 120\r\n          break\r\n        }\r\n\r\n        case wheelEvent.DOM_DELTA_LINE: {\r\n          deltaY *= 32\r\n          break\r\n        }\r\n      }\r\n\r\n      if (deltaY !== 0) {\r\n        const scale = Math.sign(deltaY) * Math.min(1, Math.abs(deltaY))\r\n        this._handler.mouseWheelVertEvent(this._makeCompatEvent(wheelEvent), scale)\r\n      }\r\n    }\r\n  }\r\n\r\n  private _contextMenuHandler (mouseEvent: MouseEvent): void {\r\n    this._preventDefault(mouseEvent)\r\n  }\r\n\r\n  private _touchMoveHandler (moveEvent: TouchEvent): void {\r\n    const touch = this._touchWithId(moveEvent.changedTouches, this._activeTouchId)\r\n    if (touch === null) {\r\n      return\r\n    }\r\n\r\n    this._lastTouchEventTimeStamp = this._eventTimeStamp(moveEvent)\r\n\r\n    if (this._startPinchMiddleCoordinate !== null) {\r\n      return\r\n    }\r\n\r\n    if (this._preventTouchDragProcess) {\r\n      return\r\n    }\r\n\r\n    // prevent pinch if move event comes faster than the second touch\r\n    this._pinchPrevented = true\r\n\r\n    const moveInfo = this._mouseTouchMoveWithDownInfo(this._getCoordinate(touch), this._touchMoveStartCoordinate!)\r\n    const { xOffset, yOffset, manhattanDistance } = moveInfo\r\n\r\n    if (!this._touchMoveExceededManhattanDistance && manhattanDistance < ManhattanDistance.CancelTap) {\r\n      return\r\n    }\r\n\r\n    if (!this._touchMoveExceededManhattanDistance) {\r\n      // first time when current position exceeded manhattan distance\r\n\r\n      // vertical drag is more important than horizontal drag\r\n      // because we scroll the page vertically often than horizontally\r\n      const correctedXOffset = xOffset * 0.5\r\n\r\n      // a drag can be only if touch page scroll isn't allowed\r\n      const isVertDrag = yOffset >= correctedXOffset && !this._options.treatVertDragAsPageScroll()\r\n      const isHorzDrag = correctedXOffset > yOffset && !this._options.treatHorzDragAsPageScroll()\r\n\r\n      // if drag event happened then we should revert preventDefault state to original one\r\n      // and try to process the drag event\r\n      // else we shouldn't prevent default of the event and ignore processing the drag event\r\n      if (!isVertDrag && !isHorzDrag) {\r\n        this._preventTouchDragProcess = true\r\n      }\r\n\r\n      this._touchMoveExceededManhattanDistance = true\r\n      // if manhattan distance is more that 5 - we should cancel tap event\r\n      this._cancelTap = true\r\n      this._clearLongTapTimeout()\r\n      this._resetTapTimeout()\r\n    }\r\n\r\n    if (!this._preventTouchDragProcess) {\r\n      this._processEvent(this._makeCompatEvent(moveEvent, touch), this._handler.touchMoveEvent)\r\n\r\n      // we should prevent default in case of touch only\r\n      // to prevent scroll of the page\r\n      // preventDefault(moveEvent)\r\n    }\r\n  }\r\n\r\n  private _mouseMoveWithDownHandler (moveEvent: MouseEvent): void {\r\n    if (moveEvent.button !== MouseEventButton.Left) {\r\n      return\r\n    }\r\n\r\n    const moveInfo = this._mouseTouchMoveWithDownInfo(this._getCoordinate(moveEvent), this._mouseMoveStartCoordinate!)\r\n    const { manhattanDistance } = moveInfo\r\n\r\n    if (manhattanDistance >= ManhattanDistance.CancelClick) {\r\n      // if manhattan distance is more that 5 - we should cancel click event\r\n      this._cancelClick = true\r\n      this._resetClickTimeout()\r\n    }\r\n    if (this._cancelClick) {\r\n      // if this._cancelClick is true, that means that minimum manhattan distance is already exceeded\r\n      this._processEvent(this._makeCompatEvent(moveEvent), this._handler.pressedMouseMoveEvent)\r\n    }\r\n  }\r\n\r\n  private _mouseTouchMoveWithDownInfo (currentCoordinate: Coordinate, startCoordinate: Coordinate): MouseTouchMoveWithDownInfo {\r\n    const xOffset = Math.abs(startCoordinate.x - currentCoordinate.x)\r\n    const yOffset = Math.abs(startCoordinate.y - currentCoordinate.y)\r\n\r\n    const manhattanDistance = xOffset + yOffset\r\n\r\n    return { xOffset, yOffset, manhattanDistance }\r\n  }\r\n\r\n  /**\r\n   * In Firefox mouse events dont't fire if the mouse position is outside of the browser's border.\r\n   * To prevent the mouse from hanging while pressed we're subscribing on the mouseleave event of the document element.\r\n   * We're subscribing on mouseleave, but this event is actually fired on mouseup outside of the browser's border.\r\n   */\r\n  private readonly _onFirefoxOutsideMouseUp = (mouseUpEvent: MouseEvent): void => {\r\n    this._mouseUpHandler(mouseUpEvent)\r\n  }\r\n\r\n  /**\r\n   * Safari doesn't fire touchstart/mousedown events on double tap since iOS 13.\r\n   * There are two possible solutions:\r\n   * 1) Call preventDefault in touchEnd handler. But it also prevents click event from firing.\r\n   * 2) Add listener on dblclick event that fires with the preceding mousedown/mouseup.\r\n   * https://developer.apple.com/forums/thread/125073\r\n   */\r\n  private readonly _onMobileSafariDoubleClick = (dblClickEvent: MouseEvent): void => {\r\n    if (this._firesTouchEvents(dblClickEvent)) {\r\n      ++this._tapCount\r\n\r\n      if (this._tapTimeoutId !== null && this._tapCount > 1) {\r\n        const { manhattanDistance } = this._mouseTouchMoveWithDownInfo(this._getCoordinate(dblClickEvent), this._tapCoordinate)\r\n\r\n        if (manhattanDistance < ManhattanDistance.DoubleTap && !this._cancelTap) {\r\n          this._processEvent(this._makeCompatEvent(dblClickEvent), this._handler.doubleTapEvent)\r\n        }\r\n        this._resetTapTimeout()\r\n      }\r\n    } else {\r\n      ++this._clickCount\r\n\r\n      if (this._clickTimeoutId !== null && this._clickCount > 1) {\r\n        const { manhattanDistance } = this._mouseTouchMoveWithDownInfo(this._getCoordinate(dblClickEvent), this._clickCoordinate)\r\n\r\n        if (manhattanDistance < ManhattanDistance.DoubleClick && !this._cancelClick) {\r\n          this._processEvent(this._makeCompatEvent(dblClickEvent), this._handler.mouseDoubleClickEvent)\r\n        }\r\n        this._resetClickTimeout()\r\n      }\r\n    }\r\n  }\r\n\r\n  private _touchEndHandler (touchEndEvent: TouchEvent): void {\r\n    let touch = this._touchWithId(touchEndEvent.changedTouches, this._activeTouchId)\r\n    if (touch === null && touchEndEvent.touches.length === 0) {\r\n      // something went wrong, somehow we missed the required touchend event\r\n      // probably the browser has not sent this event\r\n      touch = touchEndEvent.changedTouches[0]\r\n    }\r\n\r\n    if (touch === null) {\r\n      return\r\n    }\r\n\r\n    this._activeTouchId = null\r\n    this._lastTouchEventTimeStamp = this._eventTimeStamp(touchEndEvent)\r\n    this._clearLongTapTimeout()\r\n    this._touchMoveStartCoordinate = null\r\n\r\n    if (this._unsubscribeRootTouchEvents !== null) {\r\n      this._unsubscribeRootTouchEvents()\r\n      this._unsubscribeRootTouchEvents = null\r\n    }\r\n\r\n    const compatEvent = this._makeCompatEvent(touchEndEvent, touch)\r\n    this._processEvent(compatEvent, this._handler.touchEndEvent)\r\n    ++this._tapCount\r\n\r\n    if (this._tapTimeoutId !== null && this._tapCount > 1) {\r\n      // check that both clicks are near enough\r\n      const { manhattanDistance } = this._mouseTouchMoveWithDownInfo(this._getCoordinate(touch), this._tapCoordinate)\r\n      if (manhattanDistance < ManhattanDistance.DoubleTap && !this._cancelTap) {\r\n        this._processEvent(compatEvent, this._handler.doubleTapEvent)\r\n      }\r\n      this._resetTapTimeout()\r\n    } else {\r\n      if (!this._cancelTap) {\r\n        this._processEvent(compatEvent, this._handler.tapEvent)\r\n\r\n        // do not fire mouse events if tap handler was executed\r\n        // prevent click event on new dom element (who appeared after tap)\r\n        if (isValid(this._handler.tapEvent)) {\r\n          this._preventDefault(touchEndEvent)\r\n        }\r\n      }\r\n    }\r\n\r\n    // prevent, for example, safari's dblclick-to-zoom or fast-click after long-tap\r\n    // we handle mouseDoubleClickEvent here ourselves\r\n    if (this._tapCount === 0) {\r\n      this._preventDefault(touchEndEvent)\r\n    }\r\n\r\n    if (touchEndEvent.touches.length === 0) {\r\n      if (this._longTapActive) {\r\n        this._longTapActive = false\r\n        // prevent native click event\r\n        this._preventDefault(touchEndEvent)\r\n      }\r\n    }\r\n  }\r\n\r\n  private _mouseUpHandler (mouseUpEvent: MouseEvent): void {\r\n    if (mouseUpEvent.button !== MouseEventButton.Left) {\r\n      return\r\n    }\r\n\r\n    const compatEvent = this._makeCompatEvent(mouseUpEvent)\r\n\r\n    this._mouseMoveStartCoordinate = null\r\n    this._mousePressed = false\r\n\r\n    if (this._unsubscribeRootMouseEvents !== null) {\r\n      this._unsubscribeRootMouseEvents()\r\n      this._unsubscribeRootMouseEvents = null\r\n    }\r\n\r\n    if (isFF()) {\r\n      const rootElement = this._target.ownerDocument.documentElement\r\n      rootElement.removeEventListener('mouseleave', this._onFirefoxOutsideMouseUp)\r\n    }\r\n\r\n    if (this._firesTouchEvents(mouseUpEvent)) {\r\n      return\r\n    }\r\n\r\n    this._processEvent(compatEvent, this._handler.mouseUpEvent)\r\n    ++this._clickCount\r\n\r\n    if (this._clickTimeoutId !== null && this._clickCount > 1) {\r\n      // check that both clicks are near enough\r\n      const { manhattanDistance } = this._mouseTouchMoveWithDownInfo(this._getCoordinate(mouseUpEvent), this._clickCoordinate)\r\n      if (manhattanDistance < ManhattanDistance.DoubleClick && !this._cancelClick) {\r\n        this._processEvent(compatEvent, this._handler.mouseDoubleClickEvent)\r\n      }\r\n      this._resetClickTimeout()\r\n    } else {\r\n      if (!this._cancelClick) {\r\n        this._processEvent(compatEvent, this._handler.mouseClickEvent)\r\n      }\r\n    }\r\n  }\r\n\r\n  private _clearLongTapTimeout (): void {\r\n    if (this._longTapTimeoutId === null) {\r\n      return\r\n    }\r\n\r\n    clearTimeout(this._longTapTimeoutId)\r\n    this._longTapTimeoutId = null\r\n  }\r\n\r\n  private _touchStartHandler (downEvent: TouchEvent): void {\r\n    if (this._activeTouchId !== null) {\r\n      return\r\n    }\r\n    const touch = downEvent.changedTouches[0]\r\n    this._activeTouchId = touch.identifier\r\n\r\n    this._lastTouchEventTimeStamp = this._eventTimeStamp(downEvent)\r\n\r\n    const rootElement = this._target.ownerDocument.documentElement\r\n\r\n    this._cancelTap = false\r\n    this._touchMoveExceededManhattanDistance = false\r\n    this._preventTouchDragProcess = false\r\n\r\n    this._touchMoveStartCoordinate = this._getCoordinate(touch)\r\n\r\n    if (this._unsubscribeRootTouchEvents !== null) {\r\n      this._unsubscribeRootTouchEvents()\r\n      this._unsubscribeRootTouchEvents = null\r\n    }\r\n\r\n    {\r\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\r\n      const boundTouchMoveWithDownHandler = this._touchMoveHandler.bind(this)\r\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\r\n      const boundTouchEndHandler = this._touchEndHandler.bind(this)\r\n\r\n      this._unsubscribeRootTouchEvents = () => {\r\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\r\n        rootElement.removeEventListener('touchmove', boundTouchMoveWithDownHandler)\r\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\r\n        rootElement.removeEventListener('touchend', boundTouchEndHandler)\r\n      }\r\n\r\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\r\n      rootElement.addEventListener('touchmove', boundTouchMoveWithDownHandler, { passive: false })\r\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\r\n      rootElement.addEventListener('touchend', boundTouchEndHandler, { passive: false })\r\n\r\n      this._clearLongTapTimeout()\r\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\r\n      this._longTapTimeoutId = setTimeout(this._longTapHandler.bind(this, downEvent), Delay.LongTap)\r\n    }\r\n\r\n    this._processEvent(this._makeCompatEvent(downEvent, touch), this._handler.touchStartEvent)\r\n\r\n    if (this._tapTimeoutId === null) {\r\n      this._tapCount = 0\r\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\r\n      this._tapTimeoutId = setTimeout(this._resetTapTimeout.bind(this), Delay.ResetClick)\r\n      this._tapCoordinate = this._getCoordinate(touch)\r\n    }\r\n  }\r\n\r\n  private _mouseDownHandler (downEvent: MouseEvent): void {\r\n    if (downEvent.button === MouseEventButton.Right) {\r\n      this._preventDefault(downEvent)\r\n      this._processEvent(this._makeCompatEvent(downEvent), this._handler.mouseRightClickEvent)\r\n      return\r\n    }\r\n\r\n    if (downEvent.button !== MouseEventButton.Left) {\r\n      return\r\n    }\r\n\r\n    const rootElement = this._target.ownerDocument.documentElement\r\n    if (isFF()) {\r\n      rootElement.addEventListener('mouseleave', this._onFirefoxOutsideMouseUp)\r\n    }\r\n\r\n    this._cancelClick = false\r\n\r\n    this._mouseMoveStartCoordinate = this._getCoordinate(downEvent)\r\n\r\n    if (this._unsubscribeRootMouseEvents !== null) {\r\n      this._unsubscribeRootMouseEvents()\r\n      this._unsubscribeRootMouseEvents = null\r\n    }\r\n\r\n    {\r\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\r\n      const boundMouseMoveWithDownHandler = this._mouseMoveWithDownHandler.bind(this)\r\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\r\n      const boundMouseUpHandler = this._mouseUpHandler.bind(this)\r\n\r\n      this._unsubscribeRootMouseEvents = () => {\r\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\r\n        rootElement.removeEventListener('mousemove', boundMouseMoveWithDownHandler)\r\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\r\n        rootElement.removeEventListener('mouseup', boundMouseUpHandler)\r\n      }\r\n\r\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\r\n      rootElement.addEventListener('mousemove', boundMouseMoveWithDownHandler)\r\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\r\n      rootElement.addEventListener('mouseup', boundMouseUpHandler)\r\n    }\r\n\r\n    this._mousePressed = true\r\n\r\n    if (this._firesTouchEvents(downEvent)) {\r\n      return\r\n    }\r\n\r\n    this._processEvent(this._makeCompatEvent(downEvent), this._handler.mouseDownEvent)\r\n\r\n    if (this._clickTimeoutId === null) {\r\n      this._clickCount = 0\r\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\r\n      this._clickTimeoutId = setTimeout(this._resetClickTimeout.bind(this), Delay.ResetClick)\r\n      this._clickCoordinate = this._getCoordinate(downEvent)\r\n    }\r\n  }\r\n\r\n  private _init (): void {\r\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\r\n    this._target.addEventListener('mouseenter', this._mouseEnterHandler.bind(this))\r\n\r\n    // Do not show context menu when something went wrong\r\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\r\n    this._target.addEventListener('touchcancel', this._clearLongTapTimeout.bind(this))\r\n\r\n    {\r\n      const doc = this._target.ownerDocument\r\n\r\n      const outsideHandler = (event: MouseEvent | TouchEvent): void => {\r\n        if (this._handler.mouseDownOutsideEvent == null) {\r\n          return\r\n        }\r\n\r\n        if (event.composed && this._target.contains(event.composedPath()[0] as Element)) {\r\n          return\r\n        }\r\n\r\n        if ((event.target !== null) && this._target.contains(event.target as Element)) {\r\n          return\r\n        }\r\n\r\n        this._handler.mouseDownOutsideEvent({ x: 0, y: 0, pageX: 0, pageY: 0 })\r\n      }\r\n\r\n      this._unsubscribeOutsideTouchEvents = () => {\r\n        doc.removeEventListener('touchstart', outsideHandler)\r\n      }\r\n\r\n      this._unsubscribeOutsideMouseEvents = () => {\r\n        doc.removeEventListener('mousedown', outsideHandler)\r\n      }\r\n\r\n      doc.addEventListener('mousedown', outsideHandler)\r\n      doc.addEventListener('touchstart', outsideHandler, { passive: true })\r\n    }\r\n\r\n    if (isIOS()) {\r\n      this._unsubscribeMobileSafariEvents = () => {\r\n        this._target.removeEventListener('dblclick', this._onMobileSafariDoubleClick)\r\n      }\r\n      this._target.addEventListener('dblclick', this._onMobileSafariDoubleClick)\r\n    }\r\n\r\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\r\n    this._target.addEventListener('mouseleave', this._mouseLeaveHandler.bind(this))\r\n\r\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\r\n    this._target.addEventListener('touchstart', this._touchStartHandler.bind(this), { passive: true })\r\n\r\n    this._target.addEventListener('mousedown', (e: MouseEvent) => {\r\n      if (e.button === MouseEventButton.Middle) {\r\n        // prevent incorrect scrolling event\r\n        e.preventDefault()\r\n        return false\r\n      }\r\n      return undefined\r\n    })\r\n\r\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\r\n    this._target.addEventListener('mousedown', this._mouseDownHandler.bind(this))\r\n    this._initPinch()\r\n\r\n    // Hey mobile Safari, what's up?\r\n    // If mobile Safari doesn't have any touchmove handler with passive=false\r\n    // it treats a touchstart and the following touchmove events as cancelable=false,\r\n    // so we can't prevent them (as soon we subscribe on touchmove inside touchstart's handler).\r\n    // And we'll get scroll of the page along with chart's one instead of only chart's scroll.\r\n    // eslint-disable-next-line @typescript-eslint/no-empty-function\r\n    this._target.addEventListener('touchmove', () => {}, { passive: false })\r\n  }\r\n\r\n  private _initPinch (): void {\r\n    if (!isValid(this._handler.pinchStartEvent) &&\r\n      !isValid(this._handler.pinchEvent) &&\r\n      !isValid(this._handler.pinchEndEvent)\r\n    ) {\r\n      return\r\n    }\r\n\r\n    this._target.addEventListener(\r\n      'touchstart',\r\n      (event: TouchEvent) => { this._checkPinchState(event.touches) },\r\n      { passive: true }\r\n    )\r\n\r\n    this._target.addEventListener(\r\n      'touchmove',\r\n      (event: TouchEvent) => {\r\n        if (event.touches.length !== 2 || this._startPinchMiddleCoordinate === null) {\r\n          return\r\n        }\r\n        if (isValid(this._handler.pinchEvent)) {\r\n          const currentDistance = this._getTouchDistance(event.touches[0], event.touches[1])\r\n          const scale = currentDistance / this._startPinchDistance\r\n          this._handler.pinchEvent({ ...this._startPinchMiddleCoordinate, pageX: 0, pageY: 0 }, scale)\r\n          this._preventDefault(event)\r\n        }\r\n      },\r\n      { passive: false }\r\n    )\r\n\r\n    this._target.addEventListener('touchend', (event: TouchEvent) => {\r\n      this._checkPinchState(event.touches)\r\n    })\r\n  }\r\n\r\n  private _checkPinchState (touches: TouchList): void {\r\n    if (touches.length === 1) {\r\n      this._pinchPrevented = false\r\n    }\r\n\r\n    if (touches.length !== 2 || this._pinchPrevented || this._longTapActive) {\r\n      this._stopPinch()\r\n    } else {\r\n      this._startPinch(touches)\r\n    }\r\n  }\r\n\r\n  private _startPinch (touches: TouchList): void {\r\n    const box = this._target.getBoundingClientRect()\r\n    this._startPinchMiddleCoordinate = {\r\n      x: ((touches[0].clientX - box.left) + (touches[1].clientX - box.left)) / 2,\r\n      y: ((touches[0].clientY - box.top) + (touches[1].clientY - box.top)) / 2\r\n    }\r\n\r\n    this._startPinchDistance = this._getTouchDistance(touches[0], touches[1])\r\n\r\n    if (isValid(this._handler.pinchStartEvent)) {\r\n      this._handler.pinchStartEvent({ x: 0, y: 0, pageX: 0, pageY: 0 })\r\n    }\r\n\r\n    this._clearLongTapTimeout()\r\n  }\r\n\r\n  private _stopPinch (): void {\r\n    if (this._startPinchMiddleCoordinate === null) {\r\n      return\r\n    }\r\n\r\n    this._startPinchMiddleCoordinate = null\r\n\r\n    if (isValid(this._handler.pinchEndEvent)) {\r\n      this._handler.pinchEndEvent({ x: 0, y: 0, pageX: 0, pageY: 0 })\r\n    }\r\n  }\r\n\r\n  private _mouseLeaveHandler (event: MouseEvent): void {\r\n    this._unsubscribeMousemove?.()\r\n    this._unsubscribeMouseWheel?.()\r\n    this._unsubscribeContextMenu?.()\r\n\r\n    if (this._firesTouchEvents(event)) {\r\n      return\r\n    }\r\n\r\n    if (!this._acceptMouseLeave) {\r\n      // mobile Safari sometimes emits mouse leave event for no reason, there is no way to handle it in other way\r\n      // just ignore this event if there was no mouse move or mouse enter events\r\n      return\r\n    }\r\n\r\n    this._processEvent(this._makeCompatEvent(event), this._handler.mouseLeaveEvent)\r\n\r\n    // accept all mouse leave events if it's not an iOS device\r\n    this._acceptMouseLeave = !isIOS()\r\n  }\r\n\r\n  private _longTapHandler (event: TouchEvent): void {\r\n    const touch = this._touchWithId(event.touches, this._activeTouchId)\r\n    if (touch === null) {\r\n      return\r\n    }\r\n\r\n    this._processEvent(this._makeCompatEvent(event, touch), this._handler.longTapEvent)\r\n    this._cancelTap = true\r\n\r\n    // long tap is active until touchend event with 0 touches occurred\r\n    this._longTapActive = true\r\n  }\r\n\r\n  private _firesTouchEvents (e: MouseEvent): boolean {\r\n    // eslint-disable-next-line @typescript-eslint/ban-ts-comment\r\n    // @ts-expect-error\r\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\r\n    if (isValid(e.sourceCapabilities?.firesTouchEvents)) {\r\n      // eslint-disable-next-line @typescript-eslint/ban-ts-comment\r\n      // @ts-expect-error\r\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-return, @typescript-eslint/no-unsafe-member-access\r\n      return e.sourceCapabilities.firesTouchEvents\r\n    }\r\n\r\n    return this._eventTimeStamp(e) < this._lastTouchEventTimeStamp + Delay.PreventFiresTouchEvents\r\n  }\r\n\r\n  private _processEvent (event: MouseTouchEvent, callback?: MouseTouchEventCallback): void {\r\n    callback?.call(this._handler, event)\r\n  }\r\n\r\n  private _makeCompatEvent (event: MouseEvent | TouchEvent, touch?: Touch): MouseTouchEvent {\r\n    // TouchEvent has no clientX/Y coordinates:\r\n    // We have to use the last Touch instead\r\n    const eventLike = touch ?? (event as MouseEvent)\r\n    const box = this._target.getBoundingClientRect()\r\n    return {\r\n      x: eventLike.clientX - box.left,\r\n      y: eventLike.clientY - box.top,\r\n\r\n      pageX: eventLike.pageX,\r\n      pageY: eventLike.pageY,\r\n      isTouch: !event.type.startsWith('mouse') && event.type !== 'contextmenu' && event.type !== 'click' && event.type !== 'wheel',\r\n\r\n      preventDefault: () => {\r\n        if (event.type !== 'touchstart') {\r\n          // touchstart is passive and cannot be prevented\r\n          this._preventDefault(event)\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  private _getTouchDistance (p1: Touch, p2: Touch): number {\r\n    const xDiff = p1.clientX - p2.clientX\r\n    const yDiff = p1.clientY - p2.clientY\r\n    return Math.sqrt(xDiff * xDiff + yDiff * yDiff)\r\n  }\r\n\r\n  private _preventDefault (event: Event): void {\r\n    if (event.cancelable) {\r\n      event.preventDefault()\r\n    }\r\n  }\r\n\r\n  private _getCoordinate (eventLike: Touch | MouseEvent): Coordinate {\r\n    return {\r\n      x: eventLike.pageX,\r\n      y: eventLike.pageY\r\n    }\r\n  }\r\n\r\n  private _eventTimeStamp (e: TouchEvent | MouseEvent): number {\r\n    // for some reason e.timestamp is always 0 on iPad with magic mouse, so we use performance.now() as a fallback\r\n    // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition\r\n    return e.timeStamp ?? performance.now()\r\n  }\r\n\r\n  private _touchWithId (touches: TouchList, id: Nullable<number>): Nullable<Touch> {\r\n    // eslint-disable-next-line @typescript-eslint/prefer-for-of\r\n    for (let i = 0; i < touches.length; ++i) {\r\n      if (touches[i].identifier === id) {\r\n        return touches[i]\r\n      }\r\n    }\r\n    return null\r\n  }\r\n}\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport type Nullable from './common/Nullable'\r\nimport EventHandlerImp, { type EventHandler, type MouseTouchEvent, TOUCH_MIN_RADIUS } from './common/EventHandler'\r\nimport type Coordinate from './common/Coordinate'\r\nimport { UpdateLevel } from './common/Updater'\r\nimport type Crosshair from './common/Crosshair'\r\nimport { requestAnimationFrame, cancelAnimationFrame } from './common/utils/compatible'\r\nimport { isValid } from './common/utils/typeChecks'\r\n\r\nimport type { AxisRange } from './component/Axis'\r\nimport type YAxis from './component/YAxis'\r\nimport type XAxis from './component/XAxis'\r\n\r\nimport type Chart from './Chart'\r\nimport type Pane from './pane/Pane'\r\nimport type DrawPane from './pane/DrawPane'\r\nimport { PaneIdConstants } from './pane/types'\r\nimport type Widget from './widget/Widget'\r\nimport { WidgetNameConstants, REAL_SEPARATOR_HEIGHT } from './widget/types'\r\n\r\ninterface EventTriggerWidgetInfo {\r\n  pane: Nullable<Pane>\r\n  widget: Nullable<Widget>\r\n}\r\n\r\nexport default class Event implements EventHandler {\r\n  private readonly _container: HTMLElement\r\n  private readonly _chart: Chart\r\n  private readonly _event: EventHandlerImp\r\n\r\n  // ÊÉØÊÄßÊªöÂä®ÂºÄÂßãÊó∂Èó¥\r\n  private _flingStartTime = new Date().getTime()\r\n  // ÊÉØÊÄßÊªöÂä®ÂÆöÊó∂Âô®\r\n  private _flingScrollRequestId: Nullable<number> = null\r\n  // ÂºÄÂßãÊªöÂä®Êó∂ÂùêÊ†áÁÇπ\r\n  private _startScrollCoordinate: Nullable<Coordinate> = null\r\n  // ÂºÄÂßãËß¶Êë∏Êó∂ÂùêÊ†á\r\n  private _touchCoordinate: Nullable<Coordinate> = null\r\n  // ÊòØÂê¶ÊòØÂèñÊ∂à‰∫ÜÂçÅÂ≠óÂÖâÊ†á\r\n  private _touchCancelCrosshair = false\r\n  // ÊòØÂê¶Áº©ÊîæËøá\r\n  private _touchZoomed = false\r\n  // Áî®Êù•ËÆ∞ÂΩïÊçèÂêàÁº©ÊîæÁöÑÂ∞∫ÂØ∏\r\n  private _pinchScale = 1\r\n\r\n  private _mouseDownWidget: Nullable<Widget> = null\r\n\r\n  private _prevYAxisRange: Nullable<AxisRange> = null\r\n\r\n  private _xAxisStartScaleCoordinate: Nullable<Coordinate> = null\r\n  private _xAxisStartScaleDistance = 0\r\n  private _xAxisScale = 1\r\n\r\n  private _yAxisStartScaleDistance = 0\r\n\r\n  private _mouseMoveTriggerWidgetInfo: EventTriggerWidgetInfo = { pane: null, widget: null }\r\n\r\n  private readonly _boundKeyBoardDownEvent: ((event: KeyboardEvent) => void) = (event: KeyboardEvent) => {\r\n    if (event.shiftKey) {\r\n      switch (event.code) {\r\n        case 'Equal': {\r\n          this._chart.getChartStore().zoom(0.5)\r\n          break\r\n        }\r\n        case 'Minus': {\r\n          this._chart.getChartStore().zoom(-0.5)\r\n          break\r\n        }\r\n        case 'ArrowLeft': {\r\n          const store = this._chart.getChartStore()\r\n          store.startScroll()\r\n          store.scroll(-3 * store.getBarSpace().bar)\r\n          break\r\n        }\r\n        case 'ArrowRight': {\r\n          const store = this._chart.getChartStore()\r\n          store.startScroll()\r\n          store.scroll(3 * store.getBarSpace().bar)\r\n          break\r\n        }\r\n        default: {\r\n          break\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  constructor (container: HTMLElement, chart: Chart) {\r\n    this._container = container\r\n    this._chart = chart\r\n    this._event = new EventHandlerImp(container, this, {\r\n      treatVertDragAsPageScroll: () => false,\r\n      treatHorzDragAsPageScroll: () => false\r\n    })\r\n    container.addEventListener('keydown', this._boundKeyBoardDownEvent)\r\n  }\r\n\r\n  pinchStartEvent (): boolean {\r\n    this._touchZoomed = true\r\n    this._pinchScale = 1\r\n    return true\r\n  }\r\n\r\n  pinchEvent (e: MouseTouchEvent, scale: number): boolean {\r\n    const { pane, widget } = this._findWidgetByEvent(e)\r\n    if (pane?.getId() !== PaneIdConstants.X_AXIS && widget?.getName() === WidgetNameConstants.MAIN) {\r\n      const event = this._makeWidgetEvent(e, widget)\r\n      const zoomScale = (scale - this._pinchScale) * 5\r\n      this._pinchScale = scale\r\n      this._chart.getChartStore().zoom(zoomScale, { x: event.x, y: event.y })\r\n      return true\r\n    }\r\n    return false\r\n  }\r\n\r\n  mouseWheelHortEvent (_: MouseTouchEvent, distance: number): boolean {\r\n    const store = this._chart.getChartStore()\r\n    store.startScroll()\r\n    store.scroll(distance)\r\n    return true\r\n  }\r\n\r\n  mouseWheelVertEvent (e: MouseTouchEvent, scale: number): boolean {\r\n    const { widget } = this._findWidgetByEvent(e)\r\n    const event = this._makeWidgetEvent(e, widget)\r\n    const name = widget?.getName()\r\n    if (name === WidgetNameConstants.MAIN) {\r\n      this._chart.getChartStore().zoom(scale, { x: event.x, y: event.y })\r\n      return true\r\n    }\r\n    return false\r\n  }\r\n\r\n  mouseDownEvent (e: MouseTouchEvent): boolean {\r\n    const { pane, widget } = this._findWidgetByEvent(e)\r\n    this._mouseDownWidget = widget\r\n    if (widget !== null) {\r\n      const event = this._makeWidgetEvent(e, widget)\r\n      const name = widget.getName()\r\n      switch (name) {\r\n        case WidgetNameConstants.SEPARATOR: {\r\n          return widget.dispatchEvent('mouseDownEvent', event)\r\n        }\r\n        case WidgetNameConstants.MAIN: {\r\n          const yAxis = (pane as DrawPane<YAxis>).getAxisComponent()\r\n          if (!yAxis.getAutoCalcTickFlag()) {\r\n            const range = yAxis.getRange()\r\n            this._prevYAxisRange = { ...range }\r\n          }\r\n          this._startScrollCoordinate = { x: event.x, y: event.y }\r\n          this._chart.getChartStore().startScroll()\r\n          return widget.dispatchEvent('mouseDownEvent', event)\r\n        }\r\n        case WidgetNameConstants.X_AXIS: {\r\n          return this._processXAxisScrollStartEvent(widget, event)\r\n        }\r\n        case WidgetNameConstants.Y_AXIS: {\r\n          return this._processYAxisScaleStartEvent(widget as Widget<DrawPane<YAxis>>, event)\r\n        }\r\n      }\r\n    }\r\n    return false\r\n  }\r\n\r\n  mouseMoveEvent (e: MouseTouchEvent): boolean {\r\n    const { pane, widget } = this._findWidgetByEvent(e)\r\n    const event = this._makeWidgetEvent(e, widget)\r\n    if (\r\n      this._mouseMoveTriggerWidgetInfo.pane?.getId() !== pane?.getId() ||\r\n      this._mouseMoveTriggerWidgetInfo.widget?.getName() !== widget?.getName()\r\n    ) {\r\n      widget?.dispatchEvent('mouseEnterEvent', event)\r\n      this._mouseMoveTriggerWidgetInfo.widget?.dispatchEvent('mouseLeaveEvent', event)\r\n      this._mouseMoveTriggerWidgetInfo = { pane, widget }\r\n    }\r\n    if (widget !== null) {\r\n      const name = widget.getName()\r\n      switch (name) {\r\n        case WidgetNameConstants.MAIN: {\r\n          const consumed = widget.dispatchEvent('mouseMoveEvent', event)\r\n          let crosshair: Crosshair | undefined = { x: event.x, y: event.y, paneId: pane?.getId() }\r\n          if (consumed) {\r\n            if (widget.getForceCursor() !== 'pointer') {\r\n              crosshair = undefined\r\n            }\r\n            widget.setCursor('pointer')\r\n          } else {\r\n            widget.setCursor('crosshair')\r\n          }\r\n          this._chart.getChartStore().setCrosshair(crosshair)\r\n          return consumed\r\n        }\r\n        case WidgetNameConstants.SEPARATOR:\r\n        case WidgetNameConstants.X_AXIS:\r\n        case WidgetNameConstants.Y_AXIS: {\r\n          const consumed = widget.dispatchEvent('mouseMoveEvent', event)\r\n          this._chart.getChartStore().setCrosshair()\r\n          return consumed\r\n        }\r\n      }\r\n    }\r\n    return false\r\n  }\r\n\r\n  pressedMouseMoveEvent (e: MouseTouchEvent): boolean {\r\n    if (this._mouseDownWidget !== null && this._mouseDownWidget.getName() === WidgetNameConstants.SEPARATOR) {\r\n      return this._mouseDownWidget.dispatchEvent('pressedMouseMoveEvent', e)\r\n    }\r\n    const { pane, widget } = this._findWidgetByEvent(e)\r\n    if (\r\n      widget !== null &&\r\n      this._mouseDownWidget?.getPane().getId() === pane?.getId() &&\r\n      this._mouseDownWidget?.getName() === widget.getName()\r\n    ) {\r\n      const event = this._makeWidgetEvent(e, widget)\r\n      const name = widget.getName()\r\n      switch (name) {\r\n        case WidgetNameConstants.MAIN: {\r\n          // eslint-disable-next-line @typescript-eslint/init-declarations -- ignore\r\n          let crosshair: Crosshair | undefined\r\n          const consumed = widget.dispatchEvent('pressedMouseMoveEvent', event)\r\n          if (!consumed) {\r\n            this._processMainScrollingEvent(widget as Widget<DrawPane<YAxis>>, event)\r\n          }\r\n          if (!consumed || widget.getForceCursor() === 'pointer') {\r\n            crosshair = { x: event.x, y: event.y, paneId: pane?.getId() }\r\n          }\r\n          this._chart.getChartStore().setCrosshair(crosshair, { forceInvalidate: true })\r\n          return consumed\r\n        }\r\n        case WidgetNameConstants.X_AXIS: {\r\n          return this._processXAxisScrollingEvent(widget as Widget<DrawPane<XAxis>>, event)\r\n        }\r\n        case WidgetNameConstants.Y_AXIS: {\r\n          return this._processYAxisScalingEvent(widget as Widget<DrawPane<YAxis>>, event)\r\n        }\r\n      }\r\n    }\r\n    return false\r\n  }\r\n\r\n  mouseUpEvent (e: MouseTouchEvent): boolean {\r\n    const { widget } = this._findWidgetByEvent(e)\r\n    let consumed = false\r\n    if (widget !== null) {\r\n      const event = this._makeWidgetEvent(e, widget)\r\n      const name = widget.getName()\r\n      switch (name) {\r\n        case WidgetNameConstants.MAIN:\r\n        case WidgetNameConstants.SEPARATOR:\r\n        case WidgetNameConstants.X_AXIS:\r\n        case WidgetNameConstants.Y_AXIS: {\r\n          consumed = widget.dispatchEvent('mouseUpEvent', event)\r\n          break\r\n        }\r\n      }\r\n      if (consumed) {\r\n        this._chart.updatePane(UpdateLevel.Overlay)\r\n      }\r\n    }\r\n    this._mouseDownWidget = null\r\n    this._startScrollCoordinate = null\r\n    this._prevYAxisRange = null\r\n    this._xAxisStartScaleCoordinate = null\r\n    this._xAxisStartScaleDistance = 0\r\n    this._xAxisScale = 1\r\n    this._yAxisStartScaleDistance = 0\r\n    return consumed\r\n  }\r\n\r\n  mouseClickEvent (e: MouseTouchEvent): boolean {\r\n    const { widget } = this._findWidgetByEvent(e)\r\n    if (widget !== null) {\r\n      const event = this._makeWidgetEvent(e, widget)\r\n      return widget.dispatchEvent('mouseClickEvent', event)\r\n    }\r\n    return false\r\n  }\r\n\r\n  mouseRightClickEvent (e: MouseTouchEvent): boolean {\r\n    const { widget } = this._findWidgetByEvent(e)\r\n    let consumed = false\r\n    if (widget !== null) {\r\n      const event = this._makeWidgetEvent(e, widget)\r\n      const name = widget.getName()\r\n      switch (name) {\r\n        case WidgetNameConstants.MAIN:\r\n        case WidgetNameConstants.X_AXIS:\r\n        case WidgetNameConstants.Y_AXIS: {\r\n          consumed = widget.dispatchEvent('mouseRightClickEvent', event)\r\n          break\r\n        }\r\n      }\r\n      if (consumed) {\r\n        this._chart.updatePane(UpdateLevel.Overlay)\r\n      }\r\n    }\r\n    return false\r\n  }\r\n\r\n  mouseDoubleClickEvent (e: MouseTouchEvent): boolean {\r\n    const { pane, widget } = this._findWidgetByEvent(e)\r\n    if (widget !== null) {\r\n      const name = widget.getName()\r\n      switch (name) {\r\n        case WidgetNameConstants.MAIN: {\r\n          const event = this._makeWidgetEvent(e, widget)\r\n          return widget.dispatchEvent('mouseDoubleClickEvent', event)\r\n        }\r\n        case WidgetNameConstants.Y_AXIS: {\r\n          const yAxis = (pane as DrawPane<YAxis>).getAxisComponent()\r\n          if (!yAxis.getAutoCalcTickFlag()) {\r\n            yAxis.setAutoCalcTickFlag(true)\r\n            this._chart.layout({\r\n              measureWidth: true,\r\n              update: true,\r\n              buildYAxisTick: true\r\n            })\r\n            return true\r\n          }\r\n          break\r\n        }\r\n      }\r\n    }\r\n    return false\r\n  }\r\n\r\n  mouseLeaveEvent (): boolean {\r\n    this._chart.getChartStore().setCrosshair()\r\n    return true\r\n  }\r\n\r\n  touchStartEvent (e: MouseTouchEvent): boolean {\r\n    const { pane, widget } = this._findWidgetByEvent(e)\r\n    if (widget !== null) {\r\n      const event = this._makeWidgetEvent(e, widget)\r\n      event.preventDefault?.()\r\n      const name = widget.getName()\r\n      switch (name) {\r\n        case WidgetNameConstants.MAIN: {\r\n          const chartStore = this._chart.getChartStore()\r\n          if (widget.dispatchEvent('mouseDownEvent', event)) {\r\n            this._touchCancelCrosshair = true\r\n            this._touchCoordinate = null\r\n            chartStore.setCrosshair(undefined, { notInvalidate: true })\r\n            this._chart.updatePane(UpdateLevel.Overlay)\r\n            return true\r\n          }\r\n          if (this._flingScrollRequestId !== null) {\r\n            cancelAnimationFrame(this._flingScrollRequestId)\r\n            this._flingScrollRequestId = null\r\n          }\r\n          this._flingStartTime = new Date().getTime()\r\n          const yAxis = (pane as DrawPane<YAxis>).getAxisComponent()\r\n          if (!yAxis.getAutoCalcTickFlag()) {\r\n            const range = yAxis.getRange()\r\n            this._prevYAxisRange = { ...range }\r\n          }\r\n          this._startScrollCoordinate = { x: event.x, y: event.y }\r\n          chartStore.startScroll()\r\n          this._touchZoomed = false\r\n          if (this._touchCoordinate !== null) {\r\n            const xDif = event.x - this._touchCoordinate.x\r\n            const yDif = event.y - this._touchCoordinate.y\r\n            const radius = Math.sqrt(xDif * xDif + yDif * yDif)\r\n            if (radius < TOUCH_MIN_RADIUS) {\r\n              this._touchCoordinate = { x: event.x, y: event.y }\r\n              chartStore.setCrosshair({ x: event.x, y: event.y, paneId: pane?.getId() })\r\n            } else {\r\n              this._touchCoordinate = null\r\n              this._touchCancelCrosshair = true\r\n              chartStore.setCrosshair()\r\n            }\r\n          }\r\n          return true\r\n        }\r\n        case WidgetNameConstants.X_AXIS: {\r\n          return this._processXAxisScrollStartEvent(widget, event)\r\n        }\r\n        case WidgetNameConstants.Y_AXIS: {\r\n          return this._processYAxisScaleStartEvent(widget as Widget<DrawPane<YAxis>>, event)\r\n        }\r\n      }\r\n    }\r\n    return false\r\n  }\r\n\r\n  touchMoveEvent (e: MouseTouchEvent): boolean {\r\n    const { pane, widget } = this._findWidgetByEvent(e)\r\n    if (widget !== null) {\r\n      const event = this._makeWidgetEvent(e, widget)\r\n      event.preventDefault?.()\r\n      const name = widget.getName()\r\n      const chartStore = this._chart.getChartStore()\r\n      switch (name) {\r\n        case WidgetNameConstants.MAIN: {\r\n          if (widget.dispatchEvent('pressedMouseMoveEvent', event)) {\r\n            chartStore.setCrosshair(undefined, { notInvalidate: true })\r\n            this._chart.updatePane(UpdateLevel.Overlay)\r\n            return true\r\n          }\r\n          if (this._touchCoordinate !== null) {\r\n            chartStore.setCrosshair({ x: event.x, y: event.y, paneId: pane?.getId() })\r\n          } else {\r\n            this._processMainScrollingEvent(widget as Widget<DrawPane<YAxis>>, event)\r\n          }\r\n          return true\r\n        }\r\n        case WidgetNameConstants.X_AXIS: {\r\n          return this._processXAxisScrollingEvent(widget as Widget<DrawPane<XAxis>>, event)\r\n        }\r\n        case WidgetNameConstants.Y_AXIS: {\r\n          return this._processYAxisScalingEvent(widget as Widget<DrawPane<YAxis>>, event)\r\n        }\r\n      }\r\n    }\r\n    return false\r\n  }\r\n\r\n  touchEndEvent (e: MouseTouchEvent): boolean {\r\n    const { widget } = this._findWidgetByEvent(e)\r\n    if (widget !== null) {\r\n      const event = this._makeWidgetEvent(e, widget)\r\n      const name = widget.getName()\r\n      switch (name) {\r\n        case WidgetNameConstants.MAIN: {\r\n          widget.dispatchEvent('mouseUpEvent', event)\r\n          if (this._startScrollCoordinate !== null) {\r\n            const time = new Date().getTime() - this._flingStartTime\r\n            const distance = event.x - this._startScrollCoordinate.x\r\n            let v = distance / (time > 0 ? time : 1) * 20\r\n            if (time < 200 && Math.abs(v) > 0) {\r\n              const store = this._chart.getChartStore()\r\n              const flingScroll: (() => void) = () => {\r\n                this._flingScrollRequestId = requestAnimationFrame(() => {\r\n                  store.startScroll()\r\n                  store.scroll(v)\r\n                  v = v * (1 - 0.025)\r\n                  if (Math.abs(v) < 1) {\r\n                    if (this._flingScrollRequestId !== null) {\r\n                      cancelAnimationFrame(this._flingScrollRequestId)\r\n                      this._flingScrollRequestId = null\r\n                    }\r\n                  } else {\r\n                    flingScroll()\r\n                  }\r\n                })\r\n              }\r\n              flingScroll()\r\n            }\r\n          }\r\n          return true\r\n        }\r\n        case WidgetNameConstants.X_AXIS:\r\n        case WidgetNameConstants.Y_AXIS: {\r\n          const consumed = widget.dispatchEvent('mouseUpEvent', event)\r\n          if (consumed) {\r\n            this._chart.updatePane(UpdateLevel.Overlay)\r\n          }\r\n        }\r\n      }\r\n      this._startScrollCoordinate = null\r\n      this._prevYAxisRange = null\r\n      this._xAxisStartScaleCoordinate = null\r\n      this._xAxisStartScaleDistance = 0\r\n      this._xAxisScale = 1\r\n      this._yAxisStartScaleDistance = 0\r\n    }\r\n    return false\r\n  }\r\n\r\n  tapEvent (e: MouseTouchEvent): boolean {\r\n    const { pane, widget } = this._findWidgetByEvent(e)\r\n    let consumed = false\r\n    if (widget !== null) {\r\n      const event = this._makeWidgetEvent(e, widget)\r\n      const result = widget.dispatchEvent('mouseClickEvent', event)\r\n      if (widget.getName() === WidgetNameConstants.MAIN) {\r\n        const event = this._makeWidgetEvent(e, widget)\r\n        const chartStore = this._chart.getChartStore()\r\n        if (result) {\r\n          this._touchCancelCrosshair = true\r\n          this._touchCoordinate = null\r\n          chartStore.setCrosshair(undefined, { notInvalidate: true })\r\n          consumed = true\r\n        } else {\r\n          if (!this._touchCancelCrosshair && !this._touchZoomed) {\r\n            this._touchCoordinate = { x: event.x, y: event.y }\r\n            chartStore.setCrosshair({ x: event.x, y: event.y, paneId: pane?.getId() }, { notInvalidate: true })\r\n            consumed = true\r\n          }\r\n          this._touchCancelCrosshair = false\r\n        }\r\n      }\r\n      if (consumed || result) {\r\n        this._chart.updatePane(UpdateLevel.Overlay)\r\n      }\r\n    }\r\n    return consumed\r\n  }\r\n\r\n  doubleTapEvent (e: MouseTouchEvent): boolean {\r\n    return this.mouseDoubleClickEvent(e)\r\n  }\r\n\r\n  longTapEvent (e: MouseTouchEvent): boolean {\r\n    const { pane, widget } = this._findWidgetByEvent(e)\r\n    if (widget !== null && widget.getName() === WidgetNameConstants.MAIN) {\r\n      const event = this._makeWidgetEvent(e, widget)\r\n      this._touchCoordinate = { x: event.x, y: event.y }\r\n      this._chart.getChartStore().setCrosshair({ x: event.x, y: event.y, paneId: pane?.getId() })\r\n      return true\r\n    }\r\n    return false\r\n  }\r\n\r\n  private _processMainScrollingEvent (widget: Widget<DrawPane<YAxis>>, event: MouseTouchEvent): void {\r\n    if (this._startScrollCoordinate !== null) {\r\n      const yAxis = widget.getPane().getAxisComponent()\r\n      if (this._prevYAxisRange !== null && !yAxis.getAutoCalcTickFlag() && yAxis.scrollZoomEnabled) {\r\n        const { from, to, range } = this._prevYAxisRange\r\n        let distance = 0\r\n        if (yAxis.reverse) {\r\n          distance = this._startScrollCoordinate.y - event.y\r\n        } else {\r\n          distance = event.y - this._startScrollCoordinate.y\r\n        }\r\n        const bounding = widget.getBounding()\r\n        const scale = distance / bounding.height\r\n        const difRange = range * scale\r\n        const newFrom = from + difRange\r\n        const newTo = to + difRange\r\n        const newRealFrom = yAxis.valueToRealValue(newFrom, { range: this._prevYAxisRange })\r\n        const newRealTo = yAxis.valueToRealValue(newTo, { range: this._prevYAxisRange })\r\n        const newDisplayFrom = yAxis.realValueToDisplayValue(newRealFrom, { range: this._prevYAxisRange })\r\n        const newDisplayTo = yAxis.realValueToDisplayValue(newRealTo, { range: this._prevYAxisRange })\r\n        yAxis.setRange({\r\n          from: newFrom,\r\n          to: newTo,\r\n          range: newTo - newFrom,\r\n          realFrom: newRealFrom,\r\n          realTo: newRealTo,\r\n          realRange: newRealTo - newRealFrom,\r\n          displayFrom: newDisplayFrom,\r\n          displayTo: newDisplayTo,\r\n          displayRange: newDisplayTo - newDisplayFrom\r\n        })\r\n      }\r\n      const distance = event.x - this._startScrollCoordinate.x\r\n      this._chart.getChartStore().scroll(distance)\r\n    }\r\n  }\r\n\r\n  private _processXAxisScrollStartEvent (widget: Widget, event: MouseTouchEvent): boolean {\r\n    const consumed = widget.dispatchEvent('mouseDownEvent', event)\r\n    if (consumed) {\r\n      this._chart.updatePane(UpdateLevel.Overlay)\r\n    }\r\n    this._xAxisStartScaleCoordinate = { x: event.x, y: event.y }\r\n    this._xAxisStartScaleDistance = event.pageX\r\n    return consumed\r\n  }\r\n\r\n  private _processXAxisScrollingEvent (widget: Widget<DrawPane<XAxis>>, event: MouseTouchEvent): boolean {\r\n    const consumed = widget.dispatchEvent('pressedMouseMoveEvent', event)\r\n    if (!consumed) {\r\n      const xAxis = widget.getPane().getAxisComponent()\r\n      if (xAxis.scrollZoomEnabled && this._xAxisStartScaleDistance !== 0) {\r\n        const scale = this._xAxisStartScaleDistance / event.pageX\r\n        if (Number.isFinite(scale)) {\r\n          const zoomScale = (scale - this._xAxisScale) * 10\r\n          this._xAxisScale = scale\r\n          this._chart.getChartStore().zoom(zoomScale, this._xAxisStartScaleCoordinate ?? undefined)\r\n        }\r\n      }\r\n    } else {\r\n      this._chart.updatePane(UpdateLevel.Overlay)\r\n    }\r\n    return consumed\r\n  }\r\n\r\n  private _processYAxisScaleStartEvent (widget: Widget<DrawPane<YAxis>>, event: MouseTouchEvent): boolean {\r\n    const consumed = widget.dispatchEvent('mouseDownEvent', event)\r\n    if (consumed) {\r\n      this._chart.updatePane(UpdateLevel.Overlay)\r\n    }\r\n    const range = widget.getPane().getAxisComponent().getRange()\r\n    this._prevYAxisRange = { ...range }\r\n    this._yAxisStartScaleDistance = event.pageY\r\n    return consumed\r\n  }\r\n\r\n  private _processYAxisScalingEvent (widget: Widget<DrawPane<YAxis>>, event: MouseTouchEvent): boolean {\r\n    const consumed = widget.dispatchEvent('pressedMouseMoveEvent', event)\r\n    if (!consumed) {\r\n      const yAxis = widget.getPane().getAxisComponent()\r\n      if (this._prevYAxisRange !== null && yAxis.scrollZoomEnabled && this._yAxisStartScaleDistance !== 0) {\r\n        const { from, to, range } = this._prevYAxisRange\r\n        const scale = event.pageY / this._yAxisStartScaleDistance\r\n        const newRange = range * scale\r\n        const difRange = (newRange - range) / 2\r\n        const newFrom = from - difRange\r\n        const newTo = to + difRange\r\n        const newRealFrom = yAxis.valueToRealValue(newFrom, { range: this._prevYAxisRange })\r\n        const newRealTo = yAxis.valueToRealValue(newTo, { range: this._prevYAxisRange })\r\n        const newDisplayFrom = yAxis.realValueToDisplayValue(newRealFrom, { range: this._prevYAxisRange })\r\n        const newDisplayTo = yAxis.realValueToDisplayValue(newRealTo, { range: this._prevYAxisRange })\r\n        yAxis.setRange({\r\n          from: newFrom,\r\n          to: newTo,\r\n          range: newRange,\r\n          realFrom: newRealFrom,\r\n          realTo: newRealTo,\r\n          realRange: newRealTo - newRealFrom,\r\n          displayFrom: newDisplayFrom,\r\n          displayTo: newDisplayTo,\r\n          displayRange: newDisplayTo - newDisplayFrom\r\n        })\r\n        this._chart.layout({\r\n          measureWidth: true,\r\n          update: true,\r\n          buildYAxisTick: true\r\n        })\r\n      }\r\n    } else {\r\n      this._chart.updatePane(UpdateLevel.Overlay)\r\n    }\r\n    return consumed\r\n  }\r\n\r\n  private _findWidgetByEvent (event: MouseTouchEvent): EventTriggerWidgetInfo {\r\n    const { x, y } = event\r\n    const separatorPanes = this._chart.getSeparatorPanes()\r\n    const separatorSize = this._chart.getStyles().separator.size\r\n    for (const items of separatorPanes) {\r\n      const pane = items[1]\r\n      const bounding = pane.getBounding()\r\n      const top = bounding.top - Math.round((REAL_SEPARATOR_HEIGHT - separatorSize) / 2)\r\n      if (\r\n        x >= bounding.left && x <= bounding.left + bounding.width &&\r\n        y >= top && y <= top + REAL_SEPARATOR_HEIGHT\r\n      ) {\r\n        return { pane, widget: pane.getWidget() }\r\n      }\r\n    }\r\n\r\n    const drawPanes = this._chart.getDrawPanes()\r\n\r\n    let pane: Nullable<DrawPane> = null\r\n    for (const p of drawPanes) {\r\n      const bounding = p.getBounding()\r\n      if (\r\n        x >= bounding.left && x <= bounding.left + bounding.width &&\r\n        y >= bounding.top && y <= bounding.top + bounding.height\r\n      ) {\r\n        pane = p\r\n        break\r\n      }\r\n    }\r\n    let widget: Nullable<Widget> = null\r\n    if (pane !== null) {\r\n      if (!isValid(widget)) {\r\n        const mainWidget = pane.getMainWidget()\r\n        const mainBounding = mainWidget.getBounding()\r\n        if (\r\n          x >= mainBounding.left && x <= mainBounding.left + mainBounding.width &&\r\n          y >= mainBounding.top && y <= mainBounding.top + mainBounding.height\r\n        ) {\r\n          widget = mainWidget\r\n        }\r\n      }\r\n      if (!isValid(widget)) {\r\n        const yAxisWidget = pane.getYAxisWidget()\r\n        if (yAxisWidget !== null) {\r\n          const yAxisBounding = yAxisWidget.getBounding()\r\n          if (\r\n            x >= yAxisBounding.left && x <= yAxisBounding.left + yAxisBounding.width &&\r\n            y >= yAxisBounding.top && y <= yAxisBounding.top + yAxisBounding.height\r\n          ) {\r\n            widget = yAxisWidget\r\n          }\r\n        }\r\n      }\r\n    }\r\n    return { pane, widget }\r\n  }\r\n\r\n  private _makeWidgetEvent (event: MouseTouchEvent, widget: Nullable<Widget>): MouseTouchEvent {\r\n    const bounding = widget?.getBounding() ?? null\r\n    return {\r\n      ...event,\r\n      x: event.x - (bounding?.left ?? 0),\r\n      y: event.y - (bounding?.top ?? 0)\r\n    }\r\n  }\r\n\r\n  destroy (): void {\r\n    this._container.removeEventListener('keydown', this._boundKeyBoardDownEvent)\r\n    this._event.destroy()\r\n  }\r\n}\r\n","/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport type Nullable from './common/Nullable'\r\nimport type DeepPartial from './common/DeepPartial'\r\nimport type PickPartial from './common/PickPartial'\r\nimport type Bounding from './common/Bounding'\r\nimport { createDefaultBounding } from './common/Bounding'\r\nimport type { KLineData } from './common/Data'\r\nimport type Coordinate from './common/Coordinate'\r\nimport type Point from './common/Point'\r\nimport { UpdateLevel } from './common/Updater'\r\nimport type Crosshair from './common/Crosshair'\r\nimport type { ActionType, ActionCallback } from './common/Action'\r\nimport type { DataLoader } from './common/DataLoader'\r\nimport type VisibleRange from './common/VisibleRange'\r\nimport type { Formatter, DecimalFold, LayoutChild, Options, ThousandsSeparator } from './Options'\r\nimport Animation from './common/Animation'\r\nimport { createId } from './common/utils/id'\r\nimport { createDom } from './common/utils/dom'\r\nimport { getPixelRatio } from './common/utils/canvas'\r\nimport { isString, isArray, isValid, merge, isNumber } from './common/utils/typeChecks'\r\nimport { logWarn } from './common/utils/logger'\r\nimport { binarySearchNearest } from './common/utils/number'\r\nimport type { Styles } from './common/Styles'\r\nimport type BarSpace from './common/BarSpace'\r\nimport type PickRequired from './common/PickRequired'\r\nimport type { SymbolInfo } from './common/SymbolInfo'\r\nimport type { Period } from './common/Period'\r\n\r\nimport ChartStore, { SCALE_MULTIPLIER, type Store } from './Store'\r\n\r\nimport CandlePane from './pane/CandlePane'\r\nimport IndicatorPane from './pane/IndicatorPane'\r\nimport XAxisPane from './pane/XAxisPane'\r\nimport type DrawPane from './pane/DrawPane'\r\nimport SeparatorPane from './pane/SeparatorPane'\r\n\r\nimport { type PaneOptions, PANE_DEFAULT_HEIGHT, PaneIdConstants, PANE_MIN_HEIGHT } from './pane/types'\r\n\r\nimport type AxisImp from './component/Axis'\r\nimport type { YAxis } from './component/YAxis'\r\n\r\nimport type { IndicatorFilter, Indicator, IndicatorCreate, IndicatorOverride } from './component/Indicator'\r\nimport type { OverlayFilter, Overlay, OverlayCreate, OverlayOverride } from './component/Overlay'\r\n\r\nimport { getIndicatorClass } from './extension/indicator/index'\r\n\r\nimport Event from './Event'\r\n\r\nexport type DomPosition = 'root' | 'main' | 'yAxis'\r\n\r\nexport interface ConvertFilter {\r\n  paneId?: string\r\n  absolute?: boolean\r\n}\r\n\r\nexport interface DomFilter {\r\n  paneId: string\r\n  position?: DomPosition\r\n}\r\n\r\nexport interface Chart extends Store {\r\n  id: string\r\n  getDom: (paneId?: string, position?: DomPosition) => Nullable<HTMLElement>\r\n  getSize: (paneId?: string, position?: DomPosition) => Nullable<Bounding>\r\n  createIndicator: (value: string | IndicatorCreate, isStack?: boolean, paneOptions?: PaneOptions) => Nullable<string>\r\n  getIndicators: (filter?: IndicatorFilter) => Indicator[]\r\n  createOverlay: (value: string | OverlayCreate | Array<string | OverlayCreate>) => Nullable<string> | Array<Nullable<string>>\r\n  getOverlays: (filter?: OverlayFilter) => Overlay[]\r\n  setPaneOptions: (options: PaneOptions) => void\r\n  getPaneOptions: (id?: string) => Nullable<PaneOptions> | PaneOptions[]\r\n  scrollByDistance: (distance: number, animationDuration?: number) => void\r\n  scrollToRealTime: (animationDuration?: number) => void\r\n  scrollToDataIndex: (dataIndex: number, animationDuration?: number) => void\r\n  scrollToTimestamp: (timestamp: number, animationDuration?: number) => void\r\n  zoomAtCoordinate: (scale: number, coordinate?: Coordinate, animationDuration?: number) => void\r\n  zoomAtDataIndex: (scale: number, dataIndex: number, animationDuration?: number) => void\r\n  zoomAtTimestamp: (scale: number, timestamp: number, animationDuration?: number) => void\r\n  convertToPixel: (points: Partial<Point> | Array<Partial<Point>>, filter?: ConvertFilter) => Partial<Coordinate> | Array<Partial<Coordinate>>\r\n  convertFromPixel: (coordinates: Array<Partial<Coordinate>>, filter?: ConvertFilter) => Partial<Point> | Array<Partial<Point>>\r\n  executeAction: (type: ActionType, data: Crosshair) => void\r\n  subscribeAction: (type: ActionType, callback: ActionCallback) => void\r\n  unsubscribeAction: (type: ActionType, callback?: ActionCallback) => void\r\n  setCrosshair: (crosshair?: Crosshair) => void\r\n  getConvertPictureUrl: (includeOverlay?: boolean, type?: 'png' | 'jpeg' | 'bmp', backgroundColor?: string) => string\r\n  resize: () => void\r\n}\r\n\r\nexport default class ChartImp implements Chart {\r\n  id: string\r\n\r\n  private _container: HTMLElement\r\n  private _chartContainer: HTMLElement\r\n  private readonly _chartBounding = createDefaultBounding()\r\n  private readonly _chartEvent: Event\r\n  private readonly _chartStore: ChartStore\r\n  private _drawPanes: DrawPane[] = []\r\n  private _candlePane: CandlePane\r\n  private _xAxisPane: XAxisPane\r\n  private readonly _separatorPanes = new Map<DrawPane, SeparatorPane>()\r\n\r\n  private _layoutOptions = {\r\n    sort: true,\r\n    measureHeight: true,\r\n    measureWidth: true,\r\n    update: true,\r\n    buildYAxisTick: false,\r\n    cacheYAxisWidth: false,\r\n    forceBuildYAxisTick: false\r\n  }\r\n\r\n  private _layoutPending = false\r\n\r\n  private readonly _cacheYAxisWidth = { left: 0, right: 0 }\r\n\r\n  constructor(container: HTMLElement, options?: Options) {\r\n    this._initContainer(container)\r\n    this._chartEvent = new Event(this._chartContainer, this)\r\n    this._chartStore = new ChartStore(this, options)\r\n    this._initPanes(options)\r\n    this._layout()\r\n  }\r\n\r\n  private _initContainer(container: HTMLElement): void {\r\n    this._container = container\r\n    this._chartContainer = createDom('div', {\r\n      position: 'relative',\r\n      width: '100%',\r\n      height: '100%',\r\n      outline: 'none',\r\n      borderStyle: 'none',\r\n      cursor: 'crosshair',\r\n      boxSizing: 'border-box',\r\n      userSelect: 'none',\r\n      webkitUserSelect: 'none',\r\n      overflow: 'hidden',\r\n      // eslint-disable-next-line @typescript-eslint/ban-ts-comment -- ignore\r\n      // @ts-expect-error\r\n      msUserSelect: 'none',\r\n      MozUserSelect: 'none',\r\n      webkitTapHighlightColor: 'transparent'\r\n    })\r\n    this._chartContainer.tabIndex = 1\r\n    container.appendChild(this._chartContainer)\r\n    this._cacheChartBounding()\r\n  }\r\n\r\n  private _cacheChartBounding(): void {\r\n    this._chartBounding.width = Math.floor(this._chartContainer.clientWidth)\r\n    this._chartBounding.height = Math.floor(this._chartContainer.clientHeight)\r\n  }\r\n\r\n  private _initPanes(options?: Options): void {\r\n    const layout = options?.layout ?? [{ type: 'candle' }]\r\n\r\n    const createCandlePane: ((child: LayoutChild) => void) = child => {\r\n      if (!isValid(this._candlePane)) {\r\n        const paneOptions = child.options ?? {}\r\n        merge(paneOptions, { id: PaneIdConstants.CANDLE })\r\n        this._candlePane = this._createPane<CandlePane>(CandlePane, PaneIdConstants.CANDLE, paneOptions)\r\n        const content = child.content ?? []\r\n        content.forEach(v => {\r\n          this.createIndicator(v, true, paneOptions)\r\n        })\r\n      }\r\n    }\r\n\r\n    const createXAxisPane: ((ops?: PaneOptions) => void) = (ops?: PaneOptions) => {\r\n      if (!isValid(this._xAxisPane)) {\r\n        const pane = this._createPane<XAxisPane>(XAxisPane, PaneIdConstants.X_AXIS, ops ?? {})\r\n        this._xAxisPane = pane\r\n      }\r\n    }\r\n\r\n    layout.forEach(child => {\r\n      switch (child.type) {\r\n        case 'candle': {\r\n          createCandlePane(child)\r\n          break\r\n        }\r\n        case 'indicator': {\r\n          const content = child.content ?? []\r\n          if (content.length > 0) {\r\n            let paneId: Nullable<string> = child.options?.id ?? null\r\n            if (isValid(paneId)) {\r\n              paneId = createId(PaneIdConstants.INDICATOR)\r\n            }\r\n            const paneOptions = { ...child.options, id: paneId! }\r\n            content.forEach(v => {\r\n              this.createIndicator(v, true, paneOptions)\r\n            })\r\n          }\r\n          break\r\n        }\r\n        case 'xAxis': {\r\n          createXAxisPane(child.options)\r\n          break\r\n        }\r\n      }\r\n    })\r\n    createCandlePane({ type: 'candle' })\r\n    createXAxisPane({ order: Number.MAX_SAFE_INTEGER })\r\n  }\r\n\r\n  private _createPane<P extends DrawPane>(\r\n    DrawPaneClass: new (chart: Chart, id: string, options: Omit<PaneOptions, 'id' | 'height'>) => P,\r\n    id: string,\r\n    options?: PaneOptions\r\n  ): P {\r\n    const pane = new DrawPaneClass(this, id, options ?? {})\r\n    this._drawPanes.push(pane)\r\n    return pane\r\n  }\r\n\r\n  private _recalculatePaneHeight(currentPane: DrawPane, currentHeight: number, changeHeight: number): boolean {\r\n    if (changeHeight === 0) {\r\n      return false\r\n    }\r\n    const normalStatePanes = this._drawPanes.filter(pane => {\r\n      const paneId = pane.getId()\r\n      return (\r\n        pane.getOptions().state === 'normal' &&\r\n        paneId !== currentPane.getId() &&\r\n        paneId !== PaneIdConstants.X_AXIS\r\n      )\r\n    })\r\n\r\n    const count = normalStatePanes.length\r\n    if (count === 0) {\r\n      return false\r\n    }\r\n    if (\r\n      currentPane.getId() !== PaneIdConstants.CANDLE &&\r\n      isValid(this._candlePane) &&\r\n      this._candlePane.getOptions().state === 'normal'\r\n    ) {\r\n      const height = this._candlePane.getBounding().height\r\n      if (height > 0) {\r\n        const minHeight = this._candlePane.getOptions().minHeight\r\n        let newHeight = height + changeHeight\r\n        if (newHeight < minHeight) {\r\n          newHeight = minHeight\r\n          currentHeight -= (height + changeHeight - newHeight)\r\n        }\r\n        this._candlePane.setBounding({ height: newHeight })\r\n      }\r\n    } else {\r\n      let remainingHeight = changeHeight\r\n      const normalStatePaneChangeHeight = Math.floor(changeHeight / count)\r\n      normalStatePanes.forEach((pane, index) => {\r\n        const height = pane.getBounding().height\r\n        let newHeight = 0\r\n        if (index === count - 1) {\r\n          newHeight = height + remainingHeight\r\n        } else {\r\n          newHeight = height + normalStatePaneChangeHeight\r\n        }\r\n        if (newHeight < pane.getOptions().minHeight) {\r\n          newHeight = pane.getOptions().minHeight\r\n        }\r\n        pane.setBounding({ height: newHeight })\r\n        remainingHeight -= (newHeight - height)\r\n      })\r\n      if (Math.abs(remainingHeight) > 0) {\r\n        currentHeight -= remainingHeight\r\n      }\r\n    }\r\n    currentPane.setBounding({ height: currentHeight })\r\n    return true\r\n  }\r\n\r\n  getDrawPaneById(paneId: string): Nullable<DrawPane> {\r\n    if (paneId === PaneIdConstants.CANDLE) {\r\n      return this._candlePane\r\n    }\r\n    if (paneId === PaneIdConstants.X_AXIS) {\r\n      return this._xAxisPane\r\n    }\r\n    const pane = this._drawPanes.find(p => p.getId() === paneId)\r\n    return pane ?? null\r\n  }\r\n\r\n  getContainer(): HTMLElement { return this._container }\r\n\r\n  getChartStore(): ChartStore { return this._chartStore }\r\n\r\n  getXAxisPane(): XAxisPane { return this._xAxisPane }\r\n\r\n  getDrawPanes(): DrawPane[] { return this._drawPanes }\r\n\r\n  getSeparatorPanes(): Map<DrawPane, SeparatorPane> { return this._separatorPanes }\r\n\r\n  layout(options: {\r\n    sort?: boolean\r\n    measureHeight?: boolean\r\n    measureWidth?: boolean\r\n    update?: boolean\r\n    buildYAxisTick?: boolean\r\n    cacheYAxisWidth?: boolean\r\n    forceBuildYAxisTick?: boolean\r\n  }): void {\r\n    if (options.sort ?? false) {\r\n      this._layoutOptions.sort = options.sort!\r\n    }\r\n    if (options.measureHeight ?? false) {\r\n      this._layoutOptions.measureHeight = options.measureHeight!\r\n    }\r\n    if (options.measureWidth ?? false) {\r\n      this._layoutOptions.measureWidth = options.measureWidth!\r\n    }\r\n    if (options.update ?? false) {\r\n      this._layoutOptions.update = options.update!\r\n    }\r\n    if (options.buildYAxisTick ?? false) {\r\n      this._layoutOptions.buildYAxisTick = options.buildYAxisTick!\r\n    }\r\n    if (options.cacheYAxisWidth ?? false) {\r\n      this._layoutOptions.cacheYAxisWidth = options.cacheYAxisWidth!\r\n    }\r\n    if (options.buildYAxisTick ?? false) {\r\n      this._layoutOptions.forceBuildYAxisTick = options.forceBuildYAxisTick!\r\n    }\r\n    if (!this._layoutPending) {\r\n      this._layoutPending = true\r\n      Promise.resolve().then(_ => {\r\n        this._layout()\r\n        this._layoutPending = false\r\n      }).catch((_: unknown) => {\r\n        // todo\r\n      })\r\n    }\r\n  }\r\n\r\n  private _layout(): void {\r\n    const { sort, measureHeight, measureWidth, update, buildYAxisTick, cacheYAxisWidth, forceBuildYAxisTick } = this._layoutOptions\r\n    if (sort) {\r\n      while (isValid(this._chartContainer.firstChild)) {\r\n        this._chartContainer.removeChild(this._chartContainer.firstChild)\r\n      }\r\n      this._separatorPanes.clear()\r\n      this._drawPanes.sort((a, b) => a.getOptions().order - b.getOptions().order)\r\n      let prevPane: Nullable<DrawPane> = null\r\n      this._drawPanes.forEach(pane => {\r\n        if (pane.getId() !== PaneIdConstants.X_AXIS) {\r\n          if (isValid(prevPane)) {\r\n            const separatorPane = new SeparatorPane(this, '', prevPane, pane)\r\n            this._chartContainer.appendChild(separatorPane.getContainer())\r\n            this._separatorPanes.set(pane, separatorPane)\r\n          }\r\n          prevPane = pane\r\n        }\r\n        this._chartContainer.appendChild(pane.getContainer())\r\n      })\r\n    }\r\n    if (measureHeight) {\r\n      const totalHeight = this._chartBounding.height\r\n      const separatorSize = this.getStyles().separator.size\r\n      const xAxisHeight = this._xAxisPane.getAxisComponent().getAutoSize()\r\n      let remainingHeight = totalHeight - xAxisHeight\r\n      if (remainingHeight < 0) {\r\n        remainingHeight = 0\r\n      }\r\n      this._drawPanes.forEach(pane => {\r\n        const paneId = pane.getId()\r\n        if (isValid(this._separatorPanes.get(pane))) {\r\n          remainingHeight -= separatorSize\r\n        }\r\n        if (paneId !== PaneIdConstants.X_AXIS && paneId !== PaneIdConstants.CANDLE && pane.getVisible()) {\r\n          let paneHeight = pane.getBounding().height\r\n          if (paneHeight > remainingHeight) {\r\n            paneHeight = remainingHeight\r\n            remainingHeight = 0\r\n          } else {\r\n            remainingHeight -= paneHeight\r\n          }\r\n          pane.setBounding({ height: paneHeight })\r\n        }\r\n      })\r\n\r\n      this._candlePane.setBounding({ height: Math.max(remainingHeight, 0) })\r\n      this._xAxisPane.setBounding({ height: xAxisHeight })\r\n\r\n      let top = 0\r\n      this._drawPanes.forEach(pane => {\r\n        const separatorPane = this._separatorPanes.get(pane)\r\n        if (isValid(separatorPane)) {\r\n          separatorPane.setBounding({ height: separatorSize, top })\r\n          top += separatorSize\r\n        }\r\n        pane.setBounding({ top })\r\n        top += pane.getBounding().height\r\n      })\r\n    }\r\n    let forceMeasureWidth = measureWidth\r\n    if (buildYAxisTick || forceBuildYAxisTick) {\r\n      this._drawPanes.forEach(pane => {\r\n        const success = (pane.getAxisComponent() as AxisImp).buildTicks(forceBuildYAxisTick)\r\n        forceMeasureWidth ||= success\r\n      })\r\n    }\r\n    if (forceMeasureWidth) {\r\n      const totalWidth = this._chartBounding.width\r\n      const styles = this.getStyles()\r\n\r\n      let leftYAxisWidth = 0\r\n      let leftYAxisOutside = true\r\n      let rightYAxisWidth = 0\r\n      let rightYAxisOutside = true\r\n\r\n      this._drawPanes.forEach(pane => {\r\n        if (pane.getId() !== PaneIdConstants.X_AXIS) {\r\n          const yAxis = pane.getAxisComponent() as YAxis\r\n          const inside = yAxis.inside\r\n          const yAxisWidth = yAxis.getAutoSize()\r\n          if (yAxis.position === 'left') {\r\n            leftYAxisWidth = Math.max(leftYAxisWidth, yAxisWidth)\r\n            if (inside) {\r\n              leftYAxisOutside = false\r\n            }\r\n          } else {\r\n            rightYAxisWidth = Math.max(rightYAxisWidth, yAxisWidth)\r\n            if (inside) {\r\n              rightYAxisOutside = false\r\n            }\r\n          }\r\n        }\r\n      })\r\n\r\n      if (cacheYAxisWidth) {\r\n        leftYAxisWidth = Math.max(this._cacheYAxisWidth.left, leftYAxisWidth)\r\n        rightYAxisWidth = Math.max(this._cacheYAxisWidth.right, rightYAxisWidth)\r\n      }\r\n\r\n      this._cacheYAxisWidth.left = leftYAxisWidth\r\n      this._cacheYAxisWidth.right = rightYAxisWidth\r\n\r\n      let mainWidth = totalWidth\r\n      let mainLeft = 0\r\n      let mainRight = 0\r\n      // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition -- ignore\r\n      if (leftYAxisOutside) {\r\n        mainWidth -= leftYAxisWidth\r\n        mainLeft = leftYAxisWidth\r\n      }\r\n\r\n      // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition -- ignore\r\n      if (rightYAxisOutside) {\r\n        mainWidth -= rightYAxisWidth\r\n        mainRight = rightYAxisWidth\r\n      }\r\n\r\n      this._chartStore.setTotalBarSpace(mainWidth)\r\n\r\n      const paneBounding = { width: totalWidth }\r\n      const mainBounding = { width: mainWidth, left: mainLeft, right: mainRight }\r\n      const leftYAxisBounding = { width: leftYAxisWidth }\r\n      const rightYAxisBounding = { width: rightYAxisWidth }\r\n      const separatorFill = styles.separator.fill\r\n      let separatorBounding: Partial<Bounding> = {}\r\n      if (!separatorFill) {\r\n        separatorBounding = mainBounding\r\n      } else {\r\n        separatorBounding = paneBounding\r\n      }\r\n      this._drawPanes.forEach((pane) => {\r\n        this._separatorPanes.get(pane)?.setBounding(separatorBounding)\r\n        pane.setBounding(paneBounding, mainBounding, leftYAxisBounding, rightYAxisBounding)\r\n      })\r\n    }\r\n    if (update) {\r\n      (this._xAxisPane.getAxisComponent() as unknown as AxisImp).buildTicks(true)\r\n      this.updatePane(UpdateLevel.All)\r\n    }\r\n    this._layoutOptions = {\r\n      sort: false,\r\n      measureHeight: false,\r\n      measureWidth: false,\r\n      update: false,\r\n      buildYAxisTick: false,\r\n      cacheYAxisWidth: false,\r\n      forceBuildYAxisTick: false\r\n    }\r\n  }\r\n\r\n  updatePane(level: UpdateLevel, paneId?: string): void {\r\n    if (isValid(paneId)) {\r\n      const pane = this.getDrawPaneById(paneId)\r\n      pane?.update(level)\r\n    } else {\r\n      this._drawPanes.forEach(pane => {\r\n        pane.update(level)\r\n        this._separatorPanes.get(pane)?.update(level)\r\n      })\r\n    }\r\n  }\r\n\r\n  getDom(paneId?: string, position?: DomPosition): Nullable<HTMLElement> {\r\n    if (isValid(paneId)) {\r\n      const pane = this.getDrawPaneById(paneId)\r\n      if (isValid(pane)) {\r\n        const pos = position ?? 'root'\r\n        switch (pos) {\r\n          case 'root': {\r\n            return pane.getContainer()\r\n          }\r\n          case 'main': {\r\n            return pane.getMainWidget().getContainer()\r\n          }\r\n          case 'yAxis': {\r\n            return pane.getYAxisWidget()?.getContainer() ?? null\r\n          }\r\n        }\r\n      }\r\n    } else {\r\n      return this._chartContainer\r\n    }\r\n    return null\r\n  }\r\n\r\n  getSize(paneId?: string, position?: DomPosition): Nullable<Bounding> {\r\n    if (isValid(paneId)) {\r\n      const pane = this.getDrawPaneById(paneId)\r\n      if (isValid(pane)) {\r\n        const pos = position ?? 'root'\r\n        switch (pos) {\r\n          case 'root': {\r\n            return pane.getBounding()\r\n          }\r\n          case 'main': {\r\n            return pane.getMainWidget().getBounding()\r\n          }\r\n          case 'yAxis': {\r\n            return pane.getYAxisWidget()?.getBounding() ?? null\r\n          }\r\n        }\r\n      }\r\n    } else {\r\n      return this._chartBounding\r\n    }\r\n    return null\r\n  }\r\n\r\n  private _resetYAxisAutoCalcTickFlag(): void {\r\n    this._drawPanes.forEach(pane => {\r\n      (pane.getAxisComponent() as AxisImp).setAutoCalcTickFlag(true)\r\n    })\r\n  }\r\n\r\n  setSymbol(symbol: PickPartial<SymbolInfo, 'pricePrecision' | 'volumePrecision'>): void {\r\n    if (symbol !== this.getSymbol()) {\r\n      this._resetYAxisAutoCalcTickFlag()\r\n      this._chartStore.setSymbol(symbol)\r\n    }\r\n  }\r\n\r\n  getSymbol(): Nullable<SymbolInfo> {\r\n    return this._chartStore.getSymbol()\r\n  }\r\n\r\n  setPeriod(period: Period): void {\r\n    if (period !== this.getPeriod()) {\r\n      this._resetYAxisAutoCalcTickFlag()\r\n      this._chartStore.setPeriod(period)\r\n    }\r\n  }\r\n\r\n  getPeriod(): Nullable<Period> {\r\n    return this._chartStore.getPeriod()\r\n  }\r\n\r\n  setStyles(value: string | DeepPartial<Styles>): void {\r\n    this._setOptions(() => {\r\n      this._chartStore.setStyles(value)\r\n    })\r\n  }\r\n\r\n  getStyles(): Styles { return this._chartStore.getStyles() }\r\n\r\n  setFormatter(formatter: Partial<Formatter>): void {\r\n    this._setOptions(() => {\r\n      this._chartStore.setFormatter(formatter)\r\n    })\r\n  }\r\n\r\n  getFormatter(): Formatter { return this._chartStore.getFormatter() }\r\n\r\n  setLocale(locale: string): void {\r\n    this._setOptions(() => {\r\n      this._chartStore.setLocale(locale)\r\n    })\r\n  }\r\n\r\n  getLocale(): string { return this._chartStore.getLocale() }\r\n\r\n  setTimezone(timezone: string): void {\r\n    this._setOptions(() => {\r\n      this._chartStore.setTimezone(timezone)\r\n    })\r\n  }\r\n\r\n  getTimezone(): string { return this._chartStore.getTimezone() }\r\n\r\n  setThousandsSeparator(thousandsSeparator: Partial<ThousandsSeparator>): void {\r\n    this._setOptions(() => {\r\n      this._chartStore.setThousandsSeparator(thousandsSeparator)\r\n    })\r\n  }\r\n\r\n  getThousandsSeparator(): ThousandsSeparator { return this._chartStore.getThousandsSeparator() }\r\n\r\n  setDecimalFold(decimalFold: Partial<DecimalFold>): void {\r\n    this._setOptions(() => {\r\n      this._chartStore.setDecimalFold(decimalFold)\r\n    })\r\n  }\r\n\r\n  getDecimalFold(): DecimalFold { return this._chartStore.getDecimalFold() }\r\n\r\n  private _setOptions(fuc: () => void): void {\r\n    fuc()\r\n    this.layout({\r\n      measureHeight: true,\r\n      measureWidth: true,\r\n      update: true,\r\n      buildYAxisTick: true,\r\n      forceBuildYAxisTick: true\r\n    })\r\n  }\r\n\r\n  setOffsetRightDistance(distance: number): void {\r\n    this._chartStore.setOffsetRightDistance(distance, true)\r\n  }\r\n\r\n  getOffsetRightDistance(): number {\r\n    return this._chartStore.getOffsetRightDistance()\r\n  }\r\n\r\n  setMaxOffsetLeftDistance(distance: number): void {\r\n    if (distance < 0) {\r\n      logWarn('setMaxOffsetLeftDistance', 'distance', 'distance must greater than zero!!!')\r\n      return\r\n    }\r\n    this._chartStore.setMaxOffsetLeftDistance(distance)\r\n  }\r\n\r\n  setMaxOffsetRightDistance(distance: number): void {\r\n    if (distance < 0) {\r\n      logWarn('setMaxOffsetRightDistance', 'distance', 'distance must greater than zero!!!')\r\n      return\r\n    }\r\n    this._chartStore.setMaxOffsetRightDistance(distance)\r\n  }\r\n\r\n  setLeftMinVisibleBarCount(barCount: number): void {\r\n    if (barCount < 0) {\r\n      logWarn('setLeftMinVisibleBarCount', 'barCount', 'barCount must greater than zero!!!')\r\n      return\r\n    }\r\n    this._chartStore.setLeftMinVisibleBarCount(Math.ceil(barCount))\r\n  }\r\n\r\n  setRightMinVisibleBarCount(barCount: number): void {\r\n    if (barCount < 0) {\r\n      logWarn('setRightMinVisibleBarCount', 'barCount', 'barCount must greater than zero!!!')\r\n      return\r\n    }\r\n    this._chartStore.setRightMinVisibleBarCount(Math.ceil(barCount))\r\n  }\r\n\r\n  setBarSpace(space: number): void {\r\n    this._chartStore.setBarSpace(space)\r\n  }\r\n\r\n  getBarSpace(): BarSpace {\r\n    return this._chartStore.getBarSpace()\r\n  }\r\n\r\n  getVisibleRange(): VisibleRange {\r\n    return this._chartStore.getVisibleRange()\r\n  }\r\n\r\n  resetData(): void {\r\n    this._chartStore.resetData()\r\n  }\r\n\r\n  getDataList(): KLineData[] {\r\n    return this._chartStore.getDataList()\r\n  }\r\n\r\n  setDataLoader(dataLoader: DataLoader): void {\r\n    this._resetYAxisAutoCalcTickFlag()\r\n    this._chartStore.setDataLoader(dataLoader)\r\n  }\r\n\r\n  createIndicator(value: string | IndicatorCreate, isStack?: boolean, paneOptions?: PaneOptions): Nullable<string> {\r\n    const indicator = isString(value) ? { name: value } : value\r\n    if (getIndicatorClass(indicator.name) === null) {\r\n      logWarn('createIndicator', 'value', 'indicator not supported, you may need to use registerIndicator to add one!!!')\r\n      return null\r\n    }\r\n\r\n    const paneOpts = paneOptions ?? {}\r\n\r\n    if (!isString(paneOpts.id)) {\r\n      paneOpts.id = createId(PaneIdConstants.INDICATOR)\r\n    }\r\n    if (!isString(indicator.id)) {\r\n      indicator.id = createId(indicator.name)\r\n    }\r\n    const result = this._chartStore.addIndicator(indicator as PickRequired<IndicatorCreate, 'id' | 'name'>, paneOpts.id, isStack ?? false)\r\n    if (result) {\r\n      let shouldSort = false\r\n      if (!isValid(this.getDrawPaneById(paneOpts.id))) {\r\n        this._createPane(IndicatorPane, paneOpts.id, paneOpts)\r\n        paneOpts.height ??= PANE_DEFAULT_HEIGHT\r\n        shouldSort = true\r\n      }\r\n      this.setPaneOptions(paneOpts)\r\n      this.layout({\r\n        sort: shouldSort,\r\n        measureHeight: true,\r\n        measureWidth: true,\r\n        update: true,\r\n        buildYAxisTick: true,\r\n        forceBuildYAxisTick: true\r\n      })\r\n      return indicator.id\r\n    }\r\n    return null\r\n  }\r\n\r\n  overrideIndicator(override: IndicatorOverride): boolean {\r\n    return this._chartStore.overrideIndicator(override)\r\n  }\r\n\r\n  getIndicators(filter?: IndicatorFilter): Indicator[] {\r\n    return this._chartStore.getIndicatorsByFilter(filter ?? {})\r\n  }\r\n\r\n  removeIndicator(filter?: IndicatorFilter): boolean {\r\n    const removed = this._chartStore.removeIndicator(filter ?? {})\r\n    if (removed) {\r\n      let shouldMeasureHeight = false\r\n      const paneIds: string[] = []\r\n      this._drawPanes.forEach(pane => {\r\n        const paneId = pane.getId()\r\n        if (paneId !== PaneIdConstants.CANDLE && paneId !== PaneIdConstants.X_AXIS) {\r\n          paneIds.push(paneId)\r\n        }\r\n      })\r\n\r\n      paneIds.forEach(paneId => {\r\n        if (!this._chartStore.hasIndicators(paneId)) {\r\n          const index = this._drawPanes.findIndex(pane => pane.getId() === paneId)\r\n          const pane = this._drawPanes[index]\r\n          if (isValid(pane)) {\r\n            shouldMeasureHeight = true\r\n            this._recalculatePaneHeight(pane, 0, pane.getBounding().height)\r\n            this._drawPanes.splice(index, 1)\r\n            pane.destroy()\r\n          }\r\n        }\r\n      })\r\n      if (this._drawPanes.length === 2) {\r\n        this._candlePane.setVisible(true)\r\n        this._candlePane.setBounding({ height: this._chartBounding.height - this._xAxisPane.getBounding().height })\r\n      }\r\n      this.layout({\r\n        sort: shouldMeasureHeight,\r\n        measureHeight: shouldMeasureHeight,\r\n        measureWidth: true,\r\n        update: true,\r\n        buildYAxisTick: true,\r\n        forceBuildYAxisTick: true\r\n      })\r\n    }\r\n    return removed\r\n  }\r\n\r\n  createOverlay(value: string | OverlayCreate | Array<string | OverlayCreate>): Nullable<string> | Array<Nullable<string>> {\r\n    const overlays: OverlayCreate[] = []\r\n    const appointPaneFlags: boolean[] = []\r\n\r\n    const build: ((overlay: OverlayCreate) => void) = overlay => {\r\n      if (!isValid(overlay.paneId) || this.getDrawPaneById(overlay.paneId) === null) {\r\n        overlay.paneId = PaneIdConstants.CANDLE\r\n        appointPaneFlags.push(false)\r\n      } else {\r\n        appointPaneFlags.push(true)\r\n      }\r\n      overlays.push(overlay)\r\n    }\r\n\r\n    if (isString(value)) {\r\n      build({ name: value })\r\n    } else if (isArray<Array<string | OverlayCreate>>(value)) {\r\n      (value as Array<string | OverlayCreate>).forEach(v => {\r\n        let overlay: Nullable<OverlayCreate> = null\r\n        if (isString(v)) {\r\n          overlay = { name: v }\r\n        } else {\r\n          overlay = v\r\n        }\r\n        build(overlay)\r\n      })\r\n    } else {\r\n      build(value as OverlayCreate)\r\n    }\r\n    const ids = this._chartStore.addOverlays(overlays, appointPaneFlags)\r\n    if (isArray(value)) {\r\n      return ids\r\n    }\r\n    return ids[0]\r\n  }\r\n\r\n  getOverlays(filter?: OverlayFilter): Overlay[] {\r\n    return this._chartStore.getOverlaysByFilter(filter ?? {})\r\n  }\r\n\r\n  overrideOverlay(override: OverlayOverride): boolean {\r\n    return this._chartStore.overrideOverlay(override)\r\n  }\r\n\r\n  removeOverlay(filter?: OverlayFilter): boolean {\r\n    return this._chartStore.removeOverlay(filter ?? {})\r\n  }\r\n\r\n  setPaneOptions(options: PaneOptions): void {\r\n    let shouldMeasureHeight = false\r\n    let shouldLayout = false\r\n    const validId = isValid(options.id)\r\n    for (const currentPane of this._drawPanes) {\r\n      const currentPaneId = currentPane.getId()\r\n      if ((validId && options.id === currentPaneId) || !validId) {\r\n        if (currentPaneId !== PaneIdConstants.X_AXIS) {\r\n          if (isNumber(options.height) && options.height > 0) {\r\n            const minHeight = Math.max(options.minHeight ?? currentPane.getOptions().minHeight, 0)\r\n            const height = Math.max(minHeight, options.height)\r\n            shouldLayout = true\r\n            shouldMeasureHeight = true\r\n            currentPane.setOriginalBounding({ height })\r\n            this._recalculatePaneHeight(currentPane, height, -height)\r\n          }\r\n          if (\r\n            isValid(options.state) &&\r\n            currentPane.getOptions().state !== options.state\r\n          ) {\r\n            shouldMeasureHeight = true\r\n            shouldLayout = true\r\n            const state = options.state\r\n            switch (state) {\r\n              case 'maximize': {\r\n                const maximizePane = this._drawPanes.find(pane => {\r\n                  const paneId = pane.getId()\r\n                  return pane.getOptions().state === 'maximize' && paneId !== PaneIdConstants.X_AXIS\r\n                })\r\n                if (!isValid(maximizePane)) {\r\n                  if (currentPane.getOptions().state === 'normal') {\r\n                    currentPane.setOriginalBounding({ height: currentPane.getBounding().height })\r\n                  }\r\n                  currentPane.setOptions({ state })\r\n                  const totalHeight = this._chartBounding.height\r\n                  currentPane.setBounding({ height: totalHeight - this._xAxisPane.getBounding().height })\r\n                  this._drawPanes.forEach(pane => {\r\n                    if (pane.getId() !== PaneIdConstants.X_AXIS && pane.getId() !== currentPaneId) {\r\n                      pane.setBounding({ height: pane.getOriginalBounding().height })\r\n                      pane.setVisible(false)\r\n                      this._separatorPanes.get(pane)?.setVisible(false)\r\n                    }\r\n                  })\r\n                }\r\n                break\r\n              }\r\n              case 'minimize': {\r\n                const height = currentPane.getBounding().height\r\n                const currentState = currentPane.getOptions().state\r\n                let changeHeight = height - PANE_MIN_HEIGHT\r\n                if (currentState === 'maximize') {\r\n                  changeHeight = currentPane.getOriginalBounding().height - PANE_MIN_HEIGHT\r\n                }\r\n                if (\r\n                  this._recalculatePaneHeight(\r\n                    currentPane,\r\n                    PANE_MIN_HEIGHT,\r\n                    changeHeight\r\n                  )\r\n                ) {\r\n                  if (currentState === 'normal') {\r\n                    currentPane.setOriginalBounding({ height })\r\n                  }\r\n                  currentPane.setOptions({ state })\r\n                }\r\n                this._drawPanes.forEach(pane => {\r\n                  if (pane.getId() !== PaneIdConstants.X_AXIS) {\r\n                    pane.setVisible(true)\r\n                    this._separatorPanes.get(pane)?.setVisible(true)\r\n                  }\r\n                })\r\n                break\r\n              }\r\n              default: {\r\n                const height = currentPane.getOriginalBounding().height\r\n                if (\r\n                  this._recalculatePaneHeight(\r\n                    currentPane,\r\n                    height,\r\n                    currentPane.getBounding().height - height\r\n                  )\r\n                ) {\r\n                  currentPane.setOptions({ state })\r\n                }\r\n                this._drawPanes.forEach(pane => {\r\n                  if (pane.getId() !== PaneIdConstants.X_AXIS) {\r\n                    pane.setVisible(true)\r\n                    this._separatorPanes.get(pane)?.setVisible(true)\r\n                  }\r\n                })\r\n                break\r\n              }\r\n            }\r\n          }\r\n        }\r\n        if (isValid(options.axis)) {\r\n          shouldLayout = true\r\n        }\r\n        const ops = { ...options }\r\n        delete ops.state\r\n        currentPane.setOptions(ops)\r\n        if (currentPaneId === options.id) {\r\n          break\r\n        }\r\n      }\r\n    }\r\n    if (shouldLayout) {\r\n      this.layout({\r\n        measureHeight: shouldMeasureHeight,\r\n        measureWidth: true,\r\n        update: true,\r\n        buildYAxisTick: true,\r\n        forceBuildYAxisTick: true\r\n      })\r\n    }\r\n  }\r\n\r\n  getPaneOptions(id?: string): Nullable<PaneOptions> | PaneOptions[] {\r\n    if (isValid(id)) {\r\n      const pane = this.getDrawPaneById(id)\r\n      return pane?.getOptions() ?? null\r\n    }\r\n    return this._drawPanes.map(pane => pane.getOptions())\r\n  }\r\n\r\n  setZoomEnabled(enabled: boolean): void {\r\n    this._chartStore.setZoomEnabled(enabled)\r\n  }\r\n\r\n  isZoomEnabled(): boolean {\r\n    return this._chartStore.isZoomEnabled()\r\n  }\r\n\r\n  setScrollEnabled(enabled: boolean): void {\r\n    this._chartStore.setScrollEnabled(enabled)\r\n  }\r\n\r\n  isScrollEnabled(): boolean {\r\n    return this._chartStore.isScrollEnabled()\r\n  }\r\n\r\n  scrollByDistance(distance: number, animationDuration?: number): void {\r\n    const duration = isNumber(animationDuration) && animationDuration > 0 ? animationDuration : 0\r\n    this._chartStore.startScroll()\r\n    if (duration > 0) {\r\n      const animation = new Animation({ duration })\r\n      animation.doFrame(frameTime => {\r\n        const progressDistance = distance * (frameTime / duration)\r\n        this._chartStore.scroll(progressDistance)\r\n      })\r\n      animation.start()\r\n    } else {\r\n      this._chartStore.scroll(distance)\r\n    }\r\n  }\r\n\r\n  scrollToRealTime(animationDuration?: number): void {\r\n    const { bar: barSpace } = this._chartStore.getBarSpace()\r\n    const difBarCount = this._chartStore.getLastBarRightSideDiffBarCount() - this._chartStore.getInitialOffsetRightDistance() / barSpace\r\n    const distance = difBarCount * barSpace\r\n    this.scrollByDistance(distance, animationDuration)\r\n  }\r\n\r\n  scrollToDataIndex(dataIndex: number, animationDuration?: number): void {\r\n    const distance = (\r\n      this._chartStore.getLastBarRightSideDiffBarCount() + (this.getDataList().length - 1 - dataIndex)\r\n    ) * this._chartStore.getBarSpace().bar\r\n    this.scrollByDistance(distance, animationDuration)\r\n  }\r\n\r\n  scrollToTimestamp(timestamp: number, animationDuration?: number): void {\r\n    const dataIndex = binarySearchNearest(this.getDataList(), 'timestamp', timestamp)\r\n    this.scrollToDataIndex(dataIndex, animationDuration)\r\n  }\r\n\r\n  zoomAtCoordinate(scale: number, coordinate?: Coordinate, animationDuration?: number): void {\r\n    const duration = isNumber(animationDuration) && animationDuration > 0 ? animationDuration : 0\r\n    const { bar: barSpace } = this._chartStore.getBarSpace()\r\n    const scaleBarSpace = barSpace * scale\r\n    const difSpace = scaleBarSpace - barSpace\r\n    if (duration > 0) {\r\n      let prevProgressBarSpace = 0\r\n      const animation = new Animation({ duration })\r\n      animation.doFrame(frameTime => {\r\n        const progressBarSpace = difSpace * (frameTime / duration)\r\n        const scale = (progressBarSpace - prevProgressBarSpace) / this._chartStore.getBarSpace().bar * SCALE_MULTIPLIER\r\n        this._chartStore.zoom(scale, coordinate)\r\n        prevProgressBarSpace = progressBarSpace\r\n      })\r\n      animation.start()\r\n    } else {\r\n      this._chartStore.zoom(difSpace / barSpace * SCALE_MULTIPLIER, coordinate)\r\n    }\r\n  }\r\n\r\n  zoomAtDataIndex(scale: number, dataIndex: number, animationDuration?: number): void {\r\n    const x = this._chartStore.dataIndexToCoordinate(dataIndex)\r\n    this.zoomAtCoordinate(scale, { x, y: 0 }, animationDuration)\r\n  }\r\n\r\n  zoomAtTimestamp(scale: number, timestamp: number, animationDuration?: number): void {\r\n    const dataIndex = binarySearchNearest(this.getDataList(), 'timestamp', timestamp)\r\n    this.zoomAtDataIndex(scale, dataIndex, animationDuration)\r\n  }\r\n\r\n  convertToPixel(points: Partial<Point> | Array<Partial<Point>>, filter?: ConvertFilter): Partial<Coordinate> | Array<Partial<Coordinate>> {\r\n    const { paneId = PaneIdConstants.CANDLE, absolute = false } = filter ?? {}\r\n    let coordinates: Array<Partial<Coordinate>> = []\r\n    if (paneId !== PaneIdConstants.X_AXIS) {\r\n      const pane = this.getDrawPaneById(paneId)\r\n      if (pane !== null) {\r\n        const bounding = pane.getBounding()\r\n        // eslint-disable-next-line @typescript-eslint/ban-ts-comment -- ignore\r\n        // @ts-expect-error\r\n        const ps: Array<Partial<Point>> = [].concat(points)\r\n        const xAxis = this._xAxisPane.getAxisComponent()\r\n        const yAxis = pane.getAxisComponent()\r\n        coordinates = ps.map(point => {\r\n          const coordinate: Partial<Coordinate> = {}\r\n          let dataIndex = point.dataIndex\r\n          if (isNumber(point.timestamp)) {\r\n            dataIndex = this._chartStore.timestampToDataIndex(point.timestamp)\r\n          }\r\n          if (isNumber(dataIndex)) {\r\n            coordinate.x = xAxis.convertToPixel(dataIndex)\r\n          }\r\n          if (isNumber(point.value)) {\r\n            const y = yAxis.convertToPixel(point.value)\r\n            coordinate.y = absolute ? bounding.top + y : y\r\n          }\r\n          return coordinate\r\n        })\r\n      }\r\n    }\r\n    return isArray(points) ? coordinates : (coordinates[0] ?? {})\r\n  }\r\n\r\n  convertFromPixel(coordinates: Array<Partial<Coordinate>>, filter?: ConvertFilter): Partial<Point> | Array<Partial<Point>> {\r\n    const { paneId = PaneIdConstants.CANDLE, absolute = false } = filter ?? {}\r\n    let points: Array<Partial<Point>> = []\r\n    if (paneId !== PaneIdConstants.X_AXIS) {\r\n      const pane = this.getDrawPaneById(paneId)\r\n      if (pane !== null) {\r\n        const bounding = pane.getBounding()\r\n        // eslint-disable-next-line @typescript-eslint/ban-ts-comment -- ignore\r\n        // @ts-expect-error\r\n        const cs: Array<Partial<Coordinate>> = [].concat(coordinates)\r\n        const xAxis = this._xAxisPane.getAxisComponent()\r\n        const yAxis = pane.getAxisComponent()\r\n        points = cs.map(coordinate => {\r\n          const point: Partial<Point> = {}\r\n          if (isNumber(coordinate.x)) {\r\n            const dataIndex = xAxis.convertFromPixel(coordinate.x)\r\n            point.dataIndex = dataIndex\r\n            point.timestamp = this._chartStore.dataIndexToTimestamp(dataIndex) ?? undefined\r\n          }\r\n          if (isNumber(coordinate.y)) {\r\n            const y = absolute ? coordinate.y - bounding.top : coordinate.y\r\n            point.value = yAxis.convertFromPixel(y)\r\n          }\r\n          return point\r\n        })\r\n      }\r\n    }\r\n    return isArray(coordinates) ? points : (points[0] ?? {})\r\n  }\r\n\r\n  executeAction(type: ActionType, data: Crosshair): void {\r\n    switch (type) {\r\n      case 'onCrosshairChange': {\r\n        const crosshair: Crosshair = { ...data }\r\n        crosshair.paneId ??= PaneIdConstants.CANDLE\r\n        this._chartStore.setCrosshair(crosshair, { notExecuteAction: true })\r\n        break\r\n      }\r\n      default: { break }\r\n    }\r\n  }\r\n\r\n  subscribeAction(type: ActionType, callback: ActionCallback): void {\r\n    this._chartStore.subscribeAction(type, callback)\r\n  }\r\n\r\n  unsubscribeAction(type: ActionType, callback?: ActionCallback): void {\r\n    this._chartStore.unsubscribeAction(type, callback)\r\n  }\r\n\r\n  setCrosshair(crosshair?: Crosshair): void {\r\n    this._chartStore.setCrosshair(crosshair)\r\n  }\r\n\r\n  getConvertPictureUrl(includeOverlay?: boolean, type?: 'png' | 'jpeg' | 'bmp', backgroundColor?: string): string {\r\n    const { width, height } = this._chartBounding\r\n    const canvas = createDom('canvas', {\r\n      width: `${width}px`,\r\n      height: `${height}px`,\r\n      boxSizing: 'border-box'\r\n    })\r\n    const ctx = canvas.getContext('2d')!\r\n    const pixelRatio = getPixelRatio(canvas)\r\n    canvas.width = width * pixelRatio\r\n    canvas.height = height * pixelRatio\r\n    ctx.scale(pixelRatio, pixelRatio)\r\n\r\n    ctx.fillStyle = backgroundColor ?? '#FFFFFF'\r\n    ctx.fillRect(0, 0, width, height)\r\n    const overlayFlag = includeOverlay ?? false\r\n    this._drawPanes.forEach(pane => {\r\n      const separatorPane = this._separatorPanes.get(pane)\r\n      if (isValid(separatorPane)) {\r\n        const separatorBounding = separatorPane.getBounding()\r\n        ctx.drawImage(\r\n          separatorPane.getImage(overlayFlag),\r\n          separatorBounding.left, separatorBounding.top, separatorBounding.width, separatorBounding.height\r\n        )\r\n      }\r\n\r\n      const bounding = pane.getBounding()\r\n      ctx.drawImage(\r\n        pane.getImage(overlayFlag),\r\n        0, bounding.top, width, bounding.height\r\n      )\r\n    })\r\n    return canvas.toDataURL(`image/${type ?? 'jpeg'}`)\r\n  }\r\n\r\n  resize(): void {\r\n    this._cacheChartBounding()\r\n    this.layout({\r\n      measureHeight: true,\r\n      measureWidth: true,\r\n      update: true,\r\n      buildYAxisTick: true,\r\n      forceBuildYAxisTick: true\r\n\r\n    })\r\n  }\r\n\r\n  destroy(): void {\r\n    this._chartEvent.destroy()\r\n    this._drawPanes.forEach(pane => {\r\n      pane.destroy()\r\n    })\r\n    this._drawPanes = []\r\n    this._separatorPanes.clear()\r\n    this._chartStore.destroy()\r\n    this._container.removeChild(this._chartContainer)\r\n  }\r\n}\r\n","/**\r\n *       ___           ___                   ___           ___           ___           ___           ___           ___           ___\r\n *      /\\__\\         /\\__\\      ___        /\\__\\         /\\  \\         /\\  \\         /\\__\\         /\\  \\         /\\  \\         /\\  \\\r\n *     /:/  /        /:/  /     /\\  \\      /::|  |       /::\\  \\       /::\\  \\       /:/  /        /::\\  \\       /::\\  \\        \\:\\  \\\r\n *    /:/__/        /:/  /      \\:\\  \\    /:|:|  |      /:/\\:\\  \\     /:/\\:\\  \\     /:/__/        /:/\\:\\  \\     /:/\\:\\  \\        \\:\\  \\\r\n *   /::\\__\\____   /:/  /       /::\\__\\  /:/|:|  |__   /::\\~\\:\\  \\   /:/  \\:\\  \\   /::\\  \\ ___   /::\\~\\:\\  \\   /::\\~\\:\\  \\       /::\\  \\\r\n *  /:/\\:::::\\__\\ /:/__/     __/:/\\/__/ /:/ |:| /\\__\\ /:/\\:\\ \\:\\__\\ /:/__/ \\:\\__\\ /:/\\:\\  /\\__\\ /:/\\:\\ \\:\\__\\ /:/\\:\\ \\:\\__\\     /:/\\:\\__\\\r\n *  \\/_|:|~~|~    \\:\\  \\    /\\/:/  /    \\/__|:|/:/  / \\:\\~\\:\\ \\/__/ \\:\\  \\  \\/__/ \\/__\\:\\/:/  / \\/__\\:\\/:/  / \\/_|::\\/:/  /    /:/  \\/__/\r\n *     |:|  |      \\:\\  \\   \\::/__/         |:/:/  /   \\:\\ \\:\\__\\    \\:\\  \\            \\::/  /       \\::/  /     |:|::/  /    /:/  /\r\n *     |:|  |       \\:\\  \\   \\:\\__\\         |::/  /     \\:\\ \\/__/     \\:\\  \\           /:/  /        /:/  /      |:|\\/__/     \\/__/\r\n *     |:|  |        \\:\\__\\   \\/__/         /:/  /       \\:\\__\\        \\:\\__\\         /:/  /        /:/  /       |:|  |\r\n *      \\|__|         \\/__/                 \\/__/         \\/__/         \\/__/         \\/__/         \\/__/         \\|__|\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport type {\r\n  LineType, PolygonType, TooltipShowRule, TooltipShowType, FeatureType, TooltipFeaturePosition,\r\n  CandleType, CandleTooltipRectPosition\r\n} from './common/Styles'\r\nimport type Nullable from './common/Nullable'\r\n\r\nimport { logError, logTag, logWarn } from './common/utils/logger'\r\n\r\nimport {\r\n  clone, merge, isString, isNumber, isValid, isObject, isArray, isFunction, isBoolean\r\n} from './common/utils/typeChecks'\r\nimport {\r\n  formatValue,\r\n  formatPrecision,\r\n  formatBigNumber,\r\n  formatThousands,\r\n  formatFoldDecimal,\r\n  formatTimestampByTemplate\r\n} from './common/utils/format'\r\nimport { calcTextWidth } from './common/utils/canvas'\r\nimport type { ActionType } from './common/Action'\r\nimport type { IndicatorSeries } from './component/Indicator'\r\nimport type { OverlayMode } from './component/Overlay'\r\n\r\nimport type { FormatDateType, Options } from './Options'\r\nimport ChartImp, { type Chart, type DomPosition } from './Chart'\r\n\r\nimport { checkCoordinateOnArc } from './extension/figure/arc'\r\nimport { checkCoordinateOnCircle } from './extension/figure/circle'\r\nimport {\r\n  checkCoordinateOnLine,\r\n  getLinearYFromSlopeIntercept,\r\n  getLinearSlopeIntercept,\r\n  getLinearYFromCoordinates\r\n} from './extension/figure/line'\r\nimport { checkCoordinateOnPolygon } from './extension/figure/polygon'\r\nimport { checkCoordinateOnRect } from './extension/figure/rect'\r\nimport { checkCoordinateOnText } from './extension/figure/text'\r\n\r\nimport { registerFigure, getSupportedFigures, getFigureClass } from './extension/figure/index'\r\nimport { registerIndicator, getSupportedIndicators } from './extension/indicator/index'\r\nimport { registerLocale, getSupportedLocales } from './extension/i18n/index'\r\nimport { registerOverlay, getOverlayClass, getSupportedOverlays } from './extension/overlay/index'\r\nimport { registerStyles } from './extension/styles/index'\r\nimport { registerXAxis } from './extension/x-axis'\r\nimport { registerYAxis } from './extension/y-axis'\r\n\r\nconst charts = new Map<string, ChartImp>()\r\nlet chartBaseId = 1\r\n\r\n/**\r\n * Chart version\r\n * @return {string}\r\n */\r\nfunction version (): string {\r\n  return '__VERSION__'\r\n}\r\n\r\n/**\r\n * Init chart instance\r\n * @param ds\r\n * @param options\r\n * @returns {Chart}\r\n */\r\nfunction init (ds: HTMLElement | string, options?: Options): Nullable<Chart> {\r\n  logTag()\r\n  let dom: Nullable<HTMLElement> = null\r\n  if (isString(ds)) {\r\n    dom = document.getElementById(ds)\r\n  } else {\r\n    dom = ds\r\n  }\r\n  if (dom === null) {\r\n    logError('', '', 'The chart cannot be initialized correctly. Please check the parameters. The chart container cannot be null and child elements need to be added!!!')\r\n    return null\r\n  }\r\n  let chart = charts.get(dom.id)\r\n  if (isValid(chart)) {\r\n    logWarn('', '', 'The chart has been initialized on the domÔºÅÔºÅÔºÅ')\r\n    return chart\r\n  }\r\n  const id = `k_line_chart_${chartBaseId++}`\r\n  chart = new ChartImp(dom, options)\r\n  chart.id = id\r\n  dom.setAttribute('k-line-chart-id', id)\r\n  charts.set(id, chart)\r\n  return chart\r\n}\r\n\r\n/**\r\n * Destroy chart instance\r\n * @param dcs\r\n */\r\nfunction dispose (dcs: HTMLElement | Chart | string): void {\r\n  let id: Nullable<string> = null\r\n  if (dcs instanceof ChartImp) {\r\n    id = dcs.id\r\n  } else {\r\n    let dom: Nullable<HTMLElement> = null\r\n    if (isString(dcs)) {\r\n      dom = document.getElementById(dcs)\r\n    } else {\r\n      dom = dcs as HTMLElement\r\n    }\r\n    id = dom?.getAttribute('k-line-chart-id') ?? null\r\n  }\r\n  if (id !== null) {\r\n    charts.get(id)?.destroy()\r\n    charts.delete(id)\r\n  }\r\n}\r\n\r\nconst utils = {\r\n  clone,\r\n  merge,\r\n  isString,\r\n  isNumber,\r\n  isValid,\r\n  isObject,\r\n  isArray,\r\n  isFunction,\r\n  isBoolean,\r\n  formatValue,\r\n  formatPrecision,\r\n  formatBigNumber,\r\n  formatDate: formatTimestampByTemplate,\r\n  formatThousands,\r\n  formatFoldDecimal,\r\n  calcTextWidth,\r\n  getLinearSlopeIntercept,\r\n  getLinearYFromSlopeIntercept,\r\n  getLinearYFromCoordinates,\r\n  checkCoordinateOnArc,\r\n  checkCoordinateOnCircle,\r\n  checkCoordinateOnLine,\r\n  checkCoordinateOnPolygon,\r\n  checkCoordinateOnRect,\r\n  checkCoordinateOnText\r\n}\r\n\r\nexport {\r\n  version, init, dispose,\r\n  registerFigure, getSupportedFigures, getFigureClass,\r\n  registerIndicator, getSupportedIndicators,\r\n  registerOverlay, getSupportedOverlays, getOverlayClass,\r\n  registerLocale, getSupportedLocales,\r\n  registerStyles,\r\n  registerXAxis, registerYAxis,\r\n  utils,\r\n  type LineType, type PolygonType, type TooltipShowRule, type TooltipShowType, type FeatureType, type TooltipFeaturePosition, type CandleTooltipRectPosition,\r\n  type CandleType, type FormatDateType,\r\n  type DomPosition, type ActionType, type IndicatorSeries, type OverlayMode\r\n}\r\n"],"names":["extensions","getExtensionStyles","CandleLastPriceLineView","normal","ChartStore"],"mappings":"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","x_google_ignoreList":[4]}